"use strict";(self.webpackChunkbibliaDeTodos=self.webpackChunkbibliaDeTodos||[]).push([[179],{2011:(ct,De,O)=>{O.d(De,{Dh:()=>de,GT:()=>ce,cc:()=>Me,hO:()=>Le,on:()=>B,pX:()=>se,xv:()=>he});var f=O(4650),X=O(127),k=O(5813);ct=O.hmd(ct);const ie=["ngOnDestroy"],se=(fe,Je,ot,xe={})=>new Proxy(fe,{get:(_e,Ie)=>ot.runOutsideAngular(()=>{var Be;if(fe[Ie])return!(null===(Be=xe?.spy)||void 0===Be)&&Be.get&&xe.spy.get(Ie,fe[Ie]),fe[Ie];if(ie.indexOf(Ie)>-1)return()=>{};const je=Je.toPromise().then(U=>{const ge=U&&U[Ie];return"function"==typeof ge?ge.bind(U):ge&&ge.then?ge.then(q=>ot.run(()=>q)):ot.run(()=>ge)});return new Proxy(()=>{},{get:(U,ge)=>je[ge],apply:(U,ge,q)=>je.then(J=>{var re;const ne=J&&J(...q);return!(null===(re=xe?.spy)||void 0===re)&&re.apply&&xe.spy.apply(Ie,q,ne),ne})})})}),ce=(fe,Je)=>{Je.forEach(ot=>{Object.getOwnPropertyNames(ot.prototype||ot).forEach(xe=>{Object.defineProperty(fe.prototype,xe,Object.getOwnPropertyDescriptor(ot.prototype||ot,xe))})})};class ue{constructor(Je){return Je}}const de=new f.OlP("angularfire2.app.options"),he=new f.OlP("angularfire2.app.name");function B(fe,Je,ot){const _e="object"==typeof ot&&ot||{};_e.name=_e.name||"string"==typeof ot&&ot||"[DEFAULT]";const Be=X.Z.apps.filter(je=>je&&je.name===_e.name)[0]||Je.runOutsideAngular(()=>X.Z.initializeApp(fe,_e));try{JSON.stringify(fe)!==JSON.stringify(Be.options)&&$("error",`${Be.name} Firebase App already initialized with different options${ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Be)}const $=(fe,...Je)=>{(0,f.X6Q)()&&typeof console<"u"&&console[fe](...Je)},K={provide:ue,useFactory:B,deps:[de,f.R0b,[new f.FiY,he]]};let Le=(()=>{class fe{constructor(ot){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",f.q4F.full,ot.toString())}static initializeApp(ot,xe){return{ngModule:fe,providers:[{provide:de,useValue:ot},{provide:he,useValue:xe}]}}}return fe.\u0275fac=function(ot){return new(ot||fe)(f.LFG(f.Lbi))},fe.\u0275mod=f.oAB({type:fe}),fe.\u0275inj=f.cJS({providers:[K]}),fe})();function Me(fe,Je,ot,xe,_e){const[,Ie,Be]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===fe)||[];if(Ie)return function we(fe,Je){try{return fe.toString()===Je.toString()}catch{return fe===Je}}(_e,Be)||(me("error",`${Je} was already initialized on the ${ot} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:_e,was:Be})),Ie;{const je=xe();return globalThis.\u0275AngularfireInstanceCache.push([fe,je,_e]),je}}const rt=!!ct.hot,me=(fe,...Je)=>{(0,f.X6Q)()&&typeof console<"u"&&console[fe](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ct,De,O)=>{O.d(De,{q4:()=>We,iC:()=>Ui,fc:()=>Un,HU:()=>_r,vb:()=>Fi,JM:()=>Aa});var f=O(4650),X=O(5867),k=O(5861),ie=O(9681),se=O(2090),ce=O(4859),ue=O(1877),de=O(8766);const he="@firebase/installations",B="0.5.16",K=`w:${B}`,Le="FIS_v2",Je=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ot(C){return C instanceof se.ZR&&C.code.includes("request-failed")}function xe({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function _e(C){return{token:C.token,requestStatus:2,expiresIn:J(C.expiresIn),creationTime:Date.now()}}function Ie(C,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,k.Z)(function*(C,D){const F=(yield D.json()).error;return Je.create("request-failed",{requestName:C,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function U(C,{refreshToken:D}){const x=je(C);return x.append("Authorization",function re(C){return`${Le} ${C}`}(D)),x}function ge(C){return q.apply(this,arguments)}function q(){return(q=(0,k.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function J(C){return Number(C.replace("s","000"))}function ne(C,D){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:x}){const F=xe(C),Y=je(C),te=D.getImmediate({optional:!0});if(te){const It=yield te.getHeartbeatsHeader();It&&Y.append("x-firebase-client",It)}const Ne={method:"POST",headers:Y,body:JSON.stringify({fid:x,authVersion:Le,appId:C.appId,sdkVersion:K})},it=yield ge(()=>fetch(F,Ne));if(it.ok){const It=yield it.json();return{fid:It.fid||x,registrationStatus:2,refreshToken:It.refreshToken,authToken:_e(It.authToken)}}throw yield Ie("Create Installation",it)})).apply(this,arguments)}function ke(C){return new Promise(D=>{setTimeout(D,C)})}const Yt=/^[cdef][\w-]{21}$/;function qe(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const x=function sn(C){return function mt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Yt.test(x)?x:""}catch{return""}}function gn(C){return`${C.appName}!${C.appId}`}const Wt=new Map;function Qt(C,D){const x=gn(C);ln(x,D),function Zi(C,D){const x=function Cr(){return!gi&&"BroadcastChannel"in self&&(gi=new BroadcastChannel("[Firebase] FID Change"),gi.onmessage=C=>{ln(C.data.key,C.data.fid)}),gi}();x&&x.postMessage({key:C,fid:D}),function Lr(){0===Wt.size&&gi&&(gi.close(),gi=null)}()}(x,D)}function ln(C,D){const x=Wt.get(C);if(x)for(const F of x)F(D)}let gi=null;const Zr="firebase-installations-store";let Yr=null;function ia(){return Yr||(Yr=(0,de.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Zr)}})),Yr}function Ze(C,D){return mr.apply(this,arguments)}function mr(){return(mr=(0,k.Z)(function*(C,D){const x=gn(C),Y=(yield ia()).transaction(Zr,"readwrite"),te=Y.objectStore(Zr),Ee=yield te.get(x);return yield te.put(D,x),yield Y.done,(!Ee||Ee.fid!==D.fid)&&Qt(C,D.fid),D})).apply(this,arguments)}function hs(C){return $n.apply(this,arguments)}function $n(){return($n=(0,k.Z)(function*(C){const D=gn(C),F=(yield ia()).transaction(Zr,"readwrite");yield F.objectStore(Zr).delete(D),yield F.done})).apply(this,arguments)}function Qr(C,D){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,k.Z)(function*(C,D){const x=gn(C),Y=(yield ia()).transaction(Zr,"readwrite"),te=Y.objectStore(Zr),Ee=yield te.get(x),Ne=D(Ee);return void 0===Ne?yield te.delete(x):yield te.put(Ne,x),yield Y.done,Ne&&(!Ee||Ee.fid!==Ne.fid)&&Qt(C,Ne.fid),Ne})).apply(this,arguments)}function An(C){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,k.Z)(function*(C){let D;const x=yield Qr(C.appConfig,F=>{const Y=hn(F),te=_t(C,Y);return D=te.registrationPromise,te.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function hn(C){return St(C||{fid:qe(),registrationStatus:0})}function _t(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Je.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function lt(C,D){return Xt.apply(this,arguments)}(C,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:or(C)}:{installationEntry:D}}function Xt(){return(Xt=(0,k.Z)(function*(C,D){try{const x=yield ne(C,D);return Ze(C.appConfig,x)}catch(x){throw ot(x)&&409===x.customData.serverCode?yield hs(C.appConfig):yield Ze(C.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function or(C){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,k.Z)(function*(C){let D=yield Vr(C.appConfig);for(;1===D.registrationStatus;)yield ke(100),D=yield Vr(C.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield An(C);return F||x}return D})).apply(this,arguments)}function Vr(C){return Qr(C,D=>{if(!D)throw Je.create("installation-not-found");return St(D)})}function St(C){return function fs(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function en(C,D){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:D},x){const F=tn(C,x),Y=U(C,x),te=D.getImmediate({optional:!0});if(te){const It=yield te.getHeartbeatsHeader();It&&Y.append("x-firebase-client",It)}const Ne={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:K,appId:C.appId}})},it=yield ge(()=>fetch(F,Ne));if(it.ok)return _e(yield it.json());throw yield Ie("Generate Auth Token",it)})).apply(this,arguments)}function tn(C,{fid:D}){return`${xe(C)}/${D}/authTokens:generate`}function Gn(C){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,k.Z)(function*(C,D=!1){let x;const F=yield Qr(C.appConfig,te=>{if(!Pt(te))throw Je.create("not-registered");const Ee=te.authToken;if(!D&&j(Ee))return te;if(1===Ee.requestStatus)return x=et(C,D),te;{if(!navigator.onLine)throw Je.create("app-offline");const Ne=W(te);return x=bt(C,Ne),Ne}});return x?yield x:F.authToken})).apply(this,arguments)}function et(C,D){return Te.apply(this,arguments)}function Te(){return(Te=(0,k.Z)(function*(C,D){let x=yield Xe(C.appConfig);for(;1===x.authToken.requestStatus;)yield ke(100),x=yield Xe(C.appConfig);const F=x.authToken;return 0===F.requestStatus?Gn(C,D):F})).apply(this,arguments)}function Xe(C){return Qr(C,D=>{if(!Pt(D))throw Je.create("not-registered");return function ve(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function bt(C,D){return Et.apply(this,arguments)}function Et(){return(Et=(0,k.Z)(function*(C,D){try{const x=yield en(C,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield Ze(C.appConfig,F),x}catch(x){if(!ot(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ze(C.appConfig,F)}else yield hs(C.appConfig);throw x}})).apply(this,arguments)}function Pt(C){return void 0!==C&&2===C.registrationStatus}function j(C){return 2===C.requestStatus&&!function V(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function W(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function Ge(){return(Ge=(0,k.Z)(function*(C){const D=C,{installationEntry:x,registrationPromise:F}=yield An(D);return F?F.catch(console.error):Gn(D).catch(console.error),x.fid})).apply(this,arguments)}function Kt(){return(Kt=(0,k.Z)(function*(C,D=!1){const x=C;return yield dn(x),(yield Gn(x,D)).token})).apply(this,arguments)}function dn(C){return zt.apply(this,arguments)}function zt(){return(zt=(0,k.Z)(function*(C){const{registrationPromise:D}=yield An(C);D&&(yield D)})).apply(this,arguments)}function ps(C){return Je.create("missing-app-config-values",{valueName:C})}const bo="installations",vn=C=>{const D=C.getProvider("app").getImmediate(),x=function mn(C){if(!C||!C.options)throw ps("App Configuration");if(!C.name)throw ps("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!C.options[x])throw ps(x);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,ie._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},$s=C=>{const D=C.getProvider("app").getImmediate(),x=(0,ie._getProvider)(D,bo).getImmediate();return{getId:()=>function Q(C){return Ge.apply(this,arguments)}(x),getToken:Y=>function ht(C){return Kt.apply(this,arguments)}(x,Y)}};(function Qa(){(0,ie._registerComponent)(new ce.wA(bo,vn,"PUBLIC")),(0,ie._registerComponent)(new ce.wA("installations-internal",$s,"PRIVATE"))})(),(0,ie.registerVersion)(he,B),(0,ie.registerVersion)(he,B,"esm2017");const Ni="@firebase/remote-config",Vn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Tl{constructor(D,x,F,Y){this.client=D,this.storage=x,this.storageCache=F,this.logger=Y}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Y=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var x=this;return(0,k.Z)(function*(){const[F,Y]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Y&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Y;D.eTag=Y&&Y.eTag;const te=yield x.client.fetch(D),Ee=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&Ee.push(x.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(Ee),te})()}}function fc(C=navigator){return C.languages&&C.languages[0]||C.language}class pc{constructor(D,x,F,Y,te,Ee){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=Y,this.apiKey=te,this.appId=Ee}fetch(D){var x=this;return(0,k.Z)(function*(){var F,Y,te;const[Ee,Ne]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),It=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,At={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},pt={sdk_version:x.sdkVersion,app_instance_id:Ee,app_instance_id_token:Ne,app_id:x.appId,language_code:fc()},wn={method:"POST",headers:At,body:JSON.stringify(pt)},lr=fetch(It,wn),so=new Promise((Bo,oo)=>{D.signal.addEventListener(()=>{const Ii=new Error("The operation was aborted.");Ii.name="AbortError",oo(Ii)})});let Ms;try{yield Promise.race([lr,so]),Ms=yield lr}catch(Bo){let oo="fetch-client-network";throw"AbortError"===(null===(F=Bo)||void 0===F?void 0:F.name)&&(oo="fetch-timeout"),Vn.create(oo,{originalErrorMessage:null===(Y=Bo)||void 0===Y?void 0:Y.message})}let xt=Ms.status;const Bi=Ms.headers.get("ETag")||void 0;let Rs,ti;if(200===Ms.status){let Bo;try{Bo=yield Ms.json()}catch(oo){throw Vn.create("fetch-client-parse",{originalErrorMessage:null===(te=oo)||void 0===te?void 0:te.message})}Rs=Bo.entries,ti=Bo.state}if("INSTANCE_STATE_UNSPECIFIED"===ti?xt=500:"NO_CHANGE"===ti?xt=304:("NO_TEMPLATE"===ti||"EMPTY_CONFIG"===ti)&&(Rs={}),304!==xt&&200!==xt)throw Vn.create("fetch-status",{httpStatus:xt});return{status:xt,eTag:Bi,config:Rs}})()}}class up{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,k.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var Y=this;return(0,k.Z)(function*(){yield function Wn(C,D){return new Promise((x,F)=>{const Y=Math.max(D-Date.now(),0),te=setTimeout(x,Y);C.addEventListener(()=>{clearTimeout(te),F(Vn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const te=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),te}catch(te){if(!function Sl(C){if(!(C instanceof se.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(te))throw te;const Ee={throttleEndTimeMillis:Date.now()+(0,se.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(Ee),Y.attemptFetch(D,Ee)}})()}}class Xa{constructor(D,x,F,Y,te){this.app=D,this._client=x,this._storageCache=F,this._storage=Y,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function gc(C,D){var x;const F=C.target.error||void 0;return Vn.create(D,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const vs="app_namespace_store";class hp{constructor(D,x,F,Y=function dp(){return new Promise((C,D)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Y=>{D(gc(Y,"storage-open"))},F.onsuccess=Y=>{C(Y.target.result)},F.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(vs,{keyPath:"compositeKey"})}}catch(F){D(Vn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,k.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Y,te)=>{var Ee;const it=F.transaction([vs],"readonly").objectStore(vs),It=x.createCompositeKey(D);try{const At=it.get(It);At.onerror=pt=>{te(gc(pt,"storage-get"))},At.onsuccess=pt=>{const wn=pt.target.result;Y(wn?wn.value:void 0)}}catch(At){te(Vn.create("storage-get",{originalErrorMessage:null===(Ee=At)||void 0===Ee?void 0:Ee.message}))}})})()}set(D,x){var F=this;return(0,k.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((te,Ee)=>{var Ne;const It=Y.transaction([vs],"readwrite").objectStore(vs),At=F.createCompositeKey(D);try{const pt=It.put({compositeKey:At,value:x});pt.onerror=wn=>{Ee(gc(wn,"storage-set"))},pt.onsuccess=()=>{te()}}catch(pt){Ee(Vn.create("storage-set",{originalErrorMessage:null===(Ne=pt)||void 0===Ne?void 0:Ne.message}))}})})()}delete(D){var x=this;return(0,k.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Y,te)=>{var Ee;const it=F.transaction([vs],"readwrite").objectStore(vs),It=x.createCompositeKey(D);try{const At=it.delete(It);At.onerror=pt=>{te(gc(pt,"storage-delete"))},At.onsuccess=()=>{Y()}}catch(At){te(Vn.create("storage-delete",{originalErrorMessage:null===(Ee=At)||void 0===Ee?void 0:Ee.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class xl{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),te=yield x;te&&(D.lastFetchStatus=te);const Ee=yield F;Ee&&(D.lastSuccessfulFetchTimestampMillis=Ee);const Ne=yield Y;Ne&&(D.activeConfig=Ne)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function eu(){return sh.apply(this,arguments)}function sh(){return(sh=(0,k.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function ws(){(0,ie._registerComponent)(new ce.wA("remote-config",function C(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Vn.create("registration-window");if(!(0,se.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:te,apiKey:Ee,appId:Ne}=F.options;if(!te)throw Vn.create("registration-project-id");if(!Ee)throw Vn.create("registration-api-key");if(!Ne)throw Vn.create("registration-app-id");const it=new hp(Ne,F.name,x=x||"firebase"),It=new xl(it),At=new ue.Yd(Ni);At.logLevel=ue.in.ERROR;const pt=new pc(Y,ie.SDK_VERSION,x,te,Ee,Ne),wn=new up(pt,it),lr=new Tl(wn,it,It,At),so=new Xa(F,lr,It,it,At);return function qn(C){const D=(0,se.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(so),so},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Ni,"0.3.15"),(0,ie.registerVersion)(Ni,"0.3.15","esm2017")}();const ki="/firebase-messaging-sw.js",Qi="/firebase-cloud-messaging-push-scope",Ji="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ua="google.c.a.c_id",tu="google.c.a.c_l",mc="google.c.a.ts",oh="google.c.a.e";var Xi=(()=>{return(C=Xi||(Xi={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Xi;var C})();function Jr(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Br(C){const x=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Y=new Uint8Array(F.length);for(let te=0;te<F.length;++te)Y[te]=F.charCodeAt(te);return Y}const Do="fcm_token_details_db",ur="fcm_token_object_Store";function ah(C){return uh.apply(this,arguments)}function uh(){return uh=(0,k.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Do))return null;let D=null;return(yield(0,de.X3)(Do,5,{upgrade:(F=(0,k.Z)(function*(Y,te,Ee,Ne){var it;if(te<2||!Y.objectStoreNames.contains(ur))return;const It=Ne.objectStore(ur),At=yield It.index("fcmSenderId").get(C);if(yield It.clear(),At)if(2===te){const pt=At;if(!pt.auth||!pt.p256dh||!pt.endpoint)return;D={token:pt.fcmToken,createTime:null!==(it=pt.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:pt.auth,p256dh:pt.p256dh,endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:"string"==typeof pt.vapidKey?pt.vapidKey:Jr(pt.vapidKey)}}}else if(3===te){const pt=At;D={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:Jr(pt.auth),p256dh:Jr(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:Jr(pt.vapidKey)}}}else if(4===te){const pt=At;D={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:Jr(pt.auth),p256dh:Jr(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:Jr(pt.vapidKey)}}}}),function(te,Ee,Ne,it){return F.apply(this,arguments)})})).close(),yield(0,de.Lj)(Do),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),bn(D)?D:null;var F}),uh.apply(this,arguments)}function bn(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Xr="firebase-messaging-store";let Sr=null;function iu(){return Sr||(Sr=(0,de.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Xr)}})),Sr}function qs(C){return es.apply(this,arguments)}function es(){return(es=(0,k.Z)(function*(C){const D=_i(C),F=yield(yield iu()).transaction(Xr).objectStore(Xr).get(D);if(F)return F;{const Y=yield ah(C.appConfig.senderId);if(Y)return yield qt(C,Y),Y}})).apply(this,arguments)}function qt(C,D){return su.apply(this,arguments)}function su(){return(su=(0,k.Z)(function*(C,D){const x=_i(C),Y=(yield iu()).transaction(Xr,"readwrite");return yield Y.objectStore(Xr).put(D,x),yield Y.done,D})).apply(this,arguments)}function Ws(C){return ou.apply(this,arguments)}function ou(){return(ou=(0,k.Z)(function*(C){const D=_i(C),F=(yield iu()).transaction(Xr,"readwrite");yield F.objectStore(Xr).delete(D),yield F.done})).apply(this,arguments)}function _i({appConfig:C}){return C.appId}const En=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Tt(C,D){return uu.apply(this,arguments)}function uu(){return(uu=(0,k.Z)(function*(C,D){var x;const F=yield _c(C),Y=Se(D),te={method:"POST",headers:F,body:JSON.stringify(Y)};let Ee;try{Ee=yield(yield fetch(ts(C.appConfig),te)).json()}catch(Ne){throw En.create("token-subscribe-failed",{errorInfo:null===(x=Ne)||void 0===x?void 0:x.toString()})}if(Ee.error)throw En.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw En.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function lh(C,D){return cu.apply(this,arguments)}function cu(){return(cu=(0,k.Z)(function*(C,D){var x;const F=yield _c(C),Y=Se(D.subscriptionOptions),te={method:"PATCH",headers:F,body:JSON.stringify(Y)};let Ee;try{Ee=yield(yield fetch(`${ts(C.appConfig)}/${D.token}`,te)).json()}catch(Ne){throw En.create("token-update-failed",{errorInfo:null===(x=Ne)||void 0===x?void 0:x.toString()})}if(Ee.error)throw En.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw En.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function lu(C,D){return yc.apply(this,arguments)}function yc(){return(yc=(0,k.Z)(function*(C,D){var x;const Y={method:"DELETE",headers:yield _c(C)};try{const Ee=yield(yield fetch(`${ts(C.appConfig)}/${D}`,Y)).json();if(Ee.error)throw En.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(te){throw En.create("token-unsubscribe-failed",{errorInfo:null===(x=te)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function ts({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function _c(C){return ca.apply(this,arguments)}function ca(){return(ca=(0,k.Z)(function*({appConfig:C,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Se({p256dh:C,auth:D,endpoint:x,vapidKey:F}){const Y={web:{endpoint:x,auth:D,p256dh:C}};return F!==Ji&&(Y.web.applicationPubKey=F),Y}const Ht=6048e5;function du(C){return hu.apply(this,arguments)}function hu(){return(hu=(0,k.Z)(function*(C){const D=yield vc(C.swRegistration,C.vapidKey),x={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:Jr(D.getKey("auth")),p256dh:Jr(D.getKey("p256dh"))},F=yield qs(C.firebaseDependencies);if(F){if(Nl(F.subscriptionOptions,x))return Date.now()>=F.createTime+Ht?To(C,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield lu(C.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return la(C.firebaseDependencies,x)}return la(C.firebaseDependencies,x)})).apply(this,arguments)}function Cn(C){return fu.apply(this,arguments)}function fu(){return(fu=(0,k.Z)(function*(C){const D=yield qs(C.firebaseDependencies);D&&(yield lu(C.firebaseDependencies,D.token),yield Ws(C.firebaseDependencies));const x=yield C.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function To(C,D){return ei.apply(this,arguments)}function ei(){return(ei=(0,k.Z)(function*(C,D){try{const x=yield lh(C.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield qt(C.firebaseDependencies,F),x}catch(x){throw yield Cn(C),x}})).apply(this,arguments)}function la(C,D){return da.apply(this,arguments)}function da(){return(da=(0,k.Z)(function*(C,D){const F={token:yield Tt(C,D),createTime:Date.now(),subscriptionOptions:D};return yield qt(C,F),F.token})).apply(this,arguments)}function vc(C,D){return wc.apply(this,arguments)}function wc(){return(wc=(0,k.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Br(D)})})).apply(this,arguments)}function Nl(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function ha(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Dn(C,D){if(!D.notification)return;C.notification={};const x=D.notification.title;x&&(C.notification.title=x);const F=D.notification.body;F&&(C.notification.body=F);const Y=D.notification.image;Y&&(C.notification.image=Y);const te=D.notification.icon;te&&(C.notification.icon=te)}(D,C),function Oi(C,D){!D.data||(C.data=D.data)}(D,C),function Ec(C,D){var x,F,Y,te,Ee;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;C.fcmOptions={};const Ne=null!==(Y=null===(F=D.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Y?Y:null===(te=D.notification)||void 0===te?void 0:te.click_action;Ne&&(C.fcmOptions.link=Ne);const it=null===(Ee=D.fcmOptions)||void 0===Ee?void 0:Ee.analytics_label;it&&(C.fcmOptions.analyticsLabel=it)}(D,C),D}function Ks(C){return"object"==typeof C&&!!C&&ua in C}function ns(C,D){const x=[];for(let F=0;F<C.length;F++)x.push(C.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function fa(C){return En.create("missing-app-config-values",{valueName:C})}ns("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ns("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pp{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function fp(C){if(!C||!C.options)throw fa("App Configuration Object");if(!C.name)throw fa("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=C;for(const F of D)if(!x[F])throw fa(F);return{appName:C.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Ic(C){return pu.apply(this,arguments)}function pu(){return(pu=(0,k.Z)(function*(C){var D;try{C.swRegistration=yield navigator.serviceWorker.register(ki,{scope:Qi}),C.swRegistration.update().catch(()=>{})}catch(x){throw En.create("failed-service-worker-registration",{browserErrorMessage:null===(D=x)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function pa(C,D){return bc.apply(this,arguments)}function bc(){return(bc=(0,k.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield Ic(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw En.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function ga(C,D){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,k.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=Ji)})).apply(this,arguments)}function mu(){return(mu=(0,k.Z)(function*(C,D){if(!navigator)throw En.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw En.create("permission-blocked");return yield ga(C,D?.vapidKey),yield pa(C,D?.serviceWorkerRegistration),du(C)})).apply(this,arguments)}function Dc(C,D,x){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,k.Z)(function*(C,D,x){const F=Sc(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ua],message_name:x[tu],message_time:x[mc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sc(C){switch(C){case Xi.NOTIFICATION_CLICKED:return"notification_open";case Xi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Zs(){return(Zs=(0,k.Z)(function*(C,D){const x=D.data;if(!x.isFirebaseMessaging)return;C.onMessageHandler&&x.messageType===Xi.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(ha(x)):C.onMessageHandler.next(ha(x)));const F=x.data;Ks(F)&&"1"===F[oh]&&(yield Dc(C,x.messageType,F))})).apply(this,arguments)}const Ys="@firebase/messaging",Kn=C=>{const D=new pp(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function kl(C,D){return Zs.apply(this,arguments)}(D,x)),D},jr=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:F=>function gu(C,D){return mu.apply(this,arguments)}(D,F)}};function Ol(){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,k.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function yn(){(0,ie._registerComponent)(new ce.wA("messaging",Kn,"PUBLIC")),(0,ie._registerComponent)(new ce.wA("messaging-internal",jr,"PRIVATE")),(0,ie.registerVersion)(Ys,"0.10.0"),(0,ie.registerVersion)(Ys,"0.10.0","esm2017")}();const Ao="analytics",Ll="firebase_id",Js="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wu="https://www.googletagmanager.com/gtag/js",Tn=new ue.Yd("@firebase/analytics");function Eu(C){return Promise.all(C.map(D=>D.catch(x=>x)))}function Iu(C,D){const x=document.createElement("script");x.src=`${wu}?l=${C}&id=${D}`,x.async=!0,document.head.appendChild(x)}function hh(C,D,x,F,Y,te){return xo.apply(this,arguments)}function xo(){return(xo=(0,k.Z)(function*(C,D,x,F,Y,te){const Ee=F[Y];try{if(Ee)yield D[Ee];else{const it=(yield Eu(x)).find(It=>It.measurementId===Y);it&&(yield D[it.appId])}}catch(Ne){Tn.error(Ne)}C("config",Y,te)})).apply(this,arguments)}function Mo(C,D,x,F,Y){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,k.Z)(function*(C,D,x,F,Y){try{let te=[];if(Y&&Y.send_to){let Ee=Y.send_to;Array.isArray(Ee)||(Ee=[Ee]);const Ne=yield Eu(x);for(const it of Ee){const It=Ne.find(pt=>pt.measurementId===it),At=It&&D[It.appId];if(!At){te=[];break}te.push(At)}}0===te.length&&(te=Object.values(D)),yield Promise.all(te),C("event",F,Y||{})}catch(te){Tn.error(te)}})).apply(this,arguments)}function Ul(C){const D=window.document.getElementsByTagName("script");for(const x of Object.values(D))if(x.src&&x.src.includes(wu)&&x.src.includes(C))return x;return null}const nr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),va=new class Pi{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function jl(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function wa(C){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,k.Z)(function*(C){var D;const{appId:x,apiKey:F}=C,Y={method:"GET",headers:jl(F)},te=Js.replace("{app-id}",x),Ee=yield fetch(te,Y);if(200!==Ee.status&&304!==Ee.status){let Ne="";try{const it=yield Ee.json();null!==(D=it.error)&&void 0!==D&&D.message&&(Ne=it.error.message)}catch{}throw nr.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:Ne})}return Ee.json()})).apply(this,arguments)}function xn(C){return vi.apply(this,arguments)}function vi(){return(vi=(0,k.Z)(function*(C,D=va,x){const{appId:F,apiKey:Y,measurementId:te}=C.options;if(!F)throw nr.create("no-app-id");if(!Y){if(te)return{measurementId:te,appId:F};throw nr.create("no-api-key")}const Ee=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ne=new Tu;return setTimeout((0,k.Z)(function*(){Ne.abort()}),void 0!==x?x:6e4),Cu({appId:F,apiKey:Y,measurementId:te},Ee,Ne,D)})).apply(this,arguments)}function Cu(C,D,x){return eo.apply(this,arguments)}function eo(){return(eo=(0,k.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:x},F,Y=va){var te,Ee;const{appId:Ne,measurementId:it}=C;try{yield Ea(F,D)}catch(It){if(it)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${null===(te=It)||void 0===te?void 0:te.message}]`),{appId:Ne,measurementId:it};throw It}try{const It=yield wa(C);return Y.deleteThrottleMetadata(Ne),It}catch(It){const At=It;if(!Du(At)){if(Y.deleteThrottleMetadata(Ne),it)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${At?.message}]`),{appId:Ne,measurementId:it};throw It}const pt=503===Number(null===(Ee=At?.customData)||void 0===Ee?void 0:Ee.httpStatus)?(0,se.$s)(x,Y.intervalMillis,30):(0,se.$s)(x,Y.intervalMillis),wn={throttleEndTimeMillis:Date.now()+pt,backoffCount:x+1};return Y.setThrottleMetadata(Ne,wn),Tn.debug(`Calling attemptFetch again in ${pt} millis`),Cu(C,wn,F,Y)}})).apply(this,arguments)}function Ea(C,D){return new Promise((x,F)=>{const Y=Math.max(D-Date.now(),0),te=setTimeout(x,Y);C.addEventListener(()=>{clearTimeout(te),F(nr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Du(C){if(!(C instanceof se.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Tu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let bs,ba;function Cs(){return(Cs=(0,k.Z)(function*(C,D,x,F,Y){if(Y&&Y.global)C("event",x,F);else{const te=yield D;C("event",x,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function no(C){ba=C}function kc(C){bs=C}function is(){return Au.apply(this,arguments)}function Au(){return(Au=(0,k.Z)(function*(){var C;if(!(0,se.hl)())return Tn.warn(nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(D){return Tn.warn(nr.create("indexeddb-unavailable",{errorInfo:null===(C=D)||void 0===C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function ko(){return(ko=(0,k.Z)(function*(C,D,x,F,Y,te,Ee){var Ne;const it=xn(C);it.then(lr=>{x[lr.measurementId]=lr.appId,C.options.measurementId&&lr.measurementId!==C.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${lr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(lr=>Tn.error(lr)),D.push(it);const It=is().then(lr=>{if(lr)return F.getId()}),[At,pt]=yield Promise.all([it,It]);Ul(te)||Iu(te,At.measurementId),ba&&(Y("consent","default",ba),no(void 0)),Y("js",new Date);const wn=null!==(Ne=Ee?.config)&&void 0!==Ne?Ne:{};return wn.origin="firebase",wn.update=!0,null!=pt&&(wn[Ll]=pt),Y("config",At.measurementId,wn),bs&&(Y("set",bs),kc(void 0)),At.measurementId})).apply(this,arguments)}class xu{constructor(D){this.app=D}_delete(){return delete Hr[this.app.options.appId],Promise.resolve()}}let Hr={},Ds=[];const Oo={};let Fo,ro,Po="dataLayer",Ca=!1;function Wm(C,D,x){!function gp(){const C=[];if((0,se.ru)()&&C.push("This is a browser extension environment."),(0,se.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),x=nr.create("invalid-analytics-context",{errorInfo:D});Tn.warn(x.message)}}();const F=C.options.appId;if(!F)throw nr.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw nr.create("no-api-key");Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hr[F])throw nr.create("already-exists",{id:F});if(!Ca){!function Vl(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(Po);const{wrappedGtag:te,gtagCore:Ee}=function ma(C,D,x,F,Y){let te=function(...Ee){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(te=window[Y]),window[Y]=function bu(C,D,x,F){function te(){return(te=(0,k.Z)(function*(Ee,Ne,it){try{"event"===Ee?yield Mo(C,D,x,Ne,it):"config"===Ee?yield hh(C,D,x,F,Ne,it):"consent"===Ee?C("consent","update",it):C("set",Ne)}catch(It){Tn.error(It)}})).apply(this,arguments)}return function Y(Ee,Ne,it){return te.apply(this,arguments)}}(te,C,D,x),{gtagCore:te,wrappedGtag:window[Y]}}(Hr,Ds,Oo,Po,"gtag");ro=te,Fo=Ee,Ca=!0}return Hr[F]=function No(C,D,x,F,Y,te,Ee){return ko.apply(this,arguments)}(C,Ds,Oo,D,Fo,Po,x),new xu(C)}function Zm(){return fh.apply(this,arguments)}function fh(){return(fh=(0,k.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const tt="@firebase/analytics";!function _n(){(0,ie._registerComponent)(new ce.wA(Ao,(D,{options:x})=>Wm(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ie._registerComponent)(new ce.wA("analytics-internal",function C(D){try{const x=D.getProvider(Ao).getImmediate();return{logEvent:(F,Y,te)=>function Jt(C,D,x,F){C=(0,se.m9)(C),function Hl(C,D,x,F,Y){return Cs.apply(this,arguments)}(ro,Hr[C.app.options.appId],D,x,F).catch(Y=>Tn.error(Y))}(x,F,Y,te)}}catch(x){throw nr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ie.registerVersion)(tt,"0.8.4"),(0,ie.registerVersion)(tt,"0.8.4","esm2017")}();var Ei=O(4408),Mn=O(7565);const Ru=new class Ts extends Mn.v{}(class Da extends Ei.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):D.flush(this)}});var Pc=O(4986),Ta=O(8505),io=O(5363),Ss=O(9468);const We=new f.GfV("7.4.1"),Sa="__angularfire_symbol__analyticsIsSupportedValue",As="__angularfire_symbol__analyticsIsSupported",Lo="__angularfire_symbol__remoteConfigIsSupportedValue",Vo="__angularfire_symbol__remoteConfigIsSupported",Rn="__angularfire_symbol__messagingIsSupportedValue",Fc="__angularfire_symbol__messagingIsSupported";function Aa(C,D,x){if(D){if(1===D.length)return D[0];const te=D.filter(Ee=>Ee.app===x);if(1===te.length)return te[0]}return x.container.getProvider(C).getImmediate({optional:!0})}globalThis[As]||(globalThis[As]=Zm().then(C=>globalThis[Sa]=C).catch(()=>globalThis[Sa]=!1)),globalThis[Fc]||(globalThis[Fc]=Ol().then(C=>globalThis[Rn]=C).catch(()=>globalThis[Rn]=!1)),globalThis[Vo]||(globalThis[Vo]=eu().then(C=>globalThis[Lo]=C).catch(()=>globalThis[Lo]=!1));const Fi=(C,D)=>{const x=D?[D]:(0,X.C6)(),F=[];return x.forEach(Y=>{Y.container.getProvider(C).instances.forEach(Ee=>{F.includes(Ee)||F.push(Ee)})}),F};function Li(){}class $r{constructor(D,x=Ru){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const Y=this.zone;return this.delegate.schedule(function(Ee){Y.runGuarded(()=>{D.apply(this,[Ee])})},x,F)}}class Vc{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Li,{},Li,Li)),x.pipe((0,Ta.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _r=(()=>{class C{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new $r(Zone.current)),this.insideAngular=x.run(()=>new $r(Zone.current,Pc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(x){return new(x||C)(f.LFG(f.R0b))},C.\u0275prov=f.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Ar(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Un(C){return C.pipe((0,io.Q)(Ar().outsideAngular))}function Ui(C){return Ar(),function pn(C){return function(x){return(x=x.lift(new Vc(C.ngZone))).pipe((0,Ss.R)(C.outsideAngular),(0,io.Q)(C.insideAngular))}}(Ar())(C)}},2090:(ct,De,O)=>{O.d(De,{$s:()=>Xe,BH:()=>Bt,G6:()=>Ie,L:()=>de,LL:()=>Wt,Pz:()=>Yt,Sg:()=>qe,UG:()=>we,US:()=>ce,ZB:()=>$,ZR:()=>gn,aH:()=>mt,b$:()=>fe,eu:()=>je,hl:()=>Be,jU:()=>rt,m9:()=>Pt,ne:()=>Pn,pd:()=>Mi,r3:()=>mi,ru:()=>me,tV:()=>he,uI:()=>Me,vZ:()=>Ze,w1:()=>ot,xO:()=>$n,xb:()=>Yr,z$:()=>Le,zI:()=>U,zd:()=>Qr});const ie=function(j){const V=[];let W=0;for(let ve=0;ve<j.length;ve++){let Q=j.charCodeAt(ve);Q<128?V[W++]=Q:Q<2048?(V[W++]=Q>>6|192,V[W++]=63&Q|128):55296==(64512&Q)&&ve+1<j.length&&56320==(64512&j.charCodeAt(ve+1))?(Q=65536+((1023&Q)<<10)+(1023&j.charCodeAt(++ve)),V[W++]=Q>>18|240,V[W++]=Q>>12&63|128,V[W++]=Q>>6&63|128,V[W++]=63&Q|128):(V[W++]=Q>>12|224,V[W++]=Q>>6&63|128,V[W++]=63&Q|128)}return V},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Q=0;Q<j.length;Q+=3){const Ge=j[Q],ht=Q+1<j.length,Kt=ht?j[Q+1]:0,dn=Q+2<j.length,zt=dn?j[Q+2]:0;let Vt=(15&Kt)<<2|zt>>6,er=63&zt;dn||(er=64,ht||(Vt=64)),ve.push(W[Ge>>2],W[(3&Ge)<<4|Kt>>4],W[Vt],W[er])}return ve.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(ie(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let W=0,ve=0;for(;W<j.length;){const Q=j[W++];if(Q<128)V[ve++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ge=j[W++];V[ve++]=String.fromCharCode((31&Q)<<6|63&Ge)}else if(Q>239&&Q<365){const dn=((7&Q)<<18|(63&j[W++])<<12|(63&j[W++])<<6|63&j[W++])-65536;V[ve++]=String.fromCharCode(55296+(dn>>10)),V[ve++]=String.fromCharCode(56320+(1023&dn))}else{const Ge=j[W++],ht=j[W++];V[ve++]=String.fromCharCode((15&Q)<<12|(63&Ge)<<6|63&ht)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const W=V?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Q=0;Q<j.length;){const Ge=W[j.charAt(Q++)],Kt=Q<j.length?W[j.charAt(Q)]:0;++Q;const zt=Q<j.length?W[j.charAt(Q)]:64;++Q;const $e=Q<j.length?W[j.charAt(Q)]:64;if(++Q,null==Ge||null==Kt||null==zt||null==$e)throw Error();ve.push(Ge<<2|Kt>>4),64!==zt&&(ve.push(Kt<<4&240|zt>>2),64!==$e&&ve.push(zt<<6&192|$e))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},de=function(j){return function(j){const V=ie(j);return ce.encodeByteArray(V,!0)}(j).replace(/\./g,"")},he=function(j){try{return ce.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function $(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const W in V)!V.hasOwnProperty(W)||!K(W)||(j[W]=$(j[W],V[W]));return j}function K(j){return"__proto__"!==j}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function rt(){return"object"==typeof self&&self.self===self}function me(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ot(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ie(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){return"object"==typeof indexedDB}function je(){return new Promise((j,V)=>{try{let W=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(ve);Q.onsuccess=()=>{Q.result.close(),W||self.indexedDB.deleteDatabase(ve),j(!0)},Q.onupgradeneeded=()=>{W=!1},Q.onerror=()=>{var Ge;V((null===(Ge=Q.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(W){V(W)}})}function U(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ne=()=>{try{return function ge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=j&&he(j[1]);return V&&JSON.parse(V)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},mt=()=>{var j;return null===(j=ne())||void 0===j?void 0:j.config},Yt=j=>{var V;return null===(V=ne())||void 0===V?void 0:V[`_${j}`]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,W)=>{this.resolve=V,this.reject=W})}wrapCallback(V){return(W,ve)=>{W?this.reject(W):this.resolve(ve),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(W):V(W,ve))}}}function qe(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=V||"demo-project",Q=j.iat||0,Ge=j.sub||j.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Q,exp:Q+3600,auth_time:Q,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},j);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(ht)),""].join(".")}class gn extends Error{constructor(V,W,ve){super(W),this.code=V,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}}class Wt{constructor(V,W,ve){this.service=V,this.serviceName=W,this.errors=ve}create(V,...W){const ve=W[0]||{},Q=`${this.service}/${V}`,Ge=this.errors[V],ht=Ge?function Qt(j,V){return j.replace(br,(W,ve)=>{const Q=V[ve];return null!=Q?String(Q):`<${ve}?>`})}(Ge,ve):"Error";return new gn(Q,`${this.serviceName}: ${ht} (${Q}).`,ve)}}const br=/\{\$([^}]+)}/g;function mi(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function Yr(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function Ze(j,V){if(j===V)return!0;const W=Object.keys(j),ve=Object.keys(V);for(const Q of W){if(!ve.includes(Q))return!1;const Ge=j[Q],ht=V[Q];if(mr(Ge)&&mr(ht)){if(!Ze(Ge,ht))return!1}else if(Ge!==ht)return!1}for(const Q of ve)if(!W.includes(Q))return!1;return!0}function mr(j){return null!==j&&"object"==typeof j}function $n(j){const V=[];for(const[W,ve]of Object.entries(j))Array.isArray(ve)?ve.forEach(Q=>{V.push(encodeURIComponent(W)+"="+encodeURIComponent(Q))}):V.push(encodeURIComponent(W)+"="+encodeURIComponent(ve));return V.length?"&"+V.join("&"):""}function Qr(j){const V={};return j.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Q,Ge]=ve.split("=");V[decodeURIComponent(Q)]=decodeURIComponent(Ge)}}),V}function Mi(j){const V=j.indexOf("?");if(!V)return"";const W=j.indexOf("#",V);return j.substring(V,W>0?W:void 0)}function Pn(j,V){const W=new hn(j,V);return W.subscribe.bind(W)}class hn{constructor(V,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{V(this)}).catch(ve=>{this.error(ve)})}next(V){this.forEachObserver(W=>{W.next(V)})}error(V){this.forEachObserver(W=>{W.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,W,ve){let Q;if(void 0===V&&void 0===W&&void 0===ve)throw new Error("Missing Observer.");Q=function lt(j,V){if("object"!=typeof j||null===j)return!1;for(const W of V)if(W in j&&"function"==typeof j[W])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:W,complete:ve},void 0===Q.next&&(Q.next=Xt),void 0===Q.error&&(Q.error=Xt),void 0===Q.complete&&(Q.complete=Xt);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Ge}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,V)}sendOne(V,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{W(this.observers[V])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xt(){}function Xe(j,V=1e3,W=2){const ve=V*Math.pow(W,j),Q=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Q)}function Pt(j){return j&&j._delegate?j._delegate:j}},9449:(ct,De,O)=>{var f=O(4650);let X=null;function k(){return X}const ue=new f.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function he(){return(0,f.LFG)($)}()},providedIn:"platform"}),n})();const B=new f.OlP("Location Initialized");let $=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){K()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){K()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Le(){return new $((0,f.LFG)(ue))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function rt(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Je)},providedIn:"root"}),n})();const fe=new f.OlP("appBaseHref");let Je=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+rt(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+rt(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+rt(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(fe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ot=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+rt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+rt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(fe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Be(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rt(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=rt,n.joinWithSlash=Me,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(f.LFG(me))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function _e(){return new xe((0,f.LFG)(me))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}function sa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}let on=(()=>{class n{constructor(t,r,s,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class oa{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ys=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new oa(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),_s(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{_s(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function _s(n,e){n.context.$implicit=e.item}let qn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class dc{constructor(){this.$implicit=null,this.ngIf=null}}function tr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Tl=(()=>{class n{constructor(t,r,s){this._ngEl=t,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[s,u]=t.split("."),l=-1===s.indexOf("-")?void 0:f.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,s,u?`${r}${u}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,s,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.aQg),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();class Sl{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class up{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Yi=new up,cp=new Sl;let Xa=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return Yi;if((0,f.F4k)(t))return cp;throw function Wn(n,e){return new f.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Co=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Xi="browser";function nu(n){return n===Xi}function ur(n){return"server"===n}let ru=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new ch((0,f.LFG)(ue),window)}),n})();class ch{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Sr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Xr(this.window.history)||Xr(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Xr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class qs{}class Zs extends class kl extends class ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){X||(X=n)}(new Zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function yu(){return Ys=Ys||document.querySelector("base"),Ys?Ys.getAttribute("href"):null}();return null==t?null:function jr(n){Kn=Kn||document.createElement("a"),Kn.setAttribute("href",n);const e=Kn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sa(document.cookie,e)}}let Kn,Ys=null;const yn=new f.OlP("TRANSITION_ID"),Ac=[{provide:f.ip1,useFactory:function Ol(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=k(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[yn,ue,f.zs3],multi:!0}];let xc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const _u=new f.OlP("EventManagerPlugins");let Pl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_u),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class vu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=k().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Qs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),So=(()=>{class n extends Qs{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,s.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Fl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Fl))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Fl(n){k().remove(n)}const Ao={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ll=/%COMP%/g;function Iu(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Iu(n,s,t):(s=s.replace(Ll,n),t.push(s))}return t}function Vl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let xo=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Mo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new Ul(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case f.ifc.ShadowDom:return new Bl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Iu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pl),f.LFG(So),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Mo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ao[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ma(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ma(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Ao[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Ao[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,s&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Vl(r)):this.eventManager.addEventListener(e,t,Vl(r))}}function ma(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ul extends Mo{constructor(e,t,r,s){super(e),this.component=r;const u=Iu(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Tn(n){return"_ngcontent-%COMP%".replace(Ll,n)}(s+"-"+r.id),this.hostAttr=function Eu(n){return"_nghost-%COMP%".replace(Ll,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Bl extends Mo{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Iu(s.id,s.styles,[]);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let nr=(()=>{class n extends vu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ya=["alt","control","meta","shift"],_a={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let va=(()=>{class n extends vu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),ya.forEach(I=>{const A=r.indexOf(I);A>-1&&(r.splice(A,1),l+=I+".")}),l+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=s,v.fullKey=l,v}static matchEventFullKeyCode(t,r){let s=_a[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),ya.forEach(l=>{l!==s&&(0,Pi[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Tu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:Xi},{provide:f.g9A,useValue:function Cu(){Zs.makeCurrent()},multi:!0},{provide:ue,useFactory:function Ea(){return(0,f.RDi)(document),document},deps:[]}]),bs=new f.OlP(""),Hl=[{provide:f.rWj,useClass:class dh{addToWindow(e){f.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const s=f.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(v){l=l||v,u--,0==u&&r(l)};s.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Cs=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function eo(){return new f.qLn},deps:[]},{provide:_u,useClass:nr,multi:!0,deps:[ue,f.R0b,f.Lbi]},{provide:_u,useClass:va,multi:!0,deps:[ue]},{provide:xo,useClass:xo,deps:[Pl,So,f.AFp]},{provide:f.FYo,useExisting:xo},{provide:Qs,useExisting:So},{provide:So,useClass:So,deps:[ue]},{provide:Pl,useClass:Pl,deps:[_u,f.R0b]},{provide:qs,useClass:xc,deps:[]},[]];let Rc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:yn,useExisting:f.AFp},Ac]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bs,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Cs,...Hl],imports:[Co,f.hGG]}),n})(),rs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ro(){return new rs((0,f.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Jt=O(8996),wi=O(3269);function tt(...n){const e=(0,wi.yG)(n);return(0,Jt.D)(n,e)}var cr=O(7579);class _n extends cr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Da=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Mn=O(9751);const{isArray:Ts}=Array,{getPrototypeOf:Ru,prototype:yp,keys:Pc}=Object;var Ss=O(4671),We=O(4004);const{isArray:Sa}=Array;function Lo(n){return(0,We.U)(e=>function As(n,e){return Sa(e)?n(...e):n(e)}(n,e))}var Rn=O(5403),Fc=O(9672);function Uo(...n){const e=(0,wi.yG)(n),t=(0,wi.jO)(n),{args:r,keys:s}=function Ta(n){if(1===n.length){const e=n[0];if(Ts(e))return{args:e,keys:null};if(function io(n){return n&&"object"==typeof n&&Ru(n)===yp}(e)){const t=Pc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Jt.D)([],e);const u=new Mn.y(function _p(n,e,t=Ss.y){return r=>{Lc(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let v=0;v<s;v++)Lc(e,()=>{const I=(0,Jt.D)(n[v],e);let A=!1;I.subscribe((0,Rn.x)(r,M=>{u[v]=M,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>function Vo(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}(s,l):Ss.y));return t?u.pipe(Lo(t)):u}function Lc(n,e,t){n?(0,Fc.f)(t,n,e):e()}var Nu=O(8189);function Fi(...n){return function Aa(){return(0,Nu.J)(1)}()((0,Jt.D)(n,(0,wi.yG)(n)))}var Li=O(8421);function $r(n){return new Mn.y(e=>{(0,Li.Xf)(n()).subscribe(e)})}var Vc=O(9635),_r=O(576);function Ar(n,e){const t=(0,_r.m)(n)?n:()=>n,r=s=>s.error(t());return new Mn.y(e?s=>e.schedule(r,0,s):r)}var ss=O(515),Vi=O(727),Un=O(4482);function xs(){return(0,Un.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Rn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ui extends Mn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Un.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Vi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Rn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Vi.w0.EMPTY)}return e}refCount(){return xs()(this)}}function pn(n,e){return(0,Un.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,Rn.x)(r,v=>{s?.unsubscribe();let I=0;const A=u++;(0,Li.Xf)(n(v,A)).subscribe(s=(0,Rn.x)(r,M=>r.next(e?e(v,M,A,I++):M),()=>{s=null,m()}))},()=>{l=!0,m()}))})}function Zt(n){return n<=0?()=>ss.E:(0,Un.e)((e,t)=>{let r=0;e.subscribe((0,Rn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function ku(...n){const e=(0,wi.yG)(n);return(0,Un.e)((t,r)=>{(e?Fi(n,t,e):Fi(n,t)).subscribe(r)})}function C(n,e){return(0,Un.e)((t,r)=>{let s=0;t.subscribe((0,Rn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var D=O(5577);function x(n){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,Rn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function F(n=Y){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,Rn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Y(){return new Da}function te(n,e){const t=arguments.length>=2;return r=>r.pipe(n?C((s,u)=>n(s,u,r)):Ss.y,Zt(1),t?x(e):F(()=>new Da))}function Ee(n,e){return(0,_r.m)(e)?(0,D.z)(n,e,1):(0,D.z)(n,1)}var Ne=O(8505);function it(n){return(0,Un.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Rn.x)(t,void 0,void 0,l=>{u=(0,Li.Xf)(n(l,it(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function It(n,e,t,r,s){return(u,l)=>{let m=t,v=e,I=0;u.subscribe((0,Rn.x)(l,A=>{const M=I++;v=m?n(v,A,M):(m=!0,A),r&&l.next(v)},s&&(()=>{m&&l.next(v),l.complete()})))}}function At(n,e){return(0,Un.e)(It(n,e,arguments.length>=2,!0))}function pt(n){return n<=0?()=>ss.E:(0,Un.e)((e,t)=>{let r=[];e.subscribe((0,Rn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function wn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?C((s,u)=>n(s,u,r)):Ss.y,pt(1),t?x(e):F(()=>new Da))}function so(n){return(0,We.U)(()=>n)}function Ms(n){return(0,Un.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const xt="primary",Bi=Symbol("RouteTitle");class Rs{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ti(n){return new Rs(n)}function Bo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Ii(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!ph(n[s],e[s]))return!1;return!0}function ph(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function vp(n){return Array.prototype.concat.apply([],n)}function wp(n){return n.length>0?n[n.length-1]:null}function Zn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ji(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Jt.D)(Promise.resolve(n)):tt(n)}const $w={exact:function Ip(n,e,t){if(!uo(n.segments,e.segments)||!ao(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ip(n.children[r],e.children[r],t))return!1;return!0},subset:xa},mh={exact:function yh(n,e){return Ii(n,e)},subset:function bp(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ph(n[t],e[t]))},ignored:()=>!0};function Xm(n,e,t){return $w[t.paths](n.root,e.root,t.matrixParams)&&mh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function xa(n,e,t){return Gl(n,e,e.segments,t)}function Gl(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!uo(s,t)||e.hasChildren()||!ao(s,t,r))}if(n.segments.length===t.length){if(!uo(n.segments,t)||!ao(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!xa(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(uo(n.segments,s)&&ao(n.segments,s,r)&&n.children[xt])&&Gl(n.children[xt],e,u,r)}}function ao(n,e,t){return e.every((r,s)=>mh[t](n[s].parameters,r.parameters))}class Ma{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}toString(){return Wl.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Zn(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kl(this)}}class zl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ti(this.parameters)),this._parameterMap}toString(){return Tp(this)}}function uo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let _h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new ql},providedIn:"root"}),n})();class ql{parse(e){const t=new Na(e);return new Ma(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ra(e.root,!0)}`,r=function zw(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Bc(t)}=${Bc(s)}`).join("&"):`${Bc(t)}=${Bc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ey(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Wl=new ql;function Kl(n){return n.segments.map(e=>Tp(e)).join("/")}function Ra(n,e){if(!n.hasChildren())return Kl(n);if(e){const t=n.children[xt]?Ra(n.children[xt],!1):"",r=[];return Zn(n.children,(s,u)=>{u!==xt&&r.push(`${u}:${Ra(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Cp(n,e){let t=[];return Zn(n.children,(r,s)=>{s===xt&&(t=t.concat(e(r,s)))}),Zn(n.children,(r,s)=>{s!==xt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===xt?[Ra(n.children[xt],!1)]:[`${s}:${Ra(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${Kl(n)}/${t[0]}`:`${Kl(n)}/(${t.join("//")})`}}function Dp(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bc(n){return Dp(n).replace(/%3B/gi,";")}function Hi(n){return Dp(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jo(n){return decodeURIComponent(n)}function vh(n){return jo(n.replace(/\+/g,"%20"))}function Tp(n){return`${Hi(n.path)}${function Gw(n){return Object.keys(n).map(e=>`;${Hi(e)}=${Hi(n[e])}`).join("")}(n.parameters)}`}const qw=/^[^\/()?;=#]+/;function wh(n){const e=n.match(qw);return e?e[0]:""}const Sp=/^[^=?&#]+/,ty=/^[^&#]+/;class Na{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new $t(e,t)),r}parseSegment(){const e=wh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new zl(jo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=wh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=wh(this.remaining);s&&(r=s,this.capture(r))}e[jo(t)]=jo(r)}parseQueryParam(e){const t=function Ap(n){const e=n.match(Sp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Ww(n){const e=n.match(ty);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=vh(t),u=vh(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=wh(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new f.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=xt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[xt]:new $t([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function jc(n){return n.segments.length>0?new $t([],{[xt]:n}):n}function $i(n){const e={};for(const r of Object.keys(n.children)){const u=$i(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ka(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}function Ho(n){return n instanceof Ma}function Zw(n,e,t,r,s){if(0===t.length)return Hc(e.root,e.root,e.root,r,s);const u=function Mp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Eh(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Zn(u.outlets,(v,I)=>{m[I]="string"==typeof v?v.split("/"):v}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new Eh(t,e,r)}(t);return u.toRoot()?Hc(e.root,e.root,new $t([],{}),r,s):function l(v){const I=function Ih(n,e,t,r){if(n.isAbsolute)return new Pu(e.root,!0,0);if(-1===r)return new Pu(t,t===e.root,0);return function bh(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new f.vHH(4005,!1);s=r.segments.length}return new Pu(r,!1,s-u)}(t,r+(Oa(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=I.processChildren?lo(I.segmentGroup,I.index,u.commands):$c(I.segmentGroup,I.index,u.commands);return Hc(e.root,I.segmentGroup,A,r,s)}(n.snapshot?._lastPathIndex)}function Oa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function co(n){return"object"==typeof n&&null!=n&&n.outlets}function Hc(n,e,t,r,s){let l,u={};r&&Zn(r,(v,I)=>{u[I]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),l=n===e?t:ry(n,e,t);const m=jc($i(l));return new Ma(m,u,s)}function ry(n,e,t){const r={};return Zn(n.children,(s,u)=>{r[u]=s===e?t:ry(s,e,t)}),new $t(n.segments,r)}class Eh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Oa(r[0]))throw new f.vHH(4003,!1);const s=r.find(co);if(s&&s!==wp(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function $c(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return lo(n,e,t);const r=function iy(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if(co(m))break;const v=`${m}`,I=r<t.length-1?t[r+1]:null;if(s>0&&void 0===v)break;if(v&&I&&"object"==typeof I&&void 0===I.outlets){if(!Ql(v,I,l))return u;r+=2}else{if(!Ql(v,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new $t(n.segments.slice(0,r.pathIndex),{});return u.children[xt]=new $t(n.segments.slice(r.pathIndex),n.children),lo(u,0,s)}return r.match&&0===s.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?Nn(n,e,t):r.match?lo(n,0,s):Nn(n,e,t)}function lo(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function Zl(n){return co(n[0])?n[0].outlets:{[xt]:n}}(t),s={};return Zn(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=$c(n.children[l],e,u))}),Zn(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new $t(n.segments,s)}}function Nn(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(co(u)){const v=Yl(u.outlets);return new $t(r,v)}if(0===s&&Oa(t[0])){r.push(new zl(n.segments[e].path,Np(t[0]))),s++;continue}const l=co(u)?u.outlets[xt]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&Oa(m)?(r.push(new zl(l,Np(m))),s+=2):(r.push(new zl(l,{})),s++)}return new $t(r,{})}function Yl(n){const e={};return Zn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Nn(new $t([],{}),0,t))}),e}function Np(n){const e={};return Zn(n,(t,r)=>e[r]=`${t}`),e}function Ql(n,e,t){return n==t.path&&Ii(e,t.parameters)}class Ns{constructor(e,t){this.id=e,this.url=t}}class Jl extends Ns{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pa extends Ns{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xl extends Ns{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kp extends Ns{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sy extends Ns{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ed extends Ns{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yw extends Ns{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fu extends Ns{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ch extends Ns{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Op{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pp{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fp{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lp{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class td{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nd{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=zc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=zc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=xr(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return xr(e,this._root).map(t=>t.value)}}function zc(n,e){if(n===e.value)return e;for(const t of e.children){const r=zc(n,t);if(r)return r}return null}function xr(n,e){if(n===e.value)return[e];for(const t of e.children){const r=xr(n,t);if(r.length)return r.unshift(e),r}return[]}class ni{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function bi(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Vp extends rd{constructor(e,t){super(e),this.snapshot=t,Wc(this,e)}toString(){return this.snapshot.toString()}}function Lu(n,e){const t=function Vu(n,e){const l=new vr([],{},{},"",{},xt,e,null,n.root,-1,{});return new sd("",new ni(l,[]))}(n,e),r=new _n([new zl("",{})]),s=new _n({}),u=new _n({}),l=new _n({}),m=new _n(""),v=new $o(r,s,l,m,u,xt,e,t.root);return v.snapshot=t.root,new Vp(new ni(v,[]),t)}class $o{constructor(e,t,r,s,u,l,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,We.U)(I=>I[Bi]))??tt(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,We.U)(e=>ti(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,We.U)(e=>ti(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qc(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function id(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vr{constructor(e,t,r,s,u,l,m,v,I,A,M,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.[Bi],this.routeConfig=v,this._urlSegment=I,this._lastPathIndex=A,this._correctedLastPathIndex=L??A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ti(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sd extends rd{constructor(e,t){super(t),this.url=e,Wc(this,t)}toString(){return Up(this._root)}}function Wc(n,e){e.value._routerState=n,e.children.forEach(t=>Wc(n,t))}function Up(n){const e=n.children.length>0?` { ${n.children.map(Up).join(", ")} } `:"";return`${n.value}${e}`}function Dh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ii(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ii(e.params,t.params)||n.params.next(t.params),function oo(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ii(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ii(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Kc(n,e){const t=Ii(n.params,e.params)&&function Uc(n,e){return uo(n,e)&&n.every((t,r)=>Ii(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Kc(n.parent,e.parent))}function Fa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Th(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Fa(n,r,s);return Fa(n,r)})}(n,e,t);return new ni(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>Fa(n,m)),l}}const r=function oy(n){return new $o(new _n(n.url),new _n(n.params),new _n(n.queryParams),new _n(n.fragment),new _n(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Fa(n,u));return new ni(r,s)}}const os="ngNavigationCancelingError";function Go(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ho(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Sh(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Sh(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[os]=!0,r.cancellationCode=e,t&&(r.url=t),r}function od(n){return Bp(n)&&Ho(n.url)}function Bp(n){return n&&n[os]}class ad{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ud,this.attachRef=null}}let ud=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ad,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cd=!1;let La=(()=>{class n{constructor(t,r,s,u,l){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=s||xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,cd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,cd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,cd);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,cd);this._activatedRoute=t;const s=this.location,l=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new ay(t,m,s.injector);if(r&&function y(n){return!!n.resolveComponentFactory}(r)){const I=r.resolveComponentFactory(l);this.activated=s.createComponent(I,s.length,v)}else this.activated=s.createComponent(l,{index:s.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ud),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class ay{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$o?this.route:e===ud?this.childContexts:this.parent.get(e,t)}}let h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[La],encapsulation:2}),n})();function g(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function gt(n){const e=n.children&&n.children.map(gt),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=h),t}function an(n){return n.outlet||xt}function ri(n,e){const t=n.filter(r=>an(r)===e);return t.push(...n.filter(r=>an(r)!==e)),t}function Va(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Zc{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Dh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=bi(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),Zn(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=bi(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=bi(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=bi(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new nd(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Lp(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Dh(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Dh(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=Va(s.snapshot),v=m?.get(f._Vd)??null;l.attachRef=null,l.route=s,l.resolver=v,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class jp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ld{constructor(e,t){this.component=e,this.route=t}}function Hp(n,e,t){const r=n._root;return Ua(r,e?e._root:null,t,[r.value])}function Uu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Ua(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=bi(e);return n.children.forEach(l=>{(function Ah(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const v=function xh(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!uo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!uo(n.url,e.url)||!Ii(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kc(n,e)||!Ii(n.queryParams,e.queryParams);default:return!Kc(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);v?s.canActivateChecks.push(new jp(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Ua(n,e,u.component?m?m.children:null:t,r,s),v&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new ld(m.outlet.component,l))}else l&&zo(e,m,s),s.canActivateChecks.push(new jp(r)),Ua(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),Zn(u,(l,m)=>zo(l,t.getContext(m),s)),s}function zo(n,e,t){const r=bi(n),s=n.value;Zn(r,(u,l)=>{zo(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new ld(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Bu(n){return"function"==typeof n}function $p(n){return n instanceof Da||"EmptyError"===n?.name}const Gp=Symbol("INITIAL_VALUE");function dd(){return pn(n=>Uo(n.map(e=>e.pipe(Zt(1),ku(Gp)))).pipe((0,We.U)(e=>{for(const t of e)if(!0!==t){if(t===Gp)return Gp;if(!1===t||t instanceof Ma)return t}return!0}),C(e=>e!==Gp),Zt(1)))}function ii(n){return(0,Vc.z)((0,Ne.b)(e=>{if(Ho(e))throw Go(0,e)}),(0,We.U)(e=>!0===e))}const zp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qp(n,e,t,r,s){const u=Mr(n,e,t);return u.matched?function fy(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?tt(s.map(l=>{const m=Uu(l,n);return ji(function UC(n){return n&&Bu(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(dd(),ii()):tt(!0)}(r=g(e,r),e,t).pipe((0,We.U)(l=>!0===l?u:{...zp})):tt(u)}function Mr(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...zp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Bo)(t,n,e);if(!s)return{...zp};const u={};Zn(s.posParams,(m,v)=>{u[v]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function ju(n,e,t,r,s="corrected"){if(t.length>0&&function ZC(n,e,t){return t.some(r=>Wp(n,e,r)&&an(r)!==xt)}(n,t,r)){const l=new $t(e,function KC(n,e,t,r){const s={};s[xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&an(u)!==xt){const l=new $t([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[an(u)]=l}return s}(n,e,r,new $t(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function t0(n,e,t){return t.some(r=>Wp(n,e,r))}(n,t,r)){const l=new $t(n.segments,function e0(n,e,t,r,s,u){const l={};for(const m of r)if(Wp(n,t,m)&&!s[an(m)]){const v=new $t([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[an(m)]=v}return{...s,...l}}(n,e,t,r,n.children,s));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new $t(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Wp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function py(n,e,t,r){return!!(an(n)===r||r!==xt&&Wp(e,t,n))&&("**"===n.path||Mr(e,n,t).matched)}function n0(n,e,t){return 0===e.length&&!n.children[t]}const Rh=!1;class Kp{constructor(e){this.segmentGroup=e||null}}class r0{constructor(e){this.urlTree=e}}function Nh(n){return Ar(new Kp(n))}function s0(n){return Ar(new r0(n))}class QC{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=ju(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,xt).pipe((0,We.U)(u=>this.createUrlTree($i(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(it(u=>{if(u instanceof r0)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Kp?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,xt).pipe((0,We.U)(s=>this.createUrlTree($i(s),e.queryParams,e.fragment))).pipe(it(s=>{throw s instanceof Kp?this.noMatchError(s):s}))}noMatchError(e){return new f.vHH(4002,Rh)}createUrlTree(e,t,r){const s=jc(e);return new Ma(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,We.U)(u=>new $t([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Jt.D)(s).pipe(Ee(u=>{const l=r.children[u],m=ri(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,We.U)(v=>({segment:v,outlet:u})))}),At((u,l)=>(u[l.outlet]=l.segment,u),{}),wn())}expandSegment(e,t,r,s,u,l){return(0,Jt.D)(r).pipe(Ee(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(it(I=>{if(I instanceof Kp)return tt(null);throw I}))),te(m=>!!m),it((m,v)=>{if($p(m))return n0(t,s,u)?tt(new $t([],{})):Nh(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return py(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):Nh(t):Nh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?s0(u):this.lineralizeSegments(r,u).pipe((0,D.z)(l=>{const m=new $t(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:v,remainingSegments:I,positionalParamSegments:A}=Mr(t,s,u);if(!m)return Nh(t);const M=this.applyRedirectCommands(v,s.redirectTo,A);return s.redirectTo.startsWith("/")?s0(M):this.lineralizeSegments(s,M).pipe((0,D.z)(L=>this.expandSegment(e,t,r,L.concat(I),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=g(r,e),r.loadChildren?(r._loadedRoutes?tt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,We.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new $t(s,{})))):tt(new $t(s,{}))):qp(t,r,s,e).pipe(pn(({matched:l,consumedSegments:m,remainingSegments:v})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,D.z)(A=>{const M=A.injector??e,L=A.routes,{segmentGroup:H,slicedSegments:Z}=ju(t,m,v,L),Ce=new $t(H.segments,H.children);if(0===Z.length&&Ce.hasChildren())return this.expandChildren(M,L,Ce).pipe((0,We.U)(dt=>new $t(m,dt)));if(0===L.length&&0===Z.length)return tt(new $t(m,{}));const be=an(r)===u;return this.expandSegment(M,Ce,L,Z,be?xt:u,!0).pipe((0,We.U)(yt=>new $t(m.concat(yt.segments),yt.children)))})):Nh(t)))}getChildConfig(e,t,r){return t.children?tt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?tt({routes:t._loadedRoutes,injector:t._loadedInjector}):function WC(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?tt(!0):tt(s.map(l=>{const m=Uu(l,n);return ji(function ly(n){return n&&Bu(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(dd(),ii())}(e,t,r).pipe((0,D.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Ne.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function hd(n){return Ar(Sh(Rh,3))}())):tt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return tt(r);if(s.numberOfChildren>1||!s.children[xt])return Ar(new f.vHH(4e3,Rh));s=s.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Ma(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Zn(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return Zn(t.children,(m,v)=>{l[v]=this.createSegmentGroup(e,m,r,s)}),new $t(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new f.vHH(4001,Rh);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class xM{}class qo{constructor(e,t,r,s,u,l,m,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=m,this.urlSerializer=v}recognize(){const e=ju(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,xt).pipe((0,We.U)(t=>{if(null===t)return null;const r=new vr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new ni(r,t),u=new sd(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=qc(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,Jt.D)(Object.keys(r.children)).pipe(Ee(s=>{const u=r.children[s],l=ri(t,s);return this.processSegmentGroup(e,l,u,s)}),At((s,u)=>s&&u?(s.push(...u),s):null),function lr(n,e=!1){return(0,Un.e)((t,r)=>{let s=0;t.subscribe((0,Rn.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),x(null),wn(),(0,We.U)(s=>{if(null===s)return null;const u=_y(s);return function my(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,Jt.D)(t).pipe(Ee(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),te(l=>!!l),it(l=>{if($p(l))return n0(r,s,u)?tt([]):tt(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!py(t,r,s,u))return tt(null);let l;if("**"===t.path){const m=s.length>0?wp(s).parameters:{},v=a0(r)+s.length;l=tt({snapshot:new vr(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Zp(t),an(t),t.component??t._loadedComponent??null,t,fd(r),v,Yp(t),v),consumedSegments:[],remainingSegments:[]})}else l=qp(r,t,s,e).pipe((0,We.U)(({matched:m,consumedSegments:v,remainingSegments:I,parameters:A})=>{if(!m)return null;const M=a0(r)+v.length;return{snapshot:new vr(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Zp(t),an(t),t.component??t._loadedComponent??null,t,fd(r),M,Yp(t),M),consumedSegments:v,remainingSegments:I}}));return l.pipe(pn(m=>{if(null===m)return tt(null);const{snapshot:v,consumedSegments:I,remainingSegments:A}=m;e=t._injector??e;const M=t._loadedInjector??e,L=function yy(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:H,slicedSegments:Z}=ju(r,I,A,L.filter(be=>void 0===be.redirectTo),this.relativeLinkResolution);if(0===Z.length&&H.hasChildren())return this.processChildren(M,L,H).pipe((0,We.U)(be=>null===be?null:[new ni(v,be)]));if(0===L.length&&0===Z.length)return tt([new ni(v,[])]);const Ce=an(t)===u;return this.processSegment(M,L,H,Z,Ce?xt:u).pipe((0,We.U)(be=>null===be?null:[new ni(v,be)]))}))}}function XC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function _y(n){const e=[],t=new Set;for(const r of n){if(!XC(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=_y(r.children);e.push(new ni(r.value,s))}return e.filter(r=>!t.has(r))}function fd(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function a0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Zp(n){return n.data||{}}function Yp(n){return n.resolve||{}}function Qp(n){return"string"==typeof n.title||null===n.title}function wy(n){return pn(e=>{const t=n(e);return t?(0,Jt.D)(t).pipe((0,We.U)(()=>e)):tt(e)})}let d0=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===xt);return r}getResolvedTitleForRoute(t){return t.data[Bi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(h0)},providedIn:"root"}),n})(),h0=(()=>{class n extends d0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(rs))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class nD{}class f0 extends class rD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const kh=new f.OlP("",{providedIn:"root",factory:()=>({})}),Iy=new f.OlP("ROUTES");let by=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return tt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ji(t.loadComponent()).pipe((0,Ne.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Ms(()=>{this.componentLoaders.delete(t)})),s=new Ui(r,()=>new cr.x).pipe(xs());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,We.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,I,A=!1;Array.isArray(m)?I=m:(v=m.create(t).injector,I=vp(v.get(Iy,[],f.XFs.Self|f.XFs.Optional)));return{routes:I.map(gt),injector:v}}),Ms(()=>{this.childrenLoaders.delete(r)})),l=new Ui(u,()=>new cr.x).pipe(xs());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return ji(t()).pipe((0,D.z)(r=>r instanceof f.YKP||Array.isArray(r)?tt(r):(0,Jt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class p0{}class g0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function m0(n){throw n}function y0(n,e,t){return e.parse("/")}const iD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function _0(){const n=(0,f.f3M)(_h),e=(0,f.f3M)(ud),t=(0,f.f3M)(xe),r=(0,f.f3M)(f.zs3),s=(0,f.f3M)(f.Sil),u=(0,f.f3M)(Iy,{optional:!0})??[],l=(0,f.f3M)(kh,{optional:!0})??{},m=(0,f.f3M)(h0),v=(0,f.f3M)(d0,{optional:!0}),I=(0,f.f3M)(p0,{optional:!0}),A=(0,f.f3M)(nD,{optional:!0}),M=new Rr(null,n,e,t,r,s,vp(u));return I&&(M.urlHandlingStrategy=I),A&&(M.routeReuseStrategy=A),M.titleStrategy=v??m,function Xp(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,M),M}let Rr=(()=>{class n{constructor(t,r,s,u,l,m,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new cr.x,this.errorHandler=m0,this.malformedUriErrorHandler=y0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>tt(void 0),this.urlHandlingStrategy=new g0,this.routeReuseStrategy=new f0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(by),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new Pp(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new Op(L)),this.ngModule=l.get(f.h0i),this.console=l.get(f.c2e);const M=l.get(f.R0b);this.isNgZoneEnabled=M instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function Ep(){return new Ma(new $t([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Lu(this.currentUrlTree,this.rootComponentType),this.transitions=new _n({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(C(s=>0!==s.id),(0,We.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),pn(s=>{let u=!1,l=!1;return tt(s).pipe((0,Ne.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pn(m=>{const v=this.browserUrlTree.toString(),I=!this.navigated||m.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Cy(m.source)&&(this.browserUrlTree=m.extractedUrl),tt(m).pipe(pn(M=>{const L=this.transitions.getValue();return r.next(new Jl(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?ss.E:Promise.resolve(M)}),function JC(n,e,t,r){return pn(s=>function Ba(n,e,t,r,s){return new QC(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,We.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ne.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},s.urlAfterRedirects=M.urlAfterRedirects}),function c0(n,e,t,r,s,u){return(0,D.z)(l=>function MM(n,e,t,r,s,u,l="emptyOnly",m="legacy"){return new qo(n,e,t,r,s,l,m,u).recognize().pipe(pn(v=>null===v?function o0(n){return new Mn.y(e=>e.error(n))}(new xM):tt(v)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,s,u).pipe((0,We.U)(m=>({...l,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ne.b)(M=>{if(s.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(H,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new sy(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:H,source:Z,restoredState:Ce,extras:be}=m,Ye=new Jl(L,this.serializeUrl(H),Z,Ce);r.next(Ye);const yt=Lu(H,this.rootComponentType).snapshot;return tt(s={...m,targetSnapshot:yt,urlAfterRedirects:H,extras:{...be,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),ss.E}),(0,Ne.b)(m=>{const v=new ed(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),(0,We.U)(m=>s={...m,guards:Hp(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function jC(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?tt({...t,guardsResult:!0}):function HC(n,e,t,r){return(0,Jt.D)(n).pipe((0,D.z)(s=>function qC(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?tt(u.map(m=>{const v=Va(e)??s,I=Uu(m,v);return ji(function Mh(n){return n&&Bu(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):v.runInContext(()=>I(n,e,t,r))).pipe(te())})).pipe(dd()):tt(!0)}(s.component,s.route,t,e,r)),te(s=>!0!==s,!0))}(l,r,s,n).pipe((0,D.z)(m=>m&&function Jw(n){return"boolean"==typeof n}(m)?function hy(n,e,t,r){return(0,Jt.D)(e).pipe(Ee(s=>Fi(function GC(n,e){return null!==n&&e&&e(new Fp(n)),tt(!0)}(s.route.parent,r),function $C(n,e){return null!==n&&e&&e(new td(n)),tt(!0)}(s.route,r),function Xw(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function cy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>$r(()=>tt(l.guards.map(v=>{const I=Va(l.node)??t,A=Uu(v,I);return ji(function dy(n){return n&&Bu(n.canActivateChild)}(A)?A.canActivateChild(r,n):I.runInContext(()=>A(r,n))).pipe(te())})).pipe(dd())));return tt(u).pipe(dd())}(n,s.path,t),function zC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return tt(!0);const s=r.map(u=>$r(()=>{const l=Va(e)??t,m=Uu(u,l);return ji(function VC(n){return n&&Bu(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(te())}));return tt(s).pipe(dd())}(n,s.route,t))),te(s=>!0!==s,!0))}(r,u,n,e):tt(m)),(0,We.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Ne.b)(m=>{if(s.guardsResult=m.guardsResult,Ho(m.guardsResult))throw Go(0,m.guardsResult);const v=new Yw(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(v)}),C(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),wy(m=>{if(m.guards.canActivateChecks.length)return tt(m).pipe((0,Ne.b)(v=>{const I=new Fu(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}),pn(v=>{let I=!1;return tt(v).pipe(function RM(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return tt(t);let u=0;return(0,Jt.D)(s).pipe(Ee(l=>function pd(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!Qp(s)&&(u[Bi]=s.title),function vy(n,e,t,r){const s=function l0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return tt({});const u={};return(0,Jt.D)(s).pipe((0,D.z)(l=>function tD(n,e,t,r){const s=Va(e)??r,u=Uu(n,s);return ji(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(te(),(0,Ne.b)(m=>{u[l]=m}))),pt(1),so(u),it(l=>$p(l)?ss.E:Ar(l)))}(u,n,e,r).pipe((0,We.U)(l=>(n._resolvedData=l,n.data=qc(n,t).resolve,s&&Qp(s)&&(n.data[Bi]=s.title),null)))}(l.route,r,n,e)),(0,Ne.b)(()=>u++),pt(1),(0,D.z)(l=>u===s.length?tt(t):ss.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ne.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,Ne.b)(v=>{const I=new Ch(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}))}),wy(m=>{const v=I=>{const A=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,Ne.b)(M=>{I.component=M}),(0,We.U)(()=>{})));for(const M of I.children)A.push(...v(M));return A};return Uo(v(m.targetSnapshot.root)).pipe(x(),Zt(1))}),wy(()=>this.afterPreactivation()),(0,We.U)(m=>{const v=function ir(n,e,t){const r=Fa(n,e._root,t?t._root:void 0);return new Vp(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return s={...m,targetRouterState:v}}),(0,Ne.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,We.U)(r=>(new Zc(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Ne.b)({next(){u=!0},complete(){u=!0}}),Ms(()=>{u||l||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),it(m=>{if(l=!0,Bp(m)){od(m)||(this.navigated=!0,this.restoreHistory(s,!0));const v=new Xl(s.id,this.serializeUrl(s.extractedUrl),m.message,m.cancellationCode);if(r.next(v),od(m)){const I=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Cy(s.source)};this.scheduleNavigation(I,"imperative",null,A,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const v=new kp(s.id,this.serializeUrl(s.extractedUrl),m,s.targetSnapshot??void 0);r.next(v);try{s.resolve(this.errorHandler(m))}catch(I){s.reject(I)}}return ss.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(gt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:v}=r,I=s||this.routerState.root,A=v?this.currentUrlTree.fragment:l;let M=null;switch(m){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),Zw(I,this.currentUrlTree,t,M,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Ho(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function v0(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...iD}:!1===r?{...kM}:r,Ho(t))return Xm(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Xm(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Pa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,v,I;l?(m=l.resolve,v=l.reject,I=l.promise):I=new Promise((L,H)=>{m=L,v=H});const A=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),M=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:A,targetPageId:M,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:v,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new Xl(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return _0()},providedIn:"root"}),n})();function Cy(n){return"imperative"!==n}class Dy{}let Ty=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(C(t=>t instanceof Pa),Ee(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Jt.D)(s).pipe((0,Nu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):tt(null);const u=s.pipe((0,D.z)(l=>null===l?tt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Jt.D)([u,l]).pipe((0,Nu.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Rr),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(Dy),f.LFG(by))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Yc=new f.OlP("");let E0=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Gc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Qc(n,e){return{\u0275kind:n,\u0275providers:e}}function Fh(n){return[{provide:Iy,multi:!0,useValue:n}]}function aD(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Rr),s=n.get(Sy);1===n.get(Ay)&&r.initialNavigation(),n.get(ks,null,f.XFs.Optional)?.setUpPreloading(),n.get(Yc,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.next(),s.complete()}}const Sy=new f.OlP("",{factory:()=>new cr.x}),Ay=new f.OlP("",{providedIn:"root",factory:()=>1});const ks=new f.OlP("");function lD(n){return Qc(0,[{provide:ks,useExisting:Ty},{provide:Dy,useExisting:n}])}const C0=new f.OlP("ROUTER_FORROOT_GUARD"),hD=[xe,{provide:_h,useClass:ql},{provide:Rr,useFactory:_0},ud,{provide:$o,useFactory:function I0(n){return n.routerState.root},deps:[Rr]},by];function D0(){return new f.PXZ("Router",Rr)}let ig=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[hD,[],Fh(t),{provide:C0,useFactory:T0,deps:[[Rr,new f.FiY,new f.tp0]]},{provide:kh,useValue:r||{}},r?.useHash?{provide:me,useClass:ot}:{provide:me,useClass:Je},{provide:Yc,useFactory:()=>{const n=(0,f.f3M)(Rr),e=(0,f.f3M)(ru),t=(0,f.f3M)(kh);return t.scrollOffset&&e.setOffset(t.scrollOffset),new E0(n,e,t)}},r?.preloadingStrategy?lD(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:D0},r?.initialNavigation?S0(r):[],[{provide:xy,useFactory:aD},{provide:f.tb,multi:!0,useExisting:xy}]]}}static forChild(t){return{ngModule:n,providers:[Fh(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(C0,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[h]}),n})();function T0(n){return"guarded"}function S0(n){return["disabled"===n.initialNavigation?Qc(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Rr);return()=>{e.setUpLocationChangeListener()}}},{provide:Ay,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Qc(2,[{provide:Ay,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const l=e.get(Rr),m=e.get(Sy);(function s(u){e.get(Rr).events.pipe(C(m=>m instanceof Pa||m instanceof Xl||m instanceof kp),(0,We.U)(m=>m instanceof Pa||m instanceof Xl&&(0===m.code||1===m.code)&&null),C(m=>null!==m),Zt(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),l.afterPreactivation=()=>(u(!0),r||m.closed?tt(void 0):m),l.initialNavigation()}))}}]).\u0275providers:[]]}const xy=new f.OlP("");class My{}class A0{}class Ko{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ko?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ko;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ko?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(m=>-1===u.indexOf(m)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class mD{encodeKey(e){return Hu(e)}encodeValue(e){return Hu(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const x0=/%(\d[a-f0-9])/gi,M0={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Hu(n){return encodeURIComponent(n).replace(x0,(e,t)=>M0[t]??e)}function sg(n){return`${n}`}class Zo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new mD,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function VM(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,m]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],v=t.get(l)||[];v.push(m),t.set(l,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(sg):[sg(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Zo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(sg(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(sg(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class yD{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function _D(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function vD(n){return typeof Blob<"u"&&n instanceof Blob}function N0(n){return typeof FormData<"u"&&n instanceof FormData}class og{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function UM(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Ko),this.context||(this.context=new yD),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+l}}else this.params=new Zo,this.urlWithParams=t}serializeBody(){return null===this.body?null:_D(this.body)||vD(this.body)||N0(this.body)||function k0(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Zo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||N0(this.body)?null:vD(this.body)?this.body.type||null:_D(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Zo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,I=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((M,L)=>M.set(L,e.setHeaders[L]),v)),e.setParams&&(I=Object.keys(e.setParams).reduce((M,L)=>M.set(L,e.setParams[L]),I)),new og(t,r,u,{params:I,headers:v,context:A,reportProgress:m,responseType:s,withCredentials:l})}}var dr=(()=>((dr=dr||{})[dr.Sent=0]="Sent",dr[dr.UploadProgress=1]="UploadProgress",dr[dr.ResponseHeader=2]="ResponseHeader",dr[dr.DownloadProgress=3]="DownloadProgress",dr[dr.Response=4]="Response",dr[dr.User=5]="User",dr))();class $u{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ko,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ry extends $u{constructor(e={}){super(e),this.type=dr.ResponseHeader}clone(e={}){return new Ry({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Lh extends $u{constructor(e={}){super(e),this.type=dr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Lh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Vh extends $u{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ny(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ky=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof og)u=t;else{let v,I;v=s.headers instanceof Ko?s.headers:new Ko(s.headers),s.params&&(I=s.params instanceof Zo?s.params:new Zo({fromObject:s.params})),u=new og(t,r,void 0!==s.body?s.body:null,{headers:v,context:s.context,params:I,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=tt(u).pipe(Ee(v=>this.handler.handle(v)));if(t instanceof og||"events"===s.observe)return l;const m=l.pipe(C(v=>v instanceof Lh));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,We.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return m.pipe((0,We.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return m.pipe((0,We.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return m.pipe((0,We.U)(v=>v.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Zo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,Ny(s,r))}post(t,r,s={}){return this.request("POST",t,Ny(s,r))}put(t,r,s={}){return this.request("PUT",t,Ny(s,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(My))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class O0{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const P0=new f.OlP("HTTP_INTERCEPTORS");let wD=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const CD=/^\)\]\}',?\n/;let Jc=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Mn.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((H,Z)=>s.setRequestHeader(H,Z.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const H=t.detectContentTypeHeader();null!==H&&s.setRequestHeader("Content-Type",H)}if(t.responseType){const H=t.responseType.toLowerCase();s.responseType="json"!==H?H:"text"}const u=t.serializeBody();let l=null;const m=()=>{if(null!==l)return l;const H=s.statusText||"OK",Z=new Ko(s.getAllResponseHeaders()),Ce=function $M(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return l=new Ry({headers:Z,status:s.status,statusText:H,url:Ce}),l},v=()=>{let{headers:H,status:Z,statusText:Ce,url:be}=m(),Ye=null;204!==Z&&(Ye=typeof s.response>"u"?s.responseText:s.response),0===Z&&(Z=Ye?200:0);let yt=Z>=200&&Z<300;if("json"===t.responseType&&"string"==typeof Ye){const dt=Ye;Ye=Ye.replace(CD,"");try{Ye=""!==Ye?JSON.parse(Ye):null}catch(ut){Ye=dt,yt&&(yt=!1,Ye={error:ut,text:Ye})}}yt?(r.next(new Lh({body:Ye,headers:H,status:Z,statusText:Ce,url:be||void 0})),r.complete()):r.error(new Vh({error:Ye,headers:H,status:Z,statusText:Ce,url:be||void 0}))},I=H=>{const{url:Z}=m(),Ce=new Vh({error:H,status:s.status||0,statusText:s.statusText||"Unknown Error",url:Z||void 0});r.error(Ce)};let A=!1;const M=H=>{A||(r.next(m()),A=!0);let Z={type:dr.DownloadProgress,loaded:H.loaded};H.lengthComputable&&(Z.total=H.total),"text"===t.responseType&&!!s.responseText&&(Z.partialText=s.responseText),r.next(Z)},L=H=>{let Z={type:dr.UploadProgress,loaded:H.loaded};H.lengthComputable&&(Z.total=H.total),r.next(Z)};return s.addEventListener("load",v),s.addEventListener("error",I),s.addEventListener("timeout",I),s.addEventListener("abort",I),t.reportProgress&&(s.addEventListener("progress",M),null!==u&&s.upload&&s.upload.addEventListener("progress",L)),s.send(u),r.next({type:dr.Sent}),()=>{s.removeEventListener("error",I),s.removeEventListener("abort",I),s.removeEventListener("load",v),s.removeEventListener("timeout",I),t.reportProgress&&(s.removeEventListener("progress",M),null!==u&&s.upload&&s.upload.removeEventListener("progress",L)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(qs))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ag=new f.OlP("XSRF_COOKIE_NAME"),ug=new f.OlP("XSRF_HEADER_NAME");class Uh{}let ho=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=sa(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue),f.LFG(f.Lbi),f.LFG(ag))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),cg=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Uh),f.LFG(ug))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),DD=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(P0,[]);this.chain=r.reduceRight((s,u)=>new O0(s,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(A0),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Oy=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:cg,useClass:wD}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:ag,useValue:t.cookieName}:[],t.headerName?{provide:ug,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[cg,{provide:P0,useExisting:cg,multi:!0},{provide:Uh,useClass:ho},{provide:ag,useValue:"XSRF-TOKEN"},{provide:ug,useValue:"X-XSRF-TOKEN"}]}),n})(),U0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[ky,{provide:My,useClass:DD},Jc,{provide:A0,useExisting:Jc}],imports:[Oy.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),lg=(()=>{class n{constructor(t){this._http=t,this._menuBibliajsonURL="assets/menuBiblia.json",this._bibliajsonURL="assets/biblia.json"}getMenuBiblia(){return this._http.get(this._menuBibliajsonURL)}getBiblia(t){return this._http.get(this._bibliajsonURL).pipe((0,We.U)(r=>this.handlerBookChapter(r,t)))}handlerBookChapter(t,r){const s=t.find(u=>u.name===r.livro);return{name:s?.name||"G\xeanesis",chapter:s?.chapters[r.chapter||0]||[]}}saveLastSelectedBook(t){window.localStorage.setItem("lastBook",JSON.stringify(t))}getLastSelectedBook(){const t=window.localStorage.getItem("lastBook");return t?JSON.parse(t):null}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ky))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),TD=(()=>{class n{constructor(t){this._bibliaService=t}resolve(){return this._bibliaService.getMenuBiblia()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(lg))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();var ja=(()=>{return(n=ja||(ja={})).DARK="dark",n.LIGTH="ligth",ja;var n})();let gd=(()=>{class n{constructor(){this.themeSubject=new _n(this.getThemeLocalStorage())}changeTheme(t){this.setThemeLocalStorage(t),this.themeSubject.next(t)}getTheme(){return this.themeSubject.asObservable()}setThemeLocalStorage(t){window.localStorage.setItem("theme",t)}getThemeLocalStorage(){return window.localStorage.getItem("theme")||ja.LIGTH}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var md=O(4986);function dg(n,e=md.z){return(0,Un.e)((t,r)=>{let s=null,u=null,l=null;const m=()=>{if(s){s.unsubscribe(),s=null;const I=u;u=null,r.next(I)}};function v(){const I=l+n,A=e.now();if(A<I)return s=this.schedule(void 0,I-A),void r.add(s);m()}t.subscribe((0,Rn.x)(r,I=>{u=I,l=e.now(),s||(s=e.schedule(v,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}function Py(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",11)(1,"p"),f._uU(2,"Livros"),f.qZA(),f.TgZ(3,"input",12),f.NdJ("input",function(s){f.CHM(t);const u=f.oxw();return f.KtG(u.searchBooks(s.target))}),f.qZA()()}}function GM(n,e){1&n&&f._UZ(0,"img",16)}function SD(n,e){1&n&&f._UZ(0,"img",17)}function AD(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",13)(1,"p"),f._uU(2,"Capt\xfalos"),f.qZA(),f.TgZ(3,"p",10),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.comeBack())}),f.YNc(4,GM,1,0,"img",14),f.YNc(5,SD,1,0,"img",15),f._uU(6," Voltar "),f.qZA()()}if(2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngIf","dark"===t.theme),f.xp6(1),f.Q6J("ngIf","ligth"===t.theme)}}function xD(n,e){1&n&&f._UZ(0,"img",21)}function MD(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",19),f.NdJ("click",function(){const u=f.CHM(t).$implicit,l=f.oxw(2);return f.KtG(l.selectBook(u.livro))}),f._uU(1),f.YNc(2,xD,1,0,"img",20),f.qZA()}if(2&n){const t=e.$implicit,r=f.oxw(2);f.xp6(1),f.hij(" ",t.livro," "),f.xp6(1),f.Q6J("ngIf",r.livroSelected.livro===t.livro)}}function j0(n,e){if(1&n&&(f.ynx(0),f.YNc(1,MD,3,2,"div",18),f.BQk()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngForOf",t.filterBooks())}}function zM(n,e){1&n&&f._UZ(0,"img",21)}function RD(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",24),f.NdJ("click",function(){const u=f.CHM(t).$implicit,l=f.oxw(3);return f.KtG(l.selectChapter(u.chapterNumber))}),f._uU(1),f.YNc(2,zM,1,0,"img",20),f.qZA()}if(2&n){const t=e.$implicit,r=f.oxw(3);f.xp6(1),f.hij(" ",t.chapterNumber+1," "),f.xp6(1),f.Q6J("ngIf",r.livroSelected.chapter===t.chapterNumber)}}function qM(n,e){if(1&n&&(f.ynx(0),f.YNc(1,RD,3,2,"div",23),f.BQk()),2&n){const t=f.oxw(2);f.xp6(1),f.Q6J("ngForOf",t.chapters)}}function H0(n,e){if(1&n&&f.YNc(0,qM,2,1,"ng-container",22),2&n){const t=f.oxw();f.Q6J("ngIf",t.showCapters)}}const Fy=function(n){return{rotate:n}};function ND(n,e){if(1&n&&f._UZ(0,"img",25),2&n){const t=f.oxw();f.Q6J("ngClass",f.VKq(1,Fy,t.expanded))}}function Ly(n,e){if(1&n&&f._UZ(0,"img",26),2&n){const t=f.oxw();f.Q6J("ngClass",f.VKq(1,Fy,t.expanded))}}function WM(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",27),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.changeTheme(s.eTheme.DARK))}),f._UZ(1,"img",28),f.qZA()}}function KM(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",27),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.changeTheme(s.eTheme.LIGTH))}),f._UZ(1,"img",29),f.qZA()}}const ZM=function(n,e){return{dark:n,"expanded-menu":e}},kD=function(n){return{dark:n}};let YM=(()=>{class n{constructor(t){this._themeService=t,this._subs=[],this.theme=ja.LIGTH,this.menuBiblia=[],this.chapters=[],this.versesNumber=[],this.eTheme=ja,this.onSelectedLivro=new f.vpe,this.onChangeFontSize=new f.vpe,this._debounceSearch=new cr.x,this.livroSelected={livro:null,chapter:null,verse:null,size:16},this.expanded=!1,this.showCapters=!1,this.maxFontSize=24,t.getTheme().subscribe({next:r=>this.theme=r,error:r=>console.error("Get theme not found!!!")})}ngOnInit(){this._subs.push(this._debounceSearch.pipe(dg(800)).subscribe(t=>this._searchText=t))}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe())}expandedMenu(){this.expanded=!this.expanded}selectBook(t){this.livroSelected={chapter:this.livroSelected.livro===t?this.livroSelected.chapter:0,livro:t,verse:null,size:this.livroSelected.size},this.chapters=this.menuBiblia.find(r=>r.livro===t)?.chapter||[],this.onSelectedLivro.next(this.livroSelected),this.showCapters=!0}selectChapter(t){this.livroSelected.chapter=t,this.livroSelected={...this.livroSelected,chapter:t,verse:null},this.versesNumber=this.chapters[t].versesNumber,this.onSelectedLivro.next(this.livroSelected)}selectVerse(t){this.livroSelected={...this.livroSelected,verse:t},this.onSelectedLivro.next(this.livroSelected)}comeBack(){this.showCapters=!1}changeTheme(t){this._themeService.changeTheme(t)}plusSize(){this.livroSelected.size!==this.maxFontSize&&(this.livroSelected.size+=1,this.onChangeFontSize.emit(this.livroSelected.size))}anyLessSize(){16!==this.livroSelected.size&&(this.livroSelected.size-=1,this.onChangeFontSize.emit(this.livroSelected.size))}searchBooks(t){this._debounceSearch.next(t.value)}filterBooks(){return this._searchText?this.menuBiblia.filter(t=>t.livro.toLocaleUpperCase().includes(this._searchText.toLocaleUpperCase())):this.menuBiblia}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gd))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-menu"]],inputs:{menuBiblia:"menuBiblia",livroSelected:"livroSelected"},outputs:{onSelectedLivro:"onSelectedLivro",onChangeFontSize:"onChangeFontSize"},decls:18,vars:24,consts:[[1,"livros-chapters",3,"ngClass"],["class","livros",4,"ngIf","ngIfElse"],["chaptersTemplate",""],[1,"cards",3,"ngClass"],[4,"ngIf","ngIfElse"],["chapterTemplate",""],[1,"btn","book",3,"ngClass","click"],["src","assets/img/menu_open_black.svg","alt","Book image",3,"ngClass",4,"ngIf"],["src","assets/img/menu_open_ligth.svg","alt","Book image",3,"ngClass",4,"ngIf"],["class","btn theme",3,"click",4,"ngIf"],[3,"click"],[1,"livros"],["type","text","placeholder","Buscar livro...",3,"input"],[1,"chapters"],["src","assets/img/caret-left-bold-ligth.svg","alt","Icone para voltar aos livros",4,"ngIf"],["src","assets/img/caret-left-bold.svg","alt","Icone para voltar aos livros",4,"ngIf"],["src","assets/img/caret-left-bold-ligth.svg","alt","Icone para voltar aos livros"],["src","assets/img/caret-left-bold.svg","alt","Icone para voltar aos livros"],["class","card",3,"click",4,"ngFor","ngForOf"],[1,"card",3,"click"],["src","assets/img/mark.svg","alt","Marcador",4,"ngIf"],["src","assets/img/mark.svg","alt","Marcador"],[4,"ngIf"],["class","card chapter",3,"click",4,"ngFor","ngForOf"],[1,"card","chapter",3,"click"],["src","assets/img/menu_open_black.svg","alt","Book image",3,"ngClass"],["src","assets/img/menu_open_ligth.svg","alt","Book image",3,"ngClass"],[1,"btn","theme",3,"click"],["src","assets/img/moon.svg","alt","Theme dark"],["src","assets/img/sun.svg","alt","Theme dark"]],template:function(t,r){if(1&t&&(f.TgZ(0,"div",0),f.YNc(1,Py,4,0,"div",1),f.YNc(2,AD,7,2,"ng-template",null,2,f.W1O),f.TgZ(4,"div",3),f.YNc(5,j0,2,1,"ng-container",4),f.YNc(6,H0,1,1,"ng-template",null,5,f.W1O),f.qZA()(),f.TgZ(8,"div",6),f.NdJ("click",function(){return r.expandedMenu()}),f._uU(9," MENU "),f.YNc(10,ND,1,3,"img",7),f.YNc(11,Ly,1,3,"img",8),f.qZA(),f.YNc(12,WM,2,0,"div",9),f.YNc(13,KM,2,0,"div",9),f.TgZ(14,"div",10),f.NdJ("click",function(){return r.plusSize()}),f._uU(15,"A+"),f.qZA(),f.TgZ(16,"div",10),f.NdJ("click",function(){return r.anyLessSize()}),f._uU(17,"a-"),f.qZA()),2&t){const s=f.MAs(3),u=f.MAs(7);f.Q6J("ngClass",f.WLB(17,ZM,"dark"===r.theme,r.expanded)),f.xp6(1),f.Q6J("ngIf",!r.showCapters)("ngIfElse",s),f.xp6(3),f.Q6J("ngClass",f.VKq(20,kD,"dark"===r.theme)),f.xp6(1),f.Q6J("ngIf",!r.showCapters)("ngIfElse",u),f.xp6(3),f.Q6J("ngClass",f.VKq(22,kD,"dark"===r.theme)),f.xp6(2),f.Q6J("ngIf","ligth"===r.theme),f.xp6(1),f.Q6J("ngIf","dark"===r.theme),f.xp6(1),f.Q6J("ngIf","ligth"===r.theme),f.xp6(1),f.Q6J("ngIf","dark"===r.theme),f.xp6(1),f.Gre("btn plus ",r.theme,""),f.xp6(2),f.Gre("btn anyLess ",r.theme,"")}},dependencies:[on,ys,qn],styles:[".livros-chapters[_ngcontent-%COMP%]{width:0;position:fixed;bottom:0;right:0;height:100%;overflow-y:auto;overflow-x:hidden;background-color:#3aa3ff;transition-duration:.3s;transition-property:transform;transition:all .5s cubic-bezier(.75,-.02,.2,.97)}.livros-chapters[_ngcontent-%COMP%]   .livros[_ngcontent-%COMP%]{margin-bottom:1rem}.livros-chapters[_ngcontent-%COMP%]   .livros[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500}.livros-chapters[_ngcontent-%COMP%]   .livros[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.livros-chapters[_ngcontent-%COMP%]   .livros[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{margin-top:1rem;height:2rem;width:100%;padding:0 1rem;border-radius:16px;border:none;border:solid 1px rgba(95,95,95,.2)}.livros-chapters[_ngcontent-%COMP%]   .chapters[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.livros-chapters[_ngcontent-%COMP%]   .chapters[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;display:flex;align-items:center;cursor:pointer}.livros-chapters[_ngcontent-%COMP%]   .chapters[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5rem;margin-right:1rem}.livros-chapters.dark[_ngcontent-%COMP%]{background-color:#16213e}.livros-chapters.dark[_ngcontent-%COMP%]   .livros[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .livros-chapters.dark[_ngcontent-%COMP%]   .chapters[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fafafa}.livros-chapters.expanded-menu[_ngcontent-%COMP%]{width:100%;padding:1rem 3.5rem 1rem 1rem;transition:all .5s cubic-bezier(.75,-.02,.2,.97)}.livros-chapters[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:1rem;font-weight:500}.livros-chapters[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:rgba(215,212,212,.26);display:flex;justify-content:center;align-items:center;position:relative;border-radius:4px;height:4rem;cursor:pointer}.livros-chapters[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:-4px;right:5px;width:2rem}.livros-chapters[_ngcontent-%COMP%]   .cards.dark[_ngcontent-%COMP%]{color:#fafafa}.livros-chapters[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.livros-chapters[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fafafa}.btn[_ngcontent-%COMP%]{position:fixed;cursor:pointer;background:rgba(215,212,212,.5);display:flex;justify-content:center;align-items:center;width:2.5rem;height:2.5rem;border-radius:50%;right:.5rem;font-weight:600}.btn.theme[_ngcontent-%COMP%]{top:1rem}.btn.plus[_ngcontent-%COMP%]{top:4rem}.btn.anyLess[_ngcontent-%COMP%]{top:7rem}.btn.book[_ngcontent-%COMP%]{bottom:2.5rem;writing-mode:vertical-lr;text-orientation:upright;height:-moz-fit-content;height:fit-content;padding:.5rem 0;border-radius:4px}.btn.book[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:.5rem;width:2rem}.btn.book[_ngcontent-%COMP%]   .rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.btn.dark[_ngcontent-%COMP%]{color:#fafafa}"]}),n})();const QM=function(n){return{"font-size":n}};function JM(n,e){if(1&n&&(f.TgZ(0,"p",5),f._uU(1),f.qZA()),2&n){const t=e.$implicit,r=e.index,s=f.oxw(2);f.Q6J("id",s.book.name+r)("ngStyle",f.VKq(4,QM,s.bookSelected.size+"px")),f.xp6(1),f.AsE(" ",r+1,". ",t.verse," ")}}function XM(n,e){if(1&n&&(f.TgZ(0,"div"),f.ALo(1,"async"),f.TgZ(2,"div")(3,"p",2)(4,"span",3),f._uU(5),f.qZA()(),f.TgZ(6,"p",2)(7,"span"),f._uU(8),f.qZA()(),f.YNc(9,JM,2,6,"p",4),f.qZA()()),2&n){const t=f.oxw();f.Gre("book ",f.lcZ(1,6,t.themeService.getTheme()),""),f.xp6(5),f.hij(" ",t.book.name," "),f.xp6(3),f.hij(" Cap\xedtulo ",t.bookSelected.chapter?t.bookSelected.chapter+1:1," "),f.xp6(1),f.Q6J("ngForOf",t.book.chapter)}}const eR=[{path:"",resolve:{menuBiblia:TD},component:(()=>{class n{constructor(t,r,s){this._route=t,this._bibliaService=r,this.themeService=s,this.menuBiblia=[],this.bookSelected={livro:"G\xeanesis",chapter:0,verse:0,size:16}}ngOnInit(){this.menuBiblia=this._route.snapshot.data.menuBiblia||[];const t=this._bibliaService.getLastSelectedBook();t&&(this.bookSelected=t),this.getBook(this.bookSelected)}getBook(t){this._bibliaService.getBiblia(t).subscribe({next:r=>{this.book=r,this.bookSelected=t,this.saveLastSelectedBook()},error:r=>console.error("Livro N\xe3o encontrado!!!")})}bookChangeSelectedSize(t){this.bookSelected.size=t,this.saveLastSelectedBook()}saveLastSelectedBook(){this._bibliaService.saveLastSelectedBook(this.bookSelected)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($o),f.Y36(lg),f.Y36(gd))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:3,consts:[[3,"class",4,"ngIf"],[3,"menuBiblia","livroSelected","onSelectedLivro","onChangeFontSize"],[1,"book-name"],[1,"name"],["class","verse",3,"id","ngStyle",4,"ngFor","ngForOf"],[1,"verse",3,"id","ngStyle"]],template:function(t,r){1&t&&(f.YNc(0,XM,10,8,"div",0),f.TgZ(1,"app-menu",1),f.NdJ("onSelectedLivro",function(u){return r.getBook(u)})("onChangeFontSize",function(u){return r.bookChangeSelectedSize(u)}),f.qZA()),2&t&&(f.Q6J("ngIf",r.book),f.xp6(1),f.Q6J("menuBiblia",r.menuBiblia)("livroSelected",r.bookSelected))},dependencies:[ys,qn,Tl,YM,Xa],styles:[".book[_ngcontent-%COMP%]{display:flex;justify-content:center}.book.dark[_ngcontent-%COMP%]{color:#fafafa}.book[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:1rem}.book[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .book-name[_ngcontent-%COMP%]{text-align:center}.book[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .book-name[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:1rem;font-size:2.5rem}.book[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .verse[_ngcontent-%COMP%]{padding:.1rem 3rem .1rem .5rem}"]}),n})()}];let zu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[ig.forChild(eR),ig]}),n})(),a_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),sT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[a_]}),n})(),DE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[sT]}),n})(),_R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[TD,lg],imports:[Co,U0,DE,zu]}),n})();const SE=[{path:"",loadChildren:()=>_R},{path:"**",redirectTo:""}];let I_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[ig.forRoot(SE),ig]}),n})(),Yo=(()=>{class n{constructor(t){this.themeService=t}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gd))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:5,template:function(t,r){1&t&&(f.TgZ(0,"div"),f.ALo(1,"async"),f._UZ(2,"router-outlet"),f.qZA()),2&t&&f.Gre("content-body ",f.lcZ(1,3,r.themeService.getTheme()),"")},dependencies:[La,Xa],styles:[".content-body[_ngcontent-%COMP%]{width:100%;min-height:100vh}.content-body.dark[_ngcontent-%COMP%]{background:#2c3639}"]}),n})();var cT=O(1144);const lT=["addListener","removeListener"],Qo=["addEventListener","removeEventListener"],mo=["on","off"];function qi(n,e,t,r){if((0,_r.m)(t)&&(r=t,t=void 0),r)return qi(n,e,t).pipe(Lo(r));const[s,u]=function hT(n){return(0,_r.m)(n.addEventListener)&&(0,_r.m)(n.removeEventListener)}(n)?Qo.map(l=>m=>n[l](e,m,t)):function AE(n){return(0,_r.m)(n.addListener)&&(0,_r.m)(n.removeListener)}(n)?lT.map(b_(n,e)):function dT(n){return(0,_r.m)(n.on)&&(0,_r.m)(n.off)}(n)?mo.map(b_(n,e)):[];if(!s&&(0,cT.z)(n))return(0,D.z)(l=>qi(l,e,t))((0,Li.Xf)(n));if(!s)throw new TypeError("Invalid event target");return new Mn.y(l=>{const m=(...v)=>l.next(1<v.length?v:v[0]);return s(m),()=>u(m)})}function b_(n,e){return t=>r=>n[t](e,r)}var xE=O(5032);const Yu=new Mn.y(xE.Z);var al=O(6451);const RE={connector:()=>new cr.x};function NE(n,e=RE){const{connector:t}=e;return(0,Un.e)((r,s)=>{const u=t();(0,Li.Xf)(n(function fT(n){return new Mn.y(e=>n.subscribe(e))}(u))).subscribe(s),s.add(r.subscribe(u))})}function PE(n,e){return e?t=>Fi(e.pipe(Zt(1),function Mg(){return(0,Un.e)((n,e)=>{n.subscribe((0,Rn.x)(e,xE.Z))})}()),t.pipe(PE(n))):(0,D.z)((t,r)=>n(t,r).pipe(Zt(1),so(t)))}var FE=O(3532);const ul="Service workers are disabled or not supported by this browser";class af{constructor(e){if(this.serviceWorker=e,e){const r=qi(e,"controllerchange").pipe((0,We.U)(()=>e.controller)),u=Fi($r(()=>tt(e.controller)),r);this.worker=u.pipe(C(A=>!!A)),this.registration=this.worker.pipe(pn(()=>e.getRegistration()));const I=qi(e,"message").pipe((0,We.U)(A=>A.data)).pipe(C(A=>A&&A.type)).pipe(function OE(n){return n?e=>NE(n)(e):e=>function kE(n,e){const t=(0,_r.m)(n)?n:()=>n;return(0,_r.m)(e)?NE(e,{connector:t}):r=>new Ui(r,t)}(new cr.x)(e)}());I.connect(),this.events=I}else this.worker=this.events=this.registration=function UE(n){return $r(()=>Ar(new Error(n)))}(ul)}postMessage(e,t){return this.worker.pipe(Zt(1),(0,Ne.b)(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const s=this.waitForOperationCompleted(r),u=this.postMessage(e,t);return Promise.all([u,s]).then(([,l])=>l)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(C(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Zt(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(C(t=>t.nonce===e),Zt(1),(0,We.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let BE=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new cr.x,!t.isEnabled)return this.messages=Yu,this.notificationClicks=Yu,void(this.subscription=Yu);this.messages=this.sw.eventsOfType("PUSH").pipe((0,We.U)(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,We.U)(s=>s.data)),this.pushManager=this.sw.registration.pipe((0,We.U)(s=>s.pushManager));const r=this.pushManager.pipe(pn(s=>s.getSubscription()));this.subscription=(0,al.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(ul));const r={userVisibleOnly:!0};let s=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),u=new Uint8Array(new ArrayBuffer(s.length));for(let l=0;l<s.length;l++)u[l]=s.charCodeAt(l);return r.applicationServerKey=u,this.pushManager.pipe(pn(l=>l.subscribe(r)),Zt(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Zt(1),pn(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(ul))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(af))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),jE=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Yu,this.available=Yu,this.activated=Yu,void(this.unrecoverable=Yu);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(C(r=>"VERSION_READY"===r.type),(0,We.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(ul));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(ul));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(af))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ng{}const C_=new f.OlP("NGSW_REGISTER_SCRIPT");function HE(n,e,t,r){return()=>{if(!nu(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)s=t.registrationStrategy();else{const[l,...m]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(l){case"registerImmediately":s=tt(null);break;case"registerWithDelay":s=D_(+m[0]||0);break;case"registerWhenStable":s=m[0]?(0,al.T)($E(n),D_(+m[0])):$E(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(f.R0b).runOutsideAngular(()=>s.pipe(Zt(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(l=>console.error("Service worker registration failed with:",l))))}}function D_(n){return tt(null).pipe(function Rg(n,e=md.z){const t=function VE(n=0,e,t=md.P){let r=-1;return null!=e&&((0,FE.K)(e)?t=e:r=e),new Mn.y(s=>{let u=function LE(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let l=0;return t.schedule(function(){s.closed||(s.next(l++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(n,e);return PE(()=>t)}(n))}function $E(n){return n.get(f.z2F).isStable.pipe(C(t=>t))}function pT(n,e){return new af(nu(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let gT=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:C_,useValue:t},{provide:Ng,useValue:r},{provide:af,useFactory:pT,deps:[Ng,f.Lbi]},{provide:f.ip1,useFactory:HE,deps:[f.zs3,C_,Ng,f.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[BE,jE]}),n})();const T__firebase={projectId:"abibliadetodos",appId:"1:924239833288:web:f119f0c4d6724a49c39dfd",storageBucket:"abibliadetodos.appspot.com",locationId:"asia-northeast3",apiKey:"AIzaSyBsYTlialonV2bxqP0IPk8MJWOuOBu40E0",authDomain:"abibliadetodos.firebaseapp.com",messagingSenderId:"924239833288"};var Ci=O(2011),kg=O(5363),mT=O(6063);class yT extends cr.x{constructor(e=1/0,t=1/0,r=mT.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=l;v+=2)m=v;m&&r.splice(0,m+1)}}}var _T=O(3099);function GE(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,_T.B)({connector:()=>new yT(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function zE(n,e){return(0,_r.m)(e)?pn(()=>n,e):pn(()=>n)}var S_=O(9468),kn=O(5813);O(5867);var pe=O(5861),Jo=O(9681),Qu=O(4859),jt=O(2090),Ga=O(1877);const A_=new Map,IR={activated:!1,tokenObservers:[]},Ct={initialized:!1,enabled:!1};function kr(n){return A_.get(n)||IR}function Ps(n,e){A_.set(n,e)}function Fg(){return Ct}class YE{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new jt.BH,yield function QE(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new jt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ai=new jt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function x_(n){if(!kr(n).activated)throw ai.create("use-before-activation",{appName:n.name})}function M_(n,e){return R_.apply(this,arguments)}function R_(){return(R_=(0,pe.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const H=yield l.getHeartbeatsHeader();H&&(u["X-Firebase-Client"]=H)}const m={method:"POST",body:JSON.stringify(e),headers:u};let v,I;try{v=yield fetch(n,m)}catch(H){throw ai.create("fetch-network-error",{originalErrorMessage:null===(r=H)||void 0===r?void 0:r.message})}if(200!==v.status)throw ai.create("fetch-status-error",{httpStatus:v.status});try{I=yield v.json()}catch(H){throw ai.create("fetch-parse-error",{originalErrorMessage:null===(s=H)||void 0===s?void 0:s.message})}const A=I.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${I.ttl}`});const M=1e3*Number(A[1]),L=Date.now();return{token:I.token,expireTimeMillis:L+M,issuedAtTimeMillis:L}})).apply(this,arguments)}function MT(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const Td="firebase-app-check-store";let lf=null;function JE(){return lf||(lf=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(ai.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(Td,{keyPath:"compositeKey"})}}catch(r){e(ai.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),lf)}function Hg(){return(Hg=(0,pe.Z)(function*(n,e){const r=(yield JE()).transaction(Td,"readwrite"),u=r.objectStore(Td).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=v=>{l()},r.onerror=v=>{var I;m(ai.create("storage-set",{originalErrorMessage:null===(I=v.target.error)||void 0===I?void 0:I.message}))}})})).apply(this,arguments)}const Sd=new Ga.Yd("@firebase/app-check");function tI(n,e){return(0,jt.hl)()?function hf(n,e){return function XE(n,e){return Hg.apply(this,arguments)}(function eI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Sd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PT(){return Fg().enabled}function P_(){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,pe.Z)(function*(){const n=Fg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const LT={error:"UNKNOWN_ERROR"};function rI(n){return jt.US.encodeString(JSON.stringify(n),!1)}function Xu(n){return F_.apply(this,arguments)}function F_(){return(F_=(0,pe.Z)(function*(n,e=!1){const t=n.app;x_(t);const r=kr(t);let u,s=r.token;if(s&&!xd(s)&&(Ps(t,Object.assign(Object.assign({},r),{token:void 0})),s=void 0),!s){const v=yield r.cachedTokenPromise;v&&(xd(v)?s=v:yield tI(t,void 0))}if(!e&&s&&xd(s))return{token:s.token};let m,l=!1;if(PT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=M_(MT(t,yield P_()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const v=yield r.exchangeTokenPromise;return yield tI(t,v),Ps(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Sd.warn(v.message):Sd.error(v),u=v}return s?u?m=xd(s)?{token:s.token,internalError:u}:sI(u):(m={token:s.token},Ps(t,Object.assign(Object.assign({},r),{token:s})),yield tI(t,s)):m=sI(u),l&&U_(t,m),m})).apply(this,arguments)}function V_(n,e){const t=kr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ps(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function iI(n){const{app:e}=n,t=kr(e);let r=t.tokenRefresher;r||(r=function VT(n){const{app:e}=n;return new YE((0,pe.Z)(function*(){let r;if(r=kr(e).token?yield Xu(n,!0):yield Xu(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=kr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ps(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function U_(n,e){const t=kr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function xd(n){return n.expireTimeMillis-Date.now()>0}function sI(n){return{token:rI(LT),error:n}}class ff{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=kr(this.app);for(const t of e)V_(this.app,t.next);return Promise.resolve()}}const pI="app-check-internal";!function WT(){(0,Jo._registerComponent)(new Qu.wA("app-check",n=>function UT(n,e){return new ff(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(pI).initialize()})),(0,Jo._registerComponent)(new Qu.wA(pI,n=>function oI(n){return{getToken:e=>Xu(n,e),addTokenListener:e=>function L_(n,e,t,r){const{app:s}=n,u=kr(s),l={next:t,error:r,type:e};if(Ps(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,l]})),u.token&&xd(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),iI(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>iI(n))}(n,"INTERNAL",e),removeTokenListener:e=>V_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Jo.registerVersion)("@firebase/app-check","0.5.16")}();class zg{constructor(){return(0,kn.vb)("app-check")}}typeof window<"u"&&window;var mf=O(127);const qg=new f.OlP("angularfire2.auth.use-emulator"),wI=new f.OlP("angularfire2.auth.settings"),Z_=new f.OlP("angularfire2.auth.tenant-id"),Wg=new f.OlP("angularfire2.auth.langugage-code"),Y_=new f.OlP("angularfire2.auth.use-device-language"),Q_=new f.OlP("angularfire.auth.persistence"),J_=(n,e,t,r,s,u,l,m)=>(0,Ci.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=s,u&&v.useDeviceLanguage(),l)for(const[I,A]of Object.entries(l))v.settings[I]=A;return m&&v.setPersistence(m),v},[t,r,s,u,l,m]);let Kg=(()=>{class n{constructor(t,r,s,u,l,m,v,I,A,M,L,H){const Z=new cr.x,Ce=tt(void 0).pipe((0,kg.Q)(l.outsideAngular),pn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,1277)))),(0,We.U)(()=>(0,Ci.on)(t,u,r)),(0,We.U)(be=>J_(be,u,m,I,A,M,v,L)),GE({bufferSize:1,refCount:!1}));if(ur(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{Ce.pipe(te()).subscribe();const Ye=Ce.pipe(pn(ut=>ut.getRedirectResult().then(Dt=>Dt,()=>null)),kn.iC,GE({bufferSize:1,refCount:!1})),yt=Ce.pipe(pn(ut=>new Mn.y(Dt=>({unsubscribe:u.runOutsideAngular(()=>ut.onAuthStateChanged(Ot=>Dt.next(Ot),Ot=>Dt.error(Ot),()=>Dt.complete()))})))),dt=Ce.pipe(pn(ut=>new Mn.y(Dt=>({unsubscribe:u.runOutsideAngular(()=>ut.onIdTokenChanged(Ot=>Dt.next(Ot),Ot=>Dt.error(Ot),()=>Dt.complete()))}))));this.authState=Ye.pipe(zE(yt),(0,S_.R)(l.outsideAngular),(0,kg.Q)(l.insideAngular)),this.user=Ye.pipe(zE(dt),(0,S_.R)(l.outsideAngular),(0,kg.Q)(l.insideAngular)),this.idToken=this.user.pipe(pn(ut=>ut?(0,Jt.D)(ut.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(pn(ut=>ut?(0,Jt.D)(ut.getIdTokenResult()):tt(null))),this.credential=(0,al.T)(Ye,Z,this.authState.pipe(C(ut=>!ut))).pipe((0,We.U)(ut=>ut?.user?ut:null),(0,S_.R)(l.outsideAngular),(0,kg.Q)(l.insideAngular))}return(0,Ci.pX)(this,Ce,u,{spy:{apply:(be,Ye,yt)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&yt.then(dt=>Z.next(dt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ci.Dh),f.LFG(Ci.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(kn.HU),f.LFG(qg,8),f.LFG(wI,8),f.LFG(Z_,8),f.LFG(Wg,8),f.LFG(Y_,8),f.LFG(Q_,8),f.LFG(zg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XT=(()=>{class n{constructor(){mf.Z.registerVersion("angularfire",kn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Kg]}),n})();var EI=O(3942);const II="firebasestorage.googleapis.com",bI="storageBucket";class Yn extends jt.ZR{constructor(e,t,r=0){super(X_(e),`Firebase Storage: ${t} (${X_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return X_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function X_(n){return"storage/"+n}function TI(){return new Yn("unknown","An unknown error occurred, please check the error payload for server response.")}function ev(){return new Yn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function AI(){return new Yn("canceled","User canceled the upload/download.")}function xI(){return new Yn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Xo(n){return new Yn("invalid-argument",n)}function tv(){return new Yn("app-deleted","The Firebase app was deleted.")}function nv(n){return new Yn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Md(n,e){return new Yn("invalid-format","String does not match format '"+n+"': "+e)}function Rd(n){throw new Yn("internal-error","Internal error: "+n)}class zr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=zr.makeFromUrl(e,t)}catch{return new zr(e,"")}if(""===r.path)return r;throw function iS(n){return new Yn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function I(ut){ut.path_=decodeURIComponent(ut.path)}const M=t.replace(/[.]/g,"\\."),dt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(ut){"/"===ut.path.charAt(ut.path.length-1)&&(ut.path_=ut.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:I},{regex:new RegExp(`^https?://${t===II?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:I}];for(let ut=0;ut<dt.length;ut++){const Dt=dt[ut],Ot=Dt.regex.exec(e);if(Ot){let Ya=Ot[Dt.indices.path];Ya||(Ya=""),r=new zr(Ot[Dt.indices.bucket],Ya),Dt.postModify(r);break}}if(null==r)throw function rS(n){return new Yn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class MI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Zg(n){return"string"==typeof n||n instanceof String}function NI(n){return cl()&&n instanceof Blob}function cl(){return typeof Blob<"u"&&!(0,jt.UG)()}function rv(n,e,t,r){if(r<e)throw Xo(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Xo(`Invalid value for '${n}'. Expected ${t} or less.`)}function yo(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function _o(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ec=(()=>{return(n=ec||(ec={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",ec;var n})();function Yg(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||s||u}class yf{constructor(e,t,r,s,u,l,m,v,I,A,M,L=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=m,this.errorCallback_=v,this.timeout_=I,this.progressCallback_=A,this.connectionFactory_=M,this.retry=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,Z)=>{this.resolve_=H,this.reject_=Z,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,l=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const v=this.callback_(m,m.getResponse());!function RI(n){return void 0!==n}(v)?u():u(v)}catch(v){l(v)}else if(null!==m){const v=TI();v.serverResponse=m.getErrorText(),l(this.errorCallback_?this.errorCallback_(m,v):v)}else l(s.canceled?this.appDelete_?tv():AI():ev())};this.canceled_?t(0,new Qg(!1,null,!0)):this.backoffId_=function uS(n,e,t){let r=1,s=null,u=null,l=!1,m=0;function v(){return 2===m}let I=!1;function A(...be){I||(I=!0,e.apply(null,be))}function M(be){s=setTimeout(()=>{s=null,n(H,v())},be)}function L(){u&&clearTimeout(u)}function H(be,...Ye){if(I)return void L();if(be)return L(),void A.call(null,be,...Ye);if(v()||l)return L(),void A.call(null,be,...Ye);let dt;r<64&&(r*=2),1===m?(m=2,dt=0):dt=1e3*(r+Math.random()),M(dt)}let Z=!1;function Ce(be){Z||(Z=!0,L(),!I&&(null!==s?(be||(m=2),clearTimeout(s),M(0)):be||(m=1)))}return M(0),u=setTimeout(()=>{l=!0,Ce(!0)},t),Ce}((r,s)=>{if(s)return void r(!1,new Qg(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const m=u.getErrorCode()===ec.NO_ERROR,v=u.getStatus();if((!m||Yg(v,this.additionalRetryCodes_))&&this.retry){const A=u.getErrorCode()===ec.ABORT;return void r(!1,new Qg(!1,null,A))}const I=-1!==this.successCodes_.indexOf(v);r(!0,new Qg(I,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function kR(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Qg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kI(...n){const e=function pS(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(cl())return new Blob(n);throw new Yn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Wi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sv{constructor(e,t){this.data=e,this.contentType=t||null}}function ov(n,e){switch(n){case Wi.RAW:return new sv(gS(e));case Wi.BASE64:case Wi.BASE64URL:return new sv(em(n,e));case Wi.DATA_URL:return new sv(function cv(n){const e=new uv(n);return e.base64?em(Wi.BASE64,e.rest):function av(n){let e;try{e=decodeURIComponent(n)}catch{throw Md(Wi.DATA_URL,"Malformed data URL.")}return gS(e)}(e.rest)}(e),function lv(n){return new uv(n).contentType}(e))}throw TI()}function gS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function em(n,e){switch(n){case Wi.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw Md(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Wi.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw Md(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function iv(n){return atob(n)}(e)}catch{throw Md(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class uv{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Md(Wi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function mS(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ea{constructor(e,t){let r=0,s="";NI(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(NI(this.data_)){const s=function OI(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new ea(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ea(r,!0)}}static getBlob(...e){if(cl()){const t=e.map(r=>r instanceof ea?r.data_:r);return new ea(kI.apply(null,t))}{const t=e.map(l=>Zg(l)?ov(Wi.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let m=0;m<l.length;m++)s[u++]=l[m]}),new ea(s,!0)}}uploadData(){return this.data_}}function dv(n){let e;try{e=JSON.parse(n)}catch{return null}return function lS(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function tm(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function FI(n,e){return e}class Di{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||FI}}let _f=null;function vf(){if(_f)return _f;const n=[];n.push(new Di("bucket")),n.push(new Di("generation")),n.push(new Di("metageneration")),n.push(new Di("name","fullPath",!0));const t=new Di("name");t.xform=function e(u,l){return function LI(n){return!Zg(n)||n.length<2?n:tm(n)}(l)},n.push(t);const s=new Di("size");return s.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(s),n.push(new Di("timeCreated")),n.push(new Di("updated")),n.push(new Di("md5Hash",null,!0)),n.push(new Di("cacheControl",null,!0)),n.push(new Di("contentDisposition",null,!0)),n.push(new Di("contentEncoding",null,!0)),n.push(new Di("contentLanguage",null,!0)),n.push(new Di("contentType",null,!0)),n.push(new Di("metadata","customMetadata",!0)),_f=n,_f}function BI(n,e,t){const r=dv(e);return null===r?null:function UI(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function VI(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new zr(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function nm(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const ui="prefixes";class za{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qa(n){if(!n)throw TI()}function wf(n,e){return function t(r,s){const u=BI(n,s,e);return qa(null!==u),u}}function Nd(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function nS(){return new Yn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function tS(){return new Yn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function eS(n){return new Yn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function SI(n){return new Yn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function dl(n){const e=Nd(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function NR(n){return new Yn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function $I(n,e,t){const s=yo(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new za(s,"GET",wf(n,t),l);return m.errorHandler=dl(e),m}function GI(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=yo(e.bucketOnlyServerUrl(),n.host,n._protocol),I=n.maxOperationRetryTime,A=new za(m,"GET",function HI(n,e){return function t(r,s){const u=function vS(n,e,t){const r=dv(t);return null===r?null:function _S(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[ui])for(const s of t[ui]){const u=s.replace(/\/$/,""),l=n._makeStorageReference(new zr(e,u));r.prefixes.push(l)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new zr(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return qa(null!==u),u}}(n,e.bucket),I);return A.urlParams=u,A.errorHandler=Nd(e),A}function fv(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function qI(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class kd{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function WI(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{qa(!1)}return qa(!!t&&-1!==(e||["active"]).indexOf(t)),t}const bS={STATE_CHANGED:"state_changed"},ci={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bf(n){switch(n){case"running":case"pausing":case"canceling":return ci.RUNNING;case"paused":return ci.PAUSED;case"success":return ci.SUCCESS;case"canceled":return ci.CANCELED;default:return ci.ERROR}}class OR{constructor(e,t,r){if(function cS(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Pd(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class TS extends class DS{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ec.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ec.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ec.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Rd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Rd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function vo(){return new TS}class gv{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=vf(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(Yg(s.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=ev()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function KI(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),l=fv(e,r,s),m={name:l.fullPath},v=yo(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},M=nm(l,t),Z=new za(v,"POST",function H(Ce){let be;WI(Ce);try{be=Ce.getResponseHeader("X-Goog-Upload-URL")}catch{qa(!1)}return qa(Zg(be)),be},n.maxUploadRetryTime);return Z.urlParams=m,Z.headers=A,Z.body=M,Z.errorHandler=Nd(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,vo,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function IS(n,e,t,r){const v=new za(t,"POST",function u(I){const A=WI(I,["active","final"]);let M=null;try{M=I.getResponseHeader("X-Goog-Upload-Size-Received")}catch{qa(!1)}M||qa(!1);const L=Number(M);return qa(!isNaN(L)),new kd(L,r.size(),"final"===A)},n.maxUploadRetryTime);return v.headers={"X-Goog-Upload-Command":"query"},v.errorHandler=Nd(e),v}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,vo,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new kd(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let l;try{l=function Od(n,e,t,r,s,u,l,m){const v=new kd(0,0);if(l?(v.current=l.current,v.total=l.total):(v.current=0,v.total=r.size()),r.size()!==v.total)throw function oS(){return new Yn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const I=v.total-v.current;let A=I;s>0&&(A=Math.min(A,s));const M=v.current;let H="";H=0===A?"finalize":I===A?"upload, finalize":"upload";const Z={"X-Goog-Upload-Command":H,"X-Goog-Upload-Offset":`${v.current}`},Ce=r.slice(M,M+A);if(null===Ce)throw xI();const dt=new za(t,"POST",function be(ut,Dt){const Ot=WI(ut,["active","final"]),sr=v.current+A,Ya=r.size();let SM;return SM="final"===Ot?wf(e,u)(ut,Dt):null,new kd(sr,Ya,"final"===Ot,SM)},e.maxUploadRetryTime);return dt.headers=Z,dt.body=Ce.uploadData(),dt.progressCallback=m||null,dt.errorHandler=Nd(n),dt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(v){return this._error=v,void this._transition("error")}const m=this._ref.storage._makeRequest(l,vo,s,u,!1);this._request=m,m.getPromise().then(v=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(v.current),v.finalized?(this._metadata=v.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=$I(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,vo,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function If(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},v=function m(){let dt="";for(let ut=0;ut<2;ut++)dt+=Math.random().toString().slice(2);return dt}();l["Content-Type"]="multipart/related; boundary="+v;const I=fv(e,r,s),A=nm(I,t),H=ea.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+v+"\r\nContent-Type: "+I.contentType+"\r\n\r\n",r,"\r\n--"+v+"--");if(null===H)throw xI();const Z={name:I.fullPath},Ce=yo(u,n.host,n._protocol),Ye=n.maxUploadRetryTime,yt=new za(Ce,"POST",wf(n,t),Ye);return yt.urlParams=Z,yt.headers=l,yt.body=H.uploadData(),yt.errorHandler=Nd(e),yt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,vo,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=AI(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=bf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new OR(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(bf(this._state)){case ci.SUCCESS:Pd(this._resolve.bind(null,this.snapshot))();break;case ci.CANCELED:case ci.ERROR:Pd(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(bf(this._state)){case ci.RUNNING:case ci.PAUSED:e.next&&Pd(e.next.bind(e,this.snapshot))();break;case ci.SUCCESS:e.complete&&Pd(e.complete.bind(e))();break;default:e.error&&Pd(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class hl{constructor(e,t){this._service=e,this._location=t instanceof zr?t:zr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hl(e,t)}get root(){const e=new zr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tm(this._location.path)}get storage(){return this._service}get parent(){const e=function yS(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new zr(this._location.bucket,e);return new hl(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw nv(e)}}function mv(n,e,t){return yv.apply(this,arguments)}function yv(){return(yv=(0,pe.Z)(function*(n,e,t){const s=yield rb(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield mv(n,e,s.nextPageToken))})).apply(this,arguments)}function rb(n,e){null!=e&&"number"==typeof e.maxResults&&rv("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=GI(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,vo)}function FR(n){n._throwIfRoot("getDownloadURL");const e=function wS(n,e,t){const s=yo(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new za(s,"GET",function Ef(n,e){return function t(r,s){const u=BI(n,s,e);return qa(null!==u),function jI(n,e,t,r){const s=dv(e);if(null===s||!Zg(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(I=>{const M=n.fullPath;return yo("/b/"+l(n.bucket)+"/o/"+l(M),t,r)+_o({alt:"media",token:I})})[0]}(u,s,n.host,n._protocol)}}(n,t),l);return m.errorHandler=dl(e),m}(n.storage,n._location,vf());return n.storage.makeRequestWithTokens(e,vo).then(t=>{if(null===t)throw function aS(){return new Yn("no-download-url","The given file does not have any download URLs.")}();return t})}function xS(n,e){const t=function PI(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new zr(n._location.bucket,t);return new hl(n.storage,r)}function MS(n,e){if(n instanceof sb){const t=n;if(null==t._bucket)throw function sS(){return new Yn("no-default-bucket","No default bucket found. Did you set the '"+bI+"' property when initializing the app?")}();const r=new hl(t,t._bucket);return null!=e?MS(r,e):r}return void 0!==e?xS(n,e):n}function BR(n,e){if(e&&function VR(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof sb)return function UR(n,e){return new hl(n,e)}(n,e);throw Xo("To use ref(service, url), the first argument must be a Storage instance.")}return MS(n,e)}function RS(n,e){const t=e?.[bI];return null==t?null:zr.makeFromBucketSpec(t,n)}class sb{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=II,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?zr.makeFromBucketSpec(s,this._host):RS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?zr.makeFromBucketSpec(this._url,e):RS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hl(this,e)}_makeRequest(e,t,r,s,u=!0){if(this._deleted)return new MI(tv());{const l=function fS(n,e,t,r,s,u,l=!0){const m=_o(n.urlParams),v=n.url+m,I=Object.assign({},n.headers);return function Jg(n,e){e&&(n["X-Firebase-GMPID"]=e)}(I,e),function dS(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(I,t),function hS(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(I,u),function Xg(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(I,r),new yf(v,n.method,I,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}(e,this._appId,r,s,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const _v="@firebase/storage";function Df(n,e){return BR(n=(0,jt.m9)(n),e)}function VS(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new sb(t,r,s,e,Jo.SDK_VERSION)}!function US(){(0,Jo._registerComponent)(new Qu.wA("storage",VS,"PUBLIC").setMultipleInstances(!0)),(0,Jo.registerVersion)(_v,"0.9.13",""),(0,Jo.registerVersion)(_v,"0.9.13","esm2017")}();class wv{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class cb{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wv(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new wv(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?l=>t(new wv(l,this,this._ref)):{next:t.next?l=>t.next(new wv(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class Ev{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ta(e,this._service))}get items(){return this._delegate.items.map(e=>new ta(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ta{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function FS(n,e){return xS(n,e)}(this._delegate,e);return new ta(t,this.storage)}get root(){return new ta(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ta(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new cb(function ab(n,e,t){return function eb(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new gv(n,new ea(e),t)}(n=(0,jt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Wi.RAW,r){this._throwIfRoot("putString");const s=ov(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new cb(new gv(this._delegate,new ea(s.data,!0),u),this)}listAll(){return function HR(n){return function nb(n){const e={prefixes:[],items:[]};return mv(n,e).then(()=>e)}(n=(0,jt.m9)(n))}(this._delegate).then(e=>new Ev(e,this.storage))}list(e){return function jR(n,e){return rb(n=(0,jt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Ev(t,this.storage))}getMetadata(){return function kS(n){return function PR(n){n._throwIfRoot("getMetadata");const e=$I(n.storage,n._location,vf());return n.storage.makeRequestWithTokens(e,vo)}(n=(0,jt.m9)(n))}(this._delegate)}updateMetadata(e){return function ub(n,e){return function ib(n,e){n._throwIfRoot("updateMetadata");const t=function ES(n,e,t,r){const u=yo(e.fullServerUrl(),n.host,n._protocol),m=nm(t,r),I=n.maxOperationRetryTime,A=new za(u,"PATCH",wf(n,r),I);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=m,A.errorHandler=dl(e),A}(n.storage,n._location,e,vf());return n.storage.makeRequestWithTokens(t,vo)}(n=(0,jt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function OS(n){return FR(n=(0,jt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function PS(n){return function LR(n){n._throwIfRoot("deleteObject");const e=function hv(n,e){const r=yo(e.fullServerUrl(),n.host,n._protocol),m=new za(r,"DELETE",function l(v,I){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=dl(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,vo)}(n=(0,jt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw nv(e)}}class BS{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Fs(e))throw Xo("ref() expected a child path but got a URL, use refFromURL instead.");return new ta(Df(this._delegate,e),this)}refFromURL(e){if(!Fs(e))throw Xo("refFromURL() expected a full URL but got a child path, use ref() instead.");try{zr.makeFromUrl(e,this._delegate.host)}catch{throw Xo("refFromUrl() expected a valid full URL but got an invalid one.")}return new ta(Df(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function LS(n,e,t,r={}){!function rm(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,jt.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Fs(n){return/^[A-Za-z]+:\/\//.test(n)}function Ls(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new BS(t,r)}function lb(n){const e=function bv(n){return new Mn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(dg(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,We.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function im(n){return{getDownloadURL:()=>tt(void 0).pipe(kn.fc,pn(()=>n.getDownloadURL()),kn.iC),getMetadata:()=>tt(void 0).pipe(kn.fc,pn(()=>n.getMetadata()),kn.iC),delete:()=>(0,Jt.D)(n.delete()),child:e=>im(n.child(e)),updateMetadata:e=>(0,Jt.D)(n.updateMetadata(e)),put:(e,t)=>lb(n.put(e,t)),putString:(e,t,r)=>lb(n.putString(e,t,r)),list:e=>(0,Jt.D)(n.list(e)),listAll:()=>(0,Jt.D)(n.listAll())}}!function $S(n){const e={TaskState:ci,TaskEvent:bS,StringFormat:Wi,Storage:BS,Reference:ta};n.INTERNAL.registerComponent(new Qu.wA("storage-compat",Ls,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.21")}(EI.Z);const Cv=new f.OlP("angularfire2.storageBucket"),db=new f.OlP("angularfire2.storage.maxUploadRetryTime"),hb=new f.OlP("angularfire2.storage.maxOperationRetryTime"),GS=new f.OlP("angularfire2.storage.use-emulator");let fb=(()=>{class n{constructor(t,r,s,u,l,m,v,I,A,M){const L=(0,Ci.on)(t,l,r);this.storage=(0,Ci.cc)(`${L.name}.storage.${s}`,"AngularFireStorage",L.name,()=>{const H=l.runOutsideAngular(()=>L.storage(s||void 0)),Z=A;return Z&&H.useEmulator(...Z),v&&H.setMaxUploadRetryTime(v),I&&H.setMaxOperationRetryTime(I),H},[v,I])}ref(t){return im(this.storage.ref(t))}refFromURL(t){return im(this.storage.refFromURL(t))}upload(t,r,s){return im(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ci.Dh),f.LFG(Ci.xv,8),f.LFG(Cv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(kn.HU),f.LFG(db,8),f.LFG(hb,8),f.LFG(GS,8),f.LFG(zg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),pb=(()=>{class n{constructor(){mf.Z.registerVersion("angularfire",kn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[fb],imports:[qS]}),n})();function Dv(){return(0,Un.e)((n,e)=>{let t,r=!1;n.subscribe((0,Rn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function tc(n,e){return n===e}O(1277);var ft,Sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qr={},gb=gb||{},kt=Sv||self;function sm(){}function om(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Tf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var yb="closure_uid_"+(1e9*Math.random()>>>0),_b=0;function KS(n,e,t){return n.call.apply(n.bind,arguments)}function vb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Ti(n,e,t){return(Ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?KS:vb).apply(null,arguments)}function Fd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Or(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function Wa(){this.s=this.s,this.o=this.o}Wa.prototype.s=!1,Wa.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function mb(n){Object.prototype.hasOwnProperty.call(n,yb)&&n[yb]||(n[yb]=++_b)}(this)},Wa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Av=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function am(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Sf(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(om(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function wr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}wr.prototype.h=function(){this.defaultPrevented=!0};var Eb=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",sm,e),kt.removeEventListener("test",sm,e)}catch{}return n}();function um(n){return/^[\s\xa0]*$/.test(n)}var xv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function cm(n,e){return n<e?-1:n>e?1:0}function lm(){var n=kt.navigator;return n&&(n=n.userAgent)?n:""}function na(n){return-1!=lm().indexOf(n)}function Ib(n){return Ib[" "](n),n}Ib[" "]=sm;var Rv,n,bb=na("Opera"),Ld=na("Trident")||na("MSIE"),Cb=na("Edge"),Mv=Cb||Ld,ZS=na("Gecko")&&!(-1!=lm().toLowerCase().indexOf("webkit")&&!na("Edge"))&&!(na("Trident")||na("MSIE"))&&!na("Edge"),zR=-1!=lm().toLowerCase().indexOf("webkit")&&!na("Edge");function YS(){var n=kt.document;return n?n.documentMode:void 0}e:{var Db="",Nv=(n=lm(),ZS?/rv:([^\);]+)(\)|;)/.exec(n):Cb?/Edge\/([\d\.]+)/.exec(n):Ld?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):zR?/WebKit\/(\S+)/.exec(n):bb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Nv&&(Db=Nv?Nv[1]:""),Ld){var Vd=YS();if(null!=Vd&&Vd>parseFloat(Db)){Rv=String(Vd);break e}}Rv=Db}var QS={};var Tb=kt.document&&Ld&&(YS()||parseInt(Rv,10))||void 0;function fl(n,e){if(wr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ZS){e:{try{Ib(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:kv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&fl.X.h.call(this)}}Or(fl,wr);var kv={2:"touch",3:"pen",4:"mouse"};fl.prototype.h=function(){fl.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Af="closure_listenable_"+(1e6*Math.random()|0),Ov=0;function Pv(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++Ov,this.ba=this.ea=!1}function pl(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Sb(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function XS(n){const e={};for(const t in n)e[t]=n[t];return e}const eA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tA(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<eA.length;u++)t=eA[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xf(n){this.src=n,this.g={},this.h=0}function Fv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=Av(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(pl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Lv(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}xf.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Lv(n,e,r,s);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new Pv(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var Vv="closure_lm_"+(1e6*Math.random()|0),Uv={};function Bv(n,e,t,r,s){if(r&&r.once)return xb(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Bv(n,e[u],t,r,s);return null}return t=Hv(t),n&&n[Af]?n.N(e,t,Tf(r)?!!r.capture:!!r,s):jv(n,e,t,!1,r,s)}function jv(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=Tf(s)?!!s.capture:!!s,m=pm(n);if(m||(n[Vv]=m=new xf(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function Ab(){const e=qR;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Eb||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(fm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function xb(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)xb(n,e[u],t,r,s);return null}return t=Hv(t),n&&n[Af]?n.O(e,t,Tf(r)?!!r.capture:!!r,s):jv(n,e,t,!0,r,s)}function Mb(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)Mb(n,e[u],t,r,s);else r=Tf(r)?!!r.capture:!!r,t=Hv(t),n&&n[Af]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Lv(u=n.g[e],t,r,s))&&(pl(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=pm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Lv(e,t,r,s)),(t=-1<n?e[n]:null)&&hm(t))}function hm(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Af])Fv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(fm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=pm(e))?(Fv(t,n),0==t.h&&(t.src=null,e[Vv]=null)):pl(n)}}}function fm(n){return n in Uv?Uv[n]:Uv[n]="on"+n}function qR(n,e){if(n.ba)n=!0;else{e=new fl(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&hm(n),n=t.call(r,e)}return n}function pm(n){return(n=n[Vv])instanceof xf?n:null}var Mf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hv(n){return"function"==typeof n?n:(n[Mf]||(n[Mf]=function(e){return n.handleEvent(e)}),n[Mf])}function Pr(){Wa.call(this),this.i=new xf(this),this.P=this,this.I=null}function li(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new wr(e,n);else if(e instanceof wr)e.target=e.target||n;else{var s=e;tA(e=new wr(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=$v(l,r,!0,e)&&s}if(s=$v(l=e.g=n,r,!0,e)&&s,s=$v(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=$v(l=e.g=t[u],r,!1,e)&&s}function $v(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,v=l.ha||l.src;l.ea&&Fv(n.i,l),s=!1!==m.call(v,r)&&s}}return s&&!r.defaultPrevented}Or(Pr,Wa),Pr.prototype[Af]=!0,Pr.prototype.removeEventListener=function(n,e,t,r){Mb(this,n,e,t,r)},Pr.prototype.M=function(){if(Pr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)pl(t[r]);delete n.g[e],n.h--}}this.I=null},Pr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Pr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Gv=kt.JSON.stringify;function nA(){var n=aA;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Rb,iA=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new WR,n=>n.reset());class WR{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function KR(n){kt.setTimeout(()=>{throw n},0)}function sA(n,e){Rb||function oA(){var n=kt.Promise.resolve(void 0);Rb=function(){n.then(ZR)}}(),Nb||(Rb(),Nb=!0),aA.add(n,e)}var Nb=!1,aA=new class rA{constructor(){this.h=this.g=null}add(e,t){const r=iA.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ZR(){for(var n;n=nA();){try{n.h.call(n.g)}catch(t){KR(t)}var e=iA;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Nb=!1}function zv(n,e){Pr.call(this),this.h=n||1,this.g=e||kt,this.j=Ti(this.lb,this),this.l=Date.now()}function kb(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Ob(n,e,t){if("function"==typeof n)t&&(n=Ti(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ti(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function i(n){n.g=Ob(()=>{n.g=null,n.i&&(n.i=!1,i(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Or(zv,Pr),(ft=zv.prototype).ca=!1,ft.R=null,ft.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),li(this,"tick"),this.ca&&(kb(this),this.start()))}},ft.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){zv.X.M.call(this),kb(this),delete this.g};class o extends Wa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:i(this)}M(){super.M(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function a(n){Wa.call(this),this.h=n,this.g={}}Or(a,Wa);var c=[];function d(n,e,t,r){Array.isArray(t)||(t&&(c[0]=t.toString()),t=c);for(var s=0;s<t.length;s++){var u=Bv(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function p(n){Sb(n.g,function(e,t){this.g.hasOwnProperty(t)&&hm(e)},n),n.g={}}function _(){this.g=!0}function T(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function P(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return Gv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}a.prototype.M=function(){a.X.M.call(this),p(this)},a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_.prototype.Aa=function(){this.g=!1},_.prototype.info=function(){};var G={},ee=null;function ye(){return ee=ee||new Pr}function Fe(n){wr.call(this,G.Pa,n)}function He(n){const e=ye();li(e,new Fe(e))}function st(n,e){wr.call(this,G.STAT_EVENT,n),this.stat=e}function nt(n){const e=ye();li(e,new st(e,n))}function Ae(n,e){wr.call(this,G.Qa,n),this.size=e}function wt(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}G.Pa="serverreachability",Or(Fe,wr),G.STAT_EVENT="statevent",Or(st,wr),G.Qa="timingevent",Or(Ae,wr);var nn={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Sn={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ka(){}function mm(){}Ka.prototype.h=null;var kf,gl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Rf(){wr.call(this,"d")}function Nf(){wr.call(this,"c")}function Ud(){}function ml(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new a(this),this.O=h1,this.T=new zv(n=Mv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ym}function ym(){this.i=null,this.g="",this.h=!1}Or(Rf,wr),Or(Nf,wr),Or(Ud,Ka),Ud.prototype.g=function(){return new XMLHttpRequest},Ud.prototype.i=function(){return{}},kf=new Ud;var h1=45e3,uA={},Pb={};function cA(n,e,t){n.K=1,n.v=Ub(yl(e)),n.s=t,n.P=!0,YR(n,null)}function YR(n,e){n.F=Date.now(),qv(n),n.A=yl(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),oN(t.i,"t",r),n.C=0,t=n.l.H,n.h=new ym,n.g=MN(n.l,t?e:null,!n.s),0<n.N&&(n.L=new o(Ti(n.La,n,n.g),n.N)),d(n.S,n.g,"readystatechange",n.ib),e=n.H?XS(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),He(),function E(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),v=0;v<m.length;v++){var I=m[v].split("=");if(1<I.length){var A=I[0];I=I[1];var M=A.split("_");l=2<=M.length&&"type"==M[1]?l+(A+"=")+I+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function QR(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function JR(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=f1(n,t),s==Pb){4==e&&(n.o=4,nt(14),r=!1),T(n.j,n.m,null,"[Incomplete Response]");break}if(s==uA){n.o=4,nt(15),T(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}T(n.j,n.m,s,null),lA(n,s)}QR(n)&&s!=Pb&&s!=uA&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,nt(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),_A(e),e.K=!0,nt(11))):(T(n.j,n.m,t,"[Invalid Chunked Response]"),Of(n),Wv(n))}function f1(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Pb:(t=Number(e.substring(t,r)),isNaN(t)?uA:(r+=1)+t>e.length?Pb:(e=e.substr(r,t),n.C=r+t,e))}function qv(n){n.V=Date.now()+n.O,XR(n,n.O)}function XR(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=wt(Ti(n.gb,n),e)}function Fb(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function Wv(n){0==n.l.G||n.I||TN(n.l,n)}function Of(n){Fb(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,kb(n.T),p(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function lA(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||dA(t.h,n)))if(!n.J&&dA(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;zb(t),$b(t)}yA(t),nt(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=wt(Ti(t.cb,t),6e3));if(1>=cN(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ff(t,11)}else if((n.J||t.g==n)&&zb(t),!um(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let I=s[e];if(t.T=I[0],I=I[1],2==t.G)if("c"==I[0]){t.I=I[1],t.ka=I[2];const A=I[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const M=I[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.J=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const Z=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var u=r.h;u.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(hA(u,u.h),u.h=null))}if(r.D){const Ce=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;Ce&&(r.za=Ce,Qn(r.F,r.D,Ce))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=xN(r,r.H?r.ka:null,r.V),l.J){lN(r.h,l);var m=l,v=r.J;v&&m.setTimeout(v),m.B&&(Fb(m),qv(m)),r.g=l}else CN(r);0<t.i.length&&Gb(t)}else"stop"!=I[0]&&"close"!=I[0]||Ff(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Ff(t,7):mA(t):"noop"!=I[0]&&t.l&&t.l.wa(I),t.A=0)}He()}catch{}}function eN(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(om(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function g1(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(om(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function p1(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(om(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(ft=ml.prototype).setTimeout=function(n){this.O=n},ft.ib=function(n){n=n.target;const e=this.L;e&&3==_l(n)?e.l():this.La(n)},ft.La=function(n){try{if(n==this.g)e:{const A=_l(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||Mv||this.g&&(this.h.h||this.g.fa()||_N(this.g)))){this.I||4!=A||7==e||He(),Fb(this);var t=this.g.aa();this.Y=t;t:if(QR(this)){var r=_N(this.g);n="";var s=r.length,u=4==_l(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Of(this),Wv(this);var l="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function b(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!um(m)){var I=m;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,nt(12),Of(this),Wv(this);break e}T(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,lA(this,t)}this.P?(JR(this,A,l),Mv&&this.i&&3==A&&(d(this.S,this.T,"tick",this.hb),this.T.start())):(T(this.j,this.m,l,null),lA(this,l)),4==A&&Of(this),this.i&&!this.I&&(4==A?TN(this.l,this):(this.i=!1,qv(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,nt(12)):(this.o=0,nt(13)),Of(this),Wv(this)}}}catch{}},ft.hb=function(){if(this.g){var n=_l(this.g),e=this.g.fa();this.C<e.length&&(Fb(this),JR(this,n,e),this.i&&4!=n&&qv(this))}},ft.cancel=function(){this.I=!0,Of(this)},ft.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function R(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(He(),nt(17)),Of(this),this.o=2,Wv(this)):XR(this,this.V-n)};var tN=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pf(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Pf){this.h=void 0!==e?e:n.h,Lb(this,n.j),this.s=n.s,this.g=n.g,Vb(this,n.m),this.l=n.l,e=n.i;var t=new Yv;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),nN(this,t),this.o=n.o}else n&&(t=String(n).match(tN))?(this.h=!!e,Lb(this,t[1]||"",!0),this.s=Kv(t[2]||""),this.g=Kv(t[3]||"",!0),Vb(this,t[4]),this.l=Kv(t[5]||"",!0),nN(this,t[6]||"",!0),this.o=Kv(t[7]||"")):(this.h=!!e,this.i=new Yv(null,this.h))}function yl(n){return new Pf(n)}function Lb(n,e,t){n.j=t?Kv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Vb(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function nN(n,e,t){e instanceof Yv?(n.i=e,function I1(n,e){e&&!n.j&&(Bd(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(iN(this,r),oN(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Zv(e,w1)),n.i=new Yv(e,n.h))}function Qn(n,e,t){n.i.set(e,t)}function Ub(n){return Qn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Kv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Zv(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,y1),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function y1(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Zv(e,rN,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Zv(e,rN,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Zv(t,"/"==t.charAt(0)?v1:_1,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Zv(t,E1)),n.join("")};var rN=/[#\/\?@]/g,_1=/[#\?:]/g,v1=/[#\?]/g,w1=/[#\?@]/g,E1=/#/g;function Yv(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Bd(n){n.g||(n.g=new Map,n.h=0,n.i&&function m1(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function iN(n,e){Bd(n),e=_m(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function sN(n,e){return Bd(n),e=_m(n,e),n.g.has(e)}function oN(n,e,t){iN(n,e),0<t.length&&(n.i=null,n.g.set(_m(n,e),am(t)),n.h+=t.length)}function _m(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function aN(n){this.l=n||C1,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ga&&kt.g.Ga()&&kt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=Yv.prototype).add=function(n,e){Bd(this),this.i=null,n=_m(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){Bd(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},ft.oa=function(){Bd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},ft.W=function(n){Bd(this);let e=[];if("string"==typeof n)sN(this,n)&&(e=e.concat(this.g.get(_m(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ft.set=function(n,e){return Bd(this),this.i=null,sN(this,n=_m(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var C1=10;function uN(n){return!!n.h||!!n.g&&n.g.size>=n.j}function cN(n){return n.h?1:n.g?n.g.size:0}function dA(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function hA(n,e){n.g?n.g.add(e):n.h=e}function lN(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function dN(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return am(n.i)}function fA(){}function D1(){this.g=new fA}function T1(n,e,t){const r=t||"";try{eN(n,function(s,u){let l=s;Tf(s)&&(l=Gv(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Bb(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Qv(n){this.l=n.ac||null,this.j=n.jb||!1}function jb(n,e){Pr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=pA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}aN.prototype.cancel=function(){if(this.i=dN(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},fA.prototype.stringify=function(n){return kt.JSON.stringify(n,void 0)},fA.prototype.parse=function(n){return kt.JSON.parse(n,void 0)},Or(Qv,Ka),Qv.prototype.g=function(){return new jb(this.l,this.j)},Qv.prototype.i=function(n){return function(){return n}}({}),Or(jb,Pr);var pA=0;function hN(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Jv(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Xv(n)}function Xv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=jb.prototype).open=function(n,e){if(this.readyState!=pA)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Xv(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||kt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jv(this)),this.readyState=pA},ft.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Xv(this)),this.g&&(this.readyState=3,Xv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hN(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ft.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Jv(this):Xv(this),3==this.readyState&&hN(this)}},ft.Va=function(n){this.g&&(this.response=this.responseText=n,Jv(this))},ft.Ua=function(n){this.g&&(this.response=n,Jv(this))},ft.ga=function(){this.g&&Jv(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(jb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var A1=kt.JSON.parse;function hr(n){Pr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=fN,this.K=this.L=!1}Or(hr,Pr);var fN="",x1=/^https?$/i,M1=["POST","PUT"];function pN(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,gN(n),Hb(n)}function gN(n){n.D||(n.D=!0,li(n,"complete"),li(n,"error"))}function mN(n){if(n.h&&typeof gb<"u"&&(!n.C[1]||4!=_l(n)||2!=n.aa()))if(n.v&&4==_l(n))Ob(n.Ha,0,n);else if(li(n,"readystatechange"),4==_l(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(tN)[1]||null;if(!s&&kt.self&&kt.self.location){var u=kt.self.location.protocol;s=u.substr(0,u.length-1)}r=!x1.test(s?s.toLowerCase():"")}t=r}if(t)li(n,"complete"),li(n,"success");else{n.m=6;try{var l=2<_l(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",gN(n)}}finally{Hb(n)}}}function Hb(n,e){if(n.g){yN(n);const t=n.g,r=n.C[0]?sm:null;n.g=null,n.C=null,e||li(n,"ready");try{t.onreadystatechange=r}catch{}}}function yN(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function _l(n){return n.g?n.g.readyState:0}function _N(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case fN:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function vN(n){let e="";return Sb(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function gA(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=vN(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Qn(n,e,t))}function ew(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function wN(n){this.Ca=0,this.i=[],this.j=new _,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ew("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ew("baseRetryDelayMs",5e3,n),this.bb=ew("retryDelaySeedMs",1e4,n),this.$a=ew("forwardChannelMaxRetries",2,n),this.ta=ew("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new aN(n&&n.concurrentRequestLimit),this.Fa=new D1,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function mA(n){if(EN(n),3==n.G){var e=n.U++,t=yl(n.F);Qn(t,"SID",n.I),Qn(t,"RID",e),Qn(t,"TYPE","terminate"),tw(n,t),(e=new ml(n,n.j,e,void 0)).K=2,e.v=Ub(yl(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon&&(t=kt.navigator.sendBeacon(e.v.toString(),"")),!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=MN(e.l,null),e.g.da(e.v)),e.F=Date.now(),qv(e)}AN(n)}function $b(n){n.g&&(_A(n),n.g.cancel(),n.g=null)}function EN(n){$b(n),n.u&&(kt.clearTimeout(n.u),n.u=null),zb(n),n.h.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function Gb(n){uN(n.h)||n.m||(n.m=!0,sA(n.Ja,n),n.C=0)}function IN(n,e){var t;t=e?e.m:n.U++;const r=yl(n.F);Qn(r,"SID",n.I),Qn(r,"RID",t),Qn(r,"AID",n.T),tw(n,r),n.o&&n.s&&gA(r,n.o,n.s),t=new ml(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=bN(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),hA(n.h,t),cA(t,r,e)}function tw(n,e){n.ia&&Sb(n.ia,function(t,r){Qn(e,r,t)}),n.l&&eN({},function(t,r){Qn(e,r,t)})}function bN(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ti(n.l.Ra,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let I=s[v].h;const A=s[v].g;if(I-=u,0>I)u=Math.max(0,s[v].h-100),m=!1;else try{T1(A,l,"req"+I+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function CN(n){n.g||n.u||(n.Z=1,sA(n.Ia,n),n.A=0)}function yA(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=wt(Ti(n.Ia,n),SN(n,n.A)),n.A++,0))}function _A(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function DN(n){n.g=new ml(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=yl(n.sa);Qn(e,"RID","rpc"),Qn(e,"SID",n.I),Qn(e,"CI",n.L?"0":"1"),Qn(e,"AID",n.T),Qn(e,"TYPE","xmlhttp"),tw(n,e),n.o&&n.s&&gA(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Ub(yl(e)),t.s=null,t.P=!0,YR(t,n)}function zb(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function TN(n,e){var t=null;if(n.g==e){zb(n),_A(n),n.g=null;var r=2}else{if(!dA(n.h,e))return;t=e.D,lN(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;li(r=ye(),new Ae(r,t)),Gb(n)}else CN(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function N1(n,e){return!(cN(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=wt(Ti(n.Ja,n,e),SN(n,n.C)),n.C++,0)))}(n,e)||2==r&&yA(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:Ff(n,5);break;case 4:Ff(n,10);break;case 3:Ff(n,6);break;default:Ff(n,2)}}function SN(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Ff(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ti(n.kb,n);t||(t=new Pf("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||Lb(t,"https"),Ub(t)),function S1(n,e){const t=new _;if(kt.Image){const r=new Image;r.onload=Fd(Bb,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Fd(Bb,t,r,"TestLoadImage: error",!1,e),r.onabort=Fd(Bb,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fd(Bb,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else nt(2);n.G=0,n.l&&n.l.va(e),AN(n),EN(n)}function AN(n){if(n.G=0,n.la=[],n.l){const e=dN(n.h);(0!=e.length||0!=n.i.length)&&(Sf(n.la,e),Sf(n.la,n.i),n.h.i.length=0,am(n.i),n.i.length=0),n.l.ua()}}function xN(n,e,t){var r=t instanceof Pf?yl(t):new Pf(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Vb(r,r.m);else{var s=kt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Pf(null,void 0);r&&Lb(u,r),e&&(u.g=e),s&&Vb(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Qn(r,t,e),Qn(r,"VER",n.ma),tw(n,r),r}function MN(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hr(t&&n.Da&&!n.ra?new Qv({jb:!0}):n.ra)).Ka(n.H),e}function RN(){}function qb(){if(Ld&&!(10<=Number(Tb)))throw Error("Environmental error: no available transport.")}function wo(n,e){Pr.call(this),this.g=new wN(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!um(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!um(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new vm(this)}function NN(n){Rf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function kN(){Nf.call(this),this.status=1}function vm(n){this.g=n}(ft=hr.prototype).Ka=function(n){this.L=n},ft.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():kf.g(),this.C=function gm(n){return n.h||(n.h=n.i())}(this.u?this.u:kf),this.g.onreadystatechange=Ti(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void pN(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=kt.FormData&&n instanceof kt.FormData,!(0<=Av(M1,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yN(this),0<this.B&&((this.K=function R1(n){return Ld&&function JS(){return function GR(n){var e=QS;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=xv(String(Rv)).split("."),t=xv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var s=e[l]||"",u=t[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=cm(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||cm(0==s[2].length,0==u[2].length)||cm(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ti(this.qa,this)):this.A=Ob(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){pN(this,u)}},ft.qa=function(){typeof gb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,li(this,"complete"),li(this,"abort"),Hb(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hb(this,!0)),hr.X.M.call(this)},ft.Ha=function(){this.s||(this.F||this.v||this.l?mN(this):this.fb())},ft.fb=function(){mN(this)},ft.aa=function(){try{return 2<_l(this)?this.g.status:-1}catch{return-1}},ft.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),A1(e)}},ft.Ea=function(){return this.m},ft.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=wN.prototype).ma=8,ft.G=1,ft.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new ml(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=XS(u),tA(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=bN(this,s,e),Qn(t=yl(this.F),"RID",n),Qn(t,"CVER",22),this.D&&Qn(t,"X-HTTP-Session-Id",this.D),tw(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(vN(u)))+"&"+e:this.o&&gA(t,this.o,u)),hA(this.h,s),this.Ya&&Qn(t,"TYPE","init"),this.O?(Qn(t,"$req",e),Qn(t,"SID","null"),s.Z=!0,cA(s,t,null)):cA(s,t,e),this.G=2}}else 3==this.G&&(n?IN(this,n):0==this.i.length||uN(this.h)||IN(this))},ft.Ia=function(){if(this.u=null,DN(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=wt(Ti(this.eb,this),n)}},ft.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,nt(10),$b(this),DN(this))},ft.cb=function(){null!=this.v&&(this.v=null,$b(this),yA(this),nt(19))},ft.kb=function(n){n?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))},(ft=RN.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Ra=function(){},qb.prototype.g=function(n,e){return new wo(n,e)},Or(wo,Pr),wo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;nt(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=xN(n,null,n.V),Gb(n)},wo.prototype.close=function(){mA(this.g)},wo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Gv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Gb(e)},wo.prototype.M=function(){this.g.l=null,delete this.j,mA(this.g),delete this.g,wo.X.M.call(this)},Or(NN,Rf),Or(kN,Nf),Or(vm,RN),vm.prototype.xa=function(){li(this.g,"a")},vm.prototype.wa=function(n){li(this.g,new NN(n))},vm.prototype.va=function(n){li(this.g,new kN)},vm.prototype.ua=function(){li(this.g,"b")},qb.prototype.createWebChannel=qb.prototype.g,wo.prototype.send=wo.prototype.u,wo.prototype.open=wo.prototype.m,wo.prototype.close=wo.prototype.close,nn.NO_ERROR=0,nn.TIMEOUT=8,nn.HTTP_ERROR=6,Sn.COMPLETE="complete",mm.EventType=gl,gl.OPEN="a",gl.CLOSE="b",gl.ERROR="c",gl.MESSAGE="d",Pr.prototype.listen=Pr.prototype.N,hr.prototype.listenOnce=hr.prototype.O,hr.prototype.getLastError=hr.prototype.Oa,hr.prototype.getLastErrorCode=hr.prototype.Ea,hr.prototype.getStatus=hr.prototype.aa,hr.prototype.getResponseJson=hr.prototype.Sa,hr.prototype.getResponseText=hr.prototype.fa,hr.prototype.send=hr.prototype.da,hr.prototype.setWithCredentials=hr.prototype.Ka;var k1=qr.createWebChannelTransport=function(){return new qb},O1=qr.getStatEventTarget=function(){return ye()},vA=qr.ErrorCode=nn,P1=qr.EventType=Sn,F1=qr.Event=G,ON=qr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},L1=qr.FetchXmlHttpFactory=Qv,Wb=qr.WebChannel=mm,V1=qr.XhrIo=hr;const PN="@firebase/firestore";class di{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}di.UNAUTHENTICATED=new di(null),di.GOOGLE_CREDENTIALS=new di("google-credentials-uid"),di.FIRST_PARTY=new di("first-party-uid"),di.MOCK_USER=new di("mock-user");let wm="9.13.0";const jd=new Ga.Yd("@firebase/firestore");function wA(){return jd.logLevel}function Oe(n,...e){if(jd.logLevel<=Ga.in.DEBUG){const t=e.map(EA);jd.debug(`Firestore (${wm}): ${n}`,...t)}}function Er(n,...e){if(jd.logLevel<=Ga.in.ERROR){const t=e.map(EA);jd.error(`Firestore (${wm}): ${n}`,...t)}}function Lf(n,...e){if(jd.logLevel<=Ga.in.WARN){const t=e.map(EA);jd.warn(`Firestore (${wm}): ${n}`,...t)}}function EA(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${wm}) INTERNAL ASSERTION FAILED: `+n;throw Er(e),new Error(e)}function Mt(n,e){n||at()}function Ke(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends jt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class FN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(di.UNAUTHENTICATED))}shutdown(){}}class H1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $1{constructor(e){this.t=e,this.currentUser=di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=I=>this.i!==s?(s=this.i,t(I)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const I=l;e.enqueueRetryable((0,pe.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},v=I=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(I=>v(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?v(I):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt("string"==typeof r.accessToken),new FN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mt(null===e||"string"==typeof e),new di(e)}}class G1{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=di.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Mt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class z1{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new G1(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q1{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mt("string"==typeof t.token),this.A=t.token,new LN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function W1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class VN{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=W1(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function Em(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function UN(n){return n+"\0"}class Jn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jn.fromMillis(Date.now())}static fromDate(e){return Jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Jn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new Jn(0,0))}static max(){return new Rt(new Jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nw{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===nw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends nw{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new un(t)}static emptyPath(){return new un([])}}const K1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fr extends nw{construct(e,t,r){return new fr(e,t,r)}static isValidIdentifier(e){return K1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Re(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Re(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Re(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new Re(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fr(t)}static emptyPath(){return new fr([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(un.fromString(e))}static fromName(e){return new ze(un.fromString(e).popFirst(5))}static empty(){return new ze(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new un(e.slice()))}}class Kb{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function IA(n){return n.fields.find(e=>2===e.kind)}function Vf(n){return n.fields.filter(e=>2!==e.kind)}Kb.UNKNOWN_ID=-1;class Zb{constructor(e,t){this.fieldPath=e,this.kind=t}}class rw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rw(0,Eo.min())}}function BN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Rt.fromTimestamp(1e9===r?new Jn(t+1,0):new Jn(t,r));return new Eo(s,ze.empty(),e)}function jN(n){return new Eo(n.readTime,n.key,-1)}class Eo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Eo(Rt.min(),ze.empty(),-1)}static max(){return new Eo(Rt.max(),ze.empty(),-1)}}function bA(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}const HN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $N{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Hd(n){return CA.apply(this,arguments)}function CA(){return CA=(0,pe.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==HN)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),CA.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},v=>r(v))}),l=!0,u===s&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(s=>s?oe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let v=0;v<u;v++){const I=v;t(e[I]).next(A=>{l[I]=A,++m,m===u&&r(l)},A=>s(A))}})}static doWhile(e,t){return new oe((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Yb{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Wr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new iw(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=DA(r.target.error);this.P.reject(new iw(e,s))}}static open(e,t,r,s){try{return new Yb(t,e.transaction(s,r))}catch(u){throw new iw(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new J1(t)}}class Za{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Za.D((0,jt.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Uf(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,jt.hl)())return!1;if(Za.N())return!0;const e=(0,jt.z$)(),t=Za.D(e),r=0<t&&t<10,s=Za.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new iw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new Re(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new iw(e,m))},u.onupgradeneeded=l=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,pe.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const v=Yb.open(u.db,e,l?"readonly":"readwrite",r),I=s(v).next(A=>(v.V(),A)).catch(A=>(v.abort(A),oe.reject(A))).toPromise();return I.catch(()=>{}),yield v.v,I}catch(v){const I=v,A="FirebaseError"!==I.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",I.message,"Retrying:",A),u.close(),!A)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Q1{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Uf(this.U.delete())}}class iw extends Re{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $d(n){return"IndexedDbTransactionError"===n.name}class J1{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Uf(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Uf(this.store.add(e))}get(e){return Uf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Uf(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Uf(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new oe((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,l,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new oe((r,s)=>{t.onerror=u=>{const l=DA(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}H(e,t){const r=[];return new oe((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const v=new Q1(m),I=t(m.primaryKey,m.value,v);if(I instanceof oe){const A=I.catch(M=>(v.done(),oe.reject(M)));r.push(A)}v.isDone?s():null===v.G?m.continue():m.continue(v.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Uf(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=DA(r.target.error);t(s)}})}let GN=!1;function DA(n){const e=Za.D((0,jt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GN||(GN=!0,setTimeout(()=>{throw r},0)),r}}return n}class X1{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){$d(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Hd(r)}yield t.nt(6e4)}))}}class eF{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return oe.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Oe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(s,u)).next(m=>(Oe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=jN(u);bA(l,r)>0&&(r=l)}),new Eo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Vs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function zN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Vs.at=-1;class pr{constructor(e,t){this.comparator=e,this.root=t||Si.EMPTY}insert(e,t){return new pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Si.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qb(this.root,e,this.comparator,!0)}}class Qb{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Si{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Si.RED,this.left=s??Si.EMPTY,this.right=u??Si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Si(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Si.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}Si.EMPTY=null,Si.RED=!0,Si.BLACK=!1,Si.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Si(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new WN(this.data.getIterator())}getIteratorFrom(e){return new WN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class WN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Im(n){return n.hasNext()?n.getNext():void 0}class Io{constructor(e){this.fields=e,e.sort(fr.comparator)}static empty(){return new Io([])}unionWith(e){let t=new In(fr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Io(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Em(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Kr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kr.EMPTY_BYTE_STRING=new Kr("");const nF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gd(n){if(Mt(!!n),"string"==typeof n){let e=0;const t=nF.exec(n);if(Mt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gr(n.seconds),nanos:gr(n.nanos)}}function gr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function jf(n){return"string"==typeof n?Kr.fromBase64String(n):Kr.fromUint8Array(n)}function TA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function KN(n){const e=n.mapValue.fields.__previous_value__;return TA(e)?KN(e):e}function sw(n){const e=Gd(n.mapValue.fields.__local_write_time__.timestampValue);return new Jn(e.seconds,e.nanos)}class rF{constructor(e,t,r,s,u,l,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class zd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zd&&e.projectId===this.projectId&&e.database===this.database}}function ow(n){return null==n}function aw(n){return 0===n&&1/n==-1/0}function ZN(n){return"number"==typeof n&&Number.isInteger(n)&&!aw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const qd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jb={nullValue:"NULL_VALUE"};function Hf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?TA(n)?4:XN(n)?9007199254740991:10:at()}function rc(n,e){if(n===e)return!0;const t=Hf(n);if(t!==Hf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sw(n).isEqual(sw(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Gd(r.timestampValue),l=Gd(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,jf(n.bytesValue).isEqual(jf(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return gr(r.geoPointValue.latitude)===gr(s.geoPointValue.latitude)&&gr(r.geoPointValue.longitude)===gr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return gr(r.integerValue)===gr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=gr(r.doubleValue),l=gr(s.doubleValue);return u===l?aw(u)===aw(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Em(n.arrayValue.values||[],e.arrayValue.values||[],rc);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(zN(u)!==zN(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!rc(u[m],l[m])))return!1;return!0}(n,e);default:return at()}var s}function uw(n,e){return void 0!==(n.values||[]).find(t=>rc(t,e))}function Wd(n,e){if(n===e)return 0;const t=Hf(n),r=Hf(e);if(t!==r)return Ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=gr(s.integerValue||s.doubleValue),m=gr(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return YN(n.timestampValue,e.timestampValue);case 4:return YN(sw(n),sw(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(s,u){const l=jf(s),m=jf(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let v=0;v<l.length&&v<m.length;v++){const I=Ut(l[v],m[v]);if(0!==I)return I}return Ut(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Ut(gr(s.latitude),gr(u.latitude));return 0!==l?l:Ut(gr(s.longitude),gr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let v=0;v<l.length&&v<m.length;++v){const I=Wd(l[v],m[v]);if(I)return I}return Ut(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===qd.mapValue&&u===qd.mapValue)return 0;if(s===qd.mapValue)return 1;if(u===qd.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),v=u.fields||{},I=Object.keys(v);m.sort(),I.sort();for(let A=0;A<m.length&&A<I.length;++A){const M=Ut(m[A],I[A]);if(0!==M)return M;const L=Wd(l[m[A]],v[I[A]]);if(0!==L)return L}return Ut(m.length,I.length)}(n.mapValue,e.mapValue);default:throw at()}}function YN(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=Gd(n),r=Gd(e),s=Ut(t.seconds,r.seconds);return 0!==s?s:Ut(t.nanos,r.nanos)}function bm(n){return SA(n)}function SA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Gd(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?jf(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=SA(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${SA(r.fields[m])}`;return u+"}"}(n.mapValue):at();var e}function $f(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function AA(n){return!!n&&"integerValue"in n}function cw(n){return!!n&&"arrayValue"in n}function QN(n){return!!n&&"nullValue"in n}function JN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xb(n){return!!n&&"mapValue"in n}function lw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function XN(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function iF(n){return"nullValue"in n?Jb:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?$f(zd.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function sF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?$f(zd.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?qd:at()}function ek(n,e){const t=Wd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function tk(n,e){const t=Wd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ai{constructor(e){this.value=e}static empty(){return new Ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lw(t)}setAll(e){let t=fr.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=lw(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Xb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Xb(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Bf(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Ai(lw(this.value))}}function nk(n){const e=[];return Bf(n.fields,(t,r)=>{const s=new fr([t]);if(Xb(r)){const u=nk(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Io(e)}class On{constructor(e,t,r,s,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=l}static newInvalidDocument(e){return new On(e,0,Rt.min(),Rt.min(),Ai.empty(),0)}static newFoundDocument(e,t,r){return new On(e,1,t,Rt.min(),r,0)}static newNoDocument(e,t){return new On(e,2,t,Rt.min(),Ai.empty(),0)}static newUnknownDocument(e,t){return new On(e,3,t,Rt.min(),Ai.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class oF{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.ht=null}}function rk(n,e=null,t=[],r=[],s=null,u=null,l=null){return new oF(n,e,t,r,s,u,l)}function Gf(n){const e=Ke(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+bm(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ow(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>bm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>bm(r)).join(",")),e.ht=t}return e.ht}function dw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!gF(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!rc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uk(n.startAt,e.startAt)&&uk(n.endAt,e.endAt)}function eC(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function tC(n,e){return n.filters.filter(t=>t instanceof xi&&t.field.isEqual(e))}function ik(n,e,t){let r=Jb,s=!0;for(const u of tC(n,e)){let l=Jb,m=!0;switch(u.op){case"<":case"<=":l=iF(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Jb}ek({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];ek({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function sk(n,e,t){let r=qd,s=!0;for(const u of tC(n,e)){let l=qd,m=!0;switch(u.op){case">=":case">":l=sF(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=qd}tk({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];tk({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class xi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new uF(e,t,r):"array-contains"===t?new dF(e,r):"in"===t?new hF(e,r):"not-in"===t?new fF(e,r):"array-contains-any"===t?new pF(e,r):new xi(e,t,r)}static lt(e,t,r){return"in"===t?new cF(e,r):new lF(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Wd(t,this.value)):null!==t&&Hf(this.value)===Hf(t)&&this.ft(Wd(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class uF extends xi{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.ft(t)}}class cF extends xi{constructor(e,t){super(e,"in",t),this.keys=ok(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lF extends xi{constructor(e,t){super(e,"not-in",t),this.keys=ok(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ok(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class dF extends xi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cw(t)&&uw(t.arrayValue,this.value)}}class hF extends xi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uw(this.value.arrayValue,t)}}class fF extends xi{constructor(e,t){super(e,"not-in",t)}matches(e){if(uw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!uw(this.value.arrayValue,t)}}class pF extends xi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uw(this.value.arrayValue,r))}}class Kd{constructor(e,t){this.position=e,this.inclusive=t}}class Cm{constructor(e,t="asc"){this.field=e,this.dir=t}}function gF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ak(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?ze.comparator(ze.fromName(l.referenceValue),t.key):Wd(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function uk(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!rc(n.position[t],e.position[t]))return!1;return!0}class vl{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=v,this._t=null,this.wt=null}}function ck(n,e,t,r,s,u,l,m){return new vl(n,e,t,r,s,u,l,m)}function Dm(n){return new vl(n)}function lk(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function xA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function MA(n){for(const e of n.filters)if(e.dt())return e.field;return null}function RA(n){return null!==n.collectionGroup}function Tm(n){const e=Ke(n);if(null===e._t){e._t=[];const t=MA(e),r=xA(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Cm(t)),e._t.push(new Cm(fr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Cm(fr.keyField(),u))}}}return e._t}function us(n){const e=Ke(n);if(!e.wt)if("F"===e.limitType)e.wt=rk(e.path,e.collectionGroup,Tm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Tm(e))t.push(new Cm(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Kd(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Kd(e.startAt.position,e.startAt.inclusive):null;e.wt=rk(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function nC(n,e,t){return new vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hw(n,e){return dw(us(n),us(e))&&n.limitType===e.limitType}function dk(n){return`${Gf(us(n))}|lt:${n.limitType}`}function NA(n){return`Query(target=${function aF(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${bm(r.value)}`;var r}).join(", ")}]`),ow(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>bm(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>bm(t)).join(",")),`Target(${e})`}(us(n))}; limitType=${n.limitType})`}function kA(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):ze.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=ak(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,Tm(t),r)||t.endAt&&!function(s,u,l){const m=ak(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,Tm(t),r)));var t,r}function hk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fk(n){return(e,t)=>{let r=!1;for(const s of Tm(n)){const u=mF(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function mF(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),v=l.data.field(s);return null!==m&&null!==v?Wd(m,v):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}function pk(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aw(e)?"-0":e}}function gk(n){return{integerValue:""+n}}function mk(n,e){return ZN(e)?gk(e):pk(n,e)}class rC{constructor(){this._=void 0}}function yF(n,e,t){return n instanceof Sm?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof zf?_k(n,e):n instanceof qf?vk(n,e):function(r,s){const u=yk(r,s),l=wk(u)+wk(r.yt);return AA(u)&&AA(r.yt)?gk(l):pk(r.It,l)}(n,e)}function _F(n,e,t){return n instanceof zf?_k(n,e):n instanceof qf?vk(n,e):t}function yk(n,e){return n instanceof Am?AA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Sm extends rC{}class zf extends rC{constructor(e){super(),this.elements=e}}function _k(n,e){const t=Ek(e);for(const r of n.elements)t.some(s=>rc(s,r))||t.push(r);return{arrayValue:{values:t}}}class qf extends rC{constructor(e){super(),this.elements=e}}function vk(n,e){let t=Ek(e);for(const r of n.elements)t=t.filter(s=>!rc(s,r));return{arrayValue:{values:t}}}class Am extends rC{constructor(e,t){super(),this.It=e,this.yt=t}}function wk(n){return gr(n.integerValue||n.doubleValue)}function Ek(n){return cw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fw{constructor(e,t){this.field=e,this.transform=t}}class wF{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class sC{}function Ik(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Mm(n.key,Xn.none()):new xm(n.key,n.data,Xn.none());{const t=n.data,r=Ai.empty();let s=new In(fr.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new wl(n.key,r,new Io(s.toArray()),Xn.none())}}function EF(n,e,t){n instanceof xm?function(r,s,u){const l=r.value.clone(),m=Dk(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof wl?function(r,s,u){if(!iC(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=Dk(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(Ck(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pw(n,e,t,r){return n instanceof xm?function(s,u,l,m){if(!iC(s.precondition,u))return l;const v=s.value.clone(),I=Tk(s.fieldTransforms,m,u);return v.setAll(I),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof wl?function(s,u,l,m){if(!iC(s.precondition,u))return l;const v=Tk(s.fieldTransforms,m,u),I=u.data;return I.setAll(Ck(s)),I.setAll(v),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,iC(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function IF(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=yk(r.transform,s||null);null!=u&&(null===t&&(t=Ai.empty()),t.set(r.field,u))}return t||null}function bk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Em(t,r,(s,u)=>function vF(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof zf&&r instanceof zf||t instanceof qf&&r instanceof qf?Em(t.elements,r.elements,rc):t instanceof Am&&r instanceof Am?rc(t.yt,r.yt):t instanceof Sm&&r instanceof Sm);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class xm extends sC{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wl extends sC{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Ck(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Dk(n,e,t){const r=new Map;Mt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,_F(l,m,t[s]))}return r}function Tk(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,yF(u,l,e))}return r}class Mm extends sC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OA extends sC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bF{constructor(e){this.count=e}}var Fr,cn;function Sk(n){switch(n){default:return at();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function Ak(n){if(void 0===n)return Er("GRPC error has no .code"),le.UNKNOWN;switch(n){case Fr.OK:return le.OK;case Fr.CANCELLED:return le.CANCELLED;case Fr.UNKNOWN:return le.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return le.INTERNAL;case Fr.UNAVAILABLE:return le.UNAVAILABLE;case Fr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Fr.NOT_FOUND:return le.NOT_FOUND;case Fr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Fr.ABORTED:return le.ABORTED;case Fr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Fr.DATA_LOSS:return le.DATA_LOSS;default:return at()}}(cn=Fr||(Fr={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class Zd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bf(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return qN(this.inner)}size(){return this.innerSize}}const CF=new pr(ze.comparator);function Us(){return CF}const xk=new pr(ze.comparator);function gw(...n){let e=xk;for(const t of n)e=e.insert(t.key,t);return e}function Mk(n){let e=xk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ic(){return mw()}function Rk(){return mw()}function mw(){return new Zd(n=>n.toString(),(n,e)=>n.isEqual(e))}const DF=new pr(ze.comparator),TF=new In(ze.comparator);function Gt(...n){let e=TF;for(const t of n)e=e.add(t);return e}const SF=new In(Ut);function oC(){return SF}class yw{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,_w.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new yw(Rt.min(),s,oC(),Us(),Gt())}}class _w{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new _w(r,t,Gt(),Gt(),Gt())}}class aC{constructor(e,t,r,s){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=s}}class Nk{constructor(e,t){this.targetId=e,this.At=t}}class kk{constructor(e,t,r=Kr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Ok{constructor(){this.Rt=0,this.bt=Fk(),this.Pt=Kr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Gt(),t=Gt(),r=Gt();return this.bt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:at()}}),new _w(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Fk()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class AF{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Us(),this.qt=Pk(),this.Kt=new In(Ut)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,r=e.At.count,s=this.Xt(t);if(s){const u=s.target;if(eC(u))if(0===r){const l=new ze(u.path);this.jt(t,l,On.newNoDocument(l,Rt.min()))}else Mt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,l)=>{const m=this.Xt(l);if(m){if(u.current&&eC(m.target)){const v=new ze(m.target.path);null!==this.Ut.get(v)||this.ee(l,v)||this.jt(l,v,On.newNoDocument(v,e))}u.Dt&&(t.set(l,u.xt()),u.Nt())}});let r=Gt();this.qt.forEach((u,l)=>{let m=!0;l.forEachWhile(v=>{const I=this.Xt(v);return!I||2===I.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const s=new yw(e,t,this.Kt,this.Ut,r);return this.Ut=Us(),this.qt=Pk(),this.Kt=new In(Ut),s}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Ok,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new In(Ut),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Ok),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Pk(){return new pr(ze.comparator)}function Fk(){return new pr(ze.comparator)}const xF={asc:"ASCENDING",desc:"DESCENDING"},MF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class RF{constructor(e,t){this.databaseId=e,this.gt=t}}function vw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lk(n,e){return n.gt?e.toBase64():e.toUint8Array()}function NF(n,e){return vw(n,e.toTimestamp())}function hi(n){return Mt(!!n),Rt.fromTimestamp(function(e){const t=Gd(e);return new Jn(t.seconds,t.nanos)}(n))}function PA(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Vk(n){const e=un.fromString(n);return Mt(qk(e)),e}function ww(n,e){return PA(n.databaseId,e.path)}function sc(n,e){const t=Vk(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(Bk(t))}function FA(n,e){return PA(n.databaseId,e)}function Uk(n){const e=Vk(n);return 4===e.length?un.emptyPath():Bk(e)}function Ew(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Bk(n){return Mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jk(n,e,t){return{name:ww(n,e),fields:t.value.mapValue.fields}}function Hk(n,e,t){const r=sc(n,e.name),s=hi(e.updateTime),u=new Ai({mapValue:{fields:e.fields}}),l=On.newFoundDocument(r,s,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Iw(n,e){let t;if(e instanceof xm)t={update:jk(n,e.key,e.value)};else if(e instanceof Mm)t={delete:ww(n,e.key)};else if(e instanceof wl)t={update:jk(n,e.key,e.data),updateMask:jF(e.fieldMask)};else{if(!(e instanceof OA))return at();t={verify:ww(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Sm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof zf)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof qf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Am)return{fieldPath:u.field.canonicalString(),increment:l.yt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:NF(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:at()),t;var s}function LA(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Xn.updateTime(hi(s.updateTime)):void 0!==s.exists?Xn.exists(s.exists):Xn.none():Xn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(Mt("REQUEST_TIME"===l.setToServerValue),m=new Sm):"appendMissingElements"in l?m=new zf(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new qf(l.removeAllFromArray.values||[]):"increment"in l?m=new Am(u,l.increment):at();const v=fr.fromServerFormat(l.fieldPath);return new fw(v,m)}(n,s)):[];var s;if(e.update){const s=sc(n,e.update.name),u=new Ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Io((e.updateMask.fieldPaths||[]).map(I=>fr.fromServerFormat(I)));return new wl(s,u,l,t,r)}return new xm(s,u,t,r)}if(e.delete){const s=sc(n,e.delete);return new Mm(s,t)}if(e.verify){const s=sc(n,e.verify);return new OA(s,t)}return at()}function $k(n,e){return{documents:[FA(n,e.path)]}}function VA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=FA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=FA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(v){if(0===v.length)return;const I=v.map(A=>function(M){if("=="===M.op){if(JN(M.value))return{unaryFilter:{field:Rm(M.field),op:"IS_NAN"}};if(QN(M.value))return{unaryFilter:{field:Rm(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(JN(M.value))return{unaryFilter:{field:Rm(M.field),op:"IS_NOT_NAN"}};if(QN(M.value))return{unaryFilter:{field:Rm(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rm(M.field),op:VF(M.op),value:M.value}}}(A));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(v){if(0!==v.length)return v.map(I=>{return{field:Rm((A=I).field),direction:LF(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(I=e.limit,n.gt||ow(I)?I:{value:I});var I,m,v;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function Gk(n){let e=Uk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Mt(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=zk(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new Cm(Nm((M=A).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let m=null;t.limit&&(m=function(A){let M;return M="object"==typeof A?A.value:A,ow(M)?null:M}(t.limit));let v=null;var A;t.startAt&&(v=new Kd((A=t.startAt).values||[],!!A.before));let I=null;return t.endAt&&(I=function(A){return new Kd(A.values||[],!A.before)}(t.endAt)),ck(e,s,l,u,m,"F",v,I)}function zk(n){return n?void 0!==n.unaryFilter?[BF(n)]:void 0!==n.fieldFilter?[UF(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>zk(e)).reduce((e,t)=>e.concat(t)):at():[]}function LF(n){return xF[n]}function VF(n){return MF[n]}function Rm(n){return{fieldPath:n.canonicalString()}}function Nm(n){return fr.fromServerFormat(n.fieldPath)}function UF(n){return xi.create(Nm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(n.fieldFilter.op),n.fieldFilter.value)}function BF(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Nm(n.unaryFilter.field);return xi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Nm(n.unaryFilter.field);return xi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Nm(n.unaryFilter.field);return xi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Nm(n.unaryFilter.field);return xi.create(s,"!=",{nullValue:"NULL_VALUE"});default:return at()}}function jF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qk(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function cs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Wk(e)),e=HF(n.get(t),e);return Wk(e)}function HF(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Wk(n){return n+"\x01\x01"}function oc(n){const e=n.length;if(Mt(e>=2),2===e)return Mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&at(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let v;0===s.length?v=m:(s+=m,v=s,s=""),r.push(v);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:at()}u=l+2}return new un(r)}const Kk=["userId","batchId"];function uC(n,e){return[n,cs(e)]}function Zk(n,e,t){return[n,cs(e),t]}const $F={},GF=["prefixPath","collectionGroup","readTime","documentId"],zF=["prefixPath","collectionGroup","documentId"],qF=["collectionGroup","readTime","prefixPath","documentId"],WF=["canonicalId","targetId"],KF=["targetId","path"],ZF=["path","targetId"],YF=["collectionId","parent"],QF=["indexId","uid"],JF=["uid","sequenceNumber"],XF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eL=["indexId","uid","orderedDocumentKey"],tL=["userId","collectionPath","documentId"],nL=["userId","collectionPath","largestBatchId"],rL=["userId","collectionGroup","largestBatchId"],Yk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],iL=[...Yk,"documentOverlays"],Qk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jk=Qk,sL=[...Jk,"indexConfiguration","indexState","indexEntries"];class UA extends $N{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function fi(n,e){const t=Ke(n);return Za.M(t.ie,e)}class BA{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&EF(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Rk();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const v=Ik(l,m);null!==v&&r.set(s.key,v),l.isValidDocument()||l.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&Em(this.mutations,e.mutations,(t,r)=>bk(t,r))&&Em(this.baseMutations,e.baseMutations,(t,r)=>bk(t,r))}}class jA{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Mt(e.mutations.length===r.length);let s=DF;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new jA(e,t,r,s)}}class HA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yd{constructor(e,t,r,s,u=Rt.min(),l=Rt.min(),m=Kr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new Yd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Xk{constructor(e){this.re=e}}function eO(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ww(s=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:vw(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Wf(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:Wf(e.version)}}var s,u;return r}function cC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Kf(n){const e=new Jn(n.seconds,n.nanoseconds);return Rt.fromTimestamp(e)}function Zf(n,e){const t=(e.baseMutations||[]).map(u=>LA(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>LA(n.re,u)),s=Jn.fromMillis(e.localWriteTimeMs);return new BA(e.batchId,s,t,r)}function bw(n){const e=Kf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Kf(n.lastLimboFreeSnapshotVersion):Rt.min();let r;var s;return void 0!==n.query.documents?(Mt(1===(s=n.query).documents.length),r=us(Dm(Uk(s.documents[0])))):r=us(Gk(n.query)),new Yd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Kr.fromBase64String(n.resumeToken))}function tO(n,e){const t=Wf(e.snapshotVersion),r=Wf(e.lastLimboFreeSnapshotVersion);let s;s=eC(e.target)?$k(n.re,e.target):VA(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gf(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function $A(n){const e=Gk({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?nC(e,e.limit,"L"):e}function GA(n,e){return new HA(e.largestBatchId,LA(n.re,e.overlayMutation))}function nO(n,e){const t=e.path.lastSegment();return[n,cs(e.path.popLast()),t]}function rO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Wf(r.readTime),documentKey:cs(r.documentKey.path),largestBatchId:r.largestBatchId}}class aL{getBundleMetadata(e,t){return iO(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Kf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return iO(e).put({bundleId:(r=t).id,createTime:Wf(hi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return sO(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:$A(s.bundledQuery),readTime:Kf(s.readTime)};var s})}saveNamedQuery(e,t){return sO(e).put({name:(r=t).name,readTime:Wf(hi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function iO(n){return fi(n,"bundles")}function sO(n){return fi(n,"namedQueries")}class lC{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new lC(e,t.uid||"")}getOverlay(e,t){return Cw(e).get(nO(this.userId,t)).next(r=>r?GA(this.It,r):null)}getOverlays(e,t){const r=ic();return oe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new HA(t,l);s.push(this.ue(e,m))}),oe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(cs(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Cw(e).Y("collectionPathOverlayIndex",m))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const s=ic(),u=cs(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Cw(e).W("collectionPathOverlayIndex",l).next(m=>{for(const v of m){const I=GA(this.It,v);s.set(I.getKey(),I)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=ic();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cw(e).Z({index:"collectionGroupOverlayIndex",range:m},(v,I,A)=>{const M=GA(this.It,I);u.size()<s||M.largestBatchId===l?(u.set(M.getKey(),M),l=M.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return Cw(e).put(function(r,s,u){const[l,m,v]=nO(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Iw(r.re,u.mutation)}}(this.It,this.userId,t))}}function Cw(n){return fi(n,"documentOverlays")}class Yf{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(gr(e.integerValue));else if("doubleValue"in e){const r=gr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),aw(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(jf(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?XN(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):at()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const s of Object.keys(r))this._e(s,t),this.ae(r[s],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const s of r)this.ae(s,t)}ge(e,t){this.le(t,37),ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function uL(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function oO(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=uL(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Yf.Te=new Yf;class cL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),r=oO(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),r=oO(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class lL{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class dL{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Dw{constructor(){this.Be=new cL,this.Le=new lL(this.Be),this.Ue=new dL(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Qf{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Qf(this.indexId,this.documentKey,this.arrayValue,r)}}function Jf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=aO(n.arrayValue,e.arrayValue),0!==t?t:(t=aO(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function aO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hL{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=IA(e);if(void 0!==t&&!this.ze(t))return!1;const r=Vf(e);let s=0,u=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.je){const l=r[s];if(!this.He(this.je,l)||!this.Je(this.Ge[u++],l))return!1;++s}for(;s<r.length;++s){const l=r[s];if(u>=this.Ge.length||!this.Je(this.Ge[u++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class fL{constructor(){this.Ye=new zA}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Eo.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Eo.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class zA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new In(un.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new In(un.comparator)).toArray()}}const dC=new Uint8Array(0);class pL{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new zA,this.Ze=new Zd(r=>Gf(r),(r,s)=>dw(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:cs(s)};return uO(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[UN(t),""],!1,!0);return uO(e).W(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(oc(l.parent))}return r})}addFieldIndex(e,t){const r=hC(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=Sw(e);return u.next(m=>{l.put(rO(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=hC(e),s=Sw(e),u=Tw(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Tw(e);let s=!0;const u=new Map;return oe.forEach(this.tn(t),l=>this.en(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=Gt();const m=[];return oe.forEach(u,(v,I)=>{var A;Oe("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(dt=>`${dt.fieldPath}:${dt.kind}`).join(",")}`} to execute ${Gf(t)}`);const M=function(dt,ut){const Dt=IA(ut);if(void 0===Dt)return null;for(const Ot of tC(dt,Dt.fieldPath))switch(Ot.op){case"array-contains-any":return Ot.value.arrayValue.values||[];case"array-contains":return[Ot.value]}return null}(I,v),L=function(dt,ut){const Dt=new Map;for(const Ot of Vf(ut))for(const sr of tC(dt,Ot.fieldPath))switch(sr.op){case"==":case"in":Dt.set(Ot.fieldPath.canonicalString(),sr.value);break;case"not-in":case"!=":return Dt.set(Ot.fieldPath.canonicalString(),sr.value),Array.from(Dt.values())}return null}(I,v),H=function(dt,ut){const Dt=[];let Ot=!0;for(const sr of Vf(ut)){const Ya=0===sr.kind?ik(dt,sr.fieldPath,dt.startAt):sk(dt,sr.fieldPath,dt.startAt);Dt.push(Ya.value),Ot&&(Ot=Ya.inclusive)}return new Kd(Dt,Ot)}(I,v),Z=function(dt,ut){const Dt=[];let Ot=!0;for(const sr of Vf(ut)){const Ya=0===sr.kind?sk(dt,sr.fieldPath,dt.endAt):ik(dt,sr.fieldPath,dt.endAt);Dt.push(Ya.value),Ot&&(Ot=Ya.inclusive)}return new Kd(Dt,Ot)}(I,v),Ce=this.nn(v,I,H),be=this.nn(v,I,Z),Ye=this.sn(v,I,L),yt=this.rn(v.indexId,M,Ce,H.inclusive,be,Z.inclusive,Ye);return oe.forEach(yt,dt=>r.J(dt,t.limit).next(ut=>{ut.forEach(Dt=>{const Ot=ze.fromSegments(Dt.documentKey);l.has(Ot)||(l=l.add(Ot),m.push(Ot))})}))}).next(()=>m)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,s,u,l,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),I=v/(null!=t?t.length:1),A=[];for(let M=0;M<v;++M){const L=t?this.on(t[M/I]):dC,H=this.un(e,L,r[M%I],s),Z=this.cn(e,L,u[M%I],l),Ce=m.map(be=>this.un(e,L,be,!0));A.push(...this.createRange(H,Z,Ce))}return A}un(e,t,r,s){const u=new Qf(e,ze.empty(),t,r);return s?u:u.Ke()}cn(e,t,r,s){const u=new Qf(e,ze.empty(),t,r);return s?u.Ke():u}en(e,t){const r=new hL(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.We(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),s=>this.en(e,s).next(u=>{u?0!==r&&u.fields.length<function(l){let m=new In(fr.comparator),v=!1;for(const I of l.filters){const A=I;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:m=m.add(A.field))}for(const I of l.orderBy)I.field.isKeyField()||(m=m.add(I.field));return m.size+(v?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Dw;for(const s of Vf(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.qe(s.kind);Yf.Te.ce(u,l)}return r.$e()}on(e){const t=new Dw;return Yf.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Dw;return Yf.Te.ce($f(this.databaseId,t),r.qe(function(s){const u=Vf(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let s=[];s.push(new Dw);let u=0;for(const l of Vf(e)){const m=r[u++];for(const v of s)if(this.ln(t,l.fieldPath)&&cw(m))s=this.fn(s,l,m);else{const I=v.qe(l.kind);Yf.Te.ce(m,I)}}return this.dn(s)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const v=new Dw;v.seed(m.$e()),Yf.Te.ce(l,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof xi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=hC(e),s=Sw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return oe.forEach(u,m=>s.get([m.indexId,this.uid]).next(v=>{l.push(function(I,A){const M=A?new rw(A.sequenceNumber,new Eo(Kf(A.readTime),new ze(oc(A.documentKey)),A.largestBatchId)):rw.empty(),L=I.fields.map(([H,Z])=>new Zb(fr.fromServerFormat(H),Z));return new Kb(I.indexId,I.collectionGroup,L,M)}(m,v))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Ut(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=hC(e),u=Sw(e);return this._n(e).next(l=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>oe.forEach(m,v=>u.put(rO(v.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),oe.forEach(m,v=>this.wn(e,s,v).next(I=>{const A=this.mn(u,v);return I.isEqual(A)?oe.resolve():this.gn(e,u,v,I,A)}))))})}yn(e,t,r,s){return Tw(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,s){return Tw(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=Tw(e);let u=new In(Jf);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,m)=>{u=u.add(new Qf(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new In(Jf);const s=this.an(t,e);if(null==s)return r;const u=IA(t);if(null!=u){const l=e.data.field(u.fieldPath);if(cw(l))for(const m of l.arrayValue.values||[])r=r.add(new Qf(t.indexId,e.key,this.on(m),s))}else r=r.add(new Qf(t.indexId,e.key,dC,s));return r}gn(e,t,r,s,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,v,I,A,M){const L=m.getIterator(),H=v.getIterator();let Z=Im(L),Ce=Im(H);for(;Z||Ce;){let be=!1,Ye=!1;if(Z&&Ce){const yt=I(Z,Ce);yt<0?Ye=!0:yt>0&&(be=!0)}else null!=Z?Ye=!0:be=!0;be?(A(Ce),Ce=Im(H)):Ye?(M(Z),Z=Im(L)):(Z=Im(L),Ce=Im(H))}}(s,u,Jf,m=>{l.push(this.yn(e,t,r,m))},m=>{l.push(this.pn(e,t,r,m))}),oe.waitFor(l)}_n(e){let t=1;return Sw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Jf(l,m)).filter((l,m,v)=>!m||0!==Jf(l,v[m-1]));const s=[];s.push(e);for(const l of r){const m=Jf(l,e),v=Jf(l,t);if(0===m)s[0]=e.Ke();else if(m>0&&v<0)s.push(l),s.push(l.Ke());else if(v>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2)u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,dC,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,dC,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cO)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(s=>s||at())).next(cO)}}function uO(n){return fi(n,"collectionParents")}function Tw(n){return fi(n,"indexEntries")}function hC(n){return fi(n,"indexConfiguration")}function Sw(n){return fi(n,"indexState")}function cO(n){Mt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;bA(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Eo(e.readTime,e.documentKey,t)}const lO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dO(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const v=r.Z({range:l},(A,M,L)=>(m++,L.delete()));u.push(v.next(()=>{Mt(1===m)}));const I=[];for(const A of t.mutations){const M=Zk(e,A.key.path,t.batchId);u.push(s.delete(M)),I.push(A.key)}return oe.waitFor(u).next(()=>I)}function fC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class pC{constructor(e,t,r,s){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,t,r,s){Mt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new pC(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qd(e).Z({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=km(e),l=Qd(e);return l.add({}).next(m=>{Mt("number"==typeof m);const v=new BA(m,t,r,s),I=function(L,H,Z){const Ce=Z.baseMutations.map(Ye=>Iw(L.re,Ye)),be=Z.mutations.map(Ye=>Iw(L.re,Ye));return{userId:H,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:Ce,mutations:be}}(this.It,this.userId,v),A=[];let M=new In((L,H)=>Ut(L.canonicalString(),H.canonicalString()));for(const L of s){const H=Zk(this.userId,L.key.path,m);M=M.add(L.key.path.popLast()),A.push(l.put(I)),A.push(u.put(H,$F))}return M.forEach(L=>{A.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[m]=v.keys()}),oe.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return Qd(e).get(t).next(r=>r?(Mt(r.userId===this.userId),Zf(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Qd(e).Z({index:"userMutationsIndex",range:s},(l,m,v)=>{m.userId===this.userId&&(Mt(m.batchId>=r),u=Zf(this.It,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Qd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qd(e).W("userMutationsIndex",t).next(r=>r.map(s=>Zf(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=uC(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return km(e).Z({range:s},(l,m,v)=>{const[I,A,M]=l,L=oc(A);if(I===this.userId&&t.path.isEqual(L))return Qd(e).get(M).next(H=>{if(!H)throw at();Mt(H.userId===this.userId),u.push(Zf(this.It,H))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Ut);const s=[];return t.forEach(u=>{const l=uC(this.userId,u.path),m=IDBKeyRange.lowerBound(l),v=km(e).Z({range:m},(I,A,M)=>{const[L,H,Z]=I,Ce=oc(H);L===this.userId&&u.path.isEqual(Ce)?r=r.add(Z):M.done()});s.push(v)}),oe.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=uC(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new In(Ut);return km(e).Z({range:l},(v,I,A)=>{const[M,L,H]=v,Z=oc(L);M===this.userId&&r.isPrefixOf(Z)?Z.length===s&&(m=m.add(H)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Qd(e).get(u).next(l=>{if(null===l)throw at();Mt(l.userId===this.userId),r.push(Zf(this.It,l))}))}),oe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return dO(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return km(e).Z({range:r},(u,l,m)=>{if(u[0]===this.userId){const v=oc(u[1]);s.push(v)}else m.done()}).next(()=>{Mt(0===s.length)})})}containsKey(e,t){return hO(e,this.userId,t)}Rn(e){return fO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function hO(n,e,t){const r=uC(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return km(n).Z({range:u,X:!0},(m,v,I)=>{const[A,M,L]=m;A===e&&M===s&&(l=!0),I.done()}).next(()=>l)}function Qd(n){return fi(n,"mutations")}function km(n){return fi(n,"documentMutations")}function fO(n){return fi(n,"mutationQueues")}class Xf{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Xf(0)}static vn(){return new Xf(-1)}}class gL{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Xf(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Rt.fromTimestamp(new Jn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Om(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Mt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Om(e).Z((l,m)=>{const v=bw(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(s++,u.push(this.removeTargetData(e,v)))}).next(()=>oe.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Om(e).Z((r,s)=>{const u=bw(s);t(u)})}Vn(e){return pO(e).get("targetGlobalKey").next(t=>(Mt(null!==t),t))}Sn(e,t){return pO(e).put("targetGlobalKey",t)}Dn(e,t){return Om(e).put(tO(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Gf(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Om(e).Z({range:s,index:"queryTargetsIndex"},(l,m,v)=>{const I=bw(m);dw(t,I.target)&&(u=I,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Jd(e);return t.forEach(l=>{const m=cs(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(s)}removeMatchingKeys(e,t,r){const s=Jd(e);return oe.forEach(t,u=>{const l=cs(u.path);return oe.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Jd(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Jd(e);let u=Gt();return s.Z({range:r,X:!0},(l,m,v)=>{const I=oc(l[1]),A=new ze(I);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=cs(t.path),s=IDBKeyRange.bound([r],[UN(r)],!1,!0);let u=0;return Jd(e).Z({index:"documentTargetsIndex",X:!0,range:s},([l,m],v,I)=>{0!==l&&(u++,I.done())}).next(()=>u>0)}se(e,t){return Om(e).get(t).next(r=>r?bw(r):null)}}function Om(n){return fi(n,"targets")}function pO(n){return fi(n,"targetGlobal")}function Jd(n){return fi(n,"targetDocuments")}function gO([n,e],[t,r]){const s=Ut(n,t);return 0===s?Ut(e,r):s}class mL{constructor(e){this.xn=e,this.buffer=new In(gO),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yL{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){$d(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Hd(r)}yield t.Fn(3e5)}))}}class _L{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Vs.at);const r=new mL(t);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(lO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lO):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,s,u,l,m,v,I;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),s=this.params.maximumSequenceNumbersToCollect):s=M,l=Date.now(),this.nthSequenceNumber(e,s))).next(M=>(r=M,m=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(I=Date.now(),wA()<=Ga.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${M} documents in `+(I-v)+`ms\nTotal Duration: ${I-A}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:M})))}}class vL{constructor(e,t){this.db=e,this.garbageCollector=new _L(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return gC(e,r)}removeReference(e,t,r){return gC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gC(e,t)}Gn(e,t){return function(r,s){let u=!1;return fO(r).tt(l=>hO(r,l,s).next(m=>(m&&(u=!0),oe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(l,m)=>{if(m<=t){const v=this.Gn(e,l).next(I=>{if(!I)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Rt.min()),Jd(e).delete([0,cs(l.path)])))});s.push(v)}}).next(()=>oe.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gC(e,t)}Kn(e,t){const r=Jd(e);let s,u=Vs.at;return r.Z({index:"documentTargetsIndex"},([l,m],{path:v,sequenceNumber:I})=>{0===l?(u!==Vs.at&&t(new ze(oc(s)),u),u=I,s=v):u=Vs.at}).next(()=>{u!==Vs.at&&t(new ze(oc(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gC(n,e){return Jd(n).put((r=n.currentSequenceNumber,{targetId:0,path:cs(e.path),sequenceNumber:r}));var r}class mO{constructor(){this.changes=new Zd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wL{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ep(e).put(r)}removeEntry(e,t,r){return ep(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],cC(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=On.newInvalidDocument(t);return ep(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Aw(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:On.newInvalidDocument(t)};return ep(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Aw(t))},(s,u)=>{r={document:this.jn(t,u),size:fC(u)}}).next(()=>r)}getEntries(e,t){let r=Us();return this.zn(e,t,(s,u)=>{const l=this.jn(s,u);r=r.insert(s,l)}).next(()=>r)}Hn(e,t){let r=Us(),s=new pr(ze.comparator);return this.zn(e,t,(u,l)=>{const m=this.jn(u,l);r=r.insert(u,m),s=s.insert(u,fC(l))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let s=new In(wO);t.forEach(v=>s=s.add(v));const u=IDBKeyRange.bound(Aw(s.first()),Aw(s.last())),l=s.getIterator();let m=l.getNext();return ep(e).Z({index:"documentKeyIndex",range:u},(v,I,A)=>{const M=ze.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;m&&wO(m,M)<0;)r(m,null),m=l.getNext();m&&m.isEqual(M)&&(r(m,I),m=l.hasNext()?l.getNext():null),m?A.j(Aw(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),cC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ep(e).W(IDBKeyRange.bound(s,u,!0)).next(l=>{let m=Us();for(const v of l){const I=this.jn(ze.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);m=m.insert(I.key,I)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=Us();const l=vO(t,r),m=vO(t,Eo.max());return ep(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(v,I,A)=>{const M=this.jn(ze.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(M.key,M),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new EL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _O(e).get("remoteDocumentGlobalKey").next(t=>(Mt(!!t),t))}Qn(e,t){return _O(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function oL(n,e){let t;if(e.document)t=Hk(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),s=Kf(e.noDocument.readTime);t=On.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=ze.fromSegments(e.unknownDocument.path),s=Kf(e.unknownDocument.version);t=On.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Jn(r[0],r[1]);return Rt.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Rt.min()))return r}return On.newInvalidDocument(e)}}function yO(n){return new wL(n)}class EL extends mO{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Zd(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new In((u,l)=>Ut(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const v=eO(this.Yn.It,l);s=s.add(u.path.popLast()),r+=fC(v)-m.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=eO(this.Yn.It,l.convertToNoDocument(Rt.min()));t.push(this.Yn.addEntry(e,u,v))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function _O(n){return fi(n,"remoteDocumentGlobal")}function ep(n){return fi(n,"remoteDocumentsV14")}function Aw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vO(n,e){const t=e.documentKey.path.toArray();return[n,cC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function wO(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Ut(t[u],r[u]),s)return s;return s=Ut(t.length,r.length),s||(s=Ut(t[t.length-2],r[r.length-2]),s||Ut(t[t.length-1],r[r.length-1]))}class IL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class EO{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&pw(r.mutation,s,Io.empty(),Jn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const s=ic();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=gw();return u.forEach((m,v)=>{l=l.insert(m,v.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ic();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=Us();const l=mw(),m=mw();return t.forEach((v,I)=>{const A=r.get(I.key);s.has(I.key)&&(void 0===A||A.mutation instanceof wl)?u=u.insert(I.key,I):void 0!==A&&(l.set(I.key,A.mutation.getFieldMask()),pw(A.mutation,I,A.mutation.getFieldMask(),Jn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((I,A)=>l.set(I,A)),t.forEach((I,A)=>{var M;return m.set(I,new IL(A,null!==(M=l.get(I))&&void 0!==M?M:null))}),m))}recalculateAndSaveOverlays(e,t){const r=mw();let s=new pr((l,m)=>l-m),u=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(v=>{const I=t.get(v);if(null===I)return;let A=r.get(v)||Io.empty();A=m.applyToLocalView(I,A),r.set(v,A);const M=(s.get(m.batchId)||Gt()).add(v);s=s.insert(m.batchId,M)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),I=v.key,A=v.value,M=Rk();A.forEach(L=>{if(!u.has(L)){const H=Ik(t.get(L),r.get(L));null!==H&&M.set(L,H),u=u.add(L)}}),l.push(this.documentOverlayCache.saveOverlays(e,I,M))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):RA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):oe.resolve(ic());let m=-1,v=u;return l.next(I=>oe.forEach(I,(A,M)=>(m<M.largestBatchId&&(m=M.largestBatchId),u.get(A)?oe.resolve():this.getBaseDocument(e,A,M).next(L=>{v=v.insert(A,L)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,v,I,Gt())).next(A=>({batchId:m,changes:Mk(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let s=gw();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=gw();return this.indexManager.getCollectionParents(e,s).next(l=>oe.forEach(l,m=>{const v=(I=t,A=m.child(s),new vl(A,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(I=>{I.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,v)=>{const I=v.getKey();null===s.get(I)&&(s=s.insert(I,On.newInvalidDocument(I)))});let l=gw();return s.forEach((m,v)=>{const I=u.get(m);void 0!==I&&pw(I.mutation,v,Io.empty(),Jn.now()),kA(t,v)&&(l=l.insert(m,v))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(On.newInvalidDocument(t))}}class bL{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:hi(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:$A(r.bundledQuery),readTime:hi(r.readTime)}),oe.resolve();var r}}class CL{constructor(){this.overlays=new pr(ze.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ic();return oe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ue(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const s=ic(),u=t.length+1,l=new ze(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const v=m.getNext().value,I=v.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&v.largestBatchId>r&&s.set(v.getKey(),v)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new pr((I,A)=>I-A);const l=this.overlays.getIterator();for(;l.hasNext();){const I=l.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let A=u.get(I.largestBatchId);null===A&&(A=ic(),u=u.insert(I.largestBatchId,A)),A.set(I.getKey(),I)}}const m=ic(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((I,A)=>m.set(I,A)),!(m.size()>=s)););return oe.resolve(m)}ue(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new HA(t,r));let u=this.es.get(t);void 0===u&&(u=Gt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class qA{constructor(){this.ns=new In(pi.ss),this.rs=new In(pi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new pi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new pi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ze(new un([])),r=new pi(t,e),s=new pi(t,e+1),u=[];return this.rs.forEachInRange([r,s],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ze(new un([])),r=new pi(t,e),s=new pi(t,e+1);let u=Gt();return this.rs.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new pi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class pi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ze.comparator(e.key,t.key)||Ut(e._s,t._s)}static os(e,t){return Ut(e._s,t._s)||ze.comparator(e.key,t.key)}}class DL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new In(pi.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const l=new BA(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.gs=this.gs.add(new pi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pi(t,0),s=new pi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],l=>{const m=this.ys(l._s);u.push(m)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Ut);return t.forEach(s=>{const u=new pi(s,0),l=new pi(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],m=>{r=r.add(m._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const l=new pi(new ze(u),0);let m=new In(Ut);return this.gs.forEachWhile(v=>{const I=v.key.path;return!!r.isPrefixOf(I)&&(I.length===s&&(m=m.add(v._s)),!0)},l),oe.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Mt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,s=>{const u=new pi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new pi(t,0),s=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class TL{constructor(e){this.Es=e,this.docs=new pr(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():On.newInvalidDocument(t))}getEntries(e,t){let r=Us();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():On.newInvalidDocument(s))}),oe.resolve(r)}getAllFromCollection(e,t,r){let s=Us();const u=new ze(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:m,value:{document:v}}=l.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||bA(jN(v),r)<=0||(s=s.insert(v.key,v.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,s){at()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new SL(this)}getSize(e){return oe.resolve(this.size)}}class SL extends mO{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class AL{constructor(e){this.persistence=e,this.Rs=new Zd(t=>Gf(t),dw),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new qA,this.targetCount=0,this.vs=Xf.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Xf(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),oe.waitFor(u).next(()=>s)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class IO{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Vs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new AL(this),this.indexManager=new fL,this.remoteDocumentCache=new TL(r=>this.referenceDelegate.xs(r)),this.It=new Xk(t),this.Ns=new bL(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new DL(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const s=new xL(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Os(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class xL extends $N{constructor(e){super(),this.currentSequenceNumber=e}}class mC{constructor(e){this.persistence=e,this.Fs=new qA,this.$s=null}static Bs(e){return new mC(e)}get Ls(){if(this.$s)return this.$s;throw at()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const s=ze.fromPath(r);return this.Us(e,s).next(u=>{u||t.removeEntry(s,Rt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class ML{constructor(e){this.It=e}$(e,t,r,s){const u=new Yb("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kk,{unique:!0}),m.createObjectStore("documentMutations"),bO(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),bO(e)),l=l.next(()=>function(m){const v=m.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",I)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,v){return v.store("mutations").W().next(I=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kk,{unique:!0});const A=v.store("mutations"),M=I.map(L=>A.put(L));return oe.waitFor(M)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.qs(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(l=l.next(()=>this.Gs(u))),r<8&&s>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.js(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:tL});v.createIndex("collectionPathOverlayIndex",nL,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",rL,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:GF});v.createIndex("documentKeyIndex",zF),v.createIndex("collectionGroupIndex",qF)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:QF}).createIndex("sequenceNumberIndex",JF,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:XF}).createIndex("documentKeyIndex",eL,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=fC(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>oe.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(m=>oe.forEach(m,v=>{Mt(v.userId===u.userId);const I=Zf(this.It,v);return dO(e,u.userId,I).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((l,m)=>{const v=new un(l),I=[0,cs(v)];u.push(t.get(I).next(A=>A?oe.resolve():t.put({targetId:0,path:cs(v),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:YF});const r=t.store("collectionParents"),s=new zA,u=l=>{if(s.add(l)){const m=l.lastSegment(),v=l.popLast();return r.put({collectionId:m,parent:cs(v)})}};return t.store("remoteDocuments").Z({X:!0},(l,m)=>{const v=new un(l);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,m,v],I)=>{const A=oc(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=bw(s),l=tO(this.It,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,l)=>{const m=t.store("remoteDocumentsV14"),v=(I=l,I.document?new ze(un.fromString(I.document.name).popFirst(5)):I.noDocument?ze.fromSegments(I.noDocument.path):I.unknownDocument?ze.fromSegments(I.unknownDocument.path):at()).path.toArray();var I;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(A))}).next(()=>oe.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=yO(this.It),u=new IO(mC.Bs,this.It.re);return r.W().next(l=>{const m=new Map;return l.forEach(v=>{var I;let A=null!==(I=m.get(v.userId))&&void 0!==I?I:Gt();Zf(this.It,v).keys().forEach(M=>A=A.add(M)),m.set(v.userId,A)}),oe.forEach(m,(v,I)=>{const A=new di(I),M=lC.oe(this.It,A),L=u.getIndexManager(A),H=pC.oe(A,this.It,L,u.referenceDelegate);return new EO(s,H,M,L).recalculateAndSaveOverlaysForDocumentKeys(new UA(t,Vs.at),v).next()})})}}function bO(n){n.createObjectStore("targetDocuments",{keyPath:KF}).createIndex("documentTargetsIndex",ZF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",WF,{unique:!0}),n.createObjectStore("targetGlobal")}const WA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class KA{constructor(e,t,r,s,u,l,m,v,I,A,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=m,this.Js=I,this.Ys=A,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!KA.C())throw new Re(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vL(this,s),this.ii=t+"main",this.It=new Xk(v),this.ri=new Za(this.ii,this.Xs,new ML(this.It)),this.Cs=new gL(this.referenceDelegate,this.It),this.remoteDocumentCache=yO(this.It),this.Ns=new aL,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(le.FAILED_PRECONDITION,WA);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Vs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,pe.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if($d(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return xw(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return yC(e).delete(this.clientId)}yi(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=fi(r,"clientMetadata");return s.W().next(u=>{const l=e.Ii(u,18e5),m=u.filter(v=>-1===l.indexOf(v));return oe.forEach(m,v=>s.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):xw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Re(le.FAILED_PRECONDITION,WA);return!1}}return!(!this.networkEnabled||!this.inForeground)||yC(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const l=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||l&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new UA(t,Vs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>yC(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return pC.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pL(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return lC.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?sL:14===l?Jk:13===l?Qk:12===l?iL:11===l?Yk:void at();var l;let m;return this.ri.runTransaction(e,s,u,v=>(m=new UA(v,this.Ss?this.Ss.next():Vs.at),"readwrite-primary"===t?this.fi(m).next(I=>!!I||this.di(m)).next(I=>{if(!I)throw Er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Re(le.FAILED_PRECONDITION,HN);return r(m)}).next(I=>this.wi(m).next(()=>I)):this.Vi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Vi(e){return xw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(le.FAILED_PRECONDITION,WA)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xw(e).put("owner",t)}static C(){return Za.C()}_i(e){const t=xw(e);return t.get("owner").next(r=>this.mi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Er(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,jt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Er("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xw(n){return fi(n,"owner")}function yC(n){return fi(n,"clientMetadata")}function ZA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class YA{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Gt(),s=Gt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new YA(e,t.fromCache,r,s)}}class CO{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Oi(e,t,s,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(lk(t))return oe.resolve(null);let r=us(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=nC(t,null,"F"),r=us(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Gt(...u);return this.Ni.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const I=this.Fi(t,m);return this.$i(t,I,l,v.readTime)?this.ki(e,nC(t,null,"F")):this.Bi(e,I,t,v)}))})))}Oi(e,t,r,s){return lk(t)||s.isEqual(Rt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,s)?this.Mi(e,t):(wA()<=Ga.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),NA(t)),this.Bi(e,l,t,BN(s,-1)))})}Fi(e,t){let r=new In(fk(e));return t.forEach((s,u)=>{kA(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Mi(e,t){return wA()<=Ga.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",NA(t)),this.Ni.getDocumentsMatchingQuery(e,t,Eo.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class RL{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new pr(Ut),this.qi=new Zd(u=>Gf(u),dw),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EO(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function DO(n,e,t,r){return new RL(n,e,t,r)}function TO(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,pe.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let v=Gt();for(const I of s){l.push(I.batchId);for(const A of I.mutations)v=v.add(A.key)}for(const I of u){m.push(I.batchId);for(const A of I.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(I=>({ji:I,removedBatchIds:l,addedBatchIds:m}))})})}),QA.apply(this,arguments)}function NL(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,m,v,I){const A=v.batch,M=A.keys();let L=oe.resolve();return M.forEach(H=>{L=L.next(()=>I.getEntry(m,H)).next(Z=>{const Ce=v.docVersions.get(H);Mt(null!==Ce),Z.version.compareTo(Ce)<0&&(A.applyToRemoteDocument(Z,v),Z.isValidDocument()&&(Z.setReadTime(v.commitVersion),I.addEntry(Z)))})}),L.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Gt();for(let v=0;v<l.mutationResults.length;++v)l.mutationResults[v].transformResults.length>0&&(m=m.add(l.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function SO(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function kL(n,e){const t=Ke(n),r=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const m=[];e.targetChanges.forEach((A,M)=>{const L=s.get(M);if(!L)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,M)));let H=L.withSequenceNumber(u.currentSequenceNumber);var Z,Ce,be;e.targetMismatches.has(M)?H=H.withResumeToken(Kr.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):A.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(A.resumeToken,r)),s=s.insert(M,H),Ce=H,be=A,(0===(Z=L).resumeToken.approximateByteSize()||Ce.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||be.addedDocuments.size+be.modifiedDocuments.size+be.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,H))});let v=Us(),I=Gt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(AO(u,l,e.documentUpdates).next(A=>{v=A.Wi,I=A.zi})),!r.isEqual(Rt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return oe.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,I)).next(()=>v)}).then(u=>(t.Ui=s,u))}function AO(n,e,t){let r=Gt(),s=Gt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Us();return t.forEach((m,v)=>{const I=u.get(m);v.isFoundDocument()!==I.isFoundDocument()&&(s=s.add(m)),v.isNoDocument()&&v.version.isEqual(Rt.min())?(e.removeEntry(m,v.readTime),l=l.insert(m,v)):!I.isValidDocument()||v.version.compareTo(I.version)>0||0===v.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(v),l=l.insert(m,v)):Oe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",I.version," Watch version:",v.version)}),{Wi:l,zi:s}})}function OL(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pm(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,oe.resolve(s)):t.Cs.allocateTargetId(r).next(l=>(s=new Yd(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Fm(n,e,t){return JA.apply(this,arguments)}function JA(){return JA=(0,pe.Z)(function*(n,e,t){const r=Ke(n),s=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!$d(l))throw l;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}),JA.apply(this,arguments)}function _C(n,e,t){const r=Ke(n);let s=Rt.min(),u=Gt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,v,I){const A=Ke(m),M=A.qi.get(I);return void 0!==M?oe.resolve(A.Ui.get(M)):A.Cs.getTargetData(v,I)}(r,l,us(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,m.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?s:Rt.min(),t?u:Gt())).next(m=>(RO(r,hk(e),m),{documents:m,Hi:u})))}function xO(n,e){const t=Ke(n),r=Ke(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(l=>l?l.target:null))}function MO(n,e){const t=Ke(n),r=t.Ki.get(e)||Rt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,BN(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(RO(t,e,s),s))}function RO(n,e,t){let r=n.Ki.get(e)||Rt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function XA(){return XA=(0,pe.Z)(function*(n,e,t,r){const s=Ke(n);let u=Gt(),l=Us();for(const I of t){const A=e.Ji(I.metadata.name);I.document&&(u=u.add(A));const M=e.Yi(I);M.setReadTime(e.Xi(I.metadata.readTime)),l=l.insert(A,M)}const m=s.Gi.newChangeBuffer({trackRemovals:!0}),v=yield Pm(s,(I=r,us(Dm(un.fromString(`__bundle__/docs/${I}`)))));var I;return s.persistence.runTransaction("Apply bundle documents","readwrite",I=>AO(I,m,l).next(A=>(m.apply(I),A)).next(A=>s.Cs.removeMatchingKeysForTargetId(I,v.targetId).next(()=>s.Cs.addMatchingKeys(I,u,v.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(I,A.Wi,A.zi)).next(()=>A.Wi)))}),XA.apply(this,arguments)}function FL(n,e){return ex.apply(this,arguments)}function ex(){return ex=(0,pe.Z)(function*(n,e,t=Gt()){const r=yield Pm(n,us($A(e.bundledQuery))),s=Ke(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=hi(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Kr.EMPTY_BYTE_STRING,l);return s.Ui=s.Ui.insert(m.targetId,m),s.Cs.updateTargetData(u,m).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),ex.apply(this,arguments)}function NO(n,e){return`firestore_clients_${n}_${e}`}function kO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function tx(n,e){return`firestore_targets_${n}_${e}`}class vC{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Re(s.error.code,s.error.message))),l?new vC(e,t,s.state,u):(Er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Re(r.error.code,r.error.message))),u?new Mw(e,r.state,s):(Er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=oC();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=ZN(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new wC(e,u):(Er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class nx{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new nx(t.clientId,t.onlineState):(Er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class rx{constructor(){this.activeTargetIds=oC()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ix{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new pr(Ut),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=NO(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new rx),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(NO(e.persistenceKey,s));if(u){const l=wC.Zi(s,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(tx(this.persistenceKey,e));if(r){const s=Mw.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tx(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let l=Vs.at;if(null!=u)try{const m=JSON.parse(u);Mt("number"==typeof m),l=m}catch(m){Er("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==Vs.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new vC(this.currentUser,e,t,r),u=kO(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=kO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=tx(this.persistenceKey,e),u=new Mw(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return wC.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return vC.Zi(new di(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return Mw.Zi(s,t)}yr(e){return nx.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),l=[],m=[];return u.forEach(v=>{s.has(v)||l.push(v)}),s.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Br(l,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=oC();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class OO{constructor(){this.Lr=new rx,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new rx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class LL{qr(e){}shutdown(){}}class PO{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const VL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UL{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class BL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,s,u){const l=this.ho(e,t);Oe("RestConnection","Sending: ",l,r);const m={};return this.lo(m,s,u),this.fo(e,l,m,r).then(v=>(Oe("RestConnection","Received: ",v),v),v=>{throw Lf("RestConnection",`${e} failed with error: `,v,"url: ",l,"request:",r),v})}_o(e,t,r,s,u,l){return this.ao(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.oo}/v1/${t}:${VL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,l)=>{const m=new V1;m.setWithCredentials(!0),m.listenOnce(P1.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case vA.NO_ERROR:const I=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(I)),u(I);break;case vA.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),l(new Re(le.DEADLINE_EXCEEDED,"Request time out"));break;case vA.HTTP_ERROR:const A=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const M=m.getResponseJson().error;if(M&&M.status&&M.message){const L=function(H){const Z=H.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(Z)>=0?Z:le.UNKNOWN}(M.status);l(new Re(L,M.message))}else l(new Re(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new Re(le.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(s);m.send(t,"POST",v,r,15)})}wo(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=k1(),l=O1(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new L1({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=s.join("");Oe("Connection","Creating WebChannel: "+v,m);const I=u.createWebChannel(v,m);let A=!1,M=!1;const L=new UL({Hr:Z=>{M?Oe("Connection","Not sending because WebChannel is closed:",Z):(A||(Oe("Connection","Opening WebChannel transport."),I.open(),A=!0),Oe("Connection","WebChannel sending:",Z),I.send(Z))},Jr:()=>I.close()}),H=(Z,Ce,be)=>{Z.listen(Ce,Ye=>{try{be(Ye)}catch(yt){setTimeout(()=>{throw yt},0)}})};return H(I,Wb.EventType.OPEN,()=>{M||Oe("Connection","WebChannel transport opened.")}),H(I,Wb.EventType.CLOSE,()=>{M||(M=!0,Oe("Connection","WebChannel transport closed"),L.io())}),H(I,Wb.EventType.ERROR,Z=>{M||(M=!0,Lf("Connection","WebChannel transport errored:",Z),L.io(new Re(le.UNAVAILABLE,"The operation could not be completed")))}),H(I,Wb.EventType.MESSAGE,Z=>{var Ce;if(!M){const be=Z.data[0];Mt(!!be);const Ye=be,yt=Ye.error||(null===(Ce=Ye[0])||void 0===Ce?void 0:Ce.error);if(yt){Oe("Connection","WebChannel received error:",yt);const dt=yt.status;let ut=function(Ot){const sr=Fr[Ot];if(void 0!==sr)return Ak(sr)}(dt),Dt=yt.message;void 0===ut&&(ut=le.INTERNAL,Dt="Unknown error status: "+dt+" with message "+yt.message),M=!0,L.io(new Re(ut,Dt)),I.close()}else Oe("Connection","WebChannel received:",be),L.ro(be)}}),H(l,F1.STAT_EVENT,Z=>{Z.stat===ON.PROXY?Oe("Connection","Detected buffering proxy"):Z.stat===ON.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function FO(){return typeof window<"u"?window:null}function EC(){return typeof document<"u"?document:null}function Rw(n){return new RF(n,!0)}class sx{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class LO{constructor(e,t,r,s,u,l,m,v){this.Hs=e,this.vo=r,this.Vo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new sx(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,pe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,pe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Re(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,pe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jL extends LO{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function OF(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:at(),s=e.targetChange.targetIds||[],u=function(v,I){return v.gt?(Mt(void 0===I||"string"==typeof I),Kr.fromBase64String(I||"")):(Mt(void 0===I||I instanceof Uint8Array),Kr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(v){const I=void 0===v.code?le.UNKNOWN:Ak(v.code);return new Re(I,v.message||"")}(l);t=new kk(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=sc(n,r.document.name),u=hi(r.document.updateTime),l=new Ai({mapValue:{fields:r.document.fields}}),m=On.newFoundDocument(s,u,l);t=new aC(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=sc(n,r.document),u=r.readTime?hi(r.readTime):Rt.min(),l=On.newNoDocument(s,u);t=new aC([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=sc(n,r.document);t=new aC([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return at();{const r=e.filter,u=new bF(r.count||0);t=new Nk(r.targetId,u)}}var v;return t}(this.It,e),r=function(s){if(!("targetChange"in s))return Rt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Rt.min():u.readTime?hi(u.readTime):Rt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Ew(this.It),t.addTarget=function(s,u){let l;const m=u.target;return l=eC(m)?{documents:$k(s,m)}:{query:VA(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=Lk(s,u.resumeToken):u.snapshotVersion.compareTo(Rt.min())>0&&(l.readTime=vw(s,u.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function FF(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Ew(this.It),t.removeTarget=e,this.Bo(t)}}class HL extends LO{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function PF(n,e){return n&&n.length>0?(Mt(void 0!==e),n.map(t=>function(r,s){let u=hi(r.updateTime?r.updateTime:s);return u.isEqual(Rt.min())&&(u=hi(s)),new wF(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=hi(e.commitTime);return this.listener.Zo(r,t)}return Mt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Ew(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Iw(this.It,r))};this.Bo(t)}}class $L extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.ao(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(le.UNKNOWN,s.toString())})}_o(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(le.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class zL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Er(t),this.ou=!1):Oe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class qL{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,pe.Z)(function*(){var v;El(l)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,pe.Z)(function*(I){const A=Ke(I);A._u.add(4),yield Lm(A),A.gu.set("Unknown"),A._u.delete(4),yield Nw(A)}),function(I){return v.apply(this,arguments)})(l))}))}),this.gu=new zL(r,s)}}function Nw(n){return ax.apply(this,arguments)}function ax(){return ax=(0,pe.Z)(function*(n){if(El(n))for(const e of n.wu)yield e(!0)}),ax.apply(this,arguments)}function Lm(n){return ux.apply(this,arguments)}function ux(){return ux=(0,pe.Z)(function*(n){for(const e of n.wu)yield e(!1)}),ux.apply(this,arguments)}function IC(n,e){const t=Ke(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),dx(t)?lx(t):Um(t).ko()&&cx(t,e))}function kw(n,e){const t=Ke(n),r=Um(t);t.du.delete(e),r.ko()&&VO(t,e),0===t.du.size&&(r.ko()?r.Fo():El(t)&&t.gu.set("Unknown"))}function cx(n,e){n.yu.Mt(e.targetId),Um(n).zo(e)}function VO(n,e){n.yu.Mt(e),Um(n).Ho(e)}function lx(n){n.yu=new AF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Um(n).start(),n.gu.uu()}function dx(n){return El(n)&&!Um(n).No()&&n.du.size>0}function El(n){return 0===Ke(n)._u.size}function UO(n){n.yu=void 0}function WL(n){return hx.apply(this,arguments)}function hx(){return hx=(0,pe.Z)(function*(n){n.du.forEach((e,t)=>{cx(n,e)})}),hx.apply(this,arguments)}function KL(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,pe.Z)(function*(n,e){UO(n),dx(n)?(n.gu.hu(e),lx(n)):n.gu.set("Unknown")}),fx.apply(this,arguments)}function ZL(n,e,t){return px.apply(this,arguments)}function px(){return px=(0,pe.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof kk&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.du.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.du.delete(m),s.yu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bC(n,r)}else if(e instanceof aC?n.yu.Gt(e):e instanceof Nk?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Rt.min()))try{const r=yield SO(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.yu.te(u);return l.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const I=s.du.get(v);I&&s.du.set(v,I.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const v=s.du.get(m);if(!v)return;s.du.set(m,v.withResumeToken(Kr.EMPTY_BYTE_STRING,v.snapshotVersion)),VO(s,m);const I=new Yd(v.target,m,1,v.sequenceNumber);cx(s,I)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield bC(n,r)}var r}),px.apply(this,arguments)}function bC(n,e,t){return gx.apply(this,arguments)}function gx(){return gx=(0,pe.Z)(function*(n,e,t){if(!$d(e))throw e;n._u.add(1),yield Lm(n),n.gu.set("Offline"),t||(t=()=>SO(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Nw(n)}))}),gx.apply(this,arguments)}function BO(n,e){return e().catch(t=>bC(n,t,e))}function Vm(n){return mx.apply(this,arguments)}function mx(){return mx=(0,pe.Z)(function*(n){const e=Ke(n),t=Xd(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;YL(e);)try{const s=yield OL(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,QL(e,s)}catch(s){yield bC(e,s)}jO(e)&&HO(e)}),mx.apply(this,arguments)}function YL(n){return El(n)&&n.fu.length<10}function QL(n,e){n.fu.push(e);const t=Xd(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function jO(n){return El(n)&&!Xd(n).No()&&n.fu.length>0}function HO(n){Xd(n).start()}function JL(n){return yx.apply(this,arguments)}function yx(){return yx=(0,pe.Z)(function*(n){Xd(n).eu()}),yx.apply(this,arguments)}function XL(n){return _x.apply(this,arguments)}function _x(){return _x=(0,pe.Z)(function*(n){const e=Xd(n);for(const t of n.fu)e.Xo(t.mutations)}),_x.apply(this,arguments)}function eV(n,e,t){return vx.apply(this,arguments)}function vx(){return vx=(0,pe.Z)(function*(n,e,t){const r=n.fu.shift(),s=jA.from(r,e,t);yield BO(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Vm(n)}),vx.apply(this,arguments)}function tV(n,e){return wx.apply(this,arguments)}function wx(){return wx=(0,pe.Z)(function*(n,e){var t;e&&Xd(n).Yo&&(yield(t=(0,pe.Z)(function*(r,s){if(Sk(u=s.code)&&u!==le.ABORTED){const l=r.fu.shift();Xd(r).Mo(),yield BO(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Vm(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),jO(n)&&HO(n)}),wx.apply(this,arguments)}function $O(n,e){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,pe.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=El(t);t._u.add(3),yield Lm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Nw(t)}),Ex.apply(this,arguments)}function Ix(n,e){return bx.apply(this,arguments)}function bx(){return bx=(0,pe.Z)(function*(n,e){const t=Ke(n);e?(t._u.delete(2),yield Nw(t)):e||(t._u.add(2),yield Lm(t),t.gu.set("Unknown"))}),bx.apply(this,arguments)}function Um(n){return n.pu||(n.pu=function(e,t,r){const s=Ke(e);return s.su(),new jL(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:WL.bind(null,n),Zr:KL.bind(null,n),Wo:ZL.bind(null,n)}),n.wu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.pu.Mo(),dx(n)?lx(n):n.gu.set("Unknown")):(yield n.pu.stop(),UO(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Xd(n){return n.Iu||(n.Iu=function(e,t,r){const s=Ke(e);return s.su(),new HL(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:JL.bind(null,n),Zr:tV.bind(null,n),tu:XL.bind(null,n),Zo:eV.bind(null,n)}),n.wu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Iu.Mo(),yield Vm(n)):(yield n.Iu.stop(),n.fu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Cx{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new Cx(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(n,e){if(Er("AsyncQueue",`${e}: ${n}`),$d(n))return new Re(le.UNAVAILABLE,`${e}: ${n}`);throw n}class jm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=gw(),this.sortedSet=new pr(this.comparator)}static emptySet(e){return new jm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new jm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class GO{constructor(){this.Tu=new pr(ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):at():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Hm{constructor(e,t,r,s,u,l,m,v,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Hm(e,t,jm.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class nV{constructor(){this.Au=void 0,this.listeners=[]}}class rV{constructor(){this.queries=new Zd(e=>dk(e),hw),this.onlineState="Unknown",this.Ru=new Set}}function Dx(n,e){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,pe.Z)(function*(n,e){const t=Ke(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new nV),s)try{u.Au=yield t.onListen(r)}catch(l){const m=Bm(l,`Initialization of query '${NA(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&xx(t)}),Tx.apply(this,arguments)}function Sx(n,e){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,pe.Z)(function*(n,e){const t=Ke(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),Ax.apply(this,arguments)}function iV(n,e){const t=Ke(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.Pu(s)&&(r=!0);l.Au=s}}r&&xx(t)}function sV(n,e,t){const r=Ke(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function xx(n){n.Ru.forEach(e=>{e.next()})}class Mx{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Hm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Hm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class oV{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class zO{constructor(e){this.It=e}Ji(e){return sc(this.It,e)}Yi(e){return e.metadata.exists?Hk(this.It,e.document,!1):On.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return hi(e)}}class aV{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qO(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=un.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new zO(this.It);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||Gt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function PL(n,e,t,r){return XA.apply(this,arguments)}(e.localStore,new zO(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const s of e.queries)yield FL(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function qO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class WO{constructor(e){this.key=e}}class KO{constructor(e){this.key=e}}class ZO{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Gt(),this.mutatedKeys=Gt(),this.Gu=fk(e),this.Qu=new jm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new GO,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const v="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,I="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,M)=>{const L=s.get(A),H=kA(this.query,M)?M:null,Z=!!L&&this.mutatedKeys.has(L.key),Ce=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let be=!1;L&&H?L.data.isEqual(H.data)?Z!==Ce&&(r.track({type:3,doc:H}),be=!0):this.Hu(L,H)||(r.track({type:2,doc:H}),be=!0,(v&&this.Gu(H,v)>0||I&&this.Gu(H,I)<0)&&(m=!0)):!L&&H?(r.track({type:0,doc:H}),be=!0):L&&!H&&(r.track({type:1,doc:L}),be=!0,(v||I)&&(m=!0)),be&&(H?(l=l.add(H),u=Ce?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:l,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((I,A)=>function(M,L){const H=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return H(M)-H(L)}(I.type,A.type)||this.Gu(I.doc,A.doc)),this.Ju(r);const l=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,v=m!==this.qu;return this.qu=m,0!==u.length||v?{snapshot:new Hm(this.query,e.Qu,s,u,e.mutatedKeys,0===m,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new GO,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Gt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new KO(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new WO(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Gt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Hm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class uV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cV{constructor(e){this.key=e,this.nc=!1}}class lV{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Zd(m=>dk(m),hw),this.rc=new Map,this.oc=new Set,this.uc=new pr(ze.comparator),this.cc=new Map,this.ac=new qA,this.hc={},this.lc=new Map,this.fc=Xf.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function dV(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,pe.Z)(function*(n,e){const t=eM(n);let r,s;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ec();else{const l=yield Pm(t.localStore,us(e));t.isPrimaryClient&&IC(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield Nx(t,e,r,"current"===m,l.resumeToken)}return s}),Rx.apply(this,arguments)}function Nx(n,e,t,r,s){return kx.apply(this,arguments)}function kx(){return kx=(0,pe.Z)(function*(n,e,t,r,s){n._c=(M,L,H)=>{return(Z=(0,pe.Z)(function*(Ce,be,Ye,yt){let dt=be.view.Wu(Ye);dt.$i&&(dt=yield _C(Ce.localStore,be.query,!1).then(({documents:Ot})=>be.view.Wu(Ot,dt)));const ut=yt&&yt.targetChanges.get(be.targetId),Dt=be.view.applyChanges(dt,Ce.isPrimaryClient,ut);return $x(Ce,be.targetId,Dt.Xu),Dt.snapshot}),function(Ce,be,Ye,yt){return Z.apply(this,arguments)})(n,M,L,H);var Z};const u=yield _C(n.localStore,e,!0),l=new ZO(e,u.Hi),m=l.Wu(u.documents),v=_w.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),I=l.applyChanges(m,n.isPrimaryClient,v);$x(n,t,I.Xu);const A=new uV(e,t,l);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),I.snapshot}),kx.apply(this,arguments)}function hV(n,e){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,pe.Z)(function*(n,e){const t=Ke(n),r=t.ic.get(e),s=t.rc.get(r.targetId);if(s.length>1)return t.rc.set(r.targetId,s.filter(u=>!hw(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Fm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),kw(t.remoteStore,r.targetId),$m(t,r.targetId)}).catch(Hd))):($m(t,r.targetId),yield Fm(t.localStore,r.targetId,!0))}),Ox.apply(this,arguments)}function Px(){return Px=(0,pe.Z)(function*(n,e,t){const r=tM(n);try{const s=yield function(u,l){const m=Ke(u),v=Jn.now(),I=l.reduce((L,H)=>L.add(H.key),Gt());let A,M;return m.persistence.runTransaction("Locally write mutations","readwrite",L=>{let H=Us(),Z=Gt();return m.Gi.getEntries(L,I).next(Ce=>{H=Ce,H.forEach((be,Ye)=>{Ye.isValidDocument()||(Z=Z.add(be))})}).next(()=>m.localDocuments.getOverlayedDocuments(L,H)).next(Ce=>{A=Ce;const be=[];for(const Ye of l){const yt=IF(Ye,A.get(Ye.key).overlayedDocument);null!=yt&&be.push(new wl(Ye.key,yt,nk(yt.value.mapValue),Xn.exists(!0)))}return m.mutationQueue.addMutationBatch(L,v,be,l)}).next(Ce=>{M=Ce;const be=Ce.applyToLocalDocumentSet(A,Z);return m.documentOverlayCache.saveOverlays(L,Ce.batchId,be)})}).then(()=>({batchId:M.batchId,changes:Mk(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let v=u.hc[u.currentUser.toKey()];v||(v=new pr(Ut)),v=v.insert(l,m),u.hc[u.currentUser.toKey()]=v}(r,s.batchId,t),yield Il(r,s.changes),yield Vm(r.remoteStore)}catch(s){const u=Bm(s,"Failed to persist write");t.reject(u)}}),Px.apply(this,arguments)}function YO(n,e){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,pe.Z)(function*(n,e){const t=Ke(n);try{const r=yield kL(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.cc.get(u);l&&(Mt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.nc=!0:s.modifiedDocuments.size>0?Mt(l.nc):s.removedDocuments.size>0&&(Mt(l.nc),l.nc=!1))}),yield Il(t,r,e)}catch(r){yield Hd(r)}}),Fx.apply(this,arguments)}function QO(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ic.forEach((u,l)=>{const m=l.view.bu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=Ke(u);m.onlineState=l;let v=!1;m.queries.forEach((I,A)=>{for(const M of A.listeners)M.bu(l)&&(v=!0)}),v&&xx(m)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function pV(n,e,t){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,pe.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.cc.get(e),u=s&&s.key;if(u){let l=new pr(ze.comparator);l=l.insert(u,On.newNoDocument(u,Rt.min()));const m=Gt().add(u),v=new yw(Rt.min(),new Map,new In(Ut),l,m);yield YO(r,v),r.uc=r.uc.remove(u),r.cc.delete(e),Gx(r)}else yield Fm(r.localStore,e,!1).then(()=>$m(r,e,t)).catch(Hd)}),Lx.apply(this,arguments)}function gV(n,e){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,pe.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const s=yield NL(t.localStore,e);Hx(t,r,null),jx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Il(t,s)}catch(s){yield Hd(s)}}),Vx.apply(this,arguments)}function mV(n,e,t){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,pe.Z)(function*(n,e,t){const r=Ke(n);try{const s=yield function(u,l){const m=Ke(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return m.mutationQueue.lookupMutationBatch(v,l).next(A=>(Mt(null!==A),I=A.keys(),m.mutationQueue.removeMutationBatch(v,A))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,I,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,I)).next(()=>m.localDocuments.getDocuments(v,I))})}(r.localStore,e);Hx(r,e,t),jx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Il(r,s)}catch(s){yield Hd(s)}}),Ux.apply(this,arguments)}function Bx(){return Bx=(0,pe.Z)(function*(n,e){const t=Ke(n);El(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ke(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.lc.get(r)||[];s.push(e),t.lc.set(r,s)}catch(r){const s=Bm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),Bx.apply(this,arguments)}function jx(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Hx(n,e,t){const r=Ke(n);let s=r.hc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function $m(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||JO(n,r)})}function JO(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(kw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Gx(n))}function $x(n,e,t){for(const r of t)r instanceof WO?(n.ac.addReference(r.key,e),_V(n,r)):r instanceof KO?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||JO(n,r.key)):at()}function _V(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oc.add(r),Gx(n))}function Gx(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ze(un.fromString(e)),r=n.fc.next();n.cc.set(r,new cV(t)),n.uc=n.uc.insert(t,r),IC(n.remoteStore,new Yd(us(Dm(t.path)),r,2,Vs.at))}}function Il(n,e,t){return zx.apply(this,arguments)}function zx(){return zx=(0,pe.Z)(function*(n,e,t){const r=Ke(n),s=[],u=[],l=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,v)=>{l.push(r._c(v,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,I?.fromCache?"not-current":"current"),I){s.push(I);const A=YA.Ci(v.targetId,I);u.push(A)}}))}),yield Promise.all(l),r.sc.Wo(s),yield(m=(0,pe.Z)(function*(v,I){const A=Ke(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>oe.forEach(I,L=>oe.forEach(L.Si,H=>A.persistence.referenceDelegate.addReference(M,L.targetId,H)).next(()=>oe.forEach(L.Di,H=>A.persistence.referenceDelegate.removeReference(M,L.targetId,H)))))}catch(M){if(!$d(M))throw M;Oe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of I){const L=M.targetId;if(!M.fromCache){const H=A.Ui.get(L),Ce=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);A.Ui=A.Ui.insert(L,Ce)}}}),function(v,I){return m.apply(this,arguments)})(r.localStore,u))}),zx.apply(this,arguments)}function vV(n,e){return qx.apply(this,arguments)}function qx(){return qx=(0,pe.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield TO(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(l=>{l.forEach(m=>{m.reject(new Re(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Il(t,r.ji)}var s}),qx.apply(this,arguments)}function wV(n,e){const t=Ke(n),r=t.cc.get(e);if(r&&r.nc)return Gt().add(r.key);{let s=Gt();const u=t.rc.get(e);if(!u)return s;for(const l of u){const m=t.ic.get(l);s=s.unionWith(m.view.ju)}return s}}function EV(n,e){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,pe.Z)(function*(n,e){const t=Ke(n),r=yield _C(t.localStore,e.query,!0),s=e.view.tc(r);return t.isPrimaryClient&&$x(t,e.targetId,s.Xu),s}),Wx.apply(this,arguments)}function IV(n,e){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,pe.Z)(function*(n,e){const t=Ke(n);return MO(t.localStore,e).then(r=>Il(t,r))}),Kx.apply(this,arguments)}function bV(n,e,t,r){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,pe.Z)(function*(n,e,t,r){const s=Ke(n),u=yield function(l,m){const v=Ke(l),I=Ke(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>I.Tn(A,m).next(M=>M?v.localDocuments.getDocuments(A,M):oe.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Vm(s.remoteStore):"acknowledged"===t||"rejected"===t?(Hx(s,e,r||null),jx(s,e),m=e,Ke(Ke(s.localStore).mutationQueue).An(m)):at(),yield Il(s,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Zx.apply(this,arguments)}function Yx(){return Yx=(0,pe.Z)(function*(n,e){const t=Ke(n);if(eM(t),tM(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield XO(t,r.toArray());t.dc=!0,yield Ix(t.remoteStore,!0);for(const u of s)IC(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let s=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>($m(t,l),Fm(t.localStore,l,!0))),kw(t.remoteStore,l)}),yield s,yield XO(t,r),function(u){const l=Ke(u);l.cc.forEach((m,v)=>{kw(l.remoteStore,v)}),l.ac.fs(),l.cc=new Map,l.uc=new pr(ze.comparator)}(t),t.dc=!1,yield Ix(t.remoteStore,!1)}}),Yx.apply(this,arguments)}function XO(n,e,t){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,pe.Z)(function*(n,e,t){const r=Ke(n),s=[],u=[];for(const l of e){let m;const v=r.rc.get(l);if(v&&0!==v.length){m=yield Pm(r.localStore,us(v[0]));for(const I of v){const A=r.ic.get(I),M=yield EV(r,A);M.snapshot&&u.push(M.snapshot)}}else{const I=yield xO(r.localStore,l);m=yield Pm(r.localStore,I),yield Nx(r,eP(I),l,!1,m.resumeToken)}s.push(m)}return r.sc.Wo(u),s}),Qx.apply(this,arguments)}function eP(n){return ck(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function DV(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).vi()}function TV(n,e,t,r){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,pe.Z)(function*(n,e,t,r){const s=Ke(n);if(s.dc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=s.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield MO(s.localStore,hk(u[0])),m=yw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Kr.EMPTY_BYTE_STRING);yield Il(s,l,m);break}case"rejected":yield Fm(s.localStore,e,!0),$m(s,e,r);break;default:at()}}),Jx.apply(this,arguments)}function SV(n,e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,pe.Z)(function*(n,e,t){const r=eM(n);if(r.dc){for(const s of e){if(r.rc.has(s)){Oe("SyncEngine","Adding an already active target "+s);continue}const u=yield xO(r.localStore,s),l=yield Pm(r.localStore,u);yield Nx(r,eP(u),l.targetId,!1,l.resumeToken),IC(r.remoteStore,l)}for(const s of t)r.rc.has(s)&&(yield Fm(r.localStore,s,!1).then(()=>{kw(r.remoteStore,s),$m(r,s)}).catch(Hd))}}),Xx.apply(this,arguments)}function eM(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pV.bind(null,e),e.sc.Wo=iV.bind(null,e.eventManager),e.sc.wc=sV.bind(null,e.eventManager),e}function tM(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mV.bind(null,e),e}class tP{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.It=Rw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return DO(this.persistence,new CO,e.initialUser,this.It)}yc(e){return new IO(mC.Bs,this.It)}gc(e){return new OO}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class nP extends tP{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield tM(r.Ac.syncEngine),yield Vm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return DO(this.persistence,new CO,e.initialUser,this.It)}Tc(e,t){return new yL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new eF(t,this.persistence);return new X1(e.asyncQueue,r)}yc(e){const t=ZA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new KA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,FO(),EC(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new OO}}class xV extends nP{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const s=r.Ac.syncEngine;r.sharedClientState instanceof ix&&(r.sharedClientState.syncEngine={Fr:bV.bind(null,s),$r:TV.bind(null,s),Br:SV.bind(null,s),vi:DV.bind(null,s),Mr:IV.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,pe.Z)(function*(l){yield function CV(n,e){return Yx.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=FO();if(!ix.C(t))throw new Re(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ZA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ix(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class nM{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>QO(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=vV.bind(null,r.syncEngine),yield Ix(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new rV}createDatastore(e){const t=Rw(e.databaseInfo.databaseId),r=new BL(e.databaseInfo);return new $L(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>QO(this.syncEngine,m,0),l=PO.C()?new PO:new LL,new qL(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,v,I){const A=new lV(r,s,u,l,m,v);return I&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=Ke(t);Oe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Lm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function rM(n,e,t){if(!t)throw new Re(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rP(n,e,t,r){if(!0===e&&!0===r)throw new Re(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iP(n){if(!ze.isDocumentKey(n))throw new Re(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sP(n){if(ze.isDocumentKey(n))throw new Re(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=CC(n);throw new Re(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function oP(n,e){if(e<=0)throw new Re(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const aP=new Map;class uP{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,rP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ow{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new j1;switch(t.type){case"gapi":return new z1(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aP.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),aP.delete(e),t.terminate())}(this),Promise.resolve()}}class jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ac(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class Ki{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ki(this.firestore,e,this._query)}}class ac extends Ki{constructor(e,t,r){super(e,t,Dm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new ze(e))}withConverter(e){return new ac(this.firestore,e,this._path)}}function lP(n,e,...t){if(n=(0,jt.m9)(n),rM("collection","path",e),n instanceof Ow){const r=un.fromString(e,...t);return sP(r),new ac(n,null,r)}{if(!(n instanceof jn||n instanceof ac))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return sP(r),new ac(n.firestore,null,r)}}function DC(n,e,...t){if(n=(0,jt.m9)(n),1===arguments.length&&(e=VN.R()),rM("doc","path",e),n instanceof Ow){const r=un.fromString(e,...t);return iP(r),new jn(n,null,new ze(r))}{if(!(n instanceof jn||n instanceof ac))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return iP(r),new jn(n.firestore,n instanceof ac?n.converter:null,new ze(r))}}function dP(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),(n instanceof jn||n instanceof ac)&&(e instanceof jn||e instanceof ac)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function iM(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),n instanceof Ki&&e instanceof Ki&&n.firestore===e.firestore&&hw(n._query,e._query)&&n.converter===e.converter}function hP(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class TC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class RV{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Wr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),s=Number(r);isNaN(s)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(s);return new oV(JSON.parse(u),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,pe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class OV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,pe.Z)(function*(u,l){const m=Ke(u),v=Ew(m.It)+"/documents",I={documents:l.map(H=>ww(m.It,H))},A=yield m._o("BatchGetDocuments",v,I,l.length),M=new Map;A.forEach(H=>{const Z=function kF(n,e){return"found"in e?function(t,r){Mt(!!r.found);const s=sc(t,r.found.name),u=hi(r.found.updateTime),l=new Ai({mapValue:{fields:r.found.fields}});return On.newFoundDocument(s,u,l)}(n,e):"missing"in e?function(t,r){Mt(!!r.missing),Mt(!!r.readTime);const s=sc(t,r.missing),u=hi(r.readTime);return On.newNoDocument(s,u)}(n,e):at()}(m.It,H);M.set(Z.key.toString(),Z)});const L=[];return l.forEach(H=>{const Z=M.get(H.toString());Mt(!!Z),L.push(Z)}),L}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=ze.fromPath(s);e.mutations.push(new OA(u,e.precondition(u)))}),yield(r=(0,pe.Z)(function*(s,u){const l=Ke(s),m=Ew(l.It)+"/documents",v={writes:u.map(I=>Iw(l.It,I))};yield l.ao("Commit",m,v)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=Rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Rt.min())?Xn.exists(!1):Xn.updateTime(t):Xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rt.min()))throw new Re(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xn.updateTime(t)}return Xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class PV{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.kc=r.maxAttempts,this.xo=new sx(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,pe.Z)(function*(){const t=new OV(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Fc(u)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!ow(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Sk(t)}return!1}}class FV{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=di.UNAUTHENTICATED,this.clientId=VN.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,pe.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Oe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Bm(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function fP(n,e){return sM.apply(this,arguments)}function sM(){return sM=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,pe.Z)(function*(u){r.isEqual(u)||(yield TO(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),sM.apply(this,arguments)}function pP(n,e){return oM.apply(this,arguments)}function oM(){return oM=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield aM(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>$O(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>$O(e.remoteStore,u)),n.onlineComponents=e}),oM.apply(this,arguments)}function aM(n){return uM.apply(this,arguments)}function uM(){return uM=(0,pe.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield fP(n,new tP)),n.offlineComponents}),uM.apply(this,arguments)}function SC(n){return cM.apply(this,arguments)}function cM(){return cM=(0,pe.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield pP(n,new nM)),n.onlineComponents}),cM.apply(this,arguments)}function gP(n){return aM(n).then(e=>e.persistence)}function AC(n){return aM(n).then(e=>e.localStore)}function lM(n){return SC(n).then(e=>e.remoteStore)}function dM(n){return SC(n).then(e=>e.syncEngine)}function Gm(n){return hM.apply(this,arguments)}function hM(){return hM=(0,pe.Z)(function*(n){const e=yield SC(n),t=e.eventManager;return t.onListen=dV.bind(null,e.syncEngine),t.onUnlisten=hV.bind(null,e.syncEngine),t}),hM.apply(this,arguments)}function yP(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,u,l,m,v){const I=new TC({next:M=>{u.enqueueAndForget(()=>Sx(s,A));const L=M.docs.has(l);!L&&M.fromCache?v.reject(new Re(le.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&m&&"server"===m.source?v.reject(new Re(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new Mx(Dm(l.path),I,{includeMetadataChanges:!0,Nu:!0});return Dx(s,A)}(yield Gm(n),n.asyncQueue,e,t,r)})),r.promise}function _P(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,u,l,m,v){const I=new TC({next:M=>{u.enqueueAndForget(()=>Sx(s,A)),M.fromCache&&"server"===m.source?v.reject(new Re(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new Mx(l,I,{includeMetadataChanges:!0,Nu:!0});return Dx(s,A)}(yield Gm(n),n.asyncQueue,e,t,r)})),r.promise}class GV{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new sx(this,"async_queue_retry"),this.Wc=()=>{const t=EC();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=EC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=EC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Wr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,pe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!$d(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Er("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=Cx.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(s),s}zc(){this.Kc&&at()}verifyOperationInProgress(){}Xc(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function fM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class zV{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Hn extends Ow{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new GV,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||vP(this),this._firestoreClient.terminate()}}function Ir(n){return n._firestoreClient||vP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vP(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new rF(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new FV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function wP(n,e,t){const r=new Wr;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield fP(n,t),yield pP(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(l=u).name?l.code===le.FAILED_PRECONDITION||l.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;Lf("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function EP(n){if(n._initialized||n._terminated)throw new Re(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class uc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uc(Kr.fromBase64String(e))}catch(t){throw new Re(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uc(Kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tp{constructor(e){this._methodName=e}}class xC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const tU=/^__.*__$/;class nU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new wl(e,this.data,this.fieldMask,t,this.fieldTransforms):new xm(e,this.data,t,this.fieldTransforms)}}class IP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class MC{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=s,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new MC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return kC(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(bP(this.sa)&&tU.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class rU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Rw(e)}da(e,t,r,s=!1){return new MC({sa:e,methodName:t,fa:r,path:fr.emptyPath(),oa:!1,la:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function np(n){const e=n._freezeSettings(),t=Rw(n._databaseId);return new rU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RC(n,e,t,r,s,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,s);yM("Data must be an object, but it was:",l,r);const m=TP(r,l);let v,I;if(u.merge)v=new Io(l.fieldMask),I=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const L=_M(e,M,t);if(!l.contains(L))throw new Re(le.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);AP(A,L)||A.push(L)}v=new Io(A),I=l.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,I=l.fieldTransforms;return new nU(new Ai(m),v,I)}class Pw extends tp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pw}}function CP(n,e,t){return new MC({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class pM extends tp{_toFieldTransform(e){return new fw(e.path,new Sm)}isEqual(e){return e instanceof pM}}class iU extends tp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=CP(this,e,!0),r=this._a.map(u=>rp(u,t)),s=new zf(r);return new fw(e.path,s)}isEqual(e){return this===e}}class sU extends tp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=CP(this,e,!0),r=this._a.map(u=>rp(u,t)),s=new qf(r);return new fw(e.path,s)}isEqual(e){return this===e}}class oU extends tp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Am(e.It,mk(e.It,this.wa));return new fw(e.path,t)}isEqual(e){return this===e}}function gM(n,e,t,r){const s=n.da(1,e,t);yM("Data must be an object, but it was:",s,r);const u=[],l=Ai.empty();Bf(r,(v,I)=>{const A=NC(e,v,t);I=(0,jt.m9)(I);const M=s.ca(A);if(I instanceof Pw)u.push(A);else{const L=rp(I,M);null!=L&&(u.push(A),l.set(A,L))}});const m=new Io(u);return new IP(l,m,s.fieldTransforms)}function mM(n,e,t,r,s,u){const l=n.da(1,e,t),m=[_M(e,r,t)],v=[s];if(u.length%2!=0)throw new Re(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)m.push(_M(e,u[L])),v.push(u[L+1]);const I=[],A=Ai.empty();for(let L=m.length-1;L>=0;--L)if(!AP(I,m[L])){const H=m[L];let Z=v[L];Z=(0,jt.m9)(Z);const Ce=l.ca(H);if(Z instanceof Pw)I.push(H);else{const be=rp(Z,Ce);null!=be&&(I.push(H),A.set(H,be))}}const M=new Io(I);return new IP(A,M,l.fieldTransforms)}function DP(n,e,t,r=!1){return rp(t,n.da(r?4:3,e))}function rp(n,e){if(SP(n=(0,jt.m9)(n)))return yM("Unsupported field value:",e,n),TP(n,e);if(n instanceof tp)return function(t,r){if(!bP(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=rp(l,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,jt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return mk(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Jn.fromDate(t);return{timestampValue:vw(r.It,s)}}if(t instanceof Jn){const s=new Jn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:vw(r.It,s)}}if(t instanceof xC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uc)return{bytesValue:Lk(r.It,t._byteString)};if(t instanceof jn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:PA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${CC(t)}`)}(n,e)}function TP(n,e){const t={};return qN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bf(n,(r,s)=>{const u=rp(s,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function SP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Jn||n instanceof xC||n instanceof uc||n instanceof jn||n instanceof tp)}function yM(n,e,t){if(!SP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=CC(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function _M(n,e,t){if((e=(0,jt.m9)(e))instanceof bl)return e._internalPath;if("string"==typeof e)return NC(n,e);throw kC("Field path arguments must be of type string or ",n,!1,void 0,t)}const aU=new RegExp("[~\\*/\\[\\]]");function NC(n,e,t){if(e.search(aU)>=0)throw kC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bl(...e.split("."))._internalPath}catch{throw kC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kC(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||l)&&(v+=" (found",u&&(v+=` in field ${r}`),l&&(v+=` in document ${s}`),v+=")"),new Re(le.INVALID_ARGUMENT,m+n+v)}function AP(n,e){return n.some(t=>t.isEqual(e))}class Fw{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(OC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uU extends Fw{data(){return super.data()}}function OC(n,e){return"string"==typeof e?NC(n,e):e instanceof bl?e._internalPath:e._delegate._internalPath}function xP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lw{}function eh(n,...e){for(const t of e)n=t._apply(n);return n}class cU extends Lw{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=np(e.firestore),r=function(s,u,l,m,v,I,A){let M;if(v.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){PP(A,I);const H=[];for(const Z of A)H.push(OP(m,s,Z));M={arrayValue:{values:H}}}else M=OP(m,s,A)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||PP(A,I),M=DP(l,"where",A,"in"===I||"not-in"===I);const L=xi.create(v,I,M);return function(H,Z){if(Z.dt()){const be=MA(H);if(null!==be&&!be.isEqual(Z.field))throw new Re(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${be.toString()}' and '${Z.field.toString()}'`);const Ye=xA(H);null!==Ye&&FP(0,Z.field,Ye)}const Ce=function(be,Ye){for(const yt of be.filters)if(Ye.indexOf(yt.op)>=0)return yt.op;return null}(H,function(be){switch(be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==Ce)throw new Re(le.INVALID_ARGUMENT,Ce===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${Ce.toString()}' filters.`)}(s,L),L}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ki(e.firestore,e.converter,function(s,u){const l=s.filters.concat([u]);return new vl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),l,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class dU extends Lw{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Re(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Cm(s,u);return function(m,v){if(null===xA(m)){const I=MA(m);null!==I&&FP(0,I,v.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Ki(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new vl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class MP extends Lw{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Ki(e.firestore,e.converter,nC(e._query,this.Ia,this.Ta))}}class RP extends Lw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=kP(e,this.type,this.Ea,this.Aa);return new Ki(e.firestore,e.converter,(s=t,new vl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class NP extends Lw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=kP(e,this.type,this.Ea,this.Aa);return new Ki(e.firestore,e.converter,(s=t,new vl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function kP(n,e,t,r){if(t[0]=(0,jt.m9)(t[0]),t[0]instanceof Fw)return function(s,u,l,m,v){if(!m)throw new Re(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const I=[];for(const A of Tm(s))if(A.field.isKeyField())I.push($f(u,m.key));else{const M=m.data.field(A.field);if(TA(M))throw new Re(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=A.field.canonicalString();throw new Re(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(M)}return new Kd(I,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=np(n.firestore);return function(u,l,m,v,I,A){const M=u.explicitOrderBy;if(I.length>M.length)throw new Re(le.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let H=0;H<I.length;H++){const Z=I[H];if(M[H].field.isKeyField()){if("string"!=typeof Z)throw new Re(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Z}`);if(!RA(u)&&-1!==Z.indexOf("/"))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Z}' contains a slash.`);const Ce=u.path.child(un.fromString(Z));if(!ze.isDocumentKey(Ce))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Ce}' is not because it contains an odd number of segments.`);const be=new ze(Ce);L.push($f(l,be))}else{const Ce=DP(m,v,Z);L.push(Ce)}}return new Kd(L,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function OP(n,e,t){if("string"==typeof(t=(0,jt.m9)(t))){if(""===t)throw new Re(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RA(e)&&-1!==t.indexOf("/"))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!ze.isDocumentKey(r))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $f(n,new ze(r))}if(t instanceof jn)return $f(n,t._key);throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${CC(t)}.`)}function PP(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function FP(n,e,t){if(!t.isEqual(e))throw new Re(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class vM{convertValue(e,t="none"){switch(Hf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){const r={};return Bf(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new xC(gr(e.latitude),gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=KN(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sw(e));default:return null}}convertTimestamp(e){const t=Gd(e);return new Jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);Mt(qk(r));const s=new zd(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return s.isEqual(t)||Er(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function PC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class vU extends vM{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}class ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cl extends Fw{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(OC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vw extends Cl{data(e={}){return super.data(e)}}class th{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ip(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vw(this._firestore,this._userDataWriter,r.key,r,new ip(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Vw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ip(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new Vw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ip(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,I=-1;return 0!==l.type&&(v=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),I=u.indexOf(l.doc.key)),{type:wU(l.type),doc:m,oldIndex:v,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function LP(n,e){return n instanceof Cl&&e instanceof Cl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof th&&e instanceof th&&n._firestore===e._firestore&&iM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class nh extends vM{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}function VP(n,e,t){n=rn(n,jn);const r=rn(n.firestore,Hn),s=PC(n.converter,e,t);return zm(r,[RC(np(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Xn.none())])}function UP(n,e,t,...r){n=rn(n,jn);const s=rn(n.firestore,Hn),u=np(s);let l;return l="string"==typeof(e=(0,jt.m9)(e))||e instanceof bl?mM(u,"updateDoc",n._key,e,t,r):gM(u,"updateDoc",n._key,e),zm(s,[l.toMutation(n._key,Xn.exists(!0))])}function BP(n,...e){var t,r,s;n=(0,jt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||fM(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(fM(e[l])){const M=e[l];e[l]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[l+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[l+2]=null===(s=M.complete)||void 0===s?void 0:s.bind(M)}let v,I,A;if(n instanceof jn)I=rn(n.firestore,Hn),A=Dm(n._key.path),v={next:M=>{e[l]&&e[l](wM(I,n,M))},error:e[l+1],complete:e[l+2]};else{const M=rn(n,Ki);I=rn(M.firestore,Hn),A=M._query;const L=new nh(I);v={next:H=>{e[l]&&e[l](new th(I,L,M,H))},error:e[l+1],complete:e[l+2]},xP(n._query)}return function(M,L,H,Z){const Ce=new TC(Z),be=new Mx(L,Ce,H);return M.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return Dx(yield Gm(M),be)})),()=>{Ce.bc(),M.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return Sx(yield Gm(M),be)}))}}(Ir(I),A,m,v)}function zm(n,e){return function(t,r){const s=new Wr;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function fV(n,e,t){return Px.apply(this,arguments)}(yield dM(t),r,s)})),s.promise}(Ir(n),e)}function wM(n,e,t){const r=t.docs.get(e._key),s=new nh(n);return new Cl(n,s,e._key,r,new ip(t.hasPendingWrites,t.fromCache),e.converter)}const MU={maxAttempts:5};class jP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=np(e)}set(e,t,r){this._verifyNotCommitted();const s=rh(e,this._firestore),u=PC(s.converter,t,r),l=RC(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Xn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=rh(e,this._firestore);let l;return l="string"==typeof(t=(0,jt.m9)(t))||t instanceof bl?mM(this._dataReader,"WriteBatch.update",u._key,t,r,s):gM(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rh(e,this._firestore);return this._mutations=this._mutations.concat(new Mm(t._key,Xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rh(n,e){if((n=(0,jt.m9)(n)).firestore!==e)throw new Re(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class RU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=np(e)}get(e){const t=rh(e,this._firestore),r=new vU(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return at();const u=s[0];if(u.isFoundDocument())return new Fw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Fw(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const s=rh(e,this._firestore),u=PC(s.converter,t,r),l=RC(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=rh(e,this._firestore);let l;return l="string"==typeof(t=(0,jt.m9)(t))||t instanceof bl?mM(this._dataReader,"Transaction.update",u._key,t,r,s):gM(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=rh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rh(e,this._firestore),r=new nh(this._firestore);return super.get(e).then(s=>new Cl(this._firestore,r,t._key,s._document,new ip(!1,!1),t.converter))}}function EM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $P(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function GP(){if(!function tF(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){wm=Jo.SDK_VERSION,(0,Jo._registerComponent)(new Qu.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Hn(new $1(t.getProvider("auth-internal")),new q1(t.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Re(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zd(m.options.projectId,v)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,Jo.registerVersion)(PN,"3.7.2",n),(0,Jo.registerVersion)(PN,"3.7.2","esm2017")}();class Uw{constructor(e){this._delegate=e}static fromBase64String(e){return GP(),new Uw(uc.fromBase64String(e))}static fromUint8Array(e){return $P(),new Uw(uc.fromUint8Array(e))}toBase64(){return GP(),this._delegate.toBase64()}toUint8Array(){return $P(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IM(n){return function BU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class jU{enableIndexedDbPersistence(e,t){return function WV(n,e){EP(n=rn(n,Hn));const t=Ir(n),r=n._freezeSettings(),s=new nM;return wP(t,s,new nP(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function KV(n){EP(n=rn(n,Hn));const e=Ir(n),t=n._freezeSettings(),r=new nM;return wP(e,r,new xV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ZV(n){if(n._initialized&&!n._terminated)throw new Re(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!Za.C())return Promise.resolve();const s=r+"main";yield Za.delete(s)}),function(r){return t.apply(this,arguments)})(ZA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class zP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function cP(n,e,t,r={}){var s;const u=(n=rn(n,Ow))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Lf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=di.MOCK_USER;else{l=(0,jt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Re(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new di(v)}n._authCredentials=new H1(new FN(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function QV(n){return function LV(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield gP(n),t=yield lM(n);return e.setNetworkEnabled(!0),function(r){const s=Ke(r);return s._u.delete(0),Nw(s)}(t)}))}(Ir(n=rn(n,Hn)))}(this._delegate)}disableNetwork(){return function JV(n){return function VV(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield gP(n),t=yield lM(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(s){const u=Ke(s);u._u.add(0),yield Lm(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Ir(n=rn(n,Hn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function YV(n){return function(e){const t=new Wr;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function yV(n,e){return Bx.apply(this,arguments)}(yield dM(e),t)})),t.promise}(Ir(n=rn(n,Hn)))}(this._delegate)}onSnapshotsInSync(e){return function xU(n,e){return function jV(n,e){const t=new TC(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Gm(n),s=t,Ke(r).Ru.add(s),void s.next();var r,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Gm(n),s=t,void Ke(r).Ru.delete(s);var r,s}))}}(Ir(n=rn(n,Hn)),fM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qm(this,lP(this._delegate,e))}catch(t){throw ls(t,"collection()","Firestore.collection()")}}doc(e){try{return new ra(this,DC(this._delegate,e))}catch(t){throw ls(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ds(this,function MV(n,e){if(n=rn(n,Ow),rM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ki(n,null,(t=e,new vl(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ls(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function NU(n,e,t){n=rn(n,Hn);const r=Object.assign(Object.assign({},MU),t);return function(s){if(s.maxAttempts<1)throw new Re(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new Wr;return s.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const v=yield function mP(n){return SC(n).then(e=>e.datastore)}(s);new PV(s.asyncQueue,v,l,u,m).run()})),m.promise}(Ir(n),s=>e(new RU(n,s)),r)}(this._delegate,t=>e(new qP(this,t)))}batch(){return Ir(this._delegate),new WP(new jP(this._delegate,e=>zm(this._delegate,e)))}loadBundle(e){return function XV(n,e){const t=Ir(n=rn(n,Hn)),r=new zV;return function HV(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,I){if(v instanceof Uint8Array)return hP(v,I);if(v instanceof ArrayBuffer)return hP(new Uint8Array(v),I);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new RV(v,l);var v}(t,Rw(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function AV(n,e,t){const r=Ke(n);var s;(s=(0,pe.Z)(function*(u,l,m){try{const v=yield l.getMetadata();if(yield function(L,H){const Z=Ke(L),Ce=hi(H.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",be=>Z.Ns.getBundleMetadata(be,H.id)).then(be=>!!be&&be.createTime.compareTo(Ce)>=0)}(u.localStore,v))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(L=v).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);m._updateProgress(qO(v));const I=new aV(v,u.localStore,l.It);let A=yield l.mc();for(;A;){const L=yield I.Fu(A);L&&m._updateProgress(L),A=yield l.mc()}const M=yield I.complete();return yield Il(u,M.Lu,void 0),yield function(L,H){const Z=Ke(L);return Z.persistence.runTransaction("Save bundle","readwrite",Ce=>Z.Ns.saveBundleMetadata(Ce,H))}(u.localStore,v),m._completeWith(M.progress),Promise.resolve(M.Bu)}catch(v){return Lf("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var L}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield dM(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function eU(n,e){return function $V(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const s=Ke(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield AC(n),e)}))}(Ir(n=rn(n,Hn)),e).then(t=>t?new Ki(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ds(this,t):null)}}class FC extends vM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uw(new uc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ra.forKey(t,this.firestore,null)}}class qP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new FC(e)}get(e){const t=op(e);return this._delegate.get(t).then(r=>new Bw(this._firestore,new Cl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=op(e);return r?(EM("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=op(e);return this._delegate.delete(t),this}}class WP{constructor(e){this._delegate=e}set(e,t,r){const s=op(e);return r?(EM("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=op(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Vw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new sp(e,new FC(e),t),s.set(t,u)),u}}sp.INSTANCES=new WeakMap;class ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ra(t,new jn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new ra(t,new jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new qm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qm(this.firestore,lP(this._delegate,e))}catch(t){throw ls(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,jt.m9)(e))instanceof jn&&dP(this._delegate,e)}set(e,t){t=EM("DocumentReference.set",t);try{return t?VP(this._delegate,e,t):VP(this._delegate,e)}catch(r){throw ls(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?UP(this._delegate,e):UP(this._delegate,e,t,...r)}catch(s){throw ls(s,"updateDoc()","DocumentReference.update()")}}delete(){return function SU(n){return zm(rn(n.firestore,Hn),[new Mm(n._key,Xn.none())])}(this._delegate)}onSnapshot(...e){const t=KP(e),r=ZP(e,s=>new Bw(this.firestore,new Cl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return BP(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function IU(n){n=rn(n,jn);const e=rn(n.firestore,Hn),t=Ir(e),r=new nh(e);return function UV(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,u,l){try{const m=yield function(v,I){const A=Ke(v);return A.persistence.runTransaction("read document","readonly",M=>A.localDocuments.getDocument(M,I))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Re(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Bm(m,`Failed to get document '${u} from cache`);l.reject(v)}}),function(s,u,l){return r.apply(this,arguments)})(yield AC(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Cl(e,r,n._key,s,new ip(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function bU(n){n=rn(n,jn);const e=rn(n.firestore,Hn);return yP(Ir(e),n._key,{source:"server"}).then(t=>wM(e,n,t))}(this._delegate):function EU(n){n=rn(n,jn);const e=rn(n.firestore,Hn);return yP(Ir(e),n._key).then(t=>wM(e,n,t))}(this._delegate),t.then(r=>new Bw(this.firestore,new Cl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ra(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}function ls(n,e,t){return n.message=n.message.replace(e,t),n}function KP(n){for(const e of n)if("object"==typeof e&&!IM(e))return e;return{}}function ZP(n,e){var t,r;let s;return s=IM(n[0])?n[0]:IM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class Bw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return LP(this._delegate,e._delegate)}}class jw extends Bw{data(e){const t=this._delegate.data(e);return function B1(n,e){n||at()}(void 0!==t),t}}class ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FC(e)}where(e,t,r){try{return new ds(this.firestore,eh(this._delegate,function lU(n,e,t){const r=e,s=OC("where",n);return new cU(s,r,t)}(e,t,r)))}catch(s){throw ls(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ds(this.firestore,eh(this._delegate,function hU(n,e="asc"){const t=e,r=OC("orderBy",n);return new dU(r,t)}(e,t)))}catch(r){throw ls(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ds(this.firestore,eh(this._delegate,function fU(n){return oP("limit",n),new MP("limit",n,"F")}(e)))}catch(t){throw ls(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ds(this.firestore,eh(this._delegate,function pU(n){return oP("limitToLast",n),new MP("limitToLast",n,"L")}(e)))}catch(t){throw ls(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ds(this.firestore,eh(this._delegate,function gU(...n){return new RP("startAt",n,!0)}(...e)))}catch(t){throw ls(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ds(this.firestore,eh(this._delegate,function mU(...n){return new RP("startAfter",n,!1)}(...e)))}catch(t){throw ls(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ds(this.firestore,eh(this._delegate,function yU(...n){return new NP("endBefore",n,!1)}(...e)))}catch(t){throw ls(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ds(this.firestore,eh(this._delegate,function _U(...n){return new NP("endAt",n,!0)}(...e)))}catch(t){throw ls(t,"endAt()","Query.endAt()")}}isEqual(e){return iM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function DU(n){n=rn(n,Ki);const e=rn(n.firestore,Hn),t=Ir(e),r=new nh(e);return function BV(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,u,l){try{const m=yield _C(s,u,!0),v=new ZO(u,m.Hi),I=v.Wu(m.documents),A=v.applyChanges(I,!1);l.resolve(A.snapshot)}catch(m){const v=Bm(m,`Failed to execute query '${u} against cache`);l.reject(v)}}),function(s,u,l){return r.apply(this,arguments)})(yield AC(n),e,t);var r})),t.promise}(t,n._query).then(s=>new th(e,r,n,s))}(this._delegate):"server"===e?.source?function TU(n){n=rn(n,Ki);const e=rn(n.firestore,Hn),t=Ir(e),r=new nh(e);return _P(t,n._query,{source:"server"}).then(s=>new th(e,r,n,s))}(this._delegate):function CU(n){n=rn(n,Ki);const e=rn(n.firestore,Hn),t=Ir(e),r=new nh(e);return xP(n._query),_P(t,n._query).then(s=>new th(e,r,n,s))}(this._delegate),t.then(r=>new bM(this.firestore,new th(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=KP(e),r=ZP(e,s=>new bM(this.firestore,new th(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return BP(this._delegate,t,r)}withConverter(e){return new ds(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}class $U{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class bM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $U(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new jw(this._firestore,r))})}isEqual(e){return LP(this._delegate,e._delegate)}}class qm extends ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ra(this.firestore,e):null}doc(e){try{return new ra(this.firestore,void 0===e?DC(this._delegate):DC(this._delegate,e))}catch(t){throw ls(t,"doc()","CollectionReference.doc()")}}add(e){return function AU(n,e){const t=rn(n.firestore,Hn),r=DC(n),s=PC(n.converter,e);return zm(t,[RC(np(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ra(this.firestore,t))}isEqual(e){return dP(this._delegate,e._delegate)}withConverter(e){return new qm(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}function op(n){return rn(n,jn)}class CM{constructor(...e){this._delegate=new bl(...e)}static documentId(){return new CM(fr.keyField().canonicalString())}isEqual(e){return(e=(0,jt.m9)(e))instanceof bl&&this._delegate._internalPath.isEqual(e._internalPath)}}class ap{constructor(e){this._delegate=e}static serverTimestamp(){const e=function OU(){return new pM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ap(e)}static delete(){const e=function kU(){return new Pw("deleteField")}();return e._methodName="FieldValue.delete",new ap(e)}static arrayUnion(...e){const t=function PU(...n){return new iU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ap(t)}static arrayRemove(...e){const t=function FU(...n){return new sU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ap(t)}static increment(e){const t=function LU(n){return new oU("increment",n)}(e);return t._methodName="FieldValue.increment",new ap(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const GU={Firestore:zP,GeoPoint:xC,Timestamp:Jn,Blob:Uw,Transaction:qP,WriteBatch:WP,DocumentReference:ra,DocumentSnapshot:Bw,Query:ds,QueryDocumentSnapshot:jw,QuerySnapshot:bM,CollectionReference:qm,FieldPath:CM,FieldValue:ap,setLogLevel:function HU(n){!function U1(n){jd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function YP(n,e){return function WU(n,e=md.z){return new Mn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function DM(n,e){return YP(n,e).pipe((0,We.U)(t=>({payload:t,type:"query"})))}function LC(n,e){return DM(n,e).pipe(ku(void 0),Dv(),(0,We.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const v=s.find(A=>A.doc.ref.isEqual(l.ref)),I=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(l.metadata)||!v&&I&&JSON.stringify(I.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function QP(n,e,t){return LC(n,t).pipe(At((r,s)=>function ZU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function YU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return TM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return TM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return TM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function Tv(n,e=Ss.y){return n=n??tc,(0,Un.e)((t,r)=>{let s,u=!0;t.subscribe((0,Rn.x)(r,l=>{const m=e(l);(u||!n(s,m))&&(u=!1,s=m,r.next(l))}))})}(),(0,We.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function TM(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function JP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function qU(n){(function zU(n,e){n.INTERNAL.registerComponent(new Qu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},GU)))})(n,(e,t)=>new zP(e,t,new jU)),n.registerVersion("@firebase/firestore-compat","0.2.2")}(EI.Z);class XP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=LC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,We.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(ku(void 0),Dv(),C(([r,s])=>s.length>0||!r),(0,We.U)(([r,s])=>s),kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(At((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=JP(e);return QP(this.query,t,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return DM(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),kn.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(kn.iC)}add(e){return this.ref.add(e)}doc(e){return new e1(this.ref.doc(e),this.afs)}}class e1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=r1(r,t);return new XP(s,u,this.afs)}snapshotChanges(){return function KU(n,e){return YP(n,e).pipe(ku(void 0),Dv(),(0,We.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,We.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Jt.D)(this.ref.get(e)).pipe(kn.iC)}}class QU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?LC(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),C(t=>t.length>0),kn.iC):LC(this.query,this.afs.schedulers.outsideAngular).pipe(kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(At((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=JP(e);return QP(this.query,t,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return DM(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),kn.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(kn.iC)}}const t1=new f.OlP("angularfire2.enableFirestorePersistence"),n1=new f.OlP("angularfire2.firestore.persistenceSettings"),JU=new f.OlP("angularfire2.firestore.settings"),XU=new f.OlP("angularfire2.firestore.use-emulator");function r1(n,e=(t=>t)){return{query:e(n),ref:n}}let eB=(()=>{class n{constructor(t,r,s,u,l,m,v,I,A,M,L,H,Z,Ce,be,Ye,yt){this.schedulers=v;const dt=(0,Ci.on)(t,m,r),ut=A;M&&J_(dt,m,L,Z,Ce,be,H,Ye),[this.firestore,this.persistenceEnabled$]=(0,Ci.cc)(`${dt.name}.firestore`,"AngularFirestore",dt.name,()=>{const Dt=m.runOutsideAngular(()=>dt.firestore());if(u&&Dt.settings(u),ut&&Dt.useEmulator(...ut),s&&!ur(l)){const Ot=()=>{try{return(0,Jt.D)(Dt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(sr){return typeof console<"u"&&console.warn(sr),tt(!1)}};return[Dt,m.runOutsideAngular(Ot)]}return[Dt,tt(!1)]},[u,ut,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=r1(s,r),m=this.schedulers.ngZone.run(()=>u);return new XP(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new QU(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new e1(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ci.Dh),f.LFG(Ci.xv,8),f.LFG(t1,8),f.LFG(JU,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(kn.HU),f.LFG(n1,8),f.LFG(XU,8),f.LFG(Kg,8),f.LFG(qg,8),f.LFG(wI,8),f.LFG(Z_,8),f.LFG(Wg,8),f.LFG(Y_,8),f.LFG(Q_,8),f.LFG(zg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tB=(()=>{class n{constructor(){mf.Z.registerVersion("angularfire",kn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:t1,useValue:!0},{provide:n1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[eB]}),n})(),nB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[Yo]}),n.\u0275inj=f.cJS({imports:[Rc,I_,gT.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),Ci.hO.initializeApp(T__firebase),XT,tB,pb]}),n})();(0,f.G48)(),Tu().bootstrapModule(nB).catch(n=>console.error(n))},5867:(ct,De,O)=>{O.d(De,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=O(9681);(0,f.registerVersion)("firebase","9.13.0","app")},127:(ct,De,O)=>{O.d(De,{Z:()=>f.Z});var f=O(3942);f.Z.registerVersion("firebase","9.13.0","app-compat")},1277:(ct,De,O)=>{O.r(De);var f=O(5861),X=O(3942),k=O(2090),ie=O(9681),se=O(1877),ce=O(655),ue=O(4859);const we=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},rt=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new se.Yd("@firebase/auth");function ot(y,...h){Je.logLevel<=se.in.ERROR&&Je.error(`Auth (${ie.SDK_VERSION}): ${y}`,...h)}function xe(y,...h){throw je(y,...h)}function _e(y,...h){return je(y,...h)}function Ie(y,h,g){const w=Object.assign(Object.assign({},rt()),{[h]:g});return new k.LL("auth","Firebase",w).create(h,{appName:y.name})}function Be(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&xe(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const g=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return me.create(y,...h)}function U(y,h,...g){if(!y)throw je(h,...g)}function ge(y){const h="INTERNAL ASSERTION FAILED: "+y;throw ot(h),new Error(h)}function q(y,h){y||ge(h)}const J=new Map;function re(y){q(y instanceof Function,"Expected a class definition");let h=J.get(y);return h?(q(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,J.set(y,h),h)}function ke(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function mt(){return"http:"===Yt()||"https:"===Yt()}function Yt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(h,g){this.shortDelay=h,this.longDelay=g,q(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(mt()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gn(y,h){q(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Wt{static initialize(h,g,w){this.fetchImpl=h,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},br=new sn(3e4,6e4);function Nt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function ln(y,h,g,w){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,f.Z)(function*(y,h,g,w,S={}){return gi(y,S,(0,f.Z)(function*(){let N={},z={};w&&("GET"===h?z=w:N={body:JSON.stringify(w)});const ae=(0,k.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),Wt.fetch()(mi(y,y.config.apiHost,g,ae),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function gi(y,h,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Qt),h);try{const S=new Zr(y),N=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const z=yield N.json();if("needConfirmation"in z)throw Yr(y,"account-exists-with-different-credential",z);if(N.ok&&!("errorMessage"in z))return z;{const ae=N.ok?z.errorMessage:z.error.message,[Ve,Qe]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Yr(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ve)throw Yr(y,"email-already-in-use",z);if("USER_DISABLED"===Ve)throw Yr(y,"user-disabled",z);const vt=w[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ie(y,vt,Qe);xe(y,vt)}}catch(S){if(S instanceof k.ZR)throw S;xe(y,"network-request-failed")}})).apply(this,arguments)}function Lr(y,h,g,w){return js.apply(this,arguments)}function js(){return(js=(0,f.Z)(function*(y,h,g,w,S={}){const N=yield ln(y,h,g,w,S);return"mfaPendingCredential"in N&&xe(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function mi(y,h,g,w){const S=`${h}${g}?${w}`;return y.config.emulator?gn(y.config,S):`${y.config.apiScheme}://${S}`}class Zr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),br.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yr(y,h,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const S=_e(y,h,w);return S.customData._tokenResponse=g,S}function Ze(){return(Ze=(0,f.Z)(function*(y,h){return ln(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function mr(y,h){return hs.apply(this,arguments)}function hs(){return(hs=(0,f.Z)(function*(y,h){return ln(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function $n(y,h){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(y,h){return ln(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Mi(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function hn(){return(hn=(0,f.Z)(function*(y,h=!1){const g=(0,k.m9)(y),w=yield g.getIdToken(h),S=lt(w);U(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,z=N?.sign_in_provider;return{claims:S,token:w,authTime:Mi(_t(S.auth_time)),issuedAtTime:Mi(_t(S.iat)),expirationTime:Mi(_t(S.exp)),signInProvider:z||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function _t(y){return 1e3*Number(y)}function lt(y){var h;const[g,w,S]=y.split(".");if(void 0===g||void 0===w||void 0===S)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,k.tV)(w);return N?JSON.parse(N):(ot("Failed to decode base64 JWT payload"),null)}catch(N){return ot("Caught error parsing JWT payload as JSON",null===(h=N)||void 0===h?void 0:h.toString()),null}}function or(y,h){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(w){throw w instanceof k.ZR&&Vr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Vr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class St{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),w)}iteration(){var h=this;return(0,f.Z)(function*(){var g;try{yield h.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(g=w)||void 0===g?void 0:g.code)&&h.schedule(!0))}h.schedule()})()}}class fs{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mi(this.lastLoginAt),this.creationTime=Mi(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function en(y){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,f.Z)(function*(y){var h;const g=y.auth,w=yield y.getIdToken(),S=yield or(y,$n(g,{idToken:w}));U(S?.users.length,g,"internal-error");const N=S.users[0];y._notifyReloadListener(N);const z=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?et(N.providerUserInfo):[],ae=Dr(y.providerData,z),vt=!!y.isAnonymous&&!(y.email&&N.passwordHash||ae?.length),gt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ae,metadata:new fs(N.createdAt,N.lastLoginAt),isAnonymous:vt};Object.assign(y,gt)})).apply(this,arguments)}function Gn(){return(Gn=(0,f.Z)(function*(y){const h=(0,k.m9)(y);yield en(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Dr(y,h){return[...y.filter(w=>!h.some(S=>S.providerId===w.providerId)),...h]}function et(y){return y.map(h=>{var{providerId:g}=h,w=(0,ce._T)(h,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Xe(){return(Xe=(0,f.Z)(function*(y,h){const g=yield gi(y,{},(0,f.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=y.config,z=mi(y,S,"/v1/token",`key=${N}`),ae=yield y._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(z,{method:"POST",headers:ae,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){U(h.idToken,"internal-error"),U(typeof h.idToken<"u","internal-error"),U(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Xt(y){const h=lt(y);return U(h,"internal-error"),U(typeof h.exp<"u","internal-error"),U(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var w=this;return(0,f.Z)(function*(){return U(!w.accessToken||w.refreshToken,h,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var w=this;return(0,f.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:z}=yield function Te(y,h){return Xe.apply(this,arguments)}(h,g);w.updateTokensAndExpiration(S,N,Number(z))})()}updateTokensAndExpiration(h,g,w){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,g){const{refreshToken:w,accessToken:S,expirationTime:N}=g,z=new bt;return w&&(U("string"==typeof w,"internal-error",{appName:h}),z.refreshToken=w),S&&(U("string"==typeof S,"internal-error",{appName:h}),z.accessToken=S),N&&(U("number"==typeof N,"internal-error",{appName:h}),z.expirationTime=N),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new bt,this.toJSON())}_performRefresh(){return ge("not implemented")}}function Et(y,h){U("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Pt{constructor(h){var{uid:g,auth:w,stsTokenManager:S}=h,N=(0,ce._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new St(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new fs(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const w=yield or(g,g.stsTokenManager.getToken(g.auth,h));return U(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(h){return function Pn(y){return hn.apply(this,arguments)}(this,h)}reload(){return function tn(y){return Gn.apply(this,arguments)}(this)}_assign(h){this!==h&&(U(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Pt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var w=this;return(0,f.Z)(function*(){let S=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),S=!0),g&&(yield en(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield or(h,function ia(y,h){return Ze.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var w,S,N,z,ae,Ve,Qe,vt;const gt=null!==(w=g.displayName)&&void 0!==w?w:void 0,an=null!==(S=g.email)&&void 0!==S?S:void 0,ri=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Va=null!==(z=g.photoURL)&&void 0!==z?z:void 0,uy=null!==(ae=g.tenantId)&&void 0!==ae?ae:void 0,Zc=null!==(Ve=g._redirectEventId)&&void 0!==Ve?Ve:void 0,jp=null!==(Qe=g.createdAt)&&void 0!==Qe?Qe:void 0,ld=null!==(vt=g.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Hp,emailVerified:cy,isAnonymous:Uu,providerData:Ua,stsTokenManager:Ah}=g;U(Hp&&Ah,h,"internal-error");const xh=bt.fromJSON(this.name,Ah);U("string"==typeof Hp,h,"internal-error"),Et(gt,h.name),Et(an,h.name),U("boolean"==typeof cy,h,"internal-error"),U("boolean"==typeof Uu,h,"internal-error"),Et(ri,h.name),Et(Va,h.name),Et(uy,h.name),Et(Zc,h.name),Et(jp,h.name),Et(ld,h.name);const zo=new Pt({uid:Hp,auth:h,email:an,emailVerified:cy,displayName:gt,isAnonymous:Uu,photoURL:Va,phoneNumber:ri,tenantId:uy,stsTokenManager:xh,createdAt:jp,lastLoginAt:ld});return Ua&&Array.isArray(Ua)&&(zo.providerData=Ua.map(Bu=>Object.assign({},Bu))),Zc&&(zo._redirectEventId=Zc),zo}static _fromIdTokenResponse(h,g,w=!1){return(0,f.Z)(function*(){const S=new bt;S.updateFromServerResponse(g);const N=new Pt({uid:g.localId,auth:h,stsTokenManager:S,isAnonymous:w});return yield en(N),N})()}}const V=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,w){var S=this;return(0,f.Z)(function*(){S.storage[g]=w})()}_get(g){var w=this;return(0,f.Z)(function*(){const S=w.storage[g];return void 0===S?null:S})()}_remove(g){var w=this;return(0,f.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function W(y,h,g){return`firebase:${y}:${h}:${g}`}class ve{constructor(h,g,w){this.persistence=h,this.auth=g,this.userKey=w;const{config:S,name:N}=this.auth;this.fullUserKey=W(this.userKey,S.apiKey,N),this.fullPersistenceKey=W("persistence",S.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?Pt._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,w="authUser"){return(0,f.Z)(function*(){if(!g.length)return new ve(re(V),h,w);const S=(yield Promise.all(g.map(function(){var Qe=(0,f.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let N=S[0]||re(V);const z=W(w,h.config.apiKey,h.name);let ae=null;for(const Qe of g)try{const vt=yield Qe._get(z);if(vt){const gt=Pt._fromJSON(h,vt);Qe!==N&&(ae=gt),N=Qe;break}}catch{}const Ve=S.filter(Qe=>Qe._shouldAllowMigration);return N._shouldAllowMigration&&Ve.length?(N=Ve[0],ae&&(yield N._set(z,ae.toJSON())),yield Promise.all(g.map(function(){var Qe=(0,f.Z)(function*(vt){if(vt!==N)try{yield vt._remove(z)}catch{}});return function(vt){return Qe.apply(this,arguments)}}())),new ve(N,h,w)):new ve(N,h,w)})()}}function Q(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(dn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ge(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ue(h))return"Blackberry";if($e(h))return"Webos";if(ht(h))return"Safari";if((h.includes("chrome/")||Kt(h))&&!h.includes("edge/"))return"Chrome";if(zt(h))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Ge(y=(0,k.z$)()){return/firefox\//i.test(y)}function ht(y=(0,k.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Kt(y=(0,k.z$)()){return/crios\//i.test(y)}function dn(y=(0,k.z$)()){return/iemobile/i.test(y)}function zt(y=(0,k.z$)()){return/android/i.test(y)}function Ue(y=(0,k.z$)()){return/blackberry/i.test(y)}function $e(y=(0,k.z$)()){return/webos/i.test(y)}function Vt(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Hs(y=(0,k.z$)()){return Vt(y)||zt(y)||$e(y)||Ue(y)||/windows phone/i.test(y)||dn(y)}function ps(y,h=[]){let g;switch(y){case"Browser":g=Q((0,k.z$)());break;case"Worker":g=`${Q((0,k.z$)())}-${y}`;break;default:g=y}const w=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ie.SDK_VERSION}/${w}`}class bo{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const w=N=>new Promise((z,ae)=>{try{z(h(N))}catch(Ve){ae(Ve)}});w.onAbort=g,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,f.Z)(function*(){var w;if(g.auth.currentUser===h)return;const S=[];try{for(const N of g.queue)yield N(h),N.onAbort&&S.push(N.onAbort)}catch(N){S.reverse();for(const z of S)try{z()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=N)||void 0===w?void 0:w.message})}})()}}class Ft{constructor(h,g,w){this.app=h,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $s(this),this.idTokenSubscription=new $s(this),this.beforeStateQueue=new bo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,g){var w=this;return g&&(this._popupRedirectResolver=re(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var S,N;if(!w._deleted&&(w.persistenceManager=yield ve.create(w,h),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var w;const S=yield g.assertedPersistence.getCurrentUser();let N=S,z=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ae=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Ve=N?._redirectEventId,Qe=yield g.tryRedirectSignIn(h);(!ae||ae===Ve)&&Qe?.user&&(N=Qe.user,z=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if(z)try{yield g.beforeStateQueue.runMiddleware(N)}catch(ae){N=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ae))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return U(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){var w;try{yield en(h)}catch(S){if("auth/network-request-failed"!==(null===(w=S)||void 0===w?void 0:w.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const w=h?(0,k.m9)(h):null;return w&&U(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(h,g=!1){var w=this;return(0,f.Z)(function*(){if(!w._deleted)return h&&U(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,f.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(re(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,g,w){return this.registerStateListener(this.authStateSubscription,h,g,w)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,w){return this.registerStateListener(this.idTokenSubscription,h,g,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var w=this;return(0,f.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(g);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const w=h&&re(h)||g._popupRedirectResolver;U(w,g,"argument-error"),g.redirectPersistenceManager=yield ve.create(g,[re(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var w,S;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===h?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,w,S){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return U(z,this,"internal-error"),z.then(()=>N(this.currentUser)),"function"==typeof g?h.addObserver(g,w,S):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ps(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function vn(y){return(0,k.m9)(y)}class $s{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ni(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function gs(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ar{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return ge("not implemented")}_getIdTokenResponse(h){return ge("not implemented")}_linkToIdToken(h,g){return ge("not implemented")}_getReauthenticationResolver(h){return ge("not implemented")}}function Vn(y,h){return sa.apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(y,h){return ln(y,"POST","/v1/accounts:resetPassword",Nt(y,h))})).apply(this,arguments)}function on(y,h){return cc.apply(this,arguments)}function cc(){return(cc=(0,f.Z)(function*(y,h){return ln(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function lc(y,h){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(y,h){return ln(y,"POST","/v1/accounts:update",Nt(y,h))})).apply(this,arguments)}function ys(){return(ys=(0,f.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithPassword",Nt(y,h))})).apply(this,arguments)}function _s(y,h){return yi.apply(this,arguments)}function yi(){return(yi=(0,f.Z)(function*(y,h){return ln(y,"POST","/v1/accounts:sendOobCode",Nt(y,h))})).apply(this,arguments)}function qn(y,h){return dc.apply(this,arguments)}function dc(){return(dc=(0,f.Z)(function*(y,h){return _s(y,h)})).apply(this,arguments)}function tr(y,h){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,f.Z)(function*(y,h){return _s(y,h)})).apply(this,arguments)}function Ja(y,h){return aa.apply(this,arguments)}function aa(){return(aa=(0,f.Z)(function*(y,h){return _s(y,h)})).apply(this,arguments)}function hc(y,h){return yr.apply(this,arguments)}function yr(){return(yr=(0,f.Z)(function*(y,h){return _s(y,h)})).apply(this,arguments)}function Dl(){return(Dl=(0,f.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithEmailLink",Nt(y,h))})).apply(this,arguments)}function fc(){return(fc=(0,f.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithEmailLink",Nt(y,h))})).apply(this,arguments)}class pc extends ar{constructor(h,g,w,S=null){super("password",w),this._email=h,this._password=g,this._tenantId=S}static _fromEmailAndPassword(h,g){return new pc(h,g,"password")}static _fromEmailAndCode(h,g,w=null){return new pc(h,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function oa(y,h){return ys.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function ih(y,h){return Dl.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:xe(h,"internal-error")}})()}_linkToIdToken(h,g){var w=this;return(0,f.Z)(function*(){switch(w.signInMethod){case"password":return on(h,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Tl(y,h){return fc.apply(this,arguments)}(h,{idToken:g,email:w._email,oobCode:w._password});default:xe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Wn(y,h){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,f.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithIdp",Nt(y,h))})).apply(this,arguments)}class Yi extends ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Yi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):xe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S}=g,N=(0,ce._T)(g,["providerId","signInMethod"]);if(!w||!S)return null;const z=new Yi(w,S);return z.idToken=N.idToken||void 0,z.accessToken=N.accessToken||void 0,z.secret=N.secret,z.nonce=N.nonce,z.pendingToken=N.pendingToken||null,z}_getIdTokenResponse(h){return Wn(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Wn(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Wn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,k.xO)(g)}return h}}function cp(y,h){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,f.Z)(function*(y,h){return ln(y,"POST","/v1/accounts:sendVerificationCode",Nt(y,h))})).apply(this,arguments)}function vs(){return(vs=(0,f.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",Nt(y,h))})).apply(this,arguments)}function Al(){return(Al=(0,f.Z)(function*(y,h){const g=yield Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",Nt(y,h));if(g.temporaryProof)throw Yr(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const dp={USER_NOT_FOUND:"user-not-found"};function xl(){return(xl=(0,f.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",Nt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),dp)})).apply(this,arguments)}class ws extends ar{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new ws({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new ws({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function gc(y,h){return vs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function lp(y,h){return Al.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function hp(y,h){return xl.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:w,verificationCode:S}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:w,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:N}=h;return w||g||S||N?new ws({verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:N}):null}}class eu{constructor(h){var g,w,S,N,z,ae;const Ve=(0,k.zd)((0,k.pd)(h)),Qe=null!==(g=Ve.apiKey)&&void 0!==g?g:null,vt=null!==(w=Ve.oobCode)&&void 0!==w?w:null,gt=function Ml(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ve.mode)&&void 0!==S?S:null);U(Qe&&vt&&gt,"argument-error"),this.apiKey=Qe,this.operation=gt,this.code=vt,this.continueUrl=null!==(N=Ve.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(z=Ve.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ae=Ve.tenantId)&&void 0!==ae?ae:null}static parseLink(h){const g=function Rl(y){const h=(0,k.zd)((0,k.pd)(y)).link,g=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||g||h||y}(h);try{return new eu(g)}catch{return null}}}let ki=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return pc._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const S=eu.parseLink(w);return U(S,"argument-error"),pc._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Qi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ji extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class zs extends Ji{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return U("providerId"in g&&"signInMethod"in g,"argument-error"),Yi._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return U(h.idToken||h.accessToken,"argument-error"),Yi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return zs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return zs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:N,nonce:z,providerId:ae}=h;if(!w&&!S&&!g&&!N||!ae)return null;try{return new zs(ae)._credential({idToken:g,accessToken:w,nonce:z,pendingToken:N})}catch{return null}}}let ua=(()=>{class y extends Ji{constructor(){super("facebook.com")}static credential(g){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),tu=(()=>{class y extends Ji{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:S}=g;if(!w&&!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),mc=(()=>{class y extends Ji{constructor(){super("github.com")}static credential(g){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Co extends ar{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Wn(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Wn(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Wn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S,pendingToken:N}=g;return w&&S&&N&&w===S?new Co(w,N):null}static _create(h,g){return new Co(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Jr extends Qi{constructor(h){U(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Jr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Jr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Co.fromJSON(h);return U(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:w}=h;if(!g||!w)return null;try{return Co._create(w,g)}catch{return null}}}let Br=(()=>{class y extends Ji{constructor(){super("twitter.com")}static credential(g,w){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=g;if(!w||!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Do(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,f.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signUp",Nt(y,h))})).apply(this,arguments)}class ur{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,w,S=!1){return(0,f.Z)(function*(){const N=yield Pt._fromIdTokenResponse(h,w,S),z=ah(w);return new ur({user:N,providerId:z,_tokenResponse:w,operationType:g})})()}static _forOperation(h,g,w){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const S=ah(w);return new ur({user:h,providerId:S,_tokenResponse:w,operationType:g})})()}}function ah(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function bn(){return(bn=(0,f.Z)(function*(y){var h;const g=vn(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new ur({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Do(g,{returnSecureToken:!0}),S=yield ur._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class ru extends k.ZR{constructor(h,g,w,S){var N;super(g.code,g.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,ru.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,g,w,S){return new ru(h,g,w,S)}}function ch(y,h,g,w){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?ru._fromErrorAndOperation(y,N,h,w):N})}function Xr(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function iu(){return(iu=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y);yield qt(!0,g,h);const{providerUserInfo:w}=yield mr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),S=Xr(w||[]);return g.providerData=g.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function qs(y,h){return es.apply(this,arguments)}function es(){return(es=(0,f.Z)(function*(y,h,g=!1){const w=yield or(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return ur._forOperation(y,"link",w)})).apply(this,arguments)}function qt(y,h,g){return su.apply(this,arguments)}function su(){return(su=(0,f.Z)(function*(y,h,g){yield en(h);const S=!1===y?"provider-already-linked":"no-such-provider";U(Xr(h.providerData).has(g)===y,h.auth,S)})).apply(this,arguments)}function Ws(y,h){return ou.apply(this,arguments)}function ou(){return(ou=(0,f.Z)(function*(y,h,g=!1){var w;const{auth:S}=y,N="reauthenticate";try{const z=yield or(y,ch(S,N,h,y),g);U(z.idToken,S,"internal-error");const ae=lt(z.idToken);U(ae,S,"internal-error");const{sub:Ve}=ae;return U(y.uid===Ve,S,"user-mismatch"),ur._forOperation(y,N,z)}catch(z){throw"auth/user-not-found"===(null===(w=z)||void 0===w?void 0:w.code)&&xe(S,"user-mismatch"),z}})).apply(this,arguments)}function _i(y,h){return au.apply(this,arguments)}function au(){return(au=(0,f.Z)(function*(y,h,g=!1){const w="signIn",S=yield ch(y,w,h),N=yield ur._fromIdTokenResponse(y,w,S);return g||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function En(y,h){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,f.Z)(function*(y,h){return _i(vn(y),h)})).apply(this,arguments)}function uu(y,h){return lh.apply(this,arguments)}function lh(){return(lh=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y);return yield qt(!1,g,h.providerId),qs(g,h)})).apply(this,arguments)}function cu(y,h){return lu.apply(this,arguments)}function lu(){return(lu=(0,f.Z)(function*(y,h){return Ws((0,k.m9)(y),h)})).apply(this,arguments)}function yc(y,h){return ts.apply(this,arguments)}function ts(){return(ts=(0,f.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithCustomToken",Nt(y,h))})).apply(this,arguments)}function ca(){return(ca=(0,f.Z)(function*(y,h){const g=vn(y),w=yield yc(g,{token:h,returnSecureToken:!0}),S=yield ur._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Se{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Ht._fromServerResponse(h,g):xe(h,"internal-error")}}class Ht extends Se{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Ht(g)}}function du(y,h,g){var w;U((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),U(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(U(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(U(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Cn(){return(Cn=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S={requestType:"PASSWORD_RESET",email:h};g&&du(w,S,g),yield tr(w,S)})).apply(this,arguments)}function To(){return(To=(0,f.Z)(function*(y,h,g){yield Vn((0,k.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function la(){return(la=(0,f.Z)(function*(y,h){yield lc((0,k.m9)(y),{oobCode:h})})).apply(this,arguments)}function da(y,h){return vc.apply(this,arguments)}function vc(){return(vc=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y),w=yield Vn(g,{oobCode:h}),S=w.requestType;switch(U(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,g,"internal-error");default:U(w.email,g,"internal-error")}let N=null;return w.mfaInfo&&(N=Se._fromServerResponse(vn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function Nl(){return(Nl=(0,f.Z)(function*(y,h){const{data:g}=yield da((0,k.m9)(y),h);return g.email})).apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(y,h,g){const w=vn(y),S=yield Do(w,{returnSecureToken:!0,email:h,password:g}),N=yield ur._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function Ks(){return(Ks=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};U(g.handleCodeInApp,w,"argument-error"),g&&du(w,S,g),yield Ja(w,S)})).apply(this,arguments)}function fa(){return(fa=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S=ki.credentialWithLink(h,g||ke());return U(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),En(w,S)})).apply(this,arguments)}function pp(y,h){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,f.Z)(function*(y,h){return ln(y,"POST","/v1/accounts:createAuthUri",Nt(y,h))})).apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(y,h){const w={identifier:h,continueUri:mt()?ke():"http://localhost"},{signinMethods:S}=yield pp((0,k.m9)(y),w);return S||[]})).apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&du(g.auth,S,h);const{email:N}=yield qn(g.auth,S);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function gu(){return(gu=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&du(w.auth,N,g);const{email:z}=yield hc(w.auth,N);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function mu(y,h){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,f.Z)(function*(y,h){return ln(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Sc(){return(Sc=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const w=(0,k.m9)(y),N={idToken:yield w.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},z=yield or(w,mu(w.auth,N));w.displayName=z.displayName||null,w.photoURL=z.photoUrl||null;const ae=w.providerData.find(({providerId:Ve})=>"password"===Ve);ae&&(ae.displayName=w.displayName,ae.photoURL=w.photoURL),yield w._updateTokensIfNecessary(z)})).apply(this,arguments)}function Ys(y,h,g){return yu.apply(this,arguments)}function yu(){return(yu=(0,f.Z)(function*(y,h,g){const{auth:w}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),g&&(N.password=g);const z=yield or(y,on(w,N));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class jr{constructor(h,g,w={}){this.isNewUser=h,this.providerId=g,this.profile=w}}class yn extends jr{constructor(h,g,w,S){super(h,g,w),this.username=S}}class Ol extends jr{constructor(h,g){super(h,"facebook.com",g)}}class Ac extends yn{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class dh extends jr{constructor(h,g){super(h,"google.com",g)}}class xc extends yn{constructor(h,g,w){super(h,"twitter.com",g,w)}}function _u(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Kn(y){var h,g;if(!y)return null;const{providerId:w}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const z=null===(g=null===(h=lt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new jr(N,"anonymous"!==z&&"custom"!==z?z:null)}if(!w)return null;switch(w){case"facebook.com":return new Ol(N,S);case"github.com":return new Ac(N,S);case"google.com":return new dh(N,S);case"twitter.com":return new xc(N,S,y.screenName||null);case"custom":case"anonymous":return new jr(N,null);default:return new jr(N,w,S)}}(g)}class Js{constructor(h,g,w){this.type=h,this.credential=g,this.auth=w}static _fromIdtoken(h,g){return new Js("enroll",h,g)}static _fromMfaPendingCredential(h){return new Js("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,w;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Js._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return Js._fromIdtoken(h.multiFactorSession.idToken)}return null}}class wu{constructor(h,g,w){this.session=h,this.hints=g,this.signInResolver=w}static _fromError(h,g){const w=vn(h),S=g.customData._serverResponse,N=(S.mfaInfo||[]).map(ae=>Se._fromServerResponse(w,ae));U(S.mfaPendingCredential,w,"internal-error");const z=Js._fromMfaPendingCredential(S.mfaPendingCredential);return new wu(z,N,function(){var ae=(0,f.Z)(function*(Ve){const Qe=yield Ve._process(w,z);delete S.mfaInfo,delete S.mfaPendingCredential;const vt=Object.assign(Object.assign({},S),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(g.operationType){case"signIn":const gt=yield ur._fromIdTokenResponse(w,g.operationType,vt);return yield w._updateCurrentUser(gt.user),gt;case"reauthenticate":return U(g.user,w,"internal-error"),ur._forOperation(g.user,g.operationType,vt);default:xe(w,"internal-error")}});return function(Ve){return ae.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function Eu(y,h){return ln(y,"POST","/v2/accounts/mfaEnrollment:start",Nt(y,h))}class hh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Se._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new hh(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Js._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var w=this;return(0,f.Z)(function*(){const S=h,N=yield w.getSession(),z=yield or(w.user,S._process(w.user.auth,N,g));return yield w.user._updateTokensIfNecessary(z),w.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){var w;const S="string"==typeof h?h:h.uid,N=yield g.user.getIdToken(),z=yield or(g.user,function Vl(y,h){return ln(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Nt(y,h))}(g.user.auth,{idToken:N,mfaEnrollmentId:S}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ae})=>ae!==S),yield g.user._updateTokensIfNecessary(z);try{yield g.user.reload()}catch(ae){if("auth/user-token-expired"!==(null===(w=ae)||void 0===w?void 0:w.code))throw ae}})()}}const xo=new WeakMap,Xs="__sak";class bu{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Xs,"1"),this.storage.removeItem(Xs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ya=(()=>{class y extends bu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ma(){const y=(0,k.z$)();return ht(y)||Vt(y)}()&&function mn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Hs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),N=this.localCache[w];S!==N&&g(w,N,S)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ae,Ve,Qe)=>{this.notifyListeners(ae,Qe)});const S=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(S);if(g.newValue!==ae)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!w)return}const N=()=>{const ae=this.storage.getItem(S);!w&&this.localCache[S]===ae||this.notifyListeners(S,ae)},z=this.storage.getItem(S);!function zn(){return(0,k.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var S=()=>super._set,N=this;return(0,f.Z)(function*(){yield S().call(N,g,w),N.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,S=this;return(0,f.Z)(function*(){const N=yield w().call(S,g);return S.localCache[g]=JSON.stringify(N),N})()}_remove(g){var w=()=>super._remove,S=this;return(0,f.Z)(function*(){yield w().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),Pi=(()=>{class y extends bu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let jl=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(N=>N.isListeningto(g));if(w)return w;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,f.Z)(function*(){const S=g,{eventId:N,eventType:z,data:ae}=S.data,Ve=w.handlersMap[z];if(!Ve?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:z});const Qe=Array.from(Ve).map(function(){var gt=(0,f.Z)(function*(an){return an(S.origin,ae)});return function(an){return gt.apply(this,arguments)}}()),vt=yield function va(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return h.apply(this,arguments)}}()))}(Qe);S.ports[0].postMessage({status:"done",eventId:N,eventType:z,response:vt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function wa(y="",h=10){let g="";for(let w=0;w<h;w++)g+=Math.floor(10*Math.random());return y+g}class Mc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,w=50){var S=this;return(0,f.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let z,ae;return new Promise((Ve,Qe)=>{const vt=wa("",20);N.port1.start();const gt=setTimeout(()=>{Qe(new Error("unsupported_event"))},w);ae={messageChannel:N,onMessage(an){const ri=an;if(ri.data.eventId===vt)switch(ri.data.status){case"ack":clearTimeout(gt),z=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ve(ri.data.response);break;default:clearTimeout(gt),clearTimeout(z),Qe(new Error("invalid_response"))}}},S.handlers.add(ae),N.port1.addEventListener("message",ae.onMessage),S.target.postMessage({eventType:h,eventId:vt,data:g},[N.port2])}).finally(()=>{ae&&S.removeMessageHandler(ae)})})()}}function xn(){return window}function Cu(){return typeof xn().WorkerGlobalScope<"u"&&"function"==typeof xn().importScripts}function Ea(){return(Ea=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const bs="firebaseLocalStorageDb",Cs="firebaseLocalStorage",Rc="fbase_key";class to{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ia(y,h){return y.transaction([Cs],h?"readwrite":"readonly").objectStore(Cs)}function Ro(){const y=indexedDB.open(bs,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Cs,{keyPath:Rc})}catch(S){g(S)}}),y.addEventListener("success",(0,f.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Cs)?h(w):(w.close(),yield function $l(){const y=indexedDB.deleteDatabase(bs);return new to(y).toPromise()}(),h(yield Ro()))}))})}function rs(y,h,g){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,f.Z)(function*(y,h,g){const w=Ia(y,!0).put({[Rc]:h,value:g});return new to(w).toPromise()})).apply(this,arguments)}function ba(){return(ba=(0,f.Z)(function*(y,h){const g=Ia(y,!1).get(h),w=yield new to(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function no(y,h){const g=Ia(y,!0).delete(h);return new to(g).toPromise()}const No=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield Ro()),g.db})()}_withRetries(g){var w=this;return(0,f.Z)(function*(){let S=0;for(;;)try{const N=yield w._openDb();return yield g(N)}catch(N){if(S++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return Cu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=jl._getInstance(function Tu(){return Cu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,f.Z)(function*(S,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(S,N){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,f.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var w,S;if(g.activeServiceWorker=yield function eo(){return Ea.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Mc(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,f.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Du(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ro();return yield rs(g,Xs,"1"),yield no(g,Xs),!0}catch{}return!1})()}_withPendingWrite(g){var w=this;return(0,f.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var S=this;return(0,f.Z)(function*(){return S._withPendingWrite((0,f.Z)(function*(){return yield S._withRetries(N=>rs(N,g,w)),S.localCache[g]=w,S.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,f.Z)(function*(){const S=yield w._withRetries(N=>function Su(y,h){return ba.apply(this,arguments)}(N,g));return w.localCache[g]=S,S})()}_remove(g){var w=this;return(0,f.Z)(function*(){return w._withPendingWrite((0,f.Z)(function*(){return yield w._withRetries(S=>no(S,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const w=yield g._withRetries(z=>{const ae=Ia(z,!1).getAll();return new to(ae).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:z,value:ae}of w)N.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(ae)&&(g.notifyListeners(z,ae),S.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!N.has(z)&&(g.notifyListeners(z,null),S.push(z));return S})()}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function ko(y,h){return ln(y,"POST","/v2/accounts/mfaSignIn:start",Nt(y,h))}function Ds(){return(Ds=(0,f.Z)(function*(y){return(yield ln(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Po(y){return new Promise((h,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=h,w.onerror=S=>{const N=_e("internal-error");N.customData=S,g(N)},w.type="text/javascript",w.charset="UTF-8",function Oo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(w)})}function Mu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ca=1e12;class fn{constructor(h){this.auth=h,this.counter=Ca,this._widgets=new Map}render(h,g){const w=this.counter;return this._widgets.set(w,new gp(h,this.auth.name,g||{})),this.counter++,w}reset(h){var g;const w=h||Ca;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Ca))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var w;return null===(w=g._widgets.get(h||Ca))||void 0===w||w.execute(),""})()}}class gp{constructor(h,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;U(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Wm(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const mp=Mu("rcb"),Km=new sn(3e4,6e4);class fh{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=xn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return U(function Hw(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(xn().grecaptcha):new Promise((w,S)=>{const N=xn().setTimeout(()=>{S(_e(h,"network-request-failed"))},Km.get());xn()[mp]=()=>{xn().clearTimeout(N),delete xn()[mp];const ae=xn().grecaptcha;if(!ae)return void S(_e(h,"internal-error"));const Ve=ae.render;ae.render=(Qe,vt)=>{const gt=Ve(Qe,vt);return this.counter++,gt},this.hostLanguage=g,w(ae)},Po(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:mp,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),S(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=xn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Oc{load(h){return(0,f.Z)(function*(){return new fn(h)})()}clearedOneInstance(){}}const Ym="recaptcha",Qm={theme:"light",type:"image"};class rr{constructor(h,g=Object.assign({},Qm),w){this.parameters=g,this.type=Ym,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;U(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Oc:new fh,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(g)||new Promise(N=>{const z=ae=>{!ae||(h.tokenChangeListeners.delete(z),N(ae))};h.tokenChangeListeners.add(z),h.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof h)h(g);else if("string"==typeof h){const w=xn()[h];"function"==typeof w&&w(g)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){U(mt()&&!Cu(),h.auth,"internal-error"),yield function Jt(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Hr(y){return Ds.apply(this,arguments)}(h.auth);U(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class wi{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=ws._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function cr(){return(cr=(0,f.Z)(function*(y,h,g){const w=vn(y),S=yield Ts(w,h,(0,k.m9)(g));return new wi(S,N=>En(w,N))})).apply(this,arguments)}function Ei(){return(Ei=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);yield qt(!1,w,"phone");const S=yield Ts(w.auth,h,(0,k.m9)(g));return new wi(S,N=>uu(w,N))})).apply(this,arguments)}function Mn(){return(Mn=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S=yield Ts(w.auth,h,(0,k.m9)(g));return new wi(S,N=>cu(w,N))})).apply(this,arguments)}function Ts(y,h,g){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,f.Z)(function*(y,h,g){var w;const S=yield g.verify();try{let N;if(U("string"==typeof S,y,"argument-error"),U(g.type===Ym,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const z=N.session;if("phoneNumber"in N)return U("enroll"===z.type,y,"internal-error"),(yield Eu(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{U("signin"===z.type,y,"internal-error");const ae=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return U(ae,y,"missing-multi-factor-info"),(yield ko(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield cp(y,{phoneNumber:N.phoneNumber,recaptchaToken:S});return z}}finally{g._reset()}})).apply(this,arguments)}function Pc(){return(Pc=(0,f.Z)(function*(y,h){yield qs((0,k.m9)(y),h)})).apply(this,arguments)}let Ta=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=vn(g)}verifyPhoneNumber(g,w){return Ts(this.auth,g,(0,k.m9)(w))}static credential(g,w){return ws._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:S}=g;return w&&S?ws._fromTokenResponse(w,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function io(y,h){return h?re(h):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ss extends ar{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Wn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Wn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Wn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function We(y){return _i(y.auth,new Ss(y),y.bypassAuthState)}function Sa(y){const{auth:h,user:g}=y;return U(g,h,"internal-error"),Ws(g,new Ss(y),y.bypassAuthState)}function As(y){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return U(g,h,"internal-error"),qs(g,new Ss(y),y.bypassAuthState)})).apply(this,arguments)}class Vo{constructor(h,g,w,S,N=!1){this.auth=h,this.resolver=w,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(w,S){h.pendingPromise={resolve:w,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(w,S){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:N,tenantId:z,error:ae,type:Ve}=h;if(ae)return void g.reject(ae);const Qe={auth:g.auth,requestUri:w,sessionId:S,tenantId:z||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ve)(Qe))}catch(vt){g.reject(vt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return We;case"linkViaPopup":case"linkViaRedirect":return As;case"reauthViaPopup":case"reauthViaRedirect":return Sa;default:xe(this.auth,"internal-error")}}resolve(h){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rn=new sn(2e3,1e4);function Uo(){return(Uo=(0,f.Z)(function*(y,h,g){const w=vn(y);Be(y,h,Qi);const S=io(w,g);return new Fi(w,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function Lc(){return(Lc=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Be(w.auth,h,Qi);const S=io(w.auth,g);return new Fi(w.auth,"reauthViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}function Aa(){return(Aa=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Be(w.auth,h,Qi);const S=io(w.auth,g);return new Fi(w.auth,"linkViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}let Fi=(()=>{class y extends Vo{constructor(g,w,S,N,z){super(g,w,N,z),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const w=yield g.execute();return U(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,f.Z)(function*(){q(1===g.filter.length,"Popup operations only handle one event");const w=wa();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(_e(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Rn.get())};g()}}return y.currentPopupAction=null,y})();const $r=new Map;class Vc extends Vo{constructor(h,g,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let w=$r.get(g.auth._key());if(!w){try{const N=(yield function _r(y,h){return Ar.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;w=()=>Promise.resolve(N)}catch(S){w=()=>Promise.reject(S)}$r.set(g.auth._key(),w)}return g.bypassAuthState||$r.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,w=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(w,h);if("unknown"!==h.type){if(h.eventId){const S=yield w.auth._redirectUserForId(h.eventId);if(S)return w.user=S,g().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Ar(){return(Ar=(0,f.Z)(function*(y,h){const g=pn(h),w=Ui(y);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(g));return yield w._remove(g),S})).apply(this,arguments)}function ss(y,h){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,f.Z)(function*(y,h){return Ui(y)._set(pn(h),"true")})).apply(this,arguments)}function xs(y,h){$r.set(y._key(),h)}function Ui(y){return re(y._redirectPersistence)}function pn(y){return W("pendingRedirect",y.config.apiKey,y.name)}function C(){return(C=(0,f.Z)(function*(y,h,g){const w=vn(y);Be(y,h,Qi);const S=io(w,g);return yield ss(S,w),S._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Be(w.auth,h,Qi);const S=io(w.auth,g);yield ss(S,w.auth);const N=yield pt(w);return S._openRedirect(w.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function Ee(){return(Ee=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Be(w.auth,h,Qi);const S=io(w.auth,g);yield qt(!1,w,h.providerId),yield ss(S,w.auth);const N=yield pt(w);return S._openRedirect(w.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function it(){return(it=(0,f.Z)(function*(y,h){return yield vn(y)._initializationPromise,It(y,h,!1)})).apply(this,arguments)}function It(y,h){return At.apply(this,arguments)}function At(){return(At=(0,f.Z)(function*(y,h,g=!1){const w=vn(y),S=io(w,h),z=yield new Vc(w,S,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield w._persistUserIfCurrent(z.user),yield w._setRedirectUser(null,h)),z})).apply(this,arguments)}function pt(y){return wn.apply(this,arguments)}function wn(){return(wn=(0,f.Z)(function*(y){const h=wa(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class so{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(g=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Bi(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xt(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var w;if(h.error&&!xt(h)){const S=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(_e(this.auth,S))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const w=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ms(h))}saveEventToCache(h){this.cachedEventUids.add(Ms(h)),this.lastProcessedEventTime=Date.now()}}function Ms(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function xt({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Rs(y){return ti.apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(y,h={}){return ln(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Bo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oo=/^https?/;function ph(){return(ph=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Rs(y);for(const g of h)try{if(vp(g))return}catch{}xe(y,"unauthorized-domain")})).apply(this,arguments)}function vp(y){const h=ke(),{protocol:g,hostname:w}=new URL(h);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===w}if(!oo.test(g))return!1;if(Bo.test(y))return w===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const wp=new sn(3e4,6e4);function Jm(){const y=xn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let ji=null;function gh(y){return ji=ji||function Zn(y){return new Promise((h,g)=>{var w,S,N;function z(){Jm(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Jm(),g(_e(y,"network-request-failed"))},timeout:wp.get()})}if(null!==(S=null===(w=xn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=xn().gapi)||void 0===N||!N.load){const ae=Mu("iframefcb");return xn()[ae]=()=>{gapi.load?z():g(_e(y,"network-request-failed"))},Po(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Ve=>g(Ve))}z()}}).catch(h=>{throw ji=null,h})}(y),ji}const Ep=new sn(5e3,15e3),Xm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ip(y){const h=y.config;U(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?gn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:y.name,v:ie.SDK_VERSION},S=yh.get(y.config.apiHost);S&&(w.eid=S);const N=y._getFrameworks();return N.length&&(w.fw=N.join(",")),`${g}?${(0,k.xO)(w).slice(1)}`}function xa(){return xa=(0,f.Z)(function*(y){const h=yield gh(y),g=xn().gapi;return U(g,y,"internal-error"),h.open({where:document.body,url:Ip(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xm,dontclear:!0},w=>new Promise(function(){var S=(0,f.Z)(function*(N,z){yield w.restyle({setHideOnLeave:!1});const ae=_e(y,"network-request-failed"),Ve=xn().setTimeout(()=>{z(ae)},Ep.get());function Qe(){xn().clearTimeout(Ve),N(w)}w.ping(Qe).then(Qe,()=>{z(ae)})});return function(N,z){return S.apply(this,arguments)}}()))}),xa.apply(this,arguments)}const Gl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Uc{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wl(y,h,g,w,S,N){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:ie.SDK_VERSION,eventId:S};if(h instanceof Qi){h.setDefaultLanguage(y.languageCode),z.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,Qe]of Object.entries(N||{}))z[Ve]=Qe}if(h instanceof Ji){const Ve=h.getScopes().filter(Qe=>""!==Qe);Ve.length>0&&(z.scopes=Ve.join(","))}y.tenantId&&(z.tid=y.tenantId);const ae=z;for(const Ve of Object.keys(ae))void 0===ae[Ve]&&delete ae[Ve];return`${function Kl({config:y}){return y.emulator?gn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,k.xO)(ae).slice(1)}`}const Ra="webStorageSupport";class Hi extends class ey{constructor(h){this.factorId=h}_process(h,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,w);case"signin":return this._finalizeSignIn(h,g.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Hi(h)}_finalizeEnroll(h,g,w){return function Iu(y,h){return ln(y,"POST","/v2/accounts/mfaEnrollment:finalize",Nt(y,h))}(h,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function xu(y,h){return ln(y,"POST","/v2/accounts/mfaSignIn:finalize",Nt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let jo=(()=>{class y{constructor(){}static assertion(g){return Hi._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var vh="@firebase/auth",Tp="0.20.11";class Gw{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(w=>{var S;h((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Na(){return window}function ka(){return(ka=(0,f.Z)(function*(y,h,g){var w;const{BuildInfo:S}=Na();q(h.sessionId,"AuthEvent did not contain a session ID");const N=yield Oa(h.sessionId),z={};return Vt()?z.ibi=S.packageName:zt()?z.apn=S.packageName:xe(y,"operation-not-supported-in-this-environment"),S.displayName&&(z.appDisplayName=S.displayName),z.sessionId=N,Wl(y,g,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,z)})).apply(this,arguments)}function Ou(){return(Ou=(0,f.Z)(function*(y){const{BuildInfo:h}=Na(),g={};Vt()?g.iosBundleId=h.packageName:zt()?g.androidPackageName=h.packageName:xe(y,"operation-not-supported-in-this-environment"),yield Rs(y,g)})).apply(this,arguments)}function xp(){return(xp=(0,f.Z)(function*(y,h,g){const{cordova:w}=Na();let S=()=>{};try{yield new Promise((N,z)=>{let ae=null;function Ve(){var gt;N();const an=null===(gt=w.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof an&&an(),"function"==typeof g?.close&&g.close()}function Qe(){ae||(ae=window.setTimeout(()=>{z(_e(y,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===document?.visibilityState&&Qe()}h.addPassiveListener(Ve),document.addEventListener("resume",Qe,!1),zt()&&document.addEventListener("visibilitychange",vt,!1),S=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",vt,!1),ae&&window.clearTimeout(ae)}})}finally{S()}})).apply(this,arguments)}function Oa(y){return co.apply(this,arguments)}function co(){return(co=(0,f.Z)(function*(y){const h=Hc(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Hc(y){if(q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}(0,k.Pz)("authIdTokenMaxAge"),function qw(y){(0,ie._registerComponent)(new ue.wA("auth",(h,{options:g})=>{const w=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:N,authDomain:z}=w.options;return((ae,Ve)=>{U(N&&!N.includes(":"),"invalid-api-key",{appName:ae.name}),U(!z?.includes(":"),"argument-error",{appName:ae.name});const Qe={apiKey:N,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ps(y)},vt=new Ft(ae,Ve,Qe);return function Pe(y,h){const g=h?.persistence||[],w=(Array.isArray(g)?g:[g]).map(re);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(w,h?.popupRedirectResolver)}(vt,g),vt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,w)=>{h.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ue.wA("auth-internal",h=>{const g=vn(h.getProvider("auth").getImmediate());return new Gw(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(vh,Tp,function zw(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ie.registerVersion)(vh,Tp,"esm2017")}("Browser");class Eh extends so{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function Rp(y){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,f.Z)(function*(y){const h=yield $c()._get(lo(y));return h&&(yield $c()._remove(lo(y))),h})).apply(this,arguments)}function Zl(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*h.length);y.push(h.charAt(w))}return y.join("")}function $c(){return re(ya)}function lo(y){return W("authEvent",y.config.apiKey,y.name)}function Yl(y){if(!y?.includes("?"))return{};const[h,...g]=y.split("?");return(0,k.zd)(g.join("?"))}function Jl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function ed(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Fu(y=(0,k.z$)()){return!("file:"!==ed()&&"ionic:"!==ed()&&"capacitor:"!==ed()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Lp(){try{const y=self.localStorage,h=wa();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Fp(y=(0,k.z$)()){return function Op(){return(0,k.w1)()&&11===document?.documentMode}()||function Pp(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch{return td()&&(0,k.hl)()}return!1}function td(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function nd(){return(function Yw(){return"http:"===ed()||"https:"===ed()}()||(0,k.ru)()||Fu())&&!function Ch(){return(0,k.b$)()||(0,k.UG)()}()&&Lp()&&!td()}function Gc(){return Fu()&&typeof document<"u"}function rd(){return(rd=(0,f.Z)(function*(){return!!Gc()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const xr={LOCAL:"local",NONE:"none",SESSION:"session"},ni=U,bi="persistence";function Lu(y){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,f.Z)(function*(y){yield y._initializationPromise;const h=qc(),g=W(bi,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function qc(){var y;try{return(null===(y=function zc(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const id=U;class vr{constructor(){this.browserResolver=re(class Dp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pi,this._completeRedirectFn=It,this._overrideRedirectResult=xs}_openPopup(h,g,w,S){var N=this;return(0,f.Z)(function*(){var z;q(null===(z=N.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ae=Wl(h,g,w,ke(),S);return function uo(y,h,g,w=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),z=Math.max((window.screen.availWidth-w)/2,0).toString();let ae="";const Ve=Object.assign(Object.assign({},Gl),{width:w.toString(),height:S.toString(),top:N,left:z}),Qe=(0,k.z$)().toLowerCase();g&&(ae=Kt(Qe)?"_blank":g),Ge(Qe)&&(h=h||"http://localhost",Ve.scrollbars="yes");const vt=Object.entries(Ve).reduce((an,[ri,Va])=>`${an}${ri}=${Va},`,"");if(function Ur(y=(0,k.z$)()){var h;return Vt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Qe)&&"_self"!==ae)return function Cp(y,h){const g=document.createElement("a");g.href=y,g.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(h||"",ae),new Uc(null);const gt=window.open(h||"",ae,vt);U(gt,y,"popup-blocked");try{gt.focus()}catch{}return new Uc(gt)}(h,ae,wa())})()}_openRedirect(h,g,w,S){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(h),function vi(y){xn().location.href=y}(Wl(h,g,w,ke(),S)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:S,promise:N}=this.eventManagers[g];return S?Promise.resolve(S):(q(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(h);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const w=yield function bp(y){return xa.apply(this,arguments)}(h),S=new so(h);return w.register("authEvent",N=>(U(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:S},g.iframes[h._key()]=w,S})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Ra,{type:Ra},S=>{var N;const z=null===(N=S?.[0])||void 0===N?void 0:N[Ra];void 0!==z&&g(!!z),xe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ii(y){return ph.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Hs()||ht()||Vt()}}),this.cordovaResolver=re(class Ql{constructor(){this._redirectPersistence=Pi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=It,this._overrideRedirectResult=xs}_initialize(h){var g=this;return(0,f.Z)(function*(){const w=h._key();let S=g.eventManagers.get(w);return S||(S=new Eh(h),g.eventManagers.set(w,S),g.attachCallbackListeners(h,S)),S})()}_openPopup(h){xe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,w,S){var N=this;return(0,f.Z)(function*(){!function Zw(y){var h,g,w,S,N,z,ae,Ve,Qe,vt;const gt=Na();U("function"==typeof(null===(h=gt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(g=gt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(N=null===(S=null===(w=gt?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Ve=null===(ae=null===(z=gt?.cordova)||void 0===z?void 0:z.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(vt=null===(Qe=gt?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===vt?void 0:vt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield N._initialize(h);yield z.initialized(),z.resetRedirect(),function Un(){$r.clear()}(),yield N._originValidation(h);const ae=function Mp(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:Zl(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,w,S);yield function Pu(y,h){return $c()._set(lo(y),h)}(h,ae);const Ve=yield function $i(y,h,g){return ka.apply(this,arguments)}(h,ae,g),Qe=yield function ny(y){const{cordova:h}=Na();return new Promise(g=>{h.plugins.browsertab.isAvailable(w=>{let S=null;w?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function er(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Ve);return function Kw(y,h,g){return xp.apply(this,arguments)}(h,z,Qe)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ho(y){return Ou.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:w,handleOpenURL:S,BuildInfo:N}=Na(),z=setTimeout((0,f.Z)(function*(){yield Rp(h),g.onEvent(Jl())}),500),ae=function(){var vt=(0,f.Z)(function*(gt){clearTimeout(z);const an=yield Rp(h);let ri=null;an&&gt?.url&&(ri=function bh(y,h){var g,w;const S=function Nn(y){const h=Yl(y),g=h.link?decodeURIComponent(h.link):void 0,w=Yl(g).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Yl(S).link||S||w||g||y}(h);if(S.includes("/__/auth/callback")){const N=Yl(S),z=N.firebaseError?function iy(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ae=null===(w=null===(g=z?.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Ve=ae?_e(ae):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(an,gt.url)),g.onEvent(ri||Jl())});return function(an){return vt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ae);const Ve=S,Qe=`${N.packageName.toLowerCase()}://`;Na().handleOpenURL=function(){var vt=(0,f.Z)(function*(gt){if(gt.toLowerCase().startsWith(Qe)&&ae({url:gt}),"function"==typeof Ve)try{Ve(gt)}catch(an){console.error(an)}});return function(gt){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Pi,this._completeRedirectFn=It,this._overrideRedirectResult=xs}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,w,S){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,g,w,S)})()}_openRedirect(h,g,w,S){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,g,w,S)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Gc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return id(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Qw(){return rd.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function sd(y){return y.unwrap()}function Up(y){return Kc(y)}function Kc(y){const{_tokenResponse:h}=y instanceof k.ZR?y.customData:y;if(!h)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ta.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=tu;break;case"facebook.com":w=ua;break;case"github.com":w=mc;break;case"twitter.com":w=Br;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:z,pendingToken:ae,nonce:Ve}=h;return N||z||S||ae?ae?g.startsWith("saml.")?Co._create(g,ae):Yi._fromParams({providerId:g,signInMethod:g,pendingToken:ae,idToken:S,accessToken:N}):new zs(g).credential({idToken:S,accessToken:N,rawNonce:Ve}):null}return y instanceof k.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function ir(y,h){return h.catch(g=>{throw g instanceof k.ZR&&function Dh(y,h){var g,w;const S=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=h)||void 0===w?void 0:w.code))h.resolver=new oy(y,function Tn(y,h){var g;const w=(0,k.m9)(y),S=h;return U(h.customData.operationType,w,"argument-error"),U(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),wu._fromError(w,S)}(y,h));else if(S){const N=Kc(h),z=h;N&&(z.credential=N,z.tenantId=S.tenantId||void 0,z.email=S.email||void 0,z.phoneNumber=S.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Up(g),additionalUserInfo:_u(g),user:os.getOrCreate(S)}})}function Fa(y,h){return Th.apply(this,arguments)}function Th(){return(Th=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:w=>ir(y,g.confirm(w))}})).apply(this,arguments)}class oy{constructor(h,g){this.resolver=g,this.auth=function Wc(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ir(sd(this.auth),this.resolver.resolveSignIn(h))}}class os{constructor(h){this._delegate=h,this.multiFactor=function Mo(y){const h=(0,k.m9)(y);return xo.has(h)||xo.set(h,hh._fromUser(h)),xo.get(h)}(h)}static getOrCreate(h){return os.USER_MAP.has(h)||os.USER_MAP.set(h,new os(h)),os.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return ir(g.auth,uu(g._delegate,h))})()}linkWithPhoneNumber(h,g){var w=this;return(0,f.Z)(function*(){return Fa(w.auth,function _n(y,h,g){return Ei.apply(this,arguments)}(w._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return ir(g.auth,function Nu(y,h,g){return Aa.apply(this,arguments)}(g._delegate,h,vr))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Lu(vn(g.auth)),function Y(y,h,g){return function te(y,h,g){return Ee.apply(this,arguments)}(y,h,g)}(g._delegate,h,vr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return ir(g.auth,cu(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Fa(this.auth,function Da(y,h,g){return Mn.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return ir(this.auth,function _p(y,h,g){return Lc.apply(this,arguments)}(this._delegate,h,vr))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Lu(vn(g.auth)),function D(y,h,g){return function x(y,h,g){return F.apply(this,arguments)}(y,h,g)}(g._delegate,h,vr)})()}sendEmailVerification(h){return function bc(y,h){return ga.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function Sr(y,h){return iu.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function kl(y,h){return Ys((0,k.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Zs(y,h){return Ys((0,k.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function yp(y,h){return Pc.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Tc(y,h){return Sc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Cc(y,h,g){return gu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}os.USER_MAP=new WeakMap;const Go=U;let Sh=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Go(S,"invalid-api-key",{appName:g.name}),Go(S,"invalid-api-key",{appName:g.name});const N=typeof window<"u"?vr:void 0;this._delegate=w.initialize({options:{persistence:Bp(S,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?os.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function Qa(y,h,g){const w=vn(y);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const S=!!g?.disableWarnings,N=Ni(h),{host:z,port:ae}=function Ln(y){const h=Ni(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const N=S[1];return{host:N,port:gs(w.substr(N.length+1))}}{const[N,z]=w.split(":");return{host:N,port:gs(z)}}}(h);w.config.emulator={url:`${N}//${z}${null===ae?"":`:${ae}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:z,port:ae,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function ms(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function ei(y,h){return la.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return da(this._delegate,g)}confirmPasswordReset(g,w){return function fu(y,h,g){return To.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var S=this;return(0,f.Z)(function*(){return ir(S._delegate,function ha(y,h,g){return Dn.apply(this,arguments)}(S._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function pu(y,h){return pa.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function ns(y,h){return"EMAIL_SIGNIN"===eu.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){Go(nd(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function Ne(y,h){return it.apply(this,arguments)}(g._delegate,vr);return w?ir(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Pa(y,h){vn(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,w,S){const{next:N,error:z,complete:ae}=od(g,w,S);return this._delegate.onAuthStateChanged(N,z,ae)}onIdTokenChanged(g,w,S){const{next:N,error:z,complete:ae}=od(g,w,S);return this._delegate.onIdTokenChanged(N,z,ae)}sendSignInLinkToEmail(g,w){return function Ec(y,h,g){return Ks.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function hu(y,h,g){return Cn.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,f.Z)(function*(){let S;switch(function Vp(y,h){ni(Object.values(xr).includes(h),y,"invalid-persistence-type"),(0,k.b$)()?ni(h!==xr.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?ni(h===xr.NONE,y,"unsupported-persistence-type"):td()?ni(h===xr.NONE||h===xr.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):ni(h===xr.NONE||Lp(),y,"unsupported-persistence-type")}(w._delegate,g),g){case xr.SESSION:S=Pi;break;case xr.LOCAL:S=(yield re(No)._isAvailable())?No:ya;break;case xr.NONE:S=V;break;default:return xe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ir(this._delegate,function uh(y){return bn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ir(this._delegate,En(this._delegate,g))}signInWithCustomToken(g){return ir(this._delegate,function _c(y,h){return ca.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return ir(this._delegate,function Oi(y,h,g){return En((0,k.m9)(y),ki.credential(h,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return ir(this._delegate,function fp(y,h,g){return fa.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Fa(this._delegate,function tt(y,h,g){return cr.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,f.Z)(function*(){return Go(nd(),w._delegate,"operation-not-supported-in-this-environment"),ir(w._delegate,function Fc(y,h,g){return Uo.apply(this,arguments)}(w._delegate,g,vr))})()}signInWithRedirect(g){var w=this;return(0,f.Z)(function*(){return Go(nd(),w._delegate,"operation-not-supported-in-this-environment"),yield Lu(w._delegate),function Zt(y,h,g){return function ku(y,h,g){return C.apply(this,arguments)}(y,h,g)}(w._delegate,g,vr)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function wc(y,h){return Nl.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=xr,y})();function od(y,h,g){let w=y;"function"!=typeof y&&({next:w,error:h,complete:g}=y);const S=w;return{next:z=>S(z&&os.getOrCreate(z)),error:h,complete:g}}function Bp(y,h){const g=function $o(y,h){const g=qc();if(!g)return[];const w=W(bi,y,h);switch(g.getItem(w)){case xr.NONE:return[V];case xr.LOCAL:return[No,Pi];case xr.SESSION:return[Pi];default:return[]}}(y,h);if(typeof self<"u"&&!g.includes(No)&&g.push(No),typeof window<"u")for(const w of[ya,Pi])g.includes(w)||g.push(w);return g.includes(V)||g.push(V),g}class ad{constructor(){this.providerId="phone",this._delegate=new Ta(sd(X.Z.auth()))}static credential(h,g){return Ta.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}ad.PHONE_SIGN_IN_METHOD=Ta.PHONE_SIGN_IN_METHOD,ad.PROVIDER_ID=Ta.PROVIDER_ID;const ud=U;class cd{constructor(h,g,w=X.Z.app()){var S;ud(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new rr(h,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ay(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new Sh(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ki,FacebookAuthProvider:ua,GithubAuthProvider:mc,GoogleAuthProvider:tu,OAuthProvider:zs,SAMLAuthProvider:Jr,PhoneAuthProvider:ad,PhoneMultiFactorGenerator:jo,RecaptchaVerifier:cd,TwitterAuthProvider:Br,Auth:Sh,AuthCredential:ar,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(X.Z)},9751:(ct,De,O)=>{O.d(De,{y:()=>de});var f=O(930),X=O(727),k=O(8822),ie=O(9635),se=O(2416),ce=O(576),ue=O(2806);let de=(()=>{class K{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const we=new K;return we.source=this,we.operator=Me,we}subscribe(Me,we,rt){const me=function $(K){return K&&K instanceof f.Lv||function B(K){return K&&(0,ce.m)(K.next)&&(0,ce.m)(K.error)&&(0,ce.m)(K.complete)}(K)&&(0,X.Nn)(K)}(Me)?Me:new f.Hp(Me,we,rt);return(0,ue.x)(()=>{const{operator:fe,source:Je}=this;me.add(fe?fe.call(me,Je):Je?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Me){try{return this._subscribe(Me)}catch(we){Me.error(we)}}forEach(Me,we){return new(we=he(we))((rt,me)=>{const fe=new f.Hp({next:Je=>{try{Me(Je)}catch(ot){me(ot),fe.unsubscribe()}},error:me,complete:rt});this.subscribe(fe)})}_subscribe(Me){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Me)}[k.L](){return this}pipe(...Me){return(0,ie.U)(Me)(this)}toPromise(Me){return new(Me=he(Me))((we,rt)=>{let me;this.subscribe(fe=>me=fe,fe=>rt(fe),()=>we(me))})}}return K.create=Le=>new K(Le),K})();function he(K){var Le;return null!==(Le=K??se.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ct,De,O)=>{O.d(De,{x:()=>ue});var f=O(9751),X=O(727);const ie=(0,O(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=O(8737),ce=O(2806);let ue=(()=>{class he extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const K=new de(this,this);return K.operator=$,K}_throwIfClosed(){if(this.closed)throw new ie}next($){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next($)}})}error($){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:K}=this;for(;K.length;)K.shift().error($)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:K,isStopped:Le,observers:Me}=this;return K||Le?X.Lc:(this.currentObservers=null,Me.push($),new X.w0(()=>{this.currentObservers=null,(0,se.P)(Me,$)}))}_checkFinalizedStatuses($){const{hasError:K,thrownError:Le,isStopped:Me}=this;K?$.error(Le):Me&&$.complete()}asObservable(){const $=new f.y;return $.source=this,$}}return he.create=(B,$)=>new de(B,$),he})();class de extends ue{constructor(B,$){super(),this.destination=B,this.source=$}next(B){var $,K;null===(K=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===K||K.call($,B)}error(B){var $,K;null===(K=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===K||K.call($,B)}complete(){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===$||$.call(B)}_subscribe(B){var $,K;return null!==(K=null===($=this.source)||void 0===$?void 0:$.subscribe(B))&&void 0!==K?K:X.Lc}}},930:(ct,De,O)=>{O.d(De,{Hp:()=>rt,Lv:()=>K});var f=O(576),X=O(727),k=O(2416),ie=O(7849),se=O(5032);const ce=he("C",void 0,void 0);function he(xe,_e,Ie){return{kind:xe,value:_e,error:Ie}}var B=O(3410),$=O(2806);class K extends X.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,X.Nn)(_e)&&_e.add(this)):this.destination=ot}static create(_e,Ie,Be){return new rt(_e,Ie,Be)}next(_e){this.isStopped?Je(function de(xe){return he("N",xe,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Je(function ue(xe){return he("E",void 0,xe)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Je(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Me(xe,_e){return Le.call(xe,_e)}class we{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(_e)}catch(Be){me(Be)}}error(_e){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(_e)}catch(Be){me(Be)}else me(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ie){me(Ie)}}}class rt extends K{constructor(_e,Ie,Be){let je;if(super(),(0,f.m)(_e)||!_e)je={next:_e??void 0,error:Ie??void 0,complete:Be??void 0};else{let U;this&&k.v.useDeprecatedNextContext?(U=Object.create(_e),U.unsubscribe=()=>this.unsubscribe(),je={next:_e.next&&Me(_e.next,U),error:_e.error&&Me(_e.error,U),complete:_e.complete&&Me(_e.complete,U)}):je=_e}this.destination=new we(je)}}function me(xe){k.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(xe):(0,ie.h)(xe)}function Je(xe,_e){const{onStoppedNotification:Ie}=k.v;Ie&&B.z.setTimeout(()=>Ie(xe,_e))}const ot={closed:!0,next:se.Z,error:function fe(xe){throw xe},complete:se.Z}},727:(ct,De,O)=>{O.d(De,{Lc:()=>ce,w0:()=>se,Nn:()=>ue});var f=O(576);const k=(0,O(3888).d)(he=>function($){he(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((K,Le)=>`${Le+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ie=O(8737);class se{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Me of $)Me.remove(this);else $.remove(this);const{initialTeardown:K}=this;if((0,f.m)(K))try{K()}catch(Me){B=Me instanceof k?Me.errors:[Me]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Me of Le)try{de(Me)}catch(we){B=B??[],we instanceof k?B=[...B,...we.errors]:B.push(we)}}if(B)throw new k(B)}}add(B){var $;if(B&&B!==this)if(this.closed)de(B);else{if(B instanceof se){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(B)}}_hasParent(B){const{_parentage:$}=this;return $===B||Array.isArray($)&&$.includes(B)}_addParent(B){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(B),$):$?[$,B]:B}_removeParent(B){const{_parentage:$}=this;$===B?this._parentage=null:Array.isArray($)&&(0,ie.P)($,B)}remove(B){const{_finalizers:$}=this;$&&(0,ie.P)($,B),B instanceof se&&B._removeParent(this)}}se.EMPTY=(()=>{const he=new se;return he.closed=!0,he})();const ce=se.EMPTY;function ue(he){return he instanceof se||he&&"closed"in he&&(0,f.m)(he.remove)&&(0,f.m)(he.add)&&(0,f.m)(he.unsubscribe)}function de(he){(0,f.m)(he)?he():he.unsubscribe()}},2416:(ct,De,O)=>{O.d(De,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ct,De,O)=>{O.d(De,{E:()=>X});const X=new(O(9751).y)(se=>se.complete())},8996:(ct,De,O)=>{O.d(De,{D:()=>_e});var f=O(8421),X=O(5363),k=O(9468),ce=O(9751),de=O(2202),he=O(576),B=O(9672);function K(Ie,Be){if(!Ie)throw new Error("Iterable cannot be null");return new ce.y(je=>{(0,B.f)(je,Be,()=>{const U=Ie[Symbol.asyncIterator]();(0,B.f)(je,Be,()=>{U.next().then(ge=>{ge.done?je.complete():je.next(ge.value)})},0,!0)})})}var Le=O(3670),Me=O(8239),we=O(1144),rt=O(6495),me=O(2206),fe=O(4532),Je=O(3260);function _e(Ie,Be){return Be?function xe(Ie,Be){if(null!=Ie){if((0,Le.c)(Ie))return function ie(Ie,Be){return(0,f.Xf)(Ie).pipe((0,k.R)(Be),(0,X.Q)(Be))}(Ie,Be);if((0,we.z)(Ie))return function ue(Ie,Be){return new ce.y(je=>{let U=0;return Be.schedule(function(){U===Ie.length?je.complete():(je.next(Ie[U++]),je.closed||this.schedule())})})}(Ie,Be);if((0,Me.t)(Ie))return function se(Ie,Be){return(0,f.Xf)(Ie).pipe((0,k.R)(Be),(0,X.Q)(Be))}(Ie,Be);if((0,me.D)(Ie))return K(Ie,Be);if((0,rt.T)(Ie))return function $(Ie,Be){return new ce.y(je=>{let U;return(0,B.f)(je,Be,()=>{U=Ie[de.h](),(0,B.f)(je,Be,()=>{let ge,q;try{({value:ge,done:q}=U.next())}catch(J){return void je.error(J)}q?je.complete():je.next(ge)},0,!0)}),()=>(0,he.m)(U?.return)&&U.return()})}(Ie,Be);if((0,Je.L)(Ie))return function ot(Ie,Be){return K((0,Je.Q)(Ie),Be)}(Ie,Be)}throw(0,fe.z)(Ie)}(Ie,Be):(0,f.Xf)(Ie)}},8421:(ct,De,O)=>{O.d(De,{Xf:()=>Le});var f=O(655),X=O(1144),k=O(8239),ie=O(9751),se=O(3670),ce=O(2206),ue=O(4532),de=O(6495),he=O(3260),B=O(576),$=O(7849),K=O(8822);function Le(xe){if(xe instanceof ie.y)return xe;if(null!=xe){if((0,se.c)(xe))return function Me(xe){return new ie.y(_e=>{const Ie=xe[K.L]();if((0,B.m)(Ie.subscribe))return Ie.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,X.z)(xe))return function we(xe){return new ie.y(_e=>{for(let Ie=0;Ie<xe.length&&!_e.closed;Ie++)_e.next(xe[Ie]);_e.complete()})}(xe);if((0,k.t)(xe))return function rt(xe){return new ie.y(_e=>{xe.then(Ie=>{_e.closed||(_e.next(Ie),_e.complete())},Ie=>_e.error(Ie)).then(null,$.h)})}(xe);if((0,ce.D)(xe))return fe(xe);if((0,de.T)(xe))return function me(xe){return new ie.y(_e=>{for(const Ie of xe)if(_e.next(Ie),_e.closed)return;_e.complete()})}(xe);if((0,he.L)(xe))return function Je(xe){return fe((0,he.Q)(xe))}(xe)}throw(0,ue.z)(xe)}function fe(xe){return new ie.y(_e=>{(function ot(xe,_e){var Ie,Be,je,U;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,f.KL)(xe);!(Be=yield Ie.next()).done;)if(_e.next(Be.value),_e.closed)return}catch(ge){je={error:ge}}finally{try{Be&&!Be.done&&(U=Ie.return)&&(yield U.call(Ie))}finally{if(je)throw je.error}}_e.complete()})})(xe,_e).catch(Ie=>_e.error(Ie))})}},6451:(ct,De,O)=>{O.d(De,{T:()=>ce});var f=O(8189),X=O(8421),k=O(515),ie=O(3269),se=O(8996);function ce(...ue){const de=(0,ie.yG)(ue),he=(0,ie._6)(ue,1/0),B=ue;return B.length?1===B.length?(0,X.Xf)(B[0]):(0,f.J)(he)((0,se.D)(B,de)):k.E}},5403:(ct,De,O)=>{O.d(De,{x:()=>X});var f=O(930);function X(ie,se,ce,ue,de){return new k(ie,se,ce,ue,de)}class k extends f.Lv{constructor(se,ce,ue,de,he,B){super(se),this.onFinalize=he,this.shouldUnsubscribe=B,this._next=ce?function($){try{ce($)}catch(K){se.error(K)}}:super._next,this._error=de?function($){try{de($)}catch(K){se.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch($){se.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(ct,De,O)=>{O.d(De,{U:()=>k});var f=O(4482),X=O(5403);function k(ie,se){return(0,f.e)((ce,ue)=>{let de=0;ce.subscribe((0,X.x)(ue,he=>{ue.next(ie.call(se,he,de++))}))})}},8189:(ct,De,O)=>{O.d(De,{J:()=>k});var f=O(5577),X=O(4671);function k(ie=1/0){return(0,f.z)(X.y,ie)}},5577:(ct,De,O)=>{O.d(De,{z:()=>de});var f=O(4004),X=O(8421),k=O(4482),ie=O(9672),se=O(5403),ue=O(576);function de(he,B,$=1/0){return(0,ue.m)(B)?de((K,Le)=>(0,f.U)((Me,we)=>B(K,Me,Le,we))((0,X.Xf)(he(K,Le))),$):("number"==typeof B&&($=B),(0,k.e)((K,Le)=>function ce(he,B,$,K,Le,Me,we,rt){const me=[];let fe=0,Je=0,ot=!1;const xe=()=>{ot&&!me.length&&!fe&&B.complete()},_e=Be=>fe<K?Ie(Be):me.push(Be),Ie=Be=>{Me&&B.next(Be),fe++;let je=!1;(0,X.Xf)($(Be,Je++)).subscribe((0,se.x)(B,U=>{Le?.(U),Me?_e(U):B.next(U)},()=>{je=!0},void 0,()=>{if(je)try{for(fe--;me.length&&fe<K;){const U=me.shift();we?(0,ie.f)(B,we,()=>Ie(U)):Ie(U)}xe()}catch(U){B.error(U)}}))};return he.subscribe((0,se.x)(B,_e,()=>{ot=!0,xe()})),()=>{rt?.()}}(K,Le,he,$)))}},5363:(ct,De,O)=>{O.d(De,{Q:()=>ie});var f=O(9672),X=O(4482),k=O(5403);function ie(se,ce=0){return(0,X.e)((ue,de)=>{ue.subscribe((0,k.x)(de,he=>(0,f.f)(de,se,()=>de.next(he),ce),()=>(0,f.f)(de,se,()=>de.complete(),ce),he=>(0,f.f)(de,se,()=>de.error(he),ce)))})}},3099:(ct,De,O)=>{O.d(De,{B:()=>se});var f=O(8421),X=O(7579),k=O(930),ie=O(4482);function se(ue={}){const{connector:de=(()=>new X.x),resetOnError:he=!0,resetOnComplete:B=!0,resetOnRefCountZero:$=!0}=ue;return K=>{let Le,Me,we,rt=0,me=!1,fe=!1;const Je=()=>{Me?.unsubscribe(),Me=void 0},ot=()=>{Je(),Le=we=void 0,me=fe=!1},xe=()=>{const _e=Le;ot(),_e?.unsubscribe()};return(0,ie.e)((_e,Ie)=>{rt++,!fe&&!me&&Je();const Be=we=we??de();Ie.add(()=>{rt--,0===rt&&!fe&&!me&&(Me=ce(xe,$))}),Be.subscribe(Ie),!Le&&rt>0&&(Le=new k.Hp({next:je=>Be.next(je),error:je=>{fe=!0,Je(),Me=ce(ot,he,je),Be.error(je)},complete:()=>{me=!0,Je(),Me=ce(ot,B),Be.complete()}}),(0,f.Xf)(_e).subscribe(Le))})(K)}}function ce(ue,de,...he){if(!0===de)return void ue();if(!1===de)return;const B=new k.Hp({next:()=>{B.unsubscribe(),ue()}});return de(...he).subscribe(B)}},9468:(ct,De,O)=>{O.d(De,{R:()=>X});var f=O(4482);function X(k,ie=0){return(0,f.e)((se,ce)=>{ce.add(k.schedule(()=>se.subscribe(ce),ie))})}},8505:(ct,De,O)=>{O.d(De,{b:()=>se});var f=O(576),X=O(4482),k=O(5403),ie=O(4671);function se(ce,ue,de){const he=(0,f.m)(ce)||ue||de?{next:ce,error:ue,complete:de}:ce;return he?(0,X.e)((B,$)=>{var K;null===(K=he.subscribe)||void 0===K||K.call(he);let Le=!0;B.subscribe((0,k.x)($,Me=>{var we;null===(we=he.next)||void 0===we||we.call(he,Me),$.next(Me)},()=>{var Me;Le=!1,null===(Me=he.complete)||void 0===Me||Me.call(he),$.complete()},Me=>{var we;Le=!1,null===(we=he.error)||void 0===we||we.call(he,Me),$.error(Me)},()=>{var Me,we;Le&&(null===(Me=he.unsubscribe)||void 0===Me||Me.call(he)),null===(we=he.finalize)||void 0===we||we.call(he)}))}):ie.y}},4408:(ct,De,O)=>{O.d(De,{o:()=>se});var f=O(727);class X extends f.w0{constructor(ue,de){super()}schedule(ue,de=0){return this}}const k={setInterval(ce,ue,...de){const{delegate:he}=k;return he?.setInterval?he.setInterval(ce,ue,...de):setInterval(ce,ue,...de)},clearInterval(ce){const{delegate:ue}=k;return(ue?.clearInterval||clearInterval)(ce)},delegate:void 0};var ie=O(8737);class se extends X{constructor(ue,de){super(ue,de),this.scheduler=ue,this.work=de,this.pending=!1}schedule(ue,de=0){if(this.closed)return this;this.state=ue;const he=this.id,B=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(B,he,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(B,this.id,de),this}requestAsyncId(ue,de,he=0){return k.setInterval(ue.flush.bind(ue,this),he)}recycleAsyncId(ue,de,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return de;k.clearInterval(de)}execute(ue,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ue,de);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,de){let B,he=!1;try{this.work(ue)}catch($){he=!0,B=$||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ue,scheduler:de}=this,{actions:he}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(he,this),null!=ue&&(this.id=this.recycleAsyncId(de,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(ct,De,O)=>{O.d(De,{v:()=>k});var f=O(6063);class X{constructor(se,ce=X.now){this.schedulerActionCtor=se,this.now=ce}schedule(se,ce=0,ue){return new this.schedulerActionCtor(this,se).schedule(ue,ce)}}X.now=f.l.now;class k extends X{constructor(se,ce=X.now){super(se,ce),this.actions=[],this._active=!1,this._scheduled=void 0}flush(se){const{actions:ce}=this;if(this._active)return void ce.push(se);let ue;this._active=!0;do{if(ue=se.execute(se.state,se.delay))break}while(se=ce.shift());if(this._active=!1,ue){for(;se=ce.shift();)se.unsubscribe();throw ue}}}},4986:(ct,De,O)=>{O.d(De,{P:()=>ie,z:()=>k});var f=O(4408);const k=new(O(7565).v)(f.o),ie=k},6063:(ct,De,O)=>{O.d(De,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(ct,De,O)=>{O.d(De,{z:()=>f});const f={setTimeout(X,k,...ie){const{delegate:se}=f;return se?.setTimeout?se.setTimeout(X,k,...ie):setTimeout(X,k,...ie)},clearTimeout(X){const{delegate:k}=f;return(k?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(ct,De,O)=>{O.d(De,{h:()=>X});const X=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ct,De,O)=>{O.d(De,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ct,De,O)=>{O.d(De,{_6:()=>ce,jO:()=>ie,yG:()=>se});var f=O(576),X=O(3532);function k(ue){return ue[ue.length-1]}function ie(ue){return(0,f.m)(k(ue))?ue.pop():void 0}function se(ue){return(0,X.K)(k(ue))?ue.pop():void 0}function ce(ue,de){return"number"==typeof k(ue)?ue.pop():de}},8737:(ct,De,O)=>{function f(X,k){if(X){const ie=X.indexOf(k);0<=ie&&X.splice(ie,1)}}O.d(De,{P:()=>f})},3888:(ct,De,O)=>{function f(X){const ie=X(se=>{Error.call(se),se.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}O.d(De,{d:()=>f})},2806:(ct,De,O)=>{O.d(De,{O:()=>ie,x:()=>k});var f=O(2416);let X=null;function k(se){if(f.v.useDeprecatedSynchronousErrorHandling){const ce=!X;if(ce&&(X={errorThrown:!1,error:null}),se(),ce){const{errorThrown:ue,error:de}=X;if(X=null,ue)throw de}}else se()}function ie(se){f.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=se)}},9672:(ct,De,O)=>{function f(X,k,ie,se=0,ce=!1){const ue=k.schedule(function(){ie(),ce?X.add(this.schedule(null,se)):this.unsubscribe()},se);if(X.add(ue),!ce)return ue}O.d(De,{f:()=>f})},4671:(ct,De,O)=>{function f(X){return X}O.d(De,{y:()=>f})},1144:(ct,De,O)=>{O.d(De,{z:()=>f});const f=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(ct,De,O)=>{O.d(De,{D:()=>X});var f=O(576);function X(k){return Symbol.asyncIterator&&(0,f.m)(k?.[Symbol.asyncIterator])}},576:(ct,De,O)=>{function f(X){return"function"==typeof X}O.d(De,{m:()=>f})},3670:(ct,De,O)=>{O.d(De,{c:()=>k});var f=O(8822),X=O(576);function k(ie){return(0,X.m)(ie[f.L])}},6495:(ct,De,O)=>{O.d(De,{T:()=>k});var f=O(2202),X=O(576);function k(ie){return(0,X.m)(ie?.[f.h])}},8239:(ct,De,O)=>{O.d(De,{t:()=>X});var f=O(576);function X(k){return(0,f.m)(k?.then)}},3260:(ct,De,O)=>{O.d(De,{L:()=>ie,Q:()=>k});var f=O(655),X=O(576);function k(se){return(0,f.FC)(this,arguments,function*(){const ue=se.getReader();try{for(;;){const{value:de,done:he}=yield(0,f.qq)(ue.read());if(he)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(de)}}finally{ue.releaseLock()}})}function ie(se){return(0,X.m)(se?.getReader)}},3532:(ct,De,O)=>{O.d(De,{K:()=>X});var f=O(576);function X(k){return k&&(0,f.m)(k.schedule)}},4482:(ct,De,O)=>{O.d(De,{A:()=>X,e:()=>k});var f=O(576);function X(ie){return(0,f.m)(ie?.lift)}function k(ie){return se=>{if(X(se))return se.lift(function(ce){try{return ie(ce,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ct,De,O)=>{function f(){}O.d(De,{Z:()=>f})},9635:(ct,De,O)=>{O.d(De,{U:()=>k,z:()=>X});var f=O(4671);function X(...ie){return k(ie)}function k(ie){return 0===ie.length?f.y:1===ie.length?ie[0]:function(ce){return ie.reduce((ue,de)=>de(ue),ce)}}},7849:(ct,De,O)=>{O.d(De,{h:()=>k});var f=O(2416),X=O(3410);function k(ie){X.z.setTimeout(()=>{const{onUnhandledError:se}=f.v;if(!se)throw ie;se(ie)})}},4532:(ct,De,O)=>{function f(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(De,{z:()=>f})},655:(ct,De,O)=>{function ie(q,J){var re={};for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&J.indexOf(ne)<0&&(re[ne]=q[ne]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ne=Object.getOwnPropertySymbols(q);Pe<ne.length;Pe++)J.indexOf(ne[Pe])<0&&Object.prototype.propertyIsEnumerable.call(q,ne[Pe])&&(re[ne[Pe]]=q[ne[Pe]])}return re}function de(q,J,re,ne){return new(re||(re=Promise))(function(ke,mt){function Yt(sn){try{qe(ne.next(sn))}catch(gn){mt(gn)}}function Bt(sn){try{qe(ne.throw(sn))}catch(gn){mt(gn)}}function qe(sn){sn.done?ke(sn.value):function Pe(ke){return ke instanceof re?ke:new re(function(mt){mt(ke)})}(sn.value).then(Yt,Bt)}qe((ne=ne.apply(q,J||[])).next())})}function me(q){return this instanceof me?(this.v=q,this):new me(q)}function fe(q,J,re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ne=re.apply(q,J||[]),ke=[];return Pe={},mt("next"),mt("throw"),mt("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function mt(Wt){ne[Wt]&&(Pe[Wt]=function(Qt){return new Promise(function(br,Nt){ke.push([Wt,Qt,br,Nt])>1||Yt(Wt,Qt)})})}function Yt(Wt,Qt){try{!function Bt(Wt){Wt.value instanceof me?Promise.resolve(Wt.value.v).then(qe,sn):gn(ke[0][2],Wt)}(ne[Wt](Qt))}catch(br){gn(ke[0][3],br)}}function qe(Wt){Yt("next",Wt)}function sn(Wt){Yt("throw",Wt)}function gn(Wt,Qt){Wt(Qt),ke.shift(),ke.length&&Yt(ke[0][0],ke[0][1])}}function ot(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var re,J=q[Symbol.asyncIterator];return J?J.call(q):(q=function K(q){var J="function"==typeof Symbol&&Symbol.iterator,re=J&&q[J],ne=0;if(re)return re.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ne>=q.length&&(q=void 0),{value:q&&q[ne++],done:!q}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),re={},ne("next"),ne("throw"),ne("return"),re[Symbol.asyncIterator]=function(){return this},re);function ne(ke){re[ke]=q[ke]&&function(mt){return new Promise(function(Yt,Bt){!function Pe(ke,mt,Yt,Bt){Promise.resolve(Bt).then(function(qe){ke({value:qe,done:Yt})},mt)}(Yt,Bt,(mt=q[ke](mt)).done,mt.value)})}}}O.d(De,{FC:()=>fe,KL:()=>ot,_T:()=>ie,mG:()=>de,qq:()=>me})},4650:(ct,De,O)=>{O.d(De,{$8M:()=>xu,$Z:()=>ag,AFp:()=>vv,ALo:()=>MI,AaK:()=>de,AsE:()=>ul,BQk:()=>rf,CHM:()=>du,CRH:()=>LI,CZH:()=>Cf,CqO:()=>gE,D6c:()=>rA,EJc:()=>FS,EpF:()=>h_,F4k:()=>Sg,FYo:()=>S,FiY:()=>Ne,G48:()=>na,GfV:()=>Ve,Gpc:()=>$,Gre:()=>D_,JOm:()=>qo,KtG:()=>hu,LFG:()=>Zt,LSH:()=>Ql,Lbi:()=>kS,Lck:()=>MR,MAs:()=>l_,MMx:()=>qg,NdJ:()=>p_,OlP:()=>fn,PXZ:()=>sm,Q6J:()=>d_,QGY:()=>f_,QP$:()=>Kt,Qsj:()=>N,R0b:()=>Ls,RDi:()=>Ip,Rgc:()=>yf,SBq:()=>h,Sil:()=>VS,Suo:()=>_f,TTD:()=>Ji,TgZ:()=>Cd,VKq:()=>SI,W1O:()=>nm,WLB:()=>ev,X6Q:()=>lm,XFs:()=>Ze,Xpm:()=>Te,Xts:()=>Ch,Y36:()=>Jc,YKP:()=>YT,YNc:()=>c_,Yjl:()=>ve,Yz7:()=>Qt,Z0I:()=>Zi,ZZ4:()=>fm,_Bn:()=>vI,_UZ:()=>nf,_Vd:()=>La,_c5:()=>Gv,_uU:()=>LE,aQg:()=>Mf,c2e:()=>OS,cJS:()=>Nt,cg1:()=>Qu,dDg:()=>qS,dqk:()=>Xt,eFA:()=>_b,ekj:()=>I_,eoX:()=>pb,f3M:()=>C,g9A:()=>ab,h0i:()=>gf,hGG:()=>nA,hij:()=>Rg,iGM:()=>FI,ifc:()=>lt,ip1:()=>_v,jDz:()=>Z_,kL8:()=>Ga,lG2:()=>W,lcZ:()=>RI,lqb:()=>vr,lri:()=>fb,n5z:()=>is,oAB:()=>Pt,oxw:()=>m_,q4F:()=>Qe,qLn:()=>Mh,qOj:()=>t_,qZA:()=>Dg,rWj:()=>zS,sBO:()=>Ld,sIi:()=>Ed,s_b:()=>Xg,soG:()=>Df,tb:()=>ub,tp0:()=>It,uIk:()=>i_,vHH:()=>we,vpe:()=>_o,wAp:()=>Ct,xp6:()=>T0,ynx:()=>Tg,z2F:()=>Sf,zSh:()=>Lu,zs3:()=>Hu});var f=O(7579),X=O(727),k=O(9751),ie=O(6451),se=O(3099);function ce(i){for(let o in i)if(i[o]===ce)return o;throw Error("Could not find renamed property on target object.")}function ue(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function he(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const B=ce({__forward_ref__:ce});function $(i){return i.__forward_ref__=$,i.toString=function(){return de(this())},i}function K(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===$}class we extends Error{constructor(o,a){super(function rt(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function _e(i,o){throw new we(-201,!1)}function Bt(i,o){null==i&&function qe(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function Qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Nt(i){return{providers:i.providers||[],imports:i.imports||[]}}function ln(i){return gi(i,mi)||gi(i,Yr)}function Zi(i){return null!==ln(i)}function gi(i,o){return i.hasOwnProperty(o)?i[o]:null}function js(i){return i&&(i.hasOwnProperty(Zr)||i.hasOwnProperty(ia))?i[Zr]:null}const mi=ce({\u0275prov:ce}),Zr=ce({\u0275inj:ce}),Yr=ce({ngInjectableDef:ce}),ia=ce({ngInjectorDef:ce});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let mr;function $n(i){const o=mr;return mr=i,o}function Qr(i,o,a){const c=ln(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ze.Optional?null:void 0!==o?o:void _e(de(i))}function An(i){return{toString:i}.toString()}var Pn=(()=>((Pn=Pn||{})[Pn.OnPush=0]="OnPush",Pn[Pn.Default=1]="Default",Pn))(),lt=(()=>{return(i=lt||(lt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",lt;var i})();const Xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Vr={},St=[],fs=ce({\u0275cmp:ce}),en=ce({\u0275dir:ce}),Ri=ce({\u0275pipe:ce}),tn=ce({\u0275mod:ce}),Gn=ce({\u0275fac:ce}),Dr=ce({__NG_ELEMENT_ID__:ce});let et=0;function Te(i){return An(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Pn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||St,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||lt.Emulated,id:"c"+et++,styles:i.styles||St,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,_=i.features;return d.inputs=V(i.inputs,c),d.outputs=V(i.outputs),_&&_.forEach(E=>E(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(bt).filter(Et):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(ht).filter(Et):null,d})}function bt(i){return Q(i)||Ge(i)}function Et(i){return null!==i}function Pt(i){return An(()=>({type:i.type,bootstrap:i.bootstrap||St,declarations:i.declarations||St,imports:i.imports||St,exports:i.exports||St,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function V(i,o){if(null==i)return Vr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,o&&(o[d]=p)}return a}const W=Te;function ve(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Q(i){return i[fs]||null}function Ge(i){return i[en]||null}function ht(i){return i[Ri]||null}function Kt(i){const o=Q(i)||Ge(i)||ht(i);return null!==o&&o.standalone}function dn(i,o){const a=i[tn]||null;if(!a&&!0===o)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function tr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Tr(i){return Array.isArray(i)&&!0===i[1]}function Ja(i){return 0!=(8&i.flags)}function aa(i){return 2==(2&i.flags)}function hc(i){return 1==(1&i.flags)}function yr(i){return null!==i.template}function ih(i){return 0!=(256&i[2])}function ki(i,o){return i.hasOwnProperty(Gn)?i[Gn]:null}class Qi{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ji(){return zs}function zs(i){return i.type.prototype.ngOnChanges&&(i.setInput=tu),ua}function ua(){const i=oh(this),o=i?.current;if(o){const a=i.previous;if(a===Vr)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function tu(i,o,a,c){const d=oh(i)||function Co(i,o){return i[mc]=o}(i,{previous:Vr,current:null}),p=d.current||(d.current={}),_=d.previous,E=this.declaredInputs[a],b=_[E];p[E]=new Qi(b&&b.currentValue,o,_===Vr),i[c]=o}Ji.ngInherit=!0;const mc="__ngSimpleChanges__";function oh(i){return i[mc]||null}function bn(i){for(;Array.isArray(i);)i=i[0];return i}function Xr(i,o){return bn(o[i])}function Sr(i,o){return bn(o[i.index])}function qs(i,o){return i.data[o]}function es(i,o){return i[o]}function qt(i,o){const a=o[i];return tr(a)?a:a[0]}function Ws(i){return 64==(64&i[2])}function _i(i,o){return null==o?null:i[o]}function au(i){i[18]=0}function En(i,o){i[5]+=o;let a=i,c=i[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const Tt={lFrame:Tc(null),bindingsEnabled:!0};function ts(){return Tt.bindingsEnabled}function Se(){return Tt.lFrame.lView}function Ht(){return Tt.lFrame.tView}function du(i){return Tt.lFrame.contextLView=i,i[8]}function hu(i){return Tt.lFrame.contextLView=null,i}function Cn(){let i=fu();for(;null!==i&&64===i.type;)i=i.parent;return i}function fu(){return Tt.lFrame.currentTNode}function ei(i,o){const a=Tt.lFrame;a.currentTNode=i,a.isParent=o}function la(){return Tt.lFrame.isParent}function da(){Tt.lFrame.isParent=!1}function Dn(){const i=Tt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Ks(){return Tt.lFrame.bindingIndex++}function ns(i){const o=Tt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function pp(i,o){const a=Tt.lFrame;a.bindingIndex=a.bindingRootIndex=i,pu(o)}function pu(i){Tt.lFrame.currentDirectiveIndex=i}function bc(){return Tt.lFrame.currentQueryIndex}function ga(i){Tt.lFrame.currentQueryIndex=i}function Cc(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function gu(i,o,a){if(a&Ze.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&Ze.Host||(d=Cc(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,i=p}const c=Tt.lFrame=Dc();return c.currentTNode=o,c.lView=i,!0}function mu(i){const o=Dc(),a=i[1];Tt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Dc(){const i=Tt.lFrame,o=null===i?null:i.child;return null===o?Tc(i):o}function Tc(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Sc(){const i=Tt.lFrame;return Tt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const kl=Sc;function Zs(){const i=Sc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Kn(){return Tt.lFrame.selectedIndex}function jr(i){Tt.lFrame.selectedIndex=i}function yn(){const i=Tt.lFrame;return qs(i.tView,i.selectedIndex)}function vu(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:R}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function Qs(i,o,a){Ao(i,o,3,a)}function So(i,o,a,c){(3&i[2])===a&&Ao(i,o,a,c)}function Fl(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Ao(i,o,a,c){const p=c??-1,_=o.length-1;let E=0;for(let b=void 0!==c?65535&i[18]:0;b<_;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(i[18]+=65536),(E<p||-1==p)&&(Ll(i,a,o,b),i[18]=(4294901760&i[18])+b+2),b++}function Ll(i,o,a,c){const d=a[c]<0,p=a[c+1],E=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Is{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Mo(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],_=a[c++],E=a[c++];i.setAttribute(o,_,E,p)}else{const p=d,_=a[++c];bu(p)?i.setProperty(o,p,_):i.setAttribute(o,p,_),c++}}return c}function Xs(i){return 3===i||4===i||6===i}function bu(i){return 64===i.charCodeAt(0)}function ma(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Ul(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function Ul(i,o,a,c,d){let p=0,_=i.length;if(-1===o)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==_&&(i.splice(_,0,o),p=_+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}function Bl(i){return-1!==i}function nr(i){return 32767&i}function _a(i,o){let a=function ya(i){return i>>16}(i),c=o;for(;a>0;)c=c[15],a--;return c}let Pi=!0;function va(i){const o=Pi;return Pi=i,o}let xn=0;const vi={};function eo(i,o){const a=Du(i,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(i.injectorIndex=o.length,Ea(c.data,i),Ea(o,null),Ea(c.blueprint,null));const d=Tu(i,o),p=i.injectorIndex;if(Bl(d)){const _=nr(d),E=_a(d,o),b=E[1].data;for(let T=0;T<8;T++)o[p+T]=E[_+T]|b[_+T]}return o[p+8]=d,p}function Ea(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Du(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Tu(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=ko(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function bs(i,o,a){!function Cu(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Dr)&&(c=a[Dr]),null==c&&(c=a[Dr]=xn++);const d=255&c;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function Cs(i,o,a){if(a&Ze.Optional||void 0!==i)return i;_e()}function Rc(i,o,a,c){if(a&Ze.Optional&&void 0===c&&(c=null),0==(a&(Ze.Self|Ze.Host))){const d=i[9],p=$n(void 0);try{return d?d.get(o,c,a&Ze.Optional):Qr(o,c,a&Ze.Optional)}finally{$n(p)}}return Cs(c,0,a)}function to(i,o,a,c=Ze.Default,d){if(null!==i){if(1024&o[2]){const _=function No(i,o,a,c,d){let p=i,_=o;for(;null!==p&&null!==_&&1024&_[2]&&!(256&_[2]);){const E=Ia(p,_,a,c|Ze.Self,vi);if(E!==vi)return E;let b=p.parent;if(!b){const T=_[21];if(T){const R=T.get(a,vi,c);if(R!==vi)return R}b=ko(_),_=_[15]}p=b}return d}(i,o,a,c,vi);if(_!==vi)return _}const p=Ia(i,o,a,c,vi);if(p!==vi)return p}return Rc(o,a,c,d)}function Ia(i,o,a,c,d){const p=function Nc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Dr)?i[Dr]:void 0;return"number"==typeof o?o>=0?255&o:kc:o}(a);if("function"==typeof p){if(!gu(o,i,c))return c&Ze.Host?Cs(d,0,c):Rc(o,a,c,d);try{const _=p(c);if(null!=_||c&Ze.Optional)return _;_e()}finally{kl()}}else if("number"==typeof p){let _=null,E=Du(i,o),b=-1,T=c&Ze.Host?o[16][6]:null;for((-1===E||c&Ze.SkipSelf)&&(b=-1===E?Tu(i,o):o[E+8],-1!==b&&ba(c,!1)?(_=o[1],E=nr(b),o=_a(b,o)):E=-1);-1!==E;){const R=o[1];if(Su(p,E,R.data)){const P=$l(E,o,a,_,c,T);if(P!==vi)return P}b=o[E+8],-1!==b&&ba(c,o[1].data[E+8]===T)&&Su(p,E,o)?(_=R,E=nr(b),o=_a(b,o)):E=-1}}return d}function $l(i,o,a,c,d,p){const _=o[1],E=_.data[i+8],R=Ro(E,_,a,null==c?aa(E)&&Pi:c!=_&&0!=(3&E.type),d&Ze.Host&&p===E);return null!==R?rs(o,_,R,E):vi}function Ro(i,o,a,c,d){const p=i.providerIndexes,_=o.data,E=1048575&p,b=i.directiveStart,R=p>>20,G=d?E+R:i.directiveEnd;for(let ee=c?E:E+R;ee<G;ee++){const ye=_[ee];if(ee<b&&a===ye||ee>=b&&ye.type===a)return ee}if(d){const ee=_[b];if(ee&&yr(ee)&&ee.type===a)return b}return null}function rs(i,o,a,c){let d=i[a];const p=o.data;if(function Js(i){return i instanceof Is}(d)){const _=d;_.resolving&&function Je(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(p[a]));const E=va(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?$n(_.injectImpl):null;gu(i,c,Ze.Default);try{d=i[a]=_.factory(void 0,p,i,c),o.firstCreatePass&&a>=c.directiveStart&&function Pl(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const _=zs(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==b&&$n(b),va(E),_.resolving=!1,kl()}}return d}function Su(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function ba(i,o){return!(i&Ze.Self||i&Ze.Host&&o)}class no{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return to(this._tNode,this._lView,o,c,a)}}function kc(){return new no(Cn(),Se())}function is(i){return An(()=>{const o=i.prototype.constructor,a=o[Gn]||Au(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[Gn]||Au(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Au(i){return Le(i)?()=>{const o=Au(K(i));return o&&o()}:ki(i)}function ko(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function xu(i){return function Hl(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(Xs(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(Cn(),i)}const Ds="__parameters__";function Fo(i,o,a){return An(()=>{const c=function Mu(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const _=new d(...p);return E.annotation=_,E;function E(b,T,R){const P=b.hasOwnProperty(Ds)?b[Ds]:Object.defineProperty(b,Ds,{value:[]})[Ds];for(;P.length<=R;)P.push(null);return(P[R]=P[R]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class fn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _n(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(o===i&&(o=i.slice(0,a)),_n(c,o)):o!==i&&o.push(c)}return o}function Ei(i,o){i.forEach(a=>Array.isArray(a)?Ei(a,o):o(a))}function Da(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Mn(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function We(i,o,a){let c=As(i,o);return c>=0?i[1|c]=a:(c=~c,function Pc(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Sa(i,o){const a=As(i,o);if(a>=0)return i[1|a]}function As(i,o){return function Vo(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const p=c+(d-c>>1),_=i[p<<a];if(o===_)return p<<a;_>o?d=p:c=p+1}return~(d<<a)}(i,o,1)}const $r={},Vc="__NG_DI_FLAG__",_r="ngTempTokenPath",ss=/\n/gm,Un="__source";let xs;function Ui(i){const o=xs;return xs=i,o}function pn(i,o=Ze.Default){if(void 0===xs)throw new we(-203,!1);return null===xs?Qr(i,void 0,o):xs.get(i,o&Ze.Optional?null:void 0,o)}function Zt(i,o=Ze.Default){return(function hs(){return mr}()||pn)(K(i),o)}function C(i,o=Ze.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Zt(i,o)}function D(i){const o=[];for(let a=0;a<i.length;a++){const c=K(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let d,p=Ze.Default;for(let _=0;_<c.length;_++){const E=c[_],b=F(E);"number"==typeof b?-1===b?d=E.token:p|=b:d=E}o.push(Zt(d,p))}else o.push(Zt(c))}return o}function x(i,o){return i[Vc]=o,i.prototype[Vc]=o,i}function F(i){return i[Vc]}const Ne=x(Fo("Optional"),8),It=x(Fo("SkipSelf"),4);let yh;function Ip(i){yh=i}class Wl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Hi(i){return i instanceof Wl?i.changingThisBreaksApplicationSecurity:i}const Na=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Nn=(()=>((Nn=Nn||{})[Nn.NONE=0]="NONE",Nn[Nn.HTML=1]="HTML",Nn[Nn.STYLE=2]="STYLE",Nn[Nn.SCRIPT=3]="SCRIPT",Nn[Nn.URL=4]="URL",Nn[Nn.RESOURCE_URL=5]="RESOURCE_URL",Nn))();function Ql(i){const o=function Fu(){const i=Se();return i&&i[12]}();return o?o.sanitize(Nn.URL,i)||"":function jo(i,o){const a=function vh(i){return i instanceof Wl&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?Hi(i):function jc(i){return(i=String(i)).match(Na)?i:"unsafe:"+i}(me(i))}const Ch=new fn("ENVIRONMENT_INITIALIZER"),Op=new fn("INJECTOR",-1),Pp=new fn("INJECTOR_DEF_TYPES");class Fp{get(o,a=$r){if(a===$r){const c=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw c.name="NullInjectorError",c}return a}}function Lp(...i){return{\u0275providers:td(0,i)}}function td(i,...o){const a=[],c=new Set;let d;return Ei(o,p=>{const _=p;Gc(_,a,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&nd(d,a),a}function nd(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Ei(d,p=>{o.push(p)})}}function Gc(i,o,a,c){if(!(i=K(i)))return!1;let d=null,p=js(i);const _=!p&&Q(i);if(p||_){if(_&&!_.standalone)return!1;d=i}else{const b=i.ngModule;if(p=js(b),!p)return!1;d=b}const E=c.has(d);if(_){if(E)return!1;if(c.add(d),_.dependencies){const b="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of b)Gc(T,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let T;c.add(d);try{Ei(p.imports,R=>{Gc(R,o,a,c)&&(T||(T=[]),T.push(R))})}finally{}void 0!==T&&nd(T,o)}if(!E){const T=ki(d)||(()=>new d);o.push({provide:d,useFactory:T,deps:St},{provide:Pp,useValue:d,multi:!0},{provide:Ch,useValue:()=>Zt(d),multi:!0})}const b=p.providers;null==b||E||Ei(b,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}const rd=ce({provide:String,useValue:ce});function zc(i){return null!==i&&"object"==typeof i&&rd in i}function bi(i){return"function"==typeof i}const Lu=new fn("Set Injector scope."),Vu={},$o={};let qc;function id(){return void 0===qc&&(qc=new Fp),qc}class vr{}class sd extends vr{constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Go(o,_=>this.processProvider(_)),this.records.set(Op,ir(void 0,this)),d.has("environment")&&this.records.set(vr,ir(void 0,this));const p=this.records.get(Lu);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Pp.multi,St,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Ui(this),c=$n(void 0);try{return o()}finally{Ui(a),$n(c)}}get(o,a=$r,c=Ze.Default){this.assertNotDestroyed();const d=Ui(this),p=$n(void 0);try{if(!(c&Ze.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function oy(i){return"function"==typeof i||"object"==typeof i&&i instanceof fn}(o)&&ln(o);E=b&&this.injectableDefInScope(b)?ir(Wc(o),Vu):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&Ze.Self?id():this.parent).get(o,a=c&Ze.Optional&&a===$r?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[_r]=_[_r]||[]).unshift(de(o)),d)throw _;return function Y(i,o,a,c){const d=i[_r];throw o[Un]&&d.unshift(o[Un]),i.message=function te(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=de(o);if(Array.isArray(o))d=o.map(de).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):de(E)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(ss,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[_r]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{$n(p),Ui(d)}}resolveInjectorInitializers(){const o=Ui(this),a=$n(void 0);try{const c=this.get(Ch.multi,St,Ze.Self);for(const d of c)d()}finally{Ui(o),$n(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(de(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(o){let a=bi(o=K(o))?o:K(o&&o.provide);const c=function Dh(i){return zc(i)?ir(void 0,i.useValue):ir(Kc(i),Vu)}(o);if(bi(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=ir(void 0,Vu,!0),d.factory=()=>D(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Vu&&(a.value=$o,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Th(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=K(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Wc(i){const o=ln(i),a=null!==o?o.factory:ki(i);if(null!==a)return a;if(i instanceof fn)throw new we(204,!1);if(i instanceof Function)return function Up(i){const o=i.length;if(o>0)throw function Ts(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new we(204,!1);const a=function Cr(i){const o=i&&(i[mi]||i[Yr]);if(o){const a=function Lr(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function Kc(i,o,a){let c;if(bi(i)){const d=K(i);return ki(d)||Wc(d)}if(zc(i))c=()=>K(i.useValue);else if(function ni(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...D(i.deps||[]));else if(function xr(i){return!(!i||!i.useExisting)}(i))c=()=>Zt(K(i.useExisting));else{const d=K(i&&(i.useClass||i.provide));if(!function Fa(i){return!!i.deps}(i))return ki(d)||Wc(d);c=()=>new d(...D(i.deps))}return c}function ir(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function os(i){return!!i.\u0275providers}function Go(i,o){for(const a of i)Array.isArray(a)?Go(a,o):os(a)?Go(a.\u0275providers,o):o(a)}class od{}class cd{resolveComponentFactory(o){throw function Bp(i){const o=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let La=(()=>{class i{}return i.NULL=new cd,i})();function ay(){return y(Cn(),Se())}function y(i,o){return new h(Sr(i,o))}let h=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=ay,i})();function g(i){return i instanceof h?i.nativeElement:i}class S{}let N=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function z(){const i=Se(),a=qt(Cn().index,i);return(tr(a)?a:i)[11]}(),i})(),ae=(()=>{class i{}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:()=>null}),i})();class Ve{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Qe=new Ve("14.2.3"),vt={};function dy(i){return i.ngOriginalError}class Mh{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&dy(o);for(;a&&dy(a);)a=dy(a);return a||null}}const hy=new Map;let $C=0;const qp="__ngContext__";function Mr(i,o){tr(o)?(i[qp]=o[20],function zC(i){hy.set(i[20],i)}(o)):i[qp]=o}function Ba(i){return i instanceof Function?i():i}var qo=(()=>((qo=qo||{})[qo.Important=1]="Important",qo[qo.DashCase=2]="DashCase",qo))();function yy(i,o){return undefined(i,o)}function fd(i){const o=i[3];return Tr(o)?o[3]:o}function Zp(i){return c0(i[13])}function Yp(i){return c0(i[4])}function c0(i){for(;null!==i&&!Tr(i);)i=i[4];return i}function pd(i,o,a,c,d){if(null!=c){let p,_=!1;Tr(c)?p=c:tr(c)&&(_=!0,c=c[0]);const E=bn(c);0===i&&null!==a?null==d?m0(o,a,E):Wo(o,a,E,d||null,!0):1===i&&null!==a?Wo(o,a,E,d||null,!0):2===i?function sD(i,o,a){const c=Xp(i,o);c&&function iD(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,E,_):3===i&&o.destroyNode(E),null!=p&&function OM(i,o,a,c,d){const p=a[7];p!==bn(a)&&pd(o,i,c,p,d);for(let E=10;E<a.length;E++){const b=a[E];Yc(b[1],b,i,o,c,p)}}(o,i,p,a,d)}}function Qp(i,o,a){return i.createElement(o,a)}function f0(i,o){const a=i[9],c=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,En(d,-1)),a.splice(c,1)}function Ey(i,o){if(i.length<=10)return;const a=10+o,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&f0(d,c),o>0&&(i[a-1][4]=c[4]);const p=Mn(i,10+o);!function wy(i,o){Yc(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=p[19];null!==_&&_.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function kh(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Yc(i,o,a,3,null,null),function NM(i){let o=i[13];if(!o)return Jp(i[1],i);for(;o;){let a=null;if(tr(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==i;)tr(o)&&Jp(o[1],o),o=o[3];null===o&&(o=i),tr(o)&&Jp(o[1],o),a=o&&o[4]}o=a}}(o)}}function Jp(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function by(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Is)){const p=a[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=d[p[_]],b=p[_+1];try{b.call(E)}finally{}}else try{p.call(d)}finally{}}}}(i,o),function Iy(i,o){const a=i.cleanup,c=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(o):bn(o[_]),b=c[d=a[p+2]],T=a[p+3];"boolean"==typeof T?E.removeEventListener(a[p],b,T):T>=0?c[d=T]():c[d=-T].unsubscribe(),p+=2}else{const _=c[d=a[p+1]];a[p].call(_)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Tr(o[3])){a!==o[3]&&f0(a,o);const c=o[19];null!==c&&c.detachView(i)}!function qC(i){hy.delete(i[20])}(o)}}function p0(i,o,a){return function g0(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===lt.None||d===lt.Emulated)return null}return Sr(c,a)}(i,o.parent,a)}function Wo(i,o,a,c,d){i.insertBefore(o,a,c,d)}function m0(i,o,a){i.appendChild(o,a)}function y0(i,o,a,c,d){null!==c?Wo(i,o,a,c,d):m0(i,o,a)}function Xp(i,o){return i.parentNode(o)}let Cy=function v0(i,o,a){return 40&i.type?Sr(i,a):null};function tg(i,o,a,c){const d=p0(i,c,o),p=o[11],E=function Rr(i,o,a){return Cy(i,o,a)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)y0(p,d,a[b],E,!1);else y0(p,d,a,E,!1)}function ng(i,o){if(null!==o){const a=o.type;if(3&a)return Sr(o,i);if(4&a)return w0(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return ng(i,c);{const d=i[o.index];return Tr(d)?w0(-1,d):bn(d)}}if(32&a)return yy(o,i)()||bn(i[o.index]);{const c=Dy(i,o);return null!==c?Array.isArray(c)?c[0]:ng(fd(i[16]),c):ng(i,o.next)}}return null}function Dy(i,o){return null!==o?i[16][6].projection[o.projection]:null}function w0(i,o){const a=10+i+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return ng(c,d)}return o[7]}function Ty(i,o,a,c,d,p,_){for(;null!=a;){const E=c[a.index],b=a.type;if(_&&0===o&&(E&&Mr(bn(E),c),a.flags|=4),64!=(64&a.flags))if(8&b)Ty(i,o,a.child,c,d,p,!1),pd(o,i,d,E,p);else if(32&b){const T=yy(a,c);let R;for(;R=T();)pd(o,i,d,R,p);pd(o,i,d,E,p)}else 16&b?Ph(i,o,c,a,d,p):pd(o,i,d,E,p);a=_?a.projectionNext:a.next}}function Yc(i,o,a,c,d,p){Ty(a,c,i.firstChild,o,d,p,!1)}function Ph(i,o,a,c,d,p){const _=a[16],b=_[6].projection[c.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)pd(o,i,d,b[T],p);else Ty(i,o,b,_[3],d,p,!0)}function Qc(i,o,a){i.setAttribute(o,"style",a)}function Fh(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function oD(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}const Sy="ng-template";function Ay(i,o,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==oD(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function b0(i){return 4===i.type&&i.value!==Sy}function uD(i,o,a){return o===(4!==i.type||a?i.value:Sy)}function cD(i,o,a){let c=4;const d=i.attrs||[],p=function PM(i){for(let o=0;o<i.length;o++)if(Xs(i[o]))return o;return i.length}(d);let _=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!_)if(4&c){if(c=2|1&c,""!==b&&!uD(i,b,a)||""===b&&1===o.length){if(ks(c))return!1;_=!0}}else{const T=8&c?b:o[++E];if(8&c&&null!==i.attrs){if(!Ay(i.attrs,T,a)){if(ks(c))return!1;_=!0}continue}const P=lD(8&c?"class":b,d,b0(i),a);if(-1===P){if(ks(c))return!1;_=!0;continue}if(""!==T){let G;G=P>p?"":d[P+1].toLowerCase();const ee=8&c?G:null;if(ee&&-1!==oD(ee,T,0)||2&c&&T!==G){if(ks(c))return!1;_=!0}}}}else{if(!_&&!ks(c)&&!ks(b))return!1;if(_&&ks(b))continue;_=!1,c=b|1&c}}return ks(c)||_}function ks(i){return 0==(1&i)}function lD(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let p=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function C0(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function dD(i,o,a=!1){for(let c=0;c<o.length;c++)if(cD(i,o[c],a))return!0;return!1}function D0(i,o){return i?":not("+o.trim()+")":o}function ig(i){let o=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const E=i[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!ks(_)&&(o+=D0(p,d),d=""),c=_,p=p||!ks(c);a++}return""!==d&&(o+=D0(p,d)),o}const Lt={};function T0(i){S0(Ht(),Se(),Kn()+i,!1)}function S0(i,o,a,c){if(!c)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&Qs(o,p,a)}else{const p=i.preOrderHooks;null!==p&&So(o,p,0,a)}jr(a)}function x0(i,o=null,a=null,c){const d=M0(i,o,a,c);return d.resolveInjectorInitializers(),d}function M0(i,o=null,a=null,c,d=new Set){const p=[a||St,Lp(i)];return c=c||("object"==typeof i?void 0:de(i)),new sd(p,o||id(),c||null,d)}let Hu=(()=>{class i{static create(a,c){if(Array.isArray(a))return x0({name:""},c,a,"");{const d=a.name??"";return x0({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=$r,i.NULL=new Fp,i.\u0275prov=Qt({token:i,providedIn:"any",factory:()=>Zt(Op)}),i.__NG_ELEMENT_ID__=-1,i})();function Jc(i,o=Ze.Default){const a=Se();return null===a?Zt(i,o):to(Cn(),a,K(i),o)}function ag(){throw new Error("invalid")}function Uh(i,o){return i<<17|o<<2}function ho(i){return i>>17&32767}function V0(i){return 2|i}function Gu(i){return(131068&i)>>2}function Oy(i,o){return-131069&i|o<<2}function B0(i){return 1|i}function Ha(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],p=a[c+1];if(-1!==p){const _=i.data[p];ga(d),_.contentQueries(2,o[p],p)}}}function fo(i,o,a,c,d,p,_,E,b,T,R){const P=o.blueprint.slice();return P[0]=d,P[2]=76|c,(null!==R||i&&1024&i[2])&&(P[2]|=1024),au(P),P[3]=P[15]=i,P[8]=a,P[10]=_||i&&i[10],P[11]=E||i&&i[11],P[12]=b||i&&i[12]||null,P[9]=T||i&&i[9]||null,P[6]=p,P[20]=function GC(){return $C++}(),P[21]=R,P[16]=2==o.type?i[16]:P,P}function yd(i,o,a,c,d){let p=i.data[o];if(null===p)p=function W0(i,o,a,c,d){const p=fu(),_=la(),b=i.data[o]=function LD(i,o,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,o,a,c,d),function fp(){return Tt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const _=function To(){const i=Tt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ei(p,!0),p}function Xc(i,o,a,c){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function fg(i,o,a){mu(o);try{const c=i.viewQuery;null!==c&&Gh(1,c,a);const d=i.template;null!==d&&By(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Ha(i,o),i.staticViewQueries&&Gh(2,i.viewQuery,a);const p=i.components;null!==p&&function si(i,o){for(let a=0;a<o.length;a++)oR(i,o[a])}(o,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[2]&=-5,Zs()}}function Bh(i,o,a,c){const d=o[2];if(128!=(128&d)){mu(o);try{au(o),function Ec(i){return Tt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&By(i,o,a,2,c);const _=3==(3&d);if(_){const T=i.preOrderCheckHooks;null!==T&&Qs(o,T,null)}else{const T=i.preOrderHooks;null!==T&&So(o,T,0,null),Fl(o,0)}if(function iR(i){for(let o=Zp(i);null!==o;o=Yp(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c],p=d[3];0==(512&d[2])&&En(p,1),d[2]|=512}}}(o),function rR(i){for(let o=Zp(i);null!==o;o=Yp(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];Ws(c)&&Bh(d,c,d.template,c[8])}}(o),null!==i.contentQueries&&Ha(i,o),_){const T=i.contentCheckHooks;null!==T&&Qs(o,T)}else{const T=i.contentHooks;null!==T&&So(o,T,1),Fl(o,1)}!function PD(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)jr(~d);else{const p=d,_=a[++c],E=a[++c];pp(_,p),E(2,o[p])}}}finally{jr(-1)}}(i,o);const E=i.components;null!==E&&function q0(i,o){for(let a=0;a<o.length;a++)sR(i,o[a])}(o,E);const b=i.viewQuery;if(null!==b&&Gh(2,b,c),_){const T=i.viewCheckHooks;null!==T&&Qs(o,T)}else{const T=i.viewHooks;null!==T&&So(o,T,2),Fl(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,En(o[3],-1))}finally{Zs()}}}function By(i,o,a,c,d){const p=Kn(),_=2&c;try{jr(-1),_&&o.length>22&&S0(i,o,22,!1),a(c,d)}finally{jr(p)}}function jy(i,o,a){if(Ja(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function pg(i,o,a){!ts()||(function X0(i,o,a,c){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||eo(a,o),Mr(c,o);const _=a.initialInputs;for(let E=d;E<p;E++){const b=i.data[E],T=yr(b);T&&Ky(o,a,b);const R=rs(o,i,E,a);Mr(R,o),null!==_&&Yy(0,E-d,R,b,0,_),T&&(qt(a.index,o)[8]=R)}}(i,o,a,Sr(a,o)),128==(128&a.flags)&&function eE(i,o,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,_=function Ic(){return Tt.lFrame.currentDirectiveIndex}();try{jr(p);for(let E=c;E<d;E++){const b=i.data[E],T=o[E];pu(E),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&oi(b,T)}}finally{jr(-1),pu(_)}}(i,o,a))}function gg(i,o,a=Sr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],E=-1===_?a(o,i):i[_];i[d++]=E}}}function Hy(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=_d(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function _d(i,o,a,c,d,p,_,E,b,T){const R=22+c,P=R+d,G=function K0(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Lt);return a}(R,P),ee="function"==typeof T?T():T;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:E,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:ee,incompleteFirstPass:!1}}function $y(i,o,a,c){const d=zh(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&el(i).push(c,d.length-1))}function Gy(i,o,a){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,d):a[c]=[o,d]}return a}function zy(i,o){const c=o.directiveEnd,d=i.data,p=o.attrs,_=[];let E=null,b=null;for(let T=o.directiveStart;T<c;T++){const R=d[T],P=R.inputs,G=null===p||b0(o)?null:UD(P,p);_.push(G),E=Gy(P,T,E),b=Gy(R.outputs,T,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=b}function mg(i,o){const a=qt(o,i);16&a[2]||(a[2]|=32)}function jh(i,o,a,c){let d=!1;if(ts()){const p=function Ku(i,o,a){const c=i.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const _=c[p];dD(a,_.selectors,!1)&&(d||(d=[]),bs(eo(a,o),i,_.type),yr(_)?(Wy(i,a),d.unshift(_)):d.push(_))}return d}(i,o,a),_=null===c?null:{"":-1};if(null!==p){d=!0,tE(a,i.data.length,p.length);for(let R=0;R<p.length;R++){const P=p[R];P.providersResolver&&P.providersResolver(P)}let E=!1,b=!1,T=Xc(i,o,p.length,null);for(let R=0;R<p.length;R++){const P=p[R];a.mergedAttrs=ma(a.mergedAttrs,P.hostAttrs),nE(i,a,o,T,P),nR(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const G=P.type.prototype;!E&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!b&&(G.ngOnChanges||G.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),T++}zy(i,a)}_&&function tR(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new we(-301,!1);c.push(o[d],p)}}}(a,c,_)}return a.mergedAttrs=ma(a.mergedAttrs,a.attrs),d}function Hh(i,o,a,c,d,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const b=~o.index;(function J0(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(c,d,_)}}function oi(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Wy(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function nR(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;yr(o)&&(a[""]=i)}}function tE(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function nE(i,o,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=ki(d.type)),_=new Is(p,yr(d),Jc);i.blueprint[c]=_,a[c]=_,Hh(i,o,0,c,Xc(i,a,d.hostVars,Lt),d)}function Ky(i,o,a){const c=Sr(o,i),d=Hy(a),p=i[10],_=$h(i,fo(i,d,null,a.onPush?32:16,c,o,p,p.createRenderer(c,a),null,null,null));i[o.index]=_}function as(i,o,a,c,d,p){const _=Sr(i,o);!function Zy(i,o,a,c,d,p,_){if(null==p)i.removeAttribute(o,d,a);else{const E=null==_?me(p):_(p,c||"",d);i.setAttribute(o,d,E,a)}}(o[11],_,p,i.value,a,c,d)}function Yy(i,o,a,c,d,p){const _=p[o];if(null!==_){const E=c.setInput;for(let b=0;b<_.length;){const T=_[b++],R=_[b++],P=_[b++];null!==E?c.setInput(a,P,T,R):a[R]=P}}}function UD(i,o){let a=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[c+1])),c+=2}else c+=2;else c+=4}return a}function BD(i,o,a,c){return new Array(i,!0,!1,o,null,0,c,a,null,null)}function sR(i,o){const a=qt(o,i);if(Ws(a)){const c=a[1];48&a[2]?Bh(c,a,c.template,a[8]):a[5]>0&&rE(a)}}function rE(i){for(let c=Zp(i);null!==c;c=Yp(c))for(let d=10;d<c.length;d++){const p=c[d];if(Ws(p))if(512&p[2]){const _=p[1];Bh(_,p,_.template,p[8])}else p[5]>0&&rE(p)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=qt(a[c],i);Ws(d)&&d[5]>0&&rE(d)}}function oR(i,o){const a=qt(o,i),c=a[1];(function jD(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),fg(c,a,a[8])}function $h(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Qy(i){for(;i;){i[2]|=32;const o=fd(i);if(ih(i)&&!o)return i;i=o}return null}function yg(i,o,a,c=!0){const d=o[10];d.begin&&d.begin();try{Bh(i,o,i.template,a)}catch(_){throw c&&vg(o,_),_}finally{d.end&&d.end()}}function Gh(i,o,a){ga(0),o(i,a)}function zh(i){return i[7]||(i[7]=[])}function el(i){return i.cleanup||(i.cleanup=[])}function vg(i,o){const a=i[9],c=a?a.get(Mh,null):null;c&&c.handleError(o)}function wg(i,o,a,c,d){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],b=o[_],T=i.data[_];null!==T.setInput?T.setInput(b,d,c,E):b[E]=d}}function po(i,o,a){const c=Xr(o,i);!function l0(i,o,a){i.setValue(o,a)}(i[11],c,a)}function qh(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?p=E:1==p?d=he(d,E):2==p&&(c=he(c,E+": "+o[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function tl(i,o,a,c,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(bn(p)),Tr(p))for(let E=10;E<p.length;E++){const b=p[E],T=b[1].firstChild;null!==T&&tl(b[1],b,T,c)}const _=a.type;if(8&_)tl(i,o,a.child,c);else if(32&_){const E=yy(a,o);let b;for(;b=E();)c.push(b)}else if(16&_){const E=Dy(o,a);if(Array.isArray(E))c.push(...E);else{const b=fd(o[16]);tl(b[1],b,E,c,!0)}}a=d?a.projectionNext:a.next}return c}class wd{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return tl(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Tr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Ey(o,c),Mn(a,c))}this._attachedToViewContainer=!1}kh(this._lView[1],this._lView)}onDestroy(o){$y(this._lView[1],this._lView,null,o)}markForCheck(){Qy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){yg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function h0(i,o){Yc(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=o}}class iE extends wd{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;yg(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Eg extends La{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Q(o);return new Wh(a,this.ngModule)}}function Ig(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class cR{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){const d=this.injector.get(o,vt,c);return d!==vt||a===vt?d:this.parentInjector.get(o,a,c)}}class Wh extends od{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function fD(i){return i.map(ig).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Ig(this.componentDef.inputs)}get outputs(){return Ig(this.componentDef.outputs)}create(o,a,c,d){let p=(d=d||this.ngModule)instanceof vr?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new cR(o,p):o,E=_.get(S,null);if(null===E)throw new we(407,!1);const b=_.get(ae,null),T=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",P=c?function Z0(i,o,a){return i.selectRootElement(o,a===lt.ShadowDom)}(T,c,this.componentDef.encapsulation):Qp(E.createRenderer(null,this.componentDef),R,function uR(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),G=this.componentDef.onPush?288:272,ee=_d(0,null,null,1,0,null,null,null,null,null),ye=fo(null,ee,null,G,null,null,E,T,b,_,null);let Fe,He;mu(ye);try{const st=function bg(i,o,a,c,d,p){const _=a[1];a[22]=i;const b=yd(_,22,2,"#host",null),T=b.mergedAttrs=o.hostAttrs;null!==T&&(qh(b,T,!0),null!==i&&(Mo(d,i,T),null!==b.classes&&Fh(d,i,b.classes),null!==b.styles&&Qc(d,i,b.styles)));const R=c.createRenderer(i,o),P=fo(a,Hy(o),null,o.onPush?32:16,a[22],b,c,R,p||null,null,null);return _.firstCreatePass&&(bs(eo(b,a),_,o.type),Wy(_,b),tE(b,a.length,1)),$h(a,P),a[22]=P}(P,this.componentDef,ye,E,T);if(P)if(c)Mo(T,P,["ng-version",Qe.full]);else{const{attrs:nt,classes:Ae}=function pD(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++c]):8===d&&a.push(p);else{if(!ks(d))break;d=p}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);nt&&Mo(T,P,nt),Ae&&Ae.length>0&&Fh(T,P,Ae.join(" "))}if(He=qs(ee,22),void 0!==a){const nt=He.projection=[];for(let Ae=0;Ae<this.ngContentSelectors.length;Ae++){const wt=a[Ae];nt.push(null!=wt?Array.from(wt):null)}}Fe=function HD(i,o,a,c){const d=a[1],p=function Q0(i,o,a){const c=Cn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),nE(i,c,o,Xc(i,o,1,null),a),zy(i,c));const d=rs(o,i,c.directiveStart,c);Mr(d,o);const p=Sr(c,o);return p&&Mr(p,o),d}(d,a,o);if(i[8]=a[8]=p,null!==c)for(const E of c)E(p,o);if(o.contentQueries){const E=Cn();o.contentQueries(1,p,E.directiveStart)}const _=Cn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(jr(_.index),Hh(a[1],_,0,_.directiveStart,_.directiveEnd,o),oi(o,p)),p}(st,this.componentDef,ye,[e_]),fg(ee,ye,null)}finally{Zs()}return new Kh(this.componentType,Fe,y(He,ye),ye,He)}}class Kh extends class Sh{}{constructor(o,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new iE(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;wg(p[1],p,d,o,a),mg(p,this._tNode.index)}}get injector(){return new no(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function e_(){const i=Cn();vu(Se()[1],i)}function t_(i){let o=function Zh(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(yr(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new we(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const _=i;_.inputs=Cg(i.inputs),_.declaredInputs=Cg(i.declaredInputs),_.outputs=Cg(i.outputs);const E=d.hostBindings;E&&zD(i,E);const b=d.viewQuery,T=d.contentQueries;if(b&&GD(i,b),T&&sE(i,T),ue(i.inputs,d.inputs),ue(i.declaredInputs,d.declaredInputs),ue(i.outputs,d.outputs),yr(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===t_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function $D(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=ma(d.hostAttrs,a=ma(a,d.hostAttrs))}}(c)}function Cg(i){return i===Vr?{}:i===St?[]:i}function GD(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function sE(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,p)=>{o(c,d,p),a(c,d,p)}:o}function zD(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}let n_=null;function $a(){if(!n_){const i=Xt.Symbol;if(i&&i.iterator)n_=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(n_=c)}}}return n_}function Ed(i){return!!aE(i)&&(Array.isArray(i)||!(i instanceof Map)&&$a()in i)}function aE(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function zi(i,o,a){return i[o]=a}function Gr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Zu(i,o,a,c){const d=Gr(i,o,a);return Gr(i,o+1,c)||d}function i_(i,o,a,c){const d=Se();return Gr(d,Ks(),o)&&(Ht(),as(yn(),d,i,o,a,c)),i_}function Qh(i,o,a,c){return Gr(i,Ks(),a)?o+me(a)+c:Lt}function Jh(i,o,a,c,d,p){const E=Zu(i,function Oi(){return Tt.lFrame.bindingIndex}(),a,d);return ns(2),E?o+me(a)+c+me(d)+p:Lt}function c_(i,o,a,c,d,p,_,E){const b=Se(),T=Ht(),R=i+22,P=T.firstCreatePass?function hE(i,o,a,c,d,p,_,E,b){const T=o.consts,R=yd(o,i,4,_||null,_i(T,E));jh(o,a,R,_i(T,b)),vu(o,R);const P=R.tViews=_d(2,R,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,R),P.queries=o.queries.embeddedTView(R)),R}(R,T,b,o,a,c,d,p,_):T.data[R];ei(P,!1);const G=b[11].createComment("");tg(T,b,G,P),Mr(G,b),$h(b,b[R]=BD(G,b,G,P)),hc(P)&&pg(T,b,P),null!=_&&gg(b,P,E)}function l_(i){return es(function wc(){return Tt.lFrame.contextLView}(),22+i)}function d_(i,o,a){const c=Se();return Gr(c,Ks(),o)&&function Gi(i,o,a,c,d,p,_,E){const b=Sr(o,a);let R,T=o.inputs;!E&&null!=T&&(R=T[c])?(wg(i,a,R,c,d),aa(o)&&mg(a,o.index)):3&o.type&&(c=function qy(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=_?_(d,o.value||"",c):d,p.setProperty(b,c,d))}(Ht(),yn(),c,i,o,c[11],a,!1),d_}function tf(i,o,a,c,d){const _=d?"class":"style";wg(i,a,o.inputs[_],_,c)}function Cd(i,o,a,c){const d=Se(),p=Ht(),_=22+i,E=d[11],b=d[_]=Qp(E,o,function _u(){return Tt.lFrame.currentNamespace}()),T=p.firstCreatePass?function JD(i,o,a,c,d,p,_){const E=o.consts,T=yd(o,i,2,d,_i(E,p));return jh(o,a,T,_i(E,_)),null!==T.attrs&&qh(T,T.attrs,!1),null!==T.mergedAttrs&&qh(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,p,d,0,o,a,c):p.data[_];ei(T,!0);const R=T.mergedAttrs;null!==R&&Mo(E,b,R);const P=T.classes;null!==P&&Fh(E,b,P);const G=T.styles;return null!==G&&Qc(E,b,G),64!=(64&T.flags)&&tg(p,d,b,T),0===function cu(){return Tt.lFrame.elementDepthCount}()&&Mr(b,d),function lu(){Tt.lFrame.elementDepthCount++}(),hc(T)&&(pg(p,d,T),jy(p,T,d)),null!==c&&gg(d,T),Cd}function Dg(){let i=Cn();la()?da():(i=i.parent,ei(i,!1));const o=i;!function yc(){Tt.lFrame.elementDepthCount--}();const a=Ht();return a.firstCreatePass&&(vu(a,i),Ja(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Iu(i){return 0!=(16&i.flags)}(o)&&tf(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Vl(i){return 0!=(32&i.flags)}(o)&&tf(a,o,Se(),o.stylesWithoutHost,!1),Dg}function nf(i,o,a,c){return Cd(i,o,a,c),Dg(),nf}function Tg(i,o,a){const c=Se(),d=Ht(),p=i+22,_=d.firstCreatePass?function fE(i,o,a,c,d){const p=o.consts,_=_i(p,c),E=yd(o,i,8,"ng-container",_);return null!==_&&qh(E,_,!0),jh(o,a,E,_i(p,d)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,d,c,o,a):d.data[p];ei(_,!0);const E=c[p]=c[11].createComment("");return tg(d,c,E,_),Mr(E,c),hc(_)&&(pg(d,c,_),jy(d,_,c)),null!=a&&gg(c,_),Tg}function rf(){let i=Cn();const o=Ht();return la()?da():(i=i.parent,ei(i,!1)),o.firstCreatePass&&(vu(o,i),Ja(i)&&o.queries.elementEnd(i)),rf}function h_(){return Se()}function f_(i){return!!i&&"function"==typeof i.then}function Sg(i){return!!i&&"function"==typeof i.subscribe}const gE=Sg;function p_(i,o,a,c){const d=Se(),p=Ht(),_=Cn();return function eT(i,o,a,c,d,p,_,E){const b=hc(c),R=i.firstCreatePass&&el(i),P=o[8],G=zh(o);let ee=!0;if(3&c.type||E){const He=Sr(c,o),st=E?E(He):He,nt=G.length,Ae=E?nn=>E(bn(nn[c.index])):c.index;let wt=null;if(!E&&b&&(wt=function XD(i,o,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===c){const E=o[7],b=d[p+2];return E.length>b?E[b]:null}"string"==typeof _&&(p+=2)}return null}(i,o,d,c.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=p,wt.__ngLastListenerFn__=p,ee=!1;else{p=mE(c,o,P,p,!1);const nn=a.listen(st,d,p);G.push(p,nn),R&&R.push(d,Ae,nt,nt+1)}}else p=mE(c,o,P,p,!1);const ye=c.outputs;let Fe;if(ee&&null!==ye&&(Fe=ye[d])){const He=Fe.length;if(He)for(let st=0;st<He;st+=2){const Sn=o[Fe[st]][Fe[st+1]].subscribe(p),Ka=G.length;G.push(p,Sn),R&&R.push(d,c.index,Ka,-(Ka+1))}}}(p,d,d[11],_,i,o,0,c),p_}function Ag(i,o,a,c){try{return!1!==a(c)}catch(d){return vg(i,d),!1}}function mE(i,o,a,c,d){return function p(_){if(_===Function)return c;Qy(2&i.flags?qt(i.index,o):o);let b=Ag(o,0,c,_),T=p.__ngNextListenerFn__;for(;T;)b=Ag(o,0,T,_)&&b,T=T.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function m_(i=1){return function Ys(i){return(Tt.lFrame.contextLView=function yu(i,o){for(;i>0;)o=o[15],i--;return o}(i,Tt.lFrame.contextLView))[8]}(i)}function bE(i,o,a,c,d){const p=i[a+1],_=null===o;let E=c?ho(p):Gu(p),b=!1;for(;0!==E&&(!1===b||_);){const R=i[E+1];CE(i[E],o)&&(b=!0,i[E+1]=c?B0(R):V0(R)),E=c?ho(R):Gu(R)}b&&(i[a+1]=c?V0(p):B0(p))}function CE(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&As(i,o)>=0}const Nr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function iT(i){return i.substring(Nr.key,Nr.keyEnd)}function DE(i,o){const a=Nr.textEnd;return a===o?-1:(o=Nr.keyEnd=function gR(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,Nr.key=o,a),sf(i,o,a))}function sf(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function I_(i,o){return function mo(i,o,a,c){const d=Se(),p=Ht(),_=ns(2);p.firstUpdatePass&&AE(p,i,_,c),o!==Lt&&Gr(d,_,o)&&kE(p,p.data[Kn()],d,d[11],i,d[_+1]=function PE(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=de(Hi(i)))),i}(o,a),c,_)}(i,o,null,!0),I_}function Qo(i,o){for(let a=function sT(i){return function oT(i){Nr.key=0,Nr.keyEnd=0,Nr.value=0,Nr.valueEnd=0,Nr.textEnd=i.length}(i),DE(i,sf(i,0,Nr.textEnd))}(o);a>=0;a=DE(o,a))We(i,iT(o),!0)}function b_(i,o){return o>=i.expandoStartIndex}function AE(i,o,a,c){const d=i.data;if(null===d[a+1]){const p=d[Kn()],_=b_(i,a);FE(p,c)&&null===o&&!_&&(o=!1),o=function dT(i,o,a,c){const d=function pa(i){const o=Tt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=al(a=ME(null,i,o,a,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=ME(d,i,o,a,c),null===p){let b=function hT(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Gu(c))return i[ho(c)]}(i,o,c);void 0!==b&&Array.isArray(b)&&(b=ME(null,i,o,b[1],c),b=al(b,o.attrs,c),function xE(i,o,a,c){i[ho(a?o.classBindings:o.styleBindings)]=c}(i,o,c,b))}else p=function Yu(i,o,a){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=al(c,i[p].hostAttrs,a);return al(c,o.attrs,a)}(i,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,c),function rT(i,o,a,c,d,p){let _=p?o.classBindings:o.styleBindings,E=ho(_),b=Gu(_);i[c]=a;let R,T=!1;if(Array.isArray(a)){const P=a;R=P[1],(null===R||As(P,R)>0)&&(T=!0)}else R=a;if(d)if(0!==b){const G=ho(i[E+1]);i[c+1]=Uh(G,E),0!==G&&(i[G+1]=Oy(i[G+1],c)),i[E+1]=function DD(i,o){return 131071&i|o<<17}(i[E+1],c)}else i[c+1]=Uh(E,0),0!==E&&(i[E+1]=Oy(i[E+1],c)),E=c;else i[c+1]=Uh(b,0),0===E?E=c:i[b+1]=Oy(i[b+1],c),b=c;T&&(i[c+1]=V0(i[c+1])),bE(i,R,c,!0),bE(i,R,c,!1),function IE(i,o,a,c,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&As(p,o)>=0&&(a[c+1]=B0(a[c+1]))}(o,R,i,c,p),_=Uh(E,b),p?o.classBindings=_:o.styleBindings=_}(d,p,o,a,_,c)}}function ME(i,o,a,c,d){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=o[E],c=al(c,p.hostAttrs,d),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function al(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),We(i,_,!!a||o[++p]))}return void 0===i?null:i}function kE(i,o,a,c,d,p,_,E){if(!(3&o.type))return;const b=i.data,T=b[E+1];Mg(function U0(i){return 1==(1&i)}(T)?OE(b,o,a,d,Gu(T),_):void 0)||(Mg(p)||function cg(i){return 2==(2&i)}(T)&&(p=OE(b,null,a,d,E,_)),function I0(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:qo.DashCase;null==d?i.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=qo.Important),i.setStyle(a,c,d,p))}}(c,_,Xr(Kn(),a),d,p))}function OE(i,o,a,c,d,p){const _=null===o;let E;for(;d>0;){const b=i[d],T=Array.isArray(b),R=T?b[1]:b,P=null===R;let G=a[d+1];G===Lt&&(G=P?St:void 0);let ee=P?Sa(G,c):R===c?G:void 0;if(T&&!Mg(ee)&&(ee=Sa(b,c)),Mg(ee)&&(E=ee,_))return E;const ye=i[d+1];d=_?ho(ye):Gu(ye)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(E=Sa(b,c))}return E}function Mg(i){return void 0!==i}function FE(i,o){return 0!=(i.flags&(o?16:32))}function LE(i,o=""){const a=Se(),c=Ht(),d=i+22,p=c.firstCreatePass?yd(c,d,1,o,null):c.data[d],_=a[d]=function vy(i,o){return i.createText(o)}(a[11],o);tg(c,a,_,p),ei(p,!1)}function Rg(i,o,a){const c=Se(),d=Qh(c,i,o,a);return d!==Lt&&po(c,Kn(),d),Rg}function ul(i,o,a,c,d){const p=Se(),_=Jh(p,i,o,a,c,d);return _!==Lt&&po(p,Kn(),_),ul}function D_(i,o,a){!function qi(i,o,a,c){const d=Ht(),p=ns(2);d.firstUpdatePass&&AE(d,null,p,c);const _=Se();if(a!==Lt&&Gr(_,p,a)){const E=d.data[Kn()];if(FE(E,c)&&!b_(d,p)){let b=c?E.classesWithoutHost:E.stylesWithoutHost;null!==b&&(a=he(b,a||"")),tf(d,E,_,a,c)}else!function NE(i,o,a,c,d,p,_,E){d===Lt&&(d=St);let b=0,T=0,R=0<d.length?d[0]:null,P=0<p.length?p[0]:null;for(;null!==R||null!==P;){const G=b<d.length?d[b+1]:void 0,ee=T<p.length?p[T+1]:void 0;let Fe,ye=null;R===P?(b+=2,T+=2,G!==ee&&(ye=P,Fe=ee)):null===P||null!==R&&R<P?(b+=2,ye=R):(T+=2,ye=P,Fe=ee),null!==ye&&kE(i,o,a,c,ye,Fe,_,E),R=b<d.length?d[b]:null,P=T<p.length?p[T]:null}}(d,E,_,_[11],_[p+1],_[p+1]=function fT(i,o,a){if(null==a||""===a)return St;const c=[],d=Hi(a);if(Array.isArray(d))for(let p=0;p<d.length;p++)i(c,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&i(c,p,d[p]);else"string"==typeof d&&o(c,d);return c}(i,o,a),c,p)}}(We,Qo,Qh(Se(),i,o,a),!0)}const Dd=void 0;var ER=["en",[["a","p"],["AM","PM"],Dd],[["AM","PM"],Dd,Dd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Dd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Dd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Dd,"{1} 'at' {0}",Dd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wR(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let pe={};function Qu(i){const o=function kr(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=A_(o);if(a)return a;const c=o.split("-")[0];if(a=A_(c),a)return a;if("en"===c)return ER;throw new we(701,!1)}function Ga(i){return Qu(i)[Ct.PluralCase]}function A_(i){return i in pe||(pe[i]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[i]),pe[i]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const Ju="en-US";let YE=Ju;function pf(i,o,a,c,d){if(i=K(i),Array.isArray(i))for(let p=0;p<i.length;p++)pf(i[p],o,a,c,d);else{const p=Ht(),_=Se();let E=bi(i)?i:K(i.provide),b=Kc(i);const T=Cn(),R=1048575&T.providerIndexes,P=T.directiveStart,G=T.providerIndexes>>20;if(bi(i)||!i.multi){const ee=new Is(b,d,Jc),ye=yI(E,o,d?R:R+G,P);-1===ye?(bs(eo(T,_),p,E),gI(p,i,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(ee),_.push(ee)):(a[ye]=ee,_[ye]=ee)}else{const ee=yI(E,o,R+G,P),ye=yI(E,o,R,R+G),Fe=ee>=0&&a[ee],He=ye>=0&&a[ye];if(d&&!He||!d&&!Fe){bs(eo(T,_),p,E);const st=function xR(i,o,a,c,d){const p=new Is(i,a,Jc);return p.multi=[],p.index=o,p.componentProviders=0,mI(p,d,c&&!a),p}(d?ZT:KT,a.length,d,c,b);!d&&He&&(a[ye].providerFactory=st),gI(p,i,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(st),_.push(st)}else gI(p,i,ee>-1?ee:ye,mI(a[d?ye:ee],b,!d&&c));!d&&c&&He&&a[ye].componentProviders++}}}function gI(i,o,a,c){const d=bi(o),p=function Vp(i){return!!i.useClass}(o);if(d||p){const b=(p?K(o.useClass):o).prototype.ngOnDestroy;if(b){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const R=T.indexOf(a);-1===R?T.push(a,[c,b]):T[R+1].push(c,b)}else T.push(a,b)}}}function mI(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function yI(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function KT(i,o,a,c){return _I(this.multi,[])}function ZT(i,o,a,c){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=rs(a,a[1],this.providerFactory.index,c);p=E.slice(0,_),_I(d,p);for(let b=_;b<E.length;b++)p.push(E[b])}else p=[],_I(d,p);return p}function _I(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function vI(i,o=[]){return a=>{a.providersResolver=(c,d)=>function AR(i,o,a){const c=Ht();if(c.firstCreatePass){const d=yr(i);pf(a,c.data,c.blueprint,d,!0),pf(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class gf{}class YT{}function MR(i,o){return new QT(i,o??null)}class QT extends gf{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Eg(this);const c=dn(o);this._bootstrapComponents=Ba(c.bootstrap),this._r3Injector=M0(o,a,[{provide:gf,useValue:this},{provide:La,useValue:this.componentFactoryResolver}],de(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class mf extends YT{constructor(o){super(),this.moduleType=o}create(o){return new QT(this.moduleType,o)}}class JT extends gf{constructor(o,a,c){super(),this.componentFactoryResolver=new Eg(this),this.instance=null;const d=new sd([...o,{provide:gf,useValue:this},{provide:La,useValue:this.componentFactoryResolver}],a||id(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function qg(i,o,a=null){return new JT(i,o,a).injector}let wI=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=td(0,a.type),d=c.length>0?qg([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Qt({token:i,providedIn:"environment",factory:()=>new i(Zt(vr))}),i})();function Z_(i){i.getStandaloneInjector=o=>o.get(wI).getOrCreateStandaloneInjector(i)}function SI(i,o,a,c){return tv(Se(),Dn(),i,o,a,c)}function ev(i,o,a,c,d){return function nv(i,o,a,c,d,p,_){const E=o+a;return Zu(i,E,d,p)?zi(i,E+2,_?c.call(_,d,p):c(d,p)):Xo(i,E+2)}(Se(),Dn(),i,o,a,c,d)}function Xo(i,o){const a=i[o];return a===Lt?void 0:a}function tv(i,o,a,c,d,p){const _=o+a;return Gr(i,_,d)?zi(i,_+1,p?c.call(p,d):c(d)):Xo(i,_+1)}function MI(i,o){const a=Ht();let c;const d=i+22;a.firstCreatePass?(c=function uS(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const p=c.factory||(c.factory=ki(c.type)),_=$n(Jc);try{const E=va(!1),b=p();return va(E),function QD(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,Se(),d,b),b}finally{$n(_)}}function RI(i,o,a){const c=i+22,d=Se(),p=es(d,c);return function cl(i,o){return i[1].data[o].pure}(d,c)?tv(d,Dn(),o,p.transform,a,p):p.transform(a)}function yo(i){return o=>{setTimeout(i,void 0,o)}}const _o=class rv extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,p=a||(()=>null),_=c;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),p=b.error?.bind(b),_=b.complete?.bind(b)}this.__isAsync&&(p=yo(p),d&&(d=yo(d)),_&&(_=yo(_)));const E=super.subscribe({next:d,error:p,complete:_});return o instanceof X.w0&&o.add(E),E}};function ec(){return this._results[$a()]()}class Yg{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=$a(),c=Yg.prototype;c[a]||(c[a]=ec)}get changes(){return this._changes||(this._changes=new _o)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=_n(o);(this._changesDetected=!function cr(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=o[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let yf=(()=>{class i{}return i.__NG_ELEMENT_ID__=hS,i})();const Qg=yf,dS=class extends Qg{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,d=fo(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(c)),fg(c,d,o),new wd(d)}};function hS(){return Jg(Cn(),Se())}function Jg(i,o){return 4&i.type?new dS(o,i,y(i,o)):null}let Xg=(()=>{class i{}return i.__NG_ELEMENT_ID__=fS,i})();function fS(){return Wi(Cn(),Se())}const pS=Xg,kI=class extends pS{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new no(this._hostTNode,this._hostLView)}get parentInjector(){const o=Tu(this._hostTNode,this._hostLView);if(Bl(o)){const a=_a(o,this._hostLView),c=nr(o);return new no(a[1].data[c+8],a)}return new no(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=OI(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const _=o.createEmbeddedView(a||{},p);return this.insert(_,d),_}createComponent(o,a,c,d,p){const _=o&&!function wi(i){return"function"==typeof i}(o);let E;if(_)E=a;else{const P=a||{};E=P.index,c=P.injector,d=P.projectableNodes,p=P.environmentInjector||P.ngModuleRef}const b=_?o:new Wh(Q(o)),T=c||this.parentInjector;if(!p&&null==b.ngModule){const G=(_?T:this.parentInjector).get(vr,null);G&&(p=G)}const R=b.create(T,d,void 0,p);return this.insert(R.hostView,E),R}insert(o,a){const c=o._lView,d=c[1];if(function ou(i){return Tr(i[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const P=c[3],G=new kI(P,P[6],P[3]);G.detach(G.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function nD(i,o,a,c){const d=10+c,p=a.length;c>0&&(a[d-1][4]=o),c<p-10?(o[4]=a[d],Da(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function rD(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=64}(d,c,_,p);const E=w0(p,_),b=c[11],T=Xp(b,_[7]);return null!==T&&function d0(i,o,a,c,d,p){c[0]=d,c[6]=o,Yc(i,c,a,1,d,p)}(d,_[6],b,c,T,E),o.attachToViewContainerRef(),Da(iv(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=OI(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Ey(this._lContainer,a);c&&(Mn(iv(this._lContainer),a),kh(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=Ey(this._lContainer,a);return c&&null!=Mn(iv(this._lContainer),a)?new wd(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function OI(i){return i[8]}function iv(i){return i[8]||(i[8]=[])}function Wi(i,o){let a;const c=o[i.index];if(Tr(c))a=c;else{let d;if(8&i.type)d=bn(c);else{const p=o[11];d=p.createComment("");const _=Sr(i,o);Wo(p,Xp(p,_),d,function _0(i,o){return i.nextSibling(o)}(p,_),!1)}o[i.index]=a=BD(c,o,d,i),$h(o,a)}return new kI(a,i,o)}class av{constructor(o){this.queryList=o,this.matches=null}clone(){return new av(this.queryList)}setDirty(){this.queryList.setDirty()}}class em{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new em(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==jI(o,a).matches&&this.queries[a].setDirty()}}class uv{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class cv{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new cv(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class lv{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new lv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,a,mS(a,p)),this.matchTNodeWithReadOption(o,a,Ro(a,o,p,!1,!1))}else c===yf?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ro(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===h||d===Xg||d===yf&&4&a.type)this.addMatch(a.index,-2);else{const p=Ro(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function mS(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function dv(i,o,a,c){return-1===a?function ea(i,o){return 11&i.type?y(i,o):4&i.type?Jg(i,o):null}(o,i):-2===a?function yS(i,o,a){return a===h?y(o,i):a===yf?Jg(o,i):a===Xg?Wi(o,i):void 0}(i,o,c):rs(i,i[1],a,o)}function PI(i,o,a,c){const d=o[19].queries[c];if(null===d.matches){const p=i.data,_=a.matches,E=[];for(let b=0;b<_.length;b+=2){const T=_[b];E.push(T<0?null:dv(o,p[T],_[b+1],a.metadata.read))}d.matches=E}return d.matches}function tm(i,o,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const _=PI(i,o,d,a);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)c.push(_[E/2]);else{const T=p[E+1],R=o[-b];for(let P=10;P<R.length;P++){const G=R[P];G[17]===G[3]&&tm(G[1],G,T,c)}if(null!==R[9]){const P=R[9];for(let G=0;G<P.length;G++){const ee=P[G];tm(ee[1],ee,T,c)}}}}}return c}function FI(i){const o=Se(),a=Ht(),c=bc();ga(c+1);const d=jI(a,c);if(i.dirty&&function su(i){return 4==(4&i[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?tm(a,o,c,[]):PI(a,o,d,c);i.reset(p,g),i.notifyOnChanges()}return!0}return!1}function _f(i,o,a,c){const d=Ht();if(d.firstCreatePass){const p=Cn();(function UI(i,o,a){null===i.queries&&(i.queries=new cv),i.queries.track(new lv(o,a))})(d,new uv(o,a,c),p.index),function BI(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function VI(i,o,a){const c=new Yg(4==(4&a));$y(i,o,c,c.destroy),null===o[19]&&(o[19]=new em),o[19].queries.push(new av(c))}(d,Se(),a)}function LI(){return function vf(i,o){return i[19].queries[o].queryList}(Se(),bc())}function jI(i,o){return i.queries.getByIndex(o)}function nm(i,o){return Jg(i,o)}function rm(...i){}const _v=new fn("Application Initializer");let Cf=(()=>{class i{constructor(a){this.appInits=a,this.resolve=rm,this.reject=rm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(f_(p))a.push(p);else if(gE(p)){const _=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Zt(_v,8))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vv=new fn("AppId",{providedIn:"root",factory:function NS(){return`${ob()}${ob()}${ob()}`}});function ob(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ab=new fn("Platform Initializer"),kS=new fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ub=new fn("appBootstrapListener");let OS=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Df=new fn("LocaleId",{providedIn:"root",factory:()=>C(Df,Ze.Optional|Ze.SkipSelf)||function PS(){return typeof $localize<"u"&&$localize.locale||Ju}()}),FS=new fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class $R{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let VS=(()=>{class i{compileModuleSync(a){return new mf(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Ba(dn(a).declarations).reduce((_,E)=>{const b=Q(E);return b&&_.push(new Wh(b)),_},[]);return new $R(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const jS=(()=>Promise.resolve(0))();function Iv(i){typeof Zone>"u"?jS.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ls{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _o(!1),this.onMicrotaskEmpty=new _o(!1),this.onStable=new _o(!1),this.onError=new _o(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function HS(){let i=Xt.requestAnimationFrame,o=Xt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function im(i){const o=()=>{!function lb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Xt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Cv(i),i.isCheckStableRunning=!0,bv(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Cv(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,_,E)=>{try{return db(i),a.invokeTask(d,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),hb(i)}},onInvoke:(a,c,d,p,_,E,b)=>{try{return db(i),a.invoke(d,p,_,E,b)}finally{i.shouldCoalesceRunChangeDetection&&o(),hb(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Cv(i),bv(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ls.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Ls.isInAngularZone())throw new we(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,$S,rm,rm);try{return p.runTask(_,a,c)}finally{p.cancelTask(_)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const $S={};function bv(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Cv(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function db(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function hb(i){i._nesting--,bv(i)}class GS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _o,this.onMicrotaskEmpty=new _o,this.onStable=new _o,this.onError=new _o}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const fb=new fn(""),zS=new fn("");let Tv,qS=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Tv||(function Dv(i){Tv=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ls.assertNotInAngularZone(),Iv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Iv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Zt(Ls),Zt(pb),Zt(zS))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac}),i})(),pb=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Tv?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),tc=null;const WS=new fn("AllowMultipleToken"),Sv=new fn("PlatformDestroyListeners");class sm{constructor(o,a){this.name=o,this.token=a}}function _b(i,o,a=[]){const c=`Platform: ${o}`,d=new fn(c);return(p=[])=>{let _=Fd();if(!_||_.injector.get(WS,!1)){const E=[...a,...p,{provide:d,useValue:!0}];i?i(E):function om(i){if(tc&&!tc.get(WS,!1))throw new we(400,!1);tc=i;const o=i.get(Or);(function mb(i){const o=i.get(ab,null);o&&o.forEach(a=>a())})(i)}(function vb(i=[],o){return Hu.create({name:o,providers:[{provide:Lu,useValue:"platform"},{provide:Sv,useValue:new Set([()=>tc=null])},...i]})}(E,c))}return function KS(i){const o=Fd();if(!o)throw new we(401,!1);return o}()}}function Fd(){return tc?.get(Or)??null}let Or=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function wb(i,o){let a;return a="noop"===i?new GS:("zone.js"===i?void 0:i)||new Ls(o),a}(c?.ngZone,function Wa(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:Ls,useValue:d}];return d.run(()=>{const _=Hu.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(_),b=E.injector.get(Mh,null);if(!b)throw new we(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:R=>{b.handleError(R)}});E.onDestroy(()=>{wr(this._modules,E),T.unsubscribe()})}),function Av(i,o,a){try{const c=a();return f_(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(b,d,()=>{const T=E.injector.get(Cf);return T.runInitializers(),T.donePromise.then(()=>(function QE(i){Bt(i,"Expected localeId to be defined"),"string"==typeof i&&(YE=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Df,Ju)||Ju),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const d=am({},c);return function ft(i,o,a){const c=new mf(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(Sf);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Sv,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Zt(Hu))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function am(i,o){return Array.isArray(o)?o.reduce(am,i):{...i,...o}}let Sf=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new k.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),_=new k.y(E=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Ls.assertNotInAngularZone(),Iv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Ls.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{b.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ie.T)(p,_.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof od;if(!this._injector.get(Cf).done)throw!d&&Kt(a),new we(405,false);let _;_=d?a:this._injector.get(La).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const E=function kt(i){return i.isBoundToModule}(_)?void 0:this._injector.get(gf),T=_.create(Hu.NULL,[],c||_.selector,E),R=T.location.nativeElement,P=T.injector.get(fb,null);return P?.registerApplication(R),T.onDestroy(()=>{this.detachView(T.hostView),wr(this.components,T),P?.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;wr(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(ub,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>wr(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Zt(Ls),Zt(vr),Zt(Mh))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function wr(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let xv=!0,cm=!1;function lm(){return cm=!0,xv}function na(){if(cm)throw new Error("Cannot enable prod mode after platform setup.");xv=!1}let Ld=(()=>{class i{}return i.__NG_ELEMENT_ID__=Cb,i})();function Cb(i){return function Mv(i,o,a){if(aa(i)&&!a){const c=qt(i.index,o);return new wd(c,c)}return 47&i.type?new wd(o[16],o):null}(Cn(),Se(),16==(16&i))}class xf{constructor(){}supports(o){return Ed(o)}create(o){return new Lv(o)}}const Fv=(i,o)=>o;class Lv{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Fv}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const _=!c||a&&a.currentIndex<jv(c,d,p)?a:c,E=jv(_,d,p),b=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const T=E-d,R=b-d;if(T!=R){for(let G=0;G<T;G++){const ee=G<p.length?p[G]:p[G]=0,ye=ee+G;R<=ye&&ye<T&&(p[G]=ee+1)}p[_.previousIndex]=R-T}}E!==b&&o(_,E,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Ed(o))throw new we(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),c=!0),a=a._next}else d=0,function WD(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[$a()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new Vv(a,c),p,d),o}_verifyReinsertion(o,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Bv),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bv),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Vv{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uv{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Bv{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new Uv,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jv(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class Ab{constructor(){}supports(o){return o instanceof Map||aE(o)}create(){return new xb}}class xb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||aE(o)))throw new we(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const c=new Mb(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class Mb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hm(){return new fm([new xf])}let fm=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||hm()),deps:[[i,new It,new Ne]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:hm}),i})();function pm(){return new Mf([new Ab])}let Mf=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||pm()),deps:[[i,new It,new Ne]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:pm}),i})();const Gv=_b(null,"core",[]);let nA=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Zt(Sf))},i.\u0275mod=Pt({type:i}),i.\u0275inj=Nt({}),i})();function rA(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ct,De,O)=>{O.d(De,{Z:()=>we});var f=O(2090),X=O(4859),k=O(9681),ie=O(1877);class se{constructor(me,fe){this._delegate=me,this.firebase=fe,(0,k._addComponent)(me,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(me,fe=k._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(me);return!ot.isInitialized()&&"EXPLICIT"===(null===(Je=ot.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:fe})}_removeServiceInstance(me,fe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(fe)}_addComponent(me){(0,k._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,k._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function he(){const rt=function de(rt){const me={},fe={__esModule:!0,initializeApp:function xe(je,U={}){const ge=k.initializeApp(je,U);if((0,f.r3)(me,ge.name))return me[ge.name];const q=new rt(ge,fe);return me[ge.name]=q,q},app:ot,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ie(je){const U=je.name,ge=U.replace("-compat","");if(k._registerComponent(je)&&"PUBLIC"===je.type){const q=(J=ot())=>{if("function"!=typeof J[ge])throw ue.create("invalid-app-argument",{appName:U});return J[ge]()};void 0!==je.serviceProps&&(0,f.ZB)(q,je.serviceProps),fe[ge]=q,rt.prototype[ge]=function(...J){return this._getService.bind(this,U).apply(this,je.multipleInstances?J:[])}}return"PUBLIC"===je.type?fe[ge]:null},removeApp:function Je(je){delete me[je]},useAsService:function Be(je,U){return"serverAuth"===U?null:U},modularAPIs:k}};function ot(je){if(!(0,f.r3)(me,je=je||k._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:je});return me[je]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function _e(){return Object.keys(me).map(je=>me[je])}}),ot.App=rt,fe}(se);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function me(fe){(0,f.ZB)(rt,fe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),rt}(),$=new ie.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=B;!function Me(rt){(0,k.registerVersion)("@firebase/app-compat","0.1.38",rt)}()},9681:(ct,De,O)=>{O.r(De),O.d(De,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>js,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Qt,_apps:()=>sn,_clearComponents:()=>Zi,_components:()=>gn,_getProvider:()=>Nt,_registerComponent:()=>br,_removeServiceInstance:()=>ln,deleteApp:()=>ia,getApp:()=>Zr,getApps:()=>Yr,initializeApp:()=>mi,onLog:()=>hs,registerVersion:()=>mr,setLogLevel:()=>$n});var f=O(5861),X=O(4859),k=O(1877),ie=O(2090),se=O(8766);class ce{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function ue(et){return"VERSION"===et.getComponent()?.type}(Xe)){const bt=Xe.getImmediate();return`${bt.library}/${bt.version}`}return null}).filter(Xe=>Xe).join(" ")}}const de="@firebase/app",B=new k.Yd("@firebase/app"),Bt="[DEFAULT]",qe={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,gn=new Map;function Wt(et,Te){try{et.container.addComponent(Te)}catch(Xe){B.debug(`Component ${Te.name} failed to register with FirebaseApp ${et.name}`,Xe)}}function Qt(et,Te){et.container.addOrOverwriteComponent(Te)}function br(et){const Te=et.name;if(gn.has(Te))return B.debug(`There were multiple attempts to register component ${Te}.`),!1;gn.set(Te,et);for(const Xe of sn.values())Wt(Xe,et);return!0}function Nt(et,Te){const Xe=et.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),et.container.getProvider(Te)}function ln(et,Te,Xe=Bt){Nt(et,Te).clearInstance(Xe)}function Zi(){gn.clear()}const Cr=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Lr{constructor(Te,Xe,bt){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=bt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}const js="9.13.0";function mi(et,Te={}){let Xe=et;"object"!=typeof Te&&(Te={name:Te});const bt=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},Te),Et=bt.name;if("string"!=typeof Et||!Et)throw Cr.create("bad-app-name",{appName:String(Et)});if(Xe||(Xe=(0,ie.aH)()),!Xe)throw Cr.create("no-options");const Pt=sn.get(Et);if(Pt){if((0,ie.vZ)(Xe,Pt.options)&&(0,ie.vZ)(bt,Pt.config))return Pt;throw Cr.create("duplicate-app",{appName:Et})}const j=new X.H0(Et);for(const W of gn.values())j.addComponent(W);const V=new Lr(Xe,bt,j);return sn.set(Et,V),V}function Zr(et=Bt){const Te=sn.get(et);if(!Te&&et===Bt)return mi();if(!Te)throw Cr.create("no-app",{appName:et});return Te}function Yr(){return Array.from(sn.values())}function ia(et){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,f.Z)(function*(et){const Te=et.name;sn.has(Te)&&(sn.delete(Te),yield Promise.all(et.container.getProviders().map(Xe=>Xe.delete())),et.isDeleted=!0)})).apply(this,arguments)}function mr(et,Te,Xe){var bt;let Et=null!==(bt=qe[et])&&void 0!==bt?bt:et;Xe&&(Et+=`-${Xe}`);const Pt=Et.match(/\s|\//),j=Te.match(/\s|\//);if(Pt||j){const V=[`Unable to register library "${Et}" with version "${Te}":`];return Pt&&V.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),Pt&&j&&V.push("and"),j&&V.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void B.warn(V.join(" "))}br(new X.wA(`${Et}-version`,()=>({library:Et,version:Te}),"VERSION"))}function hs(et,Te){if(null!==et&&"function"!=typeof et)throw Cr.create("invalid-log-argument");(0,k.Am)(et,Te)}function $n(et){(0,k.Ub)(et)}const An="firebase-heartbeat-store";let Pn=null;function hn(){return Pn||(Pn=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(et,Te)=>{0===Te&&et.createObjectStore(An)}}).catch(et=>{throw Cr.create("idb-open",{originalErrorMessage:et.message})})),Pn}function lt(){return(lt=(0,f.Z)(function*(et){var Te;try{return(yield hn()).transaction(An).objectStore(An).get(Fn(et))}catch(Xe){if(Xe instanceof ie.ZR)B.warn(Xe.message);else{const bt=Cr.create("idb-get",{originalErrorMessage:null===(Te=Xe)||void 0===Te?void 0:Te.message});B.warn(bt.message)}}})).apply(this,arguments)}function Xt(et,Te){return or.apply(this,arguments)}function or(){return(or=(0,f.Z)(function*(et,Te){var Xe;try{const Et=(yield hn()).transaction(An,"readwrite");return yield Et.objectStore(An).put(Te,Fn(et)),Et.done}catch(bt){if(bt instanceof ie.ZR)B.warn(bt.message);else{const Et=Cr.create("idb-set",{originalErrorMessage:null===(Xe=bt)||void 0===Xe?void 0:Xe.message});B.warn(Et.message)}}})).apply(this,arguments)}function Fn(et){return`${et.name}!${et.options.appId}`}class fs{constructor(Te){this.container=Te,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new tn(Xe),this._heartbeatsCachePromise=this._storage.read().then(bt=>(this._heartbeatsCache=bt,bt))}triggerHeartbeat(){var Te=this;return(0,f.Z)(function*(){const bt=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=en();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==Et&&!Te._heartbeatsCache.heartbeats.some(Pt=>Pt.date===Et))return Te._heartbeatsCache.heartbeats.push({date:Et,agent:bt}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Pt=>{const j=new Date(Pt.date).valueOf();return Date.now()-j<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,f.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const Xe=en(),{heartbeatsToSend:bt,unsentEntries:Et}=function Ri(et,Te=1024){const Xe=[];let bt=et.slice();for(const Et of et){const Pt=Xe.find(j=>j.agent===Et.agent);if(Pt){if(Pt.dates.push(Et.date),Gn(Xe)>Te){Pt.dates.pop();break}}else if(Xe.push({agent:Et.agent,dates:[Et.date]}),Gn(Xe)>Te){Xe.pop();break}bt=bt.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:bt}}(Te._heartbeatsCache.heartbeats),Pt=(0,ie.L)(JSON.stringify({version:2,heartbeats:bt}));return Te._heartbeatsCache.lastSentHeartbeatDate=Xe,Et.length>0?(Te._heartbeatsCache.heartbeats=Et,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Pt})()}}function en(){return(new Date).toISOString().substring(0,10)}class tn{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,f.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function _t(et){return lt.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var Xe=this;return(0,f.Z)(function*(){var bt;if(yield Xe._canUseIndexedDBPromise){const Pt=yield Xe.read();return Xt(Xe.app,{lastSentHeartbeatDate:null!==(bt=Te.lastSentHeartbeatDate)&&void 0!==bt?bt:Pt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var Xe=this;return(0,f.Z)(function*(){var bt;if(yield Xe._canUseIndexedDBPromise){const Pt=yield Xe.read();return Xt(Xe.app,{lastSentHeartbeatDate:null!==(bt=Te.lastSentHeartbeatDate)&&void 0!==bt?bt:Pt.lastSentHeartbeatDate,heartbeats:[...Pt.heartbeats,...Te.heartbeats]})}})()}}function Gn(et){return(0,ie.L)(JSON.stringify({version:2,heartbeats:et})).length}!function Dr(et){br(new X.wA("platform-logger",Te=>new ce(Te),"PRIVATE")),br(new X.wA("heartbeat",Te=>new fs(Te),"PRIVATE")),mr(de,"0.8.3",et),mr(de,"0.8.3","esm2017"),mr("fire-js","")}("")},4859:(ct,De,O)=>{O.d(De,{H0:()=>de,wA:()=>k});var f=O(5861),X=O(2090);class k{constructor(B,$,K){this.name=B,this.instanceFactory=$,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ie="[DEFAULT]";class se{constructor(B,$){this.name=B,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const $=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has($)){const K=new X.BH;if(this.instancesDeferred.set($,K),this.isInitialized($)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:$});Le&&K.resolve(Le)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(B){var $;const K=this.normalizeInstanceIdentifier(B?.identifier),Le=null!==($=B?.optional)&&void 0!==$&&$;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Me){if(Le)return null;throw Me}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ue(he){return"EAGER"===he.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[$,K]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier($);try{const Me=this.getOrInitializeService({instanceIdentifier:Le});K.resolve(Me)}catch{}}}}clearInstance(B=ie){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,f.Z)(function*(){const $=Array.from(B.instances.values());yield Promise.all([...$.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...$.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ie){return this.instances.has(B)}getOptions(B=ie){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:$={}}=B,K=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:K,options:$});for(const[Me,we]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Me)&&we.resolve(Le);return Le}onInit(B,$){var K;const Le=this.normalizeInstanceIdentifier($),Me=null!==(K=this.onInitCallbacks.get(Le))&&void 0!==K?K:new Set;Me.add(B),this.onInitCallbacks.set(Le,Me);const we=this.instances.get(Le);return we&&B(we,Le),()=>{Me.delete(B)}}invokeOnInitCallbacks(B,$){const K=this.onInitCallbacks.get($);if(K)for(const Le of K)try{Le(B,$)}catch{}}getOrInitializeService({instanceIdentifier:B,options:$={}}){let K=this.instances.get(B);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(he=B,he===ie?void 0:he),options:$}),this.instances.set(B,K),this.instancesOptions.set(B,$),this.invokeOnInitCallbacks(K,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,K)}catch{}var he;return K||null}normalizeInstanceIdentifier(B=ie){return this.component?this.component.multipleInstances?B:ie:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const $=this.getProvider(B.name);if($.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);$.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const $=new se(B,this);return this.providers.set(B,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ct,De,O)=>{O.d(De,{Am:()=>he,Ub:()=>de,Yd:()=>ue,in:()=>X});const f=[];var X=(()=>{return(B=X||(X={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",X;var B})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ie=X.INFO,se={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ce=(B,$,...K)=>{if($<B.logLevel)return;const Le=(new Date).toISOString(),Me=se[$];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Me](`[${Le}]  ${B.name}:`,...K)};class ue{constructor($){this.name=$,this._logLevel=ie,this._logHandler=ce,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in X))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?k[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...$),this._logHandler(this,X.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...$),this._logHandler(this,X.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,X.INFO,...$),this._logHandler(this,X.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,X.WARN,...$),this._logHandler(this,X.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...$),this._logHandler(this,X.ERROR,...$)}}function de(B){f.forEach($=>{$.setLogLevel(B)})}function he(B,$){for(const K of f){let Le=null;$&&$.level&&(Le=k[$.level]),K.userLogHandler=null===B?null:(Me,we,...rt)=>{const me=rt.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Le??Me.logLevel)&&B({level:X[we].toLowerCase(),message:me,args:rt,type:Me.name})}}}},8766:(ct,De,O)=>{O.d(De,{Lj:()=>xe,X3:()=>ot});var f=O(5861);let k,ie;const ue=new WeakMap,de=new WeakMap,he=new WeakMap,B=new WeakMap,$=new WeakMap;let Me={get(U,ge,q){if(U instanceof IDBTransaction){if("done"===ge)return de.get(U);if("objectStoreNames"===ge)return U.objectStoreNames||he.get(U);if("store"===ge)return q.objectStoreNames[1]?void 0:q.objectStore(q.objectStoreNames[0])}return fe(U[ge])},set:(U,ge,q)=>(U[ge]=q,!0),has:(U,ge)=>U instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in U};function me(U){return"function"==typeof U?function rt(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ge){return U.apply(Je(this),ge),fe(ue.get(this))}:function(...ge){return fe(U.apply(Je(this),ge))}:function(ge,...q){const J=U.call(Je(this),ge,...q);return he.set(J,ge.sort?ge.sort():[ge]),fe(J)}}(U):(U instanceof IDBTransaction&&function Le(U){if(de.has(U))return;const ge=new Promise((q,J)=>{const re=()=>{U.removeEventListener("complete",ne),U.removeEventListener("error",Pe),U.removeEventListener("abort",Pe)},ne=()=>{q(),re()},Pe=()=>{J(U.error||new DOMException("AbortError","AbortError")),re()};U.addEventListener("complete",ne),U.addEventListener("error",Pe),U.addEventListener("abort",Pe)});de.set(U,ge)}(U),((U,ge)=>ge.some(q=>U instanceof q))(U,function se(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Me):U)}function fe(U){if(U instanceof IDBRequest)return function K(U){const ge=new Promise((q,J)=>{const re=()=>{U.removeEventListener("success",ne),U.removeEventListener("error",Pe)},ne=()=>{q(fe(U.result)),re()},Pe=()=>{J(U.error),re()};U.addEventListener("success",ne),U.addEventListener("error",Pe)});return ge.then(q=>{q instanceof IDBCursor&&ue.set(q,U)}).catch(()=>{}),$.set(ge,U),ge}(U);if(B.has(U))return B.get(U);const ge=me(U);return ge!==U&&(B.set(U,ge),$.set(ge,U)),ge}const Je=U=>$.get(U);function ot(U,ge,{blocked:q,upgrade:J,blocking:re,terminated:ne}={}){const Pe=indexedDB.open(U,ge),ke=fe(Pe);return J&&Pe.addEventListener("upgradeneeded",mt=>{J(fe(Pe.result),mt.oldVersion,mt.newVersion,fe(Pe.transaction))}),q&&Pe.addEventListener("blocked",()=>q()),ke.then(mt=>{ne&&mt.addEventListener("close",()=>ne()),re&&mt.addEventListener("versionchange",()=>re())}).catch(()=>{}),ke}function xe(U,{blocked:ge}={}){const q=indexedDB.deleteDatabase(U);return ge&&q.addEventListener("blocked",()=>ge()),fe(q).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Be=new Map;function je(U,ge){if(!(U instanceof IDBDatabase)||ge in U||"string"!=typeof ge)return;if(Be.get(ge))return Be.get(ge);const q=ge.replace(/FromIndex$/,""),J=ge!==q,re=Ie.includes(q);if(!(q in(J?IDBIndex:IDBObjectStore).prototype)||!re&&!_e.includes(q))return;const ne=function(){var Pe=(0,f.Z)(function*(ke,...mt){const Yt=this.transaction(ke,re?"readwrite":"readonly");let Bt=Yt.store;return J&&(Bt=Bt.index(mt.shift())),(yield Promise.all([Bt[q](...mt),re&&Yt.done]))[0]});return function(mt){return Pe.apply(this,arguments)}}();return Be.set(ge,ne),ne}!function we(U){Me=U(Me)}(U=>({...U,get:(ge,q,J)=>je(ge,q)||U.get(ge,q,J),has:(ge,q)=>!!je(ge,q)||U.has(ge,q)}))},5861:(ct,De,O)=>{function f(k,ie,se,ce,ue,de,he){try{var B=k[de](he),$=B.value}catch(K){return void se(K)}B.done?ie($):Promise.resolve($).then(ce,ue)}function X(k){return function(){var ie=this,se=arguments;return new Promise(function(ce,ue){var de=k.apply(ie,se);function he($){f(de,ce,ue,he,B,"next",$)}function B($){f(de,ce,ue,he,B,"throw",$)}he(void 0)})}}O.d(De,{Z:()=>X})}},ct=>{ct(ct.s=9449)}]);