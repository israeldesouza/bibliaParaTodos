"use strict";(self.webpackChunkbibliaDeTodos=self.webpackChunkbibliaDeTodos||[]).push([[179],{2011:(ct,De,O)=>{O.d(De,{Dh:()=>de,GT:()=>le,cc:()=>Me,hO:()=>Le,on:()=>B,pX:()=>oe,xv:()=>he});var f=O(4650),X=O(127),k=O(5813);ct=O.hmd(ct);const se=["ngOnDestroy"],oe=(fe,Xe,at,xe={})=>new Proxy(fe,{get:(_e,Ie)=>at.runOutsideAngular(()=>{var Be;if(fe[Ie])return!(null===(Be=xe?.spy)||void 0===Be)&&Be.get&&xe.spy.get(Ie,fe[Ie]),fe[Ie];if(se.indexOf(Ie)>-1)return()=>{};const $e=Xe.toPromise().then(U=>{const pe=U&&U[Ie];return"function"==typeof pe?pe.bind(U):pe&&pe.then?pe.then(q=>at.run(()=>q)):at.run(()=>pe)});return new Proxy(()=>{},{get:(U,pe)=>$e[pe],apply:(U,pe,q)=>$e.then(J=>{var ie;const ne=J&&J(...q);return!(null===(ie=xe?.spy)||void 0===ie)&&ie.apply&&xe.spy.apply(Ie,q,ne),ne})})})}),le=(fe,Xe)=>{Xe.forEach(at=>{Object.getOwnPropertyNames(at.prototype||at).forEach(xe=>{Object.defineProperty(fe.prototype,xe,Object.getOwnPropertyDescriptor(at.prototype||at,xe))})})};class ce{constructor(Xe){return Xe}}const de=new f.OlP("angularfire2.app.options"),he=new f.OlP("angularfire2.app.name");function B(fe,Xe,at){const _e="object"==typeof at&&at||{};_e.name=_e.name||"string"==typeof at&&at||"[DEFAULT]";const Be=X.Z.apps.filter($e=>$e&&$e.name===_e.name)[0]||Xe.runOutsideAngular(()=>X.Z.initializeApp(fe,_e));try{JSON.stringify(fe)!==JSON.stringify(Be.options)&&$("error",`${Be.name} Firebase App already initialized with different options${ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(Be)}const $=(fe,...Xe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[fe](...Xe)},K={provide:ce,useFactory:B,deps:[de,f.R0b,[new f.FiY,he]]};let Le=(()=>{class fe{constructor(at){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",f.q4F.full,at.toString())}static initializeApp(at,xe){return{ngModule:fe,providers:[{provide:de,useValue:at},{provide:he,useValue:xe}]}}}return fe.\u0275fac=function(at){return new(at||fe)(f.LFG(f.Lbi))},fe.\u0275mod=f.oAB({type:fe}),fe.\u0275inj=f.cJS({providers:[K]}),fe})();function Me(fe,Xe,at,xe,_e){const[,Ie,Be]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===fe)||[];if(Ie)return function we(fe,Xe){try{return fe.toString()===Xe.toString()}catch{return fe===Xe}}(_e,Be)||(ge("error",`${Xe} was already initialized on the ${at} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:_e,was:Be})),Ie;{const $e=xe();return globalThis.\u0275AngularfireInstanceCache.push([fe,$e,_e]),$e}}const rt=!!ct.hot,ge=(fe,...Xe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[fe](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ct,De,O)=>{O.d(De,{q4:()=>We,iC:()=>Li,fc:()=>$n,HU:()=>Dr,vb:()=>Oi,JM:()=>Fa});var f=O(4650),X=O(5867),k=O(5861),se=O(9681),oe=O(2090),le=O(4859),ce=O(1877),de=O(8766);const he="@firebase/installations",B="0.5.16",K=`w:${B}`,Le="FIS_v2",Xe=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function at(C){return C instanceof oe.ZR&&C.code.includes("request-failed")}function xe({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function _e(C){return{token:C.token,requestStatus:2,expiresIn:J(C.expiresIn),creationTime:Date.now()}}function Ie(C,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,k.Z)(function*(C,D){const F=(yield D.json()).error;return Xe.create("request-failed",{requestName:C,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function $e({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function U(C,{refreshToken:D}){const x=$e(C);return x.append("Authorization",function ie(C){return`${Le} ${C}`}(D)),x}function pe(C){return q.apply(this,arguments)}function q(){return(q=(0,k.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function J(C){return Number(C.replace("s","000"))}function ne(C,D){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:x}){const F=xe(C),Y=$e(C),te=D.getImmediate({optional:!0});if(te){const bt=yield te.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const Ne={method:"POST",headers:Y,body:JSON.stringify({fid:x,authVersion:Le,appId:C.appId,sdkVersion:K})},it=yield pe(()=>fetch(F,Ne));if(it.ok){const bt=yield it.json();return{fid:bt.fid||x,registrationStatus:2,refreshToken:bt.refreshToken,authToken:_e(bt.authToken)}}throw yield Ie("Create Installation",it)})).apply(this,arguments)}function Oe(C){return new Promise(D=>{setTimeout(D,C)})}const Yt=/^[cdef][\w-]{21}$/;function Ke(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const x=function on(C){return function mt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Yt.test(x)?x:""}catch{return""}}function _n(C){return`${C.appName}!${C.appId}`}const Wt=new Map;function Qt(C,D){const x=_n(C);dn(x,D),function Wi(C,D){const x=function Nr(){return!pi&&"BroadcastChannel"in self&&(pi=new BroadcastChannel("[Firebase] FID Change"),pi.onmessage=C=>{dn(C.data.key,C.data.fid)}),pi}();x&&x.postMessage({key:C,fid:D}),function $r(){0===Wt.size&&pi&&(pi.close(),pi=null)}()}(x,D)}function dn(C,D){const x=Wt.get(C);if(x)for(const F of x)F(D)}let pi=null;const ni="firebase-installations-store";let ri=null;function ha(){return ri||(ri=(0,de.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(ni)}})),ri}function Ze(C,D){return br.apply(this,arguments)}function br(){return(br=(0,k.Z)(function*(C,D){const x=_n(C),Y=(yield ha()).transaction(ni,"readwrite"),te=Y.objectStore(ni),Ee=yield te.get(x);return yield te.put(D,x),yield Y.done,(!Ee||Ee.fid!==D.fid)&&Qt(C,D.fid),D})).apply(this,arguments)}function _s(C){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,k.Z)(function*(C){const D=_n(C),F=(yield ha()).transaction(ni,"readwrite");yield F.objectStore(ni).delete(D),yield F.done})).apply(this,arguments)}function ii(C,D){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,k.Z)(function*(C,D){const x=_n(C),Y=(yield ha()).transaction(ni,"readwrite"),te=Y.objectStore(ni),Ee=yield te.get(x),Ne=D(Ee);return void 0===Ne?yield te.delete(x):yield te.put(Ne,x),yield Y.done,Ne&&(!Ee||Ee.fid!==Ne.fid)&&Qt(C,Ne.fid),Ne})).apply(this,arguments)}function kn(C){return Un.apply(this,arguments)}function Un(){return(Un=(0,k.Z)(function*(C){let D;const x=yield ii(C.appConfig,F=>{const Y=fn(F),te=_t(C,Y);return D=te.registrationPromise,te.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function fn(C){return xt(C||{fid:Ke(),registrationStatus:0})}function _t(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Xe.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function lt(C,D){return tn.apply(this,arguments)}(C,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:gr(C)}:{installationEntry:D}}function tn(){return(tn=(0,k.Z)(function*(C,D){try{const x=yield ne(C,D);return Ze(C.appConfig,x)}catch(x){throw at(x)&&409===x.customData.serverCode?yield _s(C.appConfig):yield Ze(C.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function gr(C){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,k.Z)(function*(C){let D=yield Gr(C.appConfig);for(;1===D.registrationStatus;)yield Oe(100),D=yield Gr(C.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield kn(C);return F||x}return D})).apply(this,arguments)}function Gr(C){return ii(C,D=>{if(!D)throw Xe.create("installation-not-found");return xt(D)})}function xt(C){return function vs(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function nn(C,D){return xi.apply(this,arguments)}function xi(){return(xi=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:D},x){const F=rn(C,x),Y=U(C,x),te=D.getImmediate({optional:!0});if(te){const bt=yield te.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const Ne={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:K,appId:C.appId}})},it=yield pe(()=>fetch(F,Ne));if(it.ok)return _e(yield it.json());throw yield Ie("Generate Auth Token",it)})).apply(this,arguments)}function rn(C,{fid:D}){return`${xe(C)}/${D}/authTokens:generate`}function Jn(C){return kr.apply(this,arguments)}function kr(){return(kr=(0,k.Z)(function*(C,D=!1){let x;const F=yield ii(C.appConfig,te=>{if(!Pt(te))throw Xe.create("not-registered");const Ee=te.authToken;if(!D&&j(Ee))return te;if(1===Ee.requestStatus)return x=tt(C,D),te;{if(!navigator.onLine)throw Xe.create("app-offline");const Ne=W(te);return x=Ct(C,Ne),Ne}});return x?yield x:F.authToken})).apply(this,arguments)}function tt(C,D){return Se.apply(this,arguments)}function Se(){return(Se=(0,k.Z)(function*(C,D){let x=yield et(C.appConfig);for(;1===x.authToken.requestStatus;)yield Oe(100),x=yield et(C.appConfig);const F=x.authToken;return 0===F.requestStatus?Jn(C,D):F})).apply(this,arguments)}function et(C){return ii(C,D=>{if(!Pt(D))throw Xe.create("not-registered");return function ve(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ct(C,D){return It.apply(this,arguments)}function It(){return(It=(0,k.Z)(function*(C,D){try{const x=yield nn(C,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield Ze(C.appConfig,F),x}catch(x){if(!at(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ze(C.appConfig,F)}else yield _s(C.appConfig);throw x}})).apply(this,arguments)}function Pt(C){return void 0!==C&&2===C.registrationStatus}function j(C){return 2===C.requestStatus&&!function V(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function W(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function ze(){return(ze=(0,k.Z)(function*(C){const D=C,{installationEntry:x,registrationPromise:F}=yield kn(D);return F?F.catch(console.error):Jn(D).catch(console.error),x.fid})).apply(this,arguments)}function Kt(){return(Kt=(0,k.Z)(function*(C,D=!1){const x=C;return yield hn(x),(yield Jn(x,D)).token})).apply(this,arguments)}function hn(C){return zt.apply(this,arguments)}function zt(){return(zt=(0,k.Z)(function*(C){const{registrationPromise:D}=yield kn(C);D&&(yield D)})).apply(this,arguments)}function ws(C){return Xe.create("missing-app-config-values",{valueName:C})}const xo="installations",In=C=>{const D=C.getProvider("app").getImmediate(),x=function vn(C){if(!C||!C.options)throw ws("App Configuration");if(!C.name)throw ws("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!C.options[x])throw ws(x);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Qs=C=>{const D=C.getProvider("app").getImmediate(),x=(0,se._getProvider)(D,xo).getImmediate();return{getId:()=>function Q(C){return ze.apply(this,arguments)}(x),getToken:Y=>function ft(C){return Kt.apply(this,arguments)}(x,Y)}};(function gu(){(0,se._registerComponent)(new le.wA(xo,In,"PUBLIC")),(0,se._registerComponent)(new le.wA("installations-internal",Qs,"PRIVATE"))})(),(0,se.registerVersion)(he,B),(0,se.registerVersion)(he,B,"esm2017");const Mi="@firebase/remote-config",Hn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class id{constructor(D,x,F,Y){this.client=D,this.storage=x,this.storageCache=F,this.logger=Y}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Y=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var x=this;return(0,k.Z)(function*(){const[F,Y]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Y&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Y;D.eTag=Y&&Y.eTag;const te=yield x.client.fetch(D),Ee=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&Ee.push(x.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(Ee),te})()}}function Gc(C=navigator){return C.languages&&C.languages[0]||C.language}class zc{constructor(D,x,F,Y,te,Ee){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=Y,this.apiKey=te,this.appId=Ee}fetch(D){var x=this;return(0,k.Z)(function*(){var F,Y,te;const[Ee,Ne]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Mt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},pt={sdk_version:x.sdkVersion,app_instance_id:Ee,app_instance_id_token:Ne,app_id:x.appId,language_code:Gc()},bn={method:"POST",headers:Mt,body:JSON.stringify(pt)},vr=fetch(bt,bn),po=new Promise((qo,go)=>{D.signal.addEventListener(()=>{const Ei=new Error("The operation was aborted.");Ei.name="AbortError",go(Ei)})});let Fs;try{yield Promise.race([vr,po]),Fs=yield vr}catch(qo){let go="fetch-client-network";throw"AbortError"===(null===(F=qo)||void 0===F?void 0:F.name)&&(go="fetch-timeout"),Hn.create(go,{originalErrorMessage:null===(Y=qo)||void 0===Y?void 0:Y.message})}let Rt=Fs.status;const Vi=Fs.headers.get("ETag")||void 0;let Ls,ui;if(200===Fs.status){let qo;try{qo=yield Fs.json()}catch(go){throw Hn.create("fetch-client-parse",{originalErrorMessage:null===(te=go)||void 0===te?void 0:te.message})}Ls=qo.entries,ui=qo.state}if("INSTANCE_STATE_UNSPECIFIED"===ui?Rt=500:"NO_CHANGE"===ui?Rt=304:("NO_TEMPLATE"===ui||"EMPTY_CONFIG"===ui)&&(Ls={}),304!==Rt&&200!==Rt)throw Hn.create("fetch-status",{httpStatus:Rt});return{status:Rt,eTag:Vi,config:Ls}})()}}class eg{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,k.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var Y=this;return(0,k.Z)(function*(){yield function tr(C,D){return new Promise((x,F)=>{const Y=Math.max(D-Date.now(),0),te=setTimeout(x,Y);C.addEventListener(()=>{clearTimeout(te),F(Hn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const te=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),te}catch(te){if(!function sd(C){if(!(C instanceof oe.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(te))throw te;const Ee={throttleEndTimeMillis:Date.now()+(0,oe.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(Ee),Y.attemptFetch(D,Ee)}})()}}class yu{constructor(D,x,F,Y,te){this.app=D,this._client=x,this._storageCache=F,this._storage=Y,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qc(C,D){var x;const F=C.target.error||void 0;return Hn.create(D,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const Ds="app_namespace_store";class ig{constructor(D,x,F,Y=function rg(){return new Promise((C,D)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Y=>{D(qc(Y,"storage-open"))},F.onsuccess=Y=>{C(Y.target.result)},F.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(Ds,{keyPath:"compositeKey"})}}catch(F){D(Hn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,k.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Y,te)=>{var Ee;const it=F.transaction([Ds],"readonly").objectStore(Ds),bt=x.createCompositeKey(D);try{const Mt=it.get(bt);Mt.onerror=pt=>{te(qc(pt,"storage-get"))},Mt.onsuccess=pt=>{const bn=pt.target.result;Y(bn?bn.value:void 0)}}catch(Mt){te(Hn.create("storage-get",{originalErrorMessage:null===(Ee=Mt)||void 0===Ee?void 0:Ee.message}))}})})()}set(D,x){var F=this;return(0,k.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((te,Ee)=>{var Ne;const bt=Y.transaction([Ds],"readwrite").objectStore(Ds),Mt=F.createCompositeKey(D);try{const pt=bt.put({compositeKey:Mt,value:x});pt.onerror=bn=>{Ee(qc(bn,"storage-set"))},pt.onsuccess=()=>{te()}}catch(pt){Ee(Hn.create("storage-set",{originalErrorMessage:null===(Ne=pt)||void 0===Ne?void 0:Ne.message}))}})})()}delete(D){var x=this;return(0,k.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Y,te)=>{var Ee;const it=F.transaction([Ds],"readwrite").objectStore(Ds),bt=x.createCompositeKey(D);try{const Mt=it.delete(bt);Mt.onerror=pt=>{te(qc(pt,"storage-delete"))},Mt.onsuccess=()=>{Y()}}catch(Mt){te(Hn.create("storage-delete",{originalErrorMessage:null===(Ee=Mt)||void 0===Ee?void 0:Ee.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class ad{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),te=yield x;te&&(D.lastFetchStatus=te);const Ee=yield F;Ee&&(D.lastSuccessfulFetchTimestampMillis=Ee);const Ne=yield Y;Ne&&(D.activeConfig=Ne)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function _u(){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,k.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Ts(){(0,se._registerComponent)(new le.wA("remote-config",function C(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Hn.create("registration-window");if(!(0,oe.hl)())throw Hn.create("indexed-db-unavailable");const{projectId:te,apiKey:Ee,appId:Ne}=F.options;if(!te)throw Hn.create("registration-project-id");if(!Ee)throw Hn.create("registration-api-key");if(!Ne)throw Hn.create("registration-app-id");const it=new ig(Ne,F.name,x=x||"firebase"),bt=new ad(it),Mt=new ce.Yd(Mi);Mt.logLevel=ce.in.ERROR;const pt=new zc(Y,se.SDK_VERSION,x,te,Ee,Ne),bn=new eg(pt,it),vr=new id(bn,it,bt,Mt),po=new yu(F,vr,bt,it,Mt);return function er(C){const D=(0,oe.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(po),po},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Mi,"0.3.15"),(0,se.registerVersion)(Mi,"0.3.15","esm2017")}();const Ri="/firebase-messaging-sw.js",Zi="/firebase-cloud-messaging-push-scope",Yi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ma="google.c.a.c_id",vu="google.c.a.c_l",Wc="google.c.a.ts",Zh="google.c.a.e";var Qi=(()=>{return(C=Qi||(Qi={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Qi;var C})();function si(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qr(C){const x=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Y=new Uint8Array(F.length);for(let te=0;te<F.length;++te)Y[te]=F.charCodeAt(te);return Y}const Ro="fcm_token_details_db",yr="fcm_token_object_Store";function Yh(C){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,k.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Ro))return null;let D=null;return(yield(0,de.X3)(Ro,5,{upgrade:(F=(0,k.Z)(function*(Y,te,Ee,Ne){var it;if(te<2||!Y.objectStoreNames.contains(yr))return;const bt=Ne.objectStore(yr),Mt=yield bt.index("fcmSenderId").get(C);if(yield bt.clear(),Mt)if(2===te){const pt=Mt;if(!pt.auth||!pt.p256dh||!pt.endpoint)return;D={token:pt.fcmToken,createTime:null!==(it=pt.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:pt.auth,p256dh:pt.p256dh,endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:"string"==typeof pt.vapidKey?pt.vapidKey:si(pt.vapidKey)}}}else if(3===te){const pt=Mt;D={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:si(pt.auth),p256dh:si(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:si(pt.vapidKey)}}}else if(4===te){const pt=Mt;D={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:si(pt.auth),p256dh:si(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:si(pt.vapidKey)}}}}),function(te,Ee,Ne,it){return F.apply(this,arguments)})})).close(),yield(0,de.Lj)(Ro),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),Sn(D)?D:null;var F}),Qh.apply(this,arguments)}function Sn(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const oi="firebase-messaging-store";let Pr=null;function Iu(){return Pr||(Pr=(0,de.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(oi)}})),Pr}function eo(C){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,k.Z)(function*(C){const D=yi(C),F=yield(yield Iu()).transaction(oi).objectStore(oi).get(D);if(F)return F;{const Y=yield Yh(C.appConfig.senderId);if(Y)return yield qt(C,Y),Y}})).apply(this,arguments)}function qt(C,D){return bu.apply(this,arguments)}function bu(){return(bu=(0,k.Z)(function*(C,D){const x=yi(C),Y=(yield Iu()).transaction(oi,"readwrite");return yield Y.objectStore(oi).put(D,x),yield Y.done,D})).apply(this,arguments)}function to(C){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,k.Z)(function*(C){const D=yi(C),F=(yield Iu()).transaction(oi,"readwrite");yield F.objectStore(oi).delete(D),yield F.done})).apply(this,arguments)}function yi({appConfig:C}){return C.appId}const Cn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function St(C,D){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,k.Z)(function*(C,D){var x;const F=yield Zc(C),Y=Ae(D),te={method:"POST",headers:F,body:JSON.stringify(Y)};let Ee;try{Ee=yield(yield fetch(Xi(C.appConfig),te)).json()}catch(Ne){throw Cn.create("token-subscribe-failed",{errorInfo:null===(x=Ne)||void 0===x?void 0:x.toString()})}if(Ee.error)throw Cn.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Cn.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function Xh(C,D){return Su.apply(this,arguments)}function Su(){return(Su=(0,k.Z)(function*(C,D){var x;const F=yield Zc(C),Y=Ae(D.subscriptionOptions),te={method:"PATCH",headers:F,body:JSON.stringify(Y)};let Ee;try{Ee=yield(yield fetch(`${Xi(C.appConfig)}/${D.token}`,te)).json()}catch(Ne){throw Cn.create("token-update-failed",{errorInfo:null===(x=Ne)||void 0===x?void 0:x.toString()})}if(Ee.error)throw Cn.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Cn.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function Au(C,D){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,k.Z)(function*(C,D){var x;const Y={method:"DELETE",headers:yield Zc(C)};try{const Ee=yield(yield fetch(`${Xi(C.appConfig)}/${D}`,Y)).json();if(Ee.error)throw Cn.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(te){throw Cn.create("token-unsubscribe-failed",{errorInfo:null===(x=te)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Xi({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Zc(C){return ya.apply(this,arguments)}function ya(){return(ya=(0,k.Z)(function*({appConfig:C,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ae({p256dh:C,auth:D,endpoint:x,vapidKey:F}){const Y={web:{endpoint:x,auth:D,p256dh:C}};return F!==Yi&&(Y.web.applicationPubKey=F),Y}const $t=6048e5;function xu(C){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,k.Z)(function*(C){const D=yield Yc(C.swRegistration,C.vapidKey),x={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:si(D.getKey("auth")),p256dh:si(D.getKey("p256dh"))},F=yield eo(C.firebaseDependencies);if(F){if(ld(F.subscriptionOptions,x))return Date.now()>=F.createTime+$t?No(C,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Au(C.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return _a(C.firebaseDependencies,x)}return _a(C.firebaseDependencies,x)})).apply(this,arguments)}function An(C){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,k.Z)(function*(C){const D=yield eo(C.firebaseDependencies);D&&(yield Au(C.firebaseDependencies,D.token),yield to(C.firebaseDependencies));const x=yield C.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function No(C,D){return ai.apply(this,arguments)}function ai(){return(ai=(0,k.Z)(function*(C,D){try{const x=yield Xh(C.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield qt(C.firebaseDependencies,F),x}catch(x){throw yield An(C),x}})).apply(this,arguments)}function _a(C,D){return va.apply(this,arguments)}function va(){return(va=(0,k.Z)(function*(C,D){const F={token:yield St(C,D),createTime:Date.now(),subscriptionOptions:D};return yield qt(C,F),F.token})).apply(this,arguments)}function Yc(C,D){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,k.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qr(D)})})).apply(this,arguments)}function ld(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function wa(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function xn(C,D){if(!D.notification)return;C.notification={};const x=D.notification.title;x&&(C.notification.title=x);const F=D.notification.body;F&&(C.notification.body=F);const Y=D.notification.image;Y&&(C.notification.image=Y);const te=D.notification.icon;te&&(C.notification.icon=te)}(D,C),function Ni(C,D){!D.data||(C.data=D.data)}(D,C),function Jc(C,D){var x,F,Y,te,Ee;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;C.fcmOptions={};const Ne=null!==(Y=null===(F=D.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Y?Y:null===(te=D.notification)||void 0===te?void 0:te.click_action;Ne&&(C.fcmOptions.link=Ne);const it=null===(Ee=D.fcmOptions)||void 0===Ee?void 0:Ee.analytics_label;it&&(C.fcmOptions.analyticsLabel=it)}(D,C),D}function no(C){return"object"==typeof C&&!!C&&ma in C}function es(C,D){const x=[];for(let F=0;F<C.length;F++)x.push(C.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function Ea(C){return Cn.create("missing-app-config-values",{valueName:C})}es("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),es("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class og{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function sg(C){if(!C||!C.options)throw Ea("App Configuration Object");if(!C.name)throw Ea("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=C;for(const F of D)if(!x[F])throw Ea(F);return{appName:C.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Xc(C){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,k.Z)(function*(C){var D;try{C.swRegistration=yield navigator.serviceWorker.register(Ri,{scope:Zi}),C.swRegistration.update().catch(()=>{})}catch(x){throw Cn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=x)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function Ia(C,D){return el.apply(this,arguments)}function el(){return(el=(0,k.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield Xc(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Cn.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function ba(C,D){return tl.apply(this,arguments)}function tl(){return(tl=(0,k.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=Yi)})).apply(this,arguments)}function Ou(){return(Ou=(0,k.Z)(function*(C,D){if(!navigator)throw Cn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Cn.create("permission-blocked");return yield ba(C,D?.vapidKey),yield Ia(C,D?.serviceWorkerRegistration),xu(C)})).apply(this,arguments)}function nl(C,D,x){return rl.apply(this,arguments)}function rl(){return(rl=(0,k.Z)(function*(C,D,x){const F=il(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ma],message_name:x[vu],message_time:x[Wc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function il(C){switch(C){case Qi.NOTIFICATION_CLICKED:return"notification_open";case Qi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ro(){return(ro=(0,k.Z)(function*(C,D){const x=D.data;if(!x.isFirebaseMessaging)return;C.onMessageHandler&&x.messageType===Qi.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(wa(x)):C.onMessageHandler.next(wa(x)));const F=x.data;no(F)&&"1"===F[Zh]&&(yield nl(C,x.messageType,F))})).apply(this,arguments)}const io="@firebase/messaging",nr=C=>{const D=new og(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function dd(C,D){return ro.apply(this,arguments)}(D,x)),D},Wr=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:F=>function ku(C,D){return Ou.apply(this,arguments)}(D,F)}};function hd(){return sl.apply(this,arguments)}function sl(){return(sl=(0,k.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wn(){(0,se._registerComponent)(new le.wA("messaging",nr,"PUBLIC")),(0,se._registerComponent)(new le.wA("messaging-internal",Wr,"PRIVATE")),(0,se.registerVersion)(io,"0.10.0"),(0,se.registerVersion)(io,"0.10.0","esm2017")}();const Oo="analytics",gd="firebase_id",oo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vu="https://www.googletagmanager.com/gtag/js",Mn=new ce.Yd("@firebase/analytics");function Uu(C){return Promise.all(C.map(D=>D.catch(x=>x)))}function Bu(C,D){const x=document.createElement("script");x.src=`${Vu}?l=${C}&id=${D}`,x.async=!0,document.head.appendChild(x)}function tf(C,D,x,F,Y,te){return Po.apply(this,arguments)}function Po(){return(Po=(0,k.Z)(function*(C,D,x,F,Y,te){const Ee=F[Y];try{if(Ee)yield D[Ee];else{const it=(yield Uu(x)).find(bt=>bt.measurementId===Y);it&&(yield D[it.appId])}}catch(Ne){Mn.error(Ne)}C("config",Y,te)})).apply(this,arguments)}function Fo(C,D,x,F,Y){return ao.apply(this,arguments)}function ao(){return(ao=(0,k.Z)(function*(C,D,x,F,Y){try{let te=[];if(Y&&Y.send_to){let Ee=Y.send_to;Array.isArray(Ee)||(Ee=[Ee]);const Ne=yield Uu(x);for(const it of Ee){const bt=Ne.find(pt=>pt.measurementId===it),Mt=bt&&D[bt.appId];if(!Mt){te=[];break}te.push(Mt)}}0===te.length&&(te=Object.values(D)),yield Promise.all(te),C("event",F,Y||{})}catch(te){Mn.error(te)}})).apply(this,arguments)}function yd(C){const D=window.document.getElementsByTagName("script");for(const x of Object.values(D))if(x.src&&x.src.includes(Vu)&&x.src.includes(C))return x;return null}const lr=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Sa=new class ki{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function vd(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Aa(C){return al.apply(this,arguments)}function al(){return(al=(0,k.Z)(function*(C){var D;const{appId:x,apiKey:F}=C,Y={method:"GET",headers:vd(F)},te=oo.replace("{app-id}",x),Ee=yield fetch(te,Y);if(200!==Ee.status&&304!==Ee.status){let Ne="";try{const it=yield Ee.json();null!==(D=it.error)&&void 0!==D&&D.message&&(Ne=it.error.message)}catch{}throw lr.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:Ne})}return Ee.json()})).apply(this,arguments)}function On(C){return _i.apply(this,arguments)}function _i(){return(_i=(0,k.Z)(function*(C,D=Sa,x){const{appId:F,apiKey:Y,measurementId:te}=C.options;if(!F)throw lr.create("no-app-id");if(!Y){if(te)return{measurementId:te,appId:F};throw lr.create("no-api-key")}const Ee=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ne=new Gu;return setTimeout((0,k.Z)(function*(){Ne.abort()}),void 0!==x?x:6e4),Hu({appId:F,apiKey:Y,measurementId:te},Ee,Ne,D)})).apply(this,arguments)}function Hu(C,D,x){return uo.apply(this,arguments)}function uo(){return(uo=(0,k.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:x},F,Y=Sa){var te,Ee;const{appId:Ne,measurementId:it}=C;try{yield xa(F,D)}catch(bt){if(it)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${null===(te=bt)||void 0===te?void 0:te.message}]`),{appId:Ne,measurementId:it};throw bt}try{const bt=yield Aa(C);return Y.deleteThrottleMetadata(Ne),bt}catch(bt){const Mt=bt;if(!$u(Mt)){if(Y.deleteThrottleMetadata(Ne),it)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${Mt?.message}]`),{appId:Ne,measurementId:it};throw bt}const pt=503===Number(null===(Ee=Mt?.customData)||void 0===Ee?void 0:Ee.httpStatus)?(0,oe.$s)(x,Y.intervalMillis,30):(0,oe.$s)(x,Y.intervalMillis),bn={throttleEndTimeMillis:Date.now()+pt,backoffCount:x+1};return Y.setThrottleMetadata(Ne,bn),Mn.debug(`Calling attemptFetch again in ${pt} millis`),Hu(C,bn,F,Y)}})).apply(this,arguments)}function xa(C,D){return new Promise((x,F)=>{const Y=Math.max(D-Date.now(),0),te=setTimeout(x,Y);C.addEventListener(()=>{clearTimeout(te),F(lr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function $u(C){if(!(C instanceof oe.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Gu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let xs,Ra;function Ms(){return(Ms=(0,k.Z)(function*(C,D,x,F,Y){if(Y&&Y.global)C("event",x,F);else{const te=yield D;C("event",x,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function lo(C){Ra=C}function ll(C){xs=C}function ns(){return qu.apply(this,arguments)}function qu(){return(qu=(0,k.Z)(function*(){var C;if(!(0,oe.hl)())return Mn.warn(lr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(D){return Mn.warn(lr.create("indexeddb-unavailable",{errorInfo:null===(C=D)||void 0===C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function Uo(){return(Uo=(0,k.Z)(function*(C,D,x,F,Y,te,Ee){var Ne;const it=On(C);it.then(vr=>{x[vr.measurementId]=vr.appId,C.options.measurementId&&vr.measurementId!==C.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${vr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vr=>Mn.error(vr)),D.push(it);const bt=ns().then(vr=>{if(vr)return F.getId()}),[Mt,pt]=yield Promise.all([it,bt]);yd(te)||Bu(te,Mt.measurementId),Ra&&(Y("consent","default",Ra),lo(void 0)),Y("js",new Date);const bn=null!==(Ne=Ee?.config)&&void 0!==Ne?Ne:{};return bn.origin="firebase",bn.update=!0,null!=pt&&(bn[gd]=pt),Y("config",Mt.measurementId,bn),xs&&(Y("set",xs),ll(void 0)),Mt.measurementId})).apply(this,arguments)}class Wu{constructor(D){this.app=D}_delete(){return delete Kr[this.app.options.appId],Promise.resolve()}}let Kr={},Rs=[];const Bo={};let Ho,ho,jo="dataLayer",Na=!1;function By(C,D,x){!function ag(){const C=[];if((0,oe.ru)()&&C.push("This is a browser extension environment."),(0,oe.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),x=lr.create("invalid-analytics-context",{errorInfo:D});Mn.warn(x.message)}}();const F=C.options.appId;if(!F)throw lr.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw lr.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Kr[F])throw lr.create("already-exists",{id:F});if(!Na){!function md(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(jo);const{wrappedGtag:te,gtagCore:Ee}=function Ca(C,D,x,F,Y){let te=function(...Ee){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(te=window[Y]),window[Y]=function ju(C,D,x,F){function te(){return(te=(0,k.Z)(function*(Ee,Ne,it){try{"event"===Ee?yield Fo(C,D,x,Ne,it):"config"===Ee?yield tf(C,D,x,F,Ne,it):"consent"===Ee?C("consent","update",it):C("set",Ne)}catch(bt){Mn.error(bt)}})).apply(this,arguments)}return function Y(Ee,Ne,it){return te.apply(this,arguments)}}(te,C,D,x),{gtagCore:te,wrappedGtag:window[Y]}}(Kr,Rs,Bo,jo,"gtag");ho=te,Ho=Ee,Na=!0}return Kr[F]=function Vo(C,D,x,F,Y,te,Ee){return Uo.apply(this,arguments)}(C,Rs,Bo,D,Ho,jo,x),new Wu(C)}function Hy(){return nf.apply(this,arguments)}function nf(){return(nf=(0,k.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const nt="@firebase/analytics";!function En(){(0,se._registerComponent)(new le.wA(Oo,(D,{options:x})=>By(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new le.wA("analytics-internal",function C(D){try{const x=D.getProvider(Oo).getImmediate();return{logEvent:(F,Y,te)=>function Jt(C,D,x,F){C=(0,oe.m9)(C),function wd(C,D,x,F,Y){return Ms.apply(this,arguments)}(ho,Kr[C.app.options.appId],D,x,F).catch(Y=>Mn.error(Y))}(x,F,Y,te)}}catch(x){throw lr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(nt,"0.8.4"),(0,se.registerVersion)(nt,"0.8.4","esm2017")}();var wi=O(4408),Pn=O(7565);const Zu=new class Ns extends Pn.v{}(class ka extends wi.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):D.flush(this)}});var hl=O(4986),Oa=O(8505),fo=O(5363),ks=O(9468);const We=new f.GfV("7.4.1"),Pa="__angularfire_symbol__analyticsIsSupportedValue",Os="__angularfire_symbol__analyticsIsSupported",$o="__angularfire_symbol__remoteConfigIsSupportedValue",Go="__angularfire_symbol__remoteConfigIsSupported",Fn="__angularfire_symbol__messagingIsSupportedValue",fl="__angularfire_symbol__messagingIsSupported";function Fa(C,D,x){if(D){if(1===D.length)return D[0];const te=D.filter(Ee=>Ee.app===x);if(1===te.length)return te[0]}return x.container.getProvider(C).getImmediate({optional:!0})}globalThis[Os]||(globalThis[Os]=Hy().then(C=>globalThis[Pa]=C).catch(()=>globalThis[Pa]=!1)),globalThis[fl]||(globalThis[fl]=hd().then(C=>globalThis[Fn]=C).catch(()=>globalThis[Fn]=!1)),globalThis[Go]||(globalThis[Go]=_u().then(C=>globalThis[$o]=C).catch(()=>globalThis[$o]=!1));const Oi=(C,D)=>{const x=D?[D]:(0,X.C6)(),F=[];return x.forEach(Y=>{Y.container.getProvider(C).instances.forEach(Ee=>{F.includes(Ee)||F.push(Ee)})}),F};function Pi(){}class Zr{constructor(D,x=Zu){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const Y=this.zone;return this.delegate.schedule(function(Ee){Y.runGuarded(()=>{D.apply(this,[Ee])})},x,F)}}class gl{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pi,{},Pi,Pi)),x.pipe((0,Oa.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Dr=(()=>{class C{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Zr(Zone.current)),this.insideAngular=x.run(()=>new Zr(Zone.current,hl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(x){return new(x||C)(f.LFG(f.R0b))},C.\u0275prov=f.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Fr(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function $n(C){return C.pipe((0,fo.Q)(Fr().outsideAngular))}function Li(C){return Fr(),function gn(C){return function(x){return(x=x.lift(new gl(C.ngZone))).pipe((0,ks.R)(C.outsideAngular),(0,fo.Q)(C.insideAngular))}}(Fr())(C)}},2090:(ct,De,O)=>{O.d(De,{$s:()=>et,BH:()=>Ht,G6:()=>Ie,L:()=>de,LL:()=>Wt,Pz:()=>Yt,Sg:()=>Ke,UG:()=>we,US:()=>le,ZB:()=>$,ZR:()=>_n,aH:()=>mt,b$:()=>fe,eu:()=>$e,hl:()=>Be,jU:()=>rt,m9:()=>Pt,ne:()=>Un,pd:()=>Ai,r3:()=>gi,ru:()=>ge,tV:()=>he,uI:()=>Me,vZ:()=>Ze,w1:()=>at,xO:()=>Qn,xb:()=>ri,z$:()=>Le,zI:()=>U,zd:()=>ii});const se=function(j){const V=[];let W=0;for(let ve=0;ve<j.length;ve++){let Q=j.charCodeAt(ve);Q<128?V[W++]=Q:Q<2048?(V[W++]=Q>>6|192,V[W++]=63&Q|128):55296==(64512&Q)&&ve+1<j.length&&56320==(64512&j.charCodeAt(ve+1))?(Q=65536+((1023&Q)<<10)+(1023&j.charCodeAt(++ve)),V[W++]=Q>>18|240,V[W++]=Q>>12&63|128,V[W++]=Q>>6&63|128,V[W++]=63&Q|128):(V[W++]=Q>>12|224,V[W++]=Q>>6&63|128,V[W++]=63&Q|128)}return V},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Q=0;Q<j.length;Q+=3){const ze=j[Q],ft=Q+1<j.length,Kt=ft?j[Q+1]:0,hn=Q+2<j.length,zt=hn?j[Q+2]:0;let jt=(15&Kt)<<2|zt>>6,ur=63&zt;hn||(ur=64,ft||(jt=64)),ve.push(W[ze>>2],W[(3&ze)<<4|Kt>>4],W[jt],W[ur])}return ve.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(se(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let W=0,ve=0;for(;W<j.length;){const Q=j[W++];if(Q<128)V[ve++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const ze=j[W++];V[ve++]=String.fromCharCode((31&Q)<<6|63&ze)}else if(Q>239&&Q<365){const hn=((7&Q)<<18|(63&j[W++])<<12|(63&j[W++])<<6|63&j[W++])-65536;V[ve++]=String.fromCharCode(55296+(hn>>10)),V[ve++]=String.fromCharCode(56320+(1023&hn))}else{const ze=j[W++],ft=j[W++];V[ve++]=String.fromCharCode((15&Q)<<12|(63&ze)<<6|63&ft)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const W=V?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Q=0;Q<j.length;){const ze=W[j.charAt(Q++)],Kt=Q<j.length?W[j.charAt(Q)]:0;++Q;const zt=Q<j.length?W[j.charAt(Q)]:64;++Q;const Ge=Q<j.length?W[j.charAt(Q)]:64;if(++Q,null==ze||null==Kt||null==zt||null==Ge)throw Error();ve.push(ze<<2|Kt>>4),64!==zt&&(ve.push(Kt<<4&240|zt>>2),64!==Ge&&ve.push(zt<<6&192|Ge))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},de=function(j){return function(j){const V=se(j);return le.encodeByteArray(V,!0)}(j).replace(/\./g,"")},he=function(j){try{return le.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function $(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const W in V)!V.hasOwnProperty(W)||!K(W)||(j[W]=$(j[W],V[W]));return j}function K(j){return"__proto__"!==j}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function rt(){return"object"==typeof self&&self.self===self}function ge(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function at(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ie(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){return"object"==typeof indexedDB}function $e(){return new Promise((j,V)=>{try{let W=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(ve);Q.onsuccess=()=>{Q.result.close(),W||self.indexedDB.deleteDatabase(ve),j(!0)},Q.onupgradeneeded=()=>{W=!1},Q.onerror=()=>{var ze;V((null===(ze=Q.error)||void 0===ze?void 0:ze.message)||"")}}catch(W){V(W)}})}function U(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ne=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=j&&he(j[1]);return V&&JSON.parse(V)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},mt=()=>{var j;return null===(j=ne())||void 0===j?void 0:j.config},Yt=j=>{var V;return null===(V=ne())||void 0===V?void 0:V[`_${j}`]};class Ht{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,W)=>{this.resolve=V,this.reject=W})}wrapCallback(V){return(W,ve)=>{W?this.reject(W):this.resolve(ve),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(W):V(W,ve))}}}function Ke(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=V||"demo-project",Q=j.iat||0,ze=j.sub||j.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Q,exp:Q+3600,auth_time:Q,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},j);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(ft)),""].join(".")}class _n extends Error{constructor(V,W,ve){super(W),this.code=V,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,_n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}}class Wt{constructor(V,W,ve){this.service=V,this.serviceName=W,this.errors=ve}create(V,...W){const ve=W[0]||{},Q=`${this.service}/${V}`,ze=this.errors[V],ft=ze?function Qt(j,V){return j.replace(Rr,(W,ve)=>{const Q=V[ve];return null!=Q?String(Q):`<${ve}?>`})}(ze,ve):"Error";return new _n(Q,`${this.serviceName}: ${ft} (${Q}).`,ve)}}const Rr=/\{\$([^}]+)}/g;function gi(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function ri(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function Ze(j,V){if(j===V)return!0;const W=Object.keys(j),ve=Object.keys(V);for(const Q of W){if(!ve.includes(Q))return!1;const ze=j[Q],ft=V[Q];if(br(ze)&&br(ft)){if(!Ze(ze,ft))return!1}else if(ze!==ft)return!1}for(const Q of ve)if(!W.includes(Q))return!1;return!0}function br(j){return null!==j&&"object"==typeof j}function Qn(j){const V=[];for(const[W,ve]of Object.entries(j))Array.isArray(ve)?ve.forEach(Q=>{V.push(encodeURIComponent(W)+"="+encodeURIComponent(Q))}):V.push(encodeURIComponent(W)+"="+encodeURIComponent(ve));return V.length?"&"+V.join("&"):""}function ii(j){const V={};return j.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Q,ze]=ve.split("=");V[decodeURIComponent(Q)]=decodeURIComponent(ze)}}),V}function Ai(j){const V=j.indexOf("?");if(!V)return"";const W=j.indexOf("#",V);return j.substring(V,W>0?W:void 0)}function Un(j,V){const W=new fn(j,V);return W.subscribe.bind(W)}class fn{constructor(V,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{V(this)}).catch(ve=>{this.error(ve)})}next(V){this.forEachObserver(W=>{W.next(V)})}error(V){this.forEachObserver(W=>{W.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,W,ve){let Q;if(void 0===V&&void 0===W&&void 0===ve)throw new Error("Missing Observer.");Q=function lt(j,V){if("object"!=typeof j||null===j)return!1;for(const W of V)if(W in j&&"function"==typeof j[W])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:W,complete:ve},void 0===Q.next&&(Q.next=tn),void 0===Q.error&&(Q.error=tn),void 0===Q.complete&&(Q.complete=tn);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),ze}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,V)}sendOne(V,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{W(this.observers[V])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function et(j,V=1e3,W=2){const ve=V*Math.pow(W,j),Q=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Q)}function Pt(j){return j&&j._delegate?j._delegate:j}},6803:(ct,De,O)=>{var f=O(4650);let X=null;function k(){return X}const ce=new f.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function he(){return(0,f.LFG)($)}()},providedIn:"platform"}),n})();const B=new f.OlP("Location Initialized");let $=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){K()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){K()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Le(){return new $((0,f.LFG)(ce))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function rt(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Xe)},providedIn:"root"}),n})();const fe=new f.OlP("appBaseHref");let Xe=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+rt(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+rt(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+rt(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(fe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),at=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+rt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+rt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(fe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Be(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rt(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=rt,n.joinWithSlash=Me,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(f.LFG(ge))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function _e(){return new xe((0,f.LFG)(ge))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}function fa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}let an=(()=>{class n{constructor(t,r,s,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class pa{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bs=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new pa(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),Cs(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Cs(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Cs(n,e){n.context.$implicit=e.item}let er=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Hc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){cr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){cr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Hc{constructor(){this.$implicit=null,this.ngIf=null}}function cr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let id=(()=>{class n{constructor(t,r,s){this._ngEl=t,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[s,u]=t.split("."),l=-1===s.indexOf("-")?void 0:f.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,s,u?`${r}${u}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,s,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.aQg),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();class sd{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class eg{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Ki=new eg,tg=new sd;let yu=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return Ki;if((0,f.F4k)(t))return tg;throw function tr(n,e){return new f.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Mo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Qi="browser";function wu(n){return n===Qi}function yr(n){return"server"===n}let Eu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Jh((0,f.LFG)(ce),window)}),n})();class Jh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Pr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=oi(this.window.history)||oi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function oi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class eo{}class ro extends class dd extends class le{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){X||(X=n)}(new ro)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Pu(){return io=io||document.querySelector("base"),io?io.getAttribute("href"):null}();return null==t?null:function Wr(n){nr=nr||document.createElement("a"),nr.setAttribute("href",n);const e=nr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){io=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fa(document.cookie,e)}}let nr,io=null;const wn=new f.OlP("TRANSITION_ID"),sl=[{provide:f.ip1,useFactory:function hd(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=k(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[wn,ce,f.zs3],multi:!0}];let ol=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Fu=new f.OlP("EventManagerPlugins");let fd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Fu),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Lu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=k().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let so=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ko=(()=>{class n extends so{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,s.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(pd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(pd))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function pd(n){k().remove(n)}const Oo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gd=/%COMP%/g;function Bu(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Bu(n,s,t):(s=s.replace(gd,n),t.push(s))}return t}function md(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Po=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Fo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new yd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case f.ifc.ShadowDom:return new _d(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Bu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fd),f.LFG(ko),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Fo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Oo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ca(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ca(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Oo[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Oo[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,s&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,md(r)):this.eventManager.addEventListener(e,t,md(r))}}function Ca(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class yd extends Fo{constructor(e,t,r,s){super(e),this.component=r;const u=Bu(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Mn(n){return"_ngcontent-%COMP%".replace(gd,n)}(s+"-"+r.id),this.hostAttr=function Uu(n){return"_nghost-%COMP%".replace(gd,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class _d extends Fo{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Bu(s.id,s.styles,[]);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let lr=(()=>{class n extends Lu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Da=["alt","control","meta","shift"],Ta={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ki={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Sa=(()=>{class n extends Lu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Da.forEach(I=>{const A=r.indexOf(I);A>-1&&(r.splice(A,1),l+=I+".")}),l+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=s,v.fullKey=l,v}static matchEventFullKeyCode(t,r){let s=Ta[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Da.forEach(l=>{l!==s&&(0,ki[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Gu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:Qi},{provide:f.g9A,useValue:function Hu(){ro.makeCurrent()},multi:!0},{provide:ce,useFactory:function xa(){return(0,f.RDi)(document),document},deps:[]}]),xs=new f.OlP(""),wd=[{provide:f.rWj,useClass:class ef{addToWindow(e){f.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const s=f.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(v){l=l||v,u--,0==u&&r(l)};s.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Ms=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function uo(){return new f.qLn},deps:[]},{provide:Fu,useClass:lr,multi:!0,deps:[ce,f.R0b,f.Lbi]},{provide:Fu,useClass:Sa,multi:!0,deps:[ce]},{provide:Po,useClass:Po,deps:[fd,ko,f.AFp]},{provide:f.FYo,useExisting:Po},{provide:so,useExisting:ko},{provide:ko,useClass:ko,deps:[ce]},{provide:fd,useClass:fd,deps:[Fu,f.R0b]},{provide:eo,useClass:ol,deps:[]},[]];let ul=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:wn,useExisting:f.AFp},sl]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xs,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Ms,...wd],imports:[Mo,f.hGG]}),n})(),ts=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Lo(){return new ts((0,f.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Jt=O(8996),vi=O(3269);function nt(...n){const e=(0,vi.yG)(n);return(0,Jt.D)(n,e)}var _r=O(7579);class En extends _r.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ka=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Pn=O(9751);const{isArray:Ns}=Array,{getPrototypeOf:Zu,prototype:cg,keys:hl}=Object;var ks=O(4671),We=O(4004);const{isArray:Pa}=Array;function $o(n){return(0,We.U)(e=>function Os(n,e){return Pa(e)?n(...e):n(e)}(n,e))}var Fn=O(5403),fl=O(9672);function zo(...n){const e=(0,vi.yG)(n),t=(0,vi.jO)(n),{args:r,keys:s}=function Oa(n){if(1===n.length){const e=n[0];if(Ns(e))return{args:e,keys:null};if(function fo(n){return n&&"object"==typeof n&&Zu(n)===cg}(e)){const t=hl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Jt.D)([],e);const u=new Pn.y(function lg(n,e,t=ks.y){return r=>{pl(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let v=0;v<s;v++)pl(e,()=>{const I=(0,Jt.D)(n[v],e);let A=!1;I.subscribe((0,Fn.x)(r,M=>{u[v]=M,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>function Go(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}(s,l):ks.y));return t?u.pipe($o(t)):u}function pl(n,e,t){n?(0,fl.f)(t,n,e):e()}var Yu=O(8189);function Oi(...n){return function Fa(){return(0,Yu.J)(1)}()((0,Jt.D)(n,(0,vi.yG)(n)))}var Pi=O(8421);function Zr(n){return new Pn.y(e=>{(0,Pi.Xf)(n()).subscribe(e)})}var gl=O(9635),Dr=O(576);function Fr(n,e){const t=(0,Dr.m)(n)?n:()=>n,r=s=>s.error(t());return new Pn.y(e?s=>e.schedule(r,0,s):r)}var rs=O(515),Fi=O(727),$n=O(4482);function Ps(){return(0,$n.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Fn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Li extends Pn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,$n.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Fn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fi.w0.EMPTY)}return e}refCount(){return Ps()(this)}}function gn(n,e){return(0,$n.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,Fn.x)(r,v=>{s?.unsubscribe();let I=0;const A=u++;(0,Pi.Xf)(n(v,A)).subscribe(s=(0,Fn.x)(r,M=>r.next(e?e(v,M,A,I++):M),()=>{s=null,m()}))},()=>{l=!0,m()}))})}function Zt(n){return n<=0?()=>rs.E:(0,$n.e)((e,t)=>{let r=0;e.subscribe((0,Fn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Qu(...n){const e=(0,vi.yG)(n);return(0,$n.e)((t,r)=>{(e?Oi(n,t,e):Oi(n,t)).subscribe(r)})}function C(n,e){return(0,$n.e)((t,r)=>{let s=0;t.subscribe((0,Fn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var D=O(5577);function x(n){return(0,$n.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function F(n=Y){return(0,$n.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Y(){return new ka}function te(n,e){const t=arguments.length>=2;return r=>r.pipe(n?C((s,u)=>n(s,u,r)):ks.y,Zt(1),t?x(e):F(()=>new ka))}function Ee(n,e){return(0,Dr.m)(e)?(0,D.z)(n,e,1):(0,D.z)(n,1)}var Ne=O(8505);function it(n){return(0,$n.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Fn.x)(t,void 0,void 0,l=>{u=(0,Pi.Xf)(n(l,it(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function bt(n,e,t,r,s){return(u,l)=>{let m=t,v=e,I=0;u.subscribe((0,Fn.x)(l,A=>{const M=I++;v=m?n(v,A,M):(m=!0,A),r&&l.next(v)},s&&(()=>{m&&l.next(v),l.complete()})))}}function Mt(n,e){return(0,$n.e)(bt(n,e,arguments.length>=2,!0))}function pt(n){return n<=0?()=>rs.E:(0,$n.e)((e,t)=>{let r=[];e.subscribe((0,Fn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function bn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?C((s,u)=>n(s,u,r)):ks.y,pt(1),t?x(e):F(()=>new ka))}function po(n){return(0,We.U)(()=>n)}function Fs(n){return(0,$n.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Rt="primary",Vi=Symbol("RouteTitle");class Ls{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ui(n){return new Ls(n)}function qo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Ei(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!rf(n[s],e[s]))return!1;return!0}function rf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function dg(n){return Array.prototype.concat.apply([],n)}function hg(n){return n.length>0?n[n.length-1]:null}function rr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ui(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Jt.D)(Promise.resolve(n)):nt(n)}const Qw={exact:function pg(n,e,t){if(!yo(n.segments,e.segments)||!mo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!pg(n.children[r],e.children[r],t))return!1;return!0},subset:La},af={exact:function uf(n,e){return Ei(n,e)},subset:function gg(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rf(n[t],e[t]))},ignored:()=>!0};function qy(n,e,t){return Qw[t.paths](n.root,e.root,t.matrixParams)&&af[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function La(n,e,t){return Id(n,e,e.segments,t)}function Id(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!yo(s,t)||e.hasChildren()||!mo(s,t,r))}if(n.segments.length===t.length){if(!yo(n.segments,t)||!mo(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!La(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(yo(n.segments,s)&&mo(n.segments,s,r)&&n.children[Rt])&&Id(n.children[Rt],e,u,r)}}function mo(n,e,t){return e.every((r,s)=>af[t](n[s].parameters,r.parameters))}class Va{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ui(this.queryParams)),this._queryParamMap}toString(){return Dd.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,rr(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Td(this)}}class bd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ui(this.parameters)),this._parameterMap}toString(){return _g(this)}}function yo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let cf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new Cd},providedIn:"root"}),n})();class Cd{parse(e){const t=new Ba(e);return new Va(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ua(e.root,!0)}`,r=function Xw(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${yl(t)}=${yl(s)}`).join("&"):`${yl(t)}=${yl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Wy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Dd=new Cd;function Td(n){return n.segments.map(e=>_g(e)).join("/")}function Ua(n,e){if(!n.hasChildren())return Td(n);if(e){const t=n.children[Rt]?Ua(n.children[Rt],!1):"",r=[];return rr(n.children,(s,u)=>{u!==Rt&&r.push(`${u}:${Ua(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function mg(n,e){let t=[];return rr(n.children,(r,s)=>{s===Rt&&(t=t.concat(e(r,s)))}),rr(n.children,(r,s)=>{s!==Rt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Rt?[Ua(n.children[Rt],!1)]:[`${s}:${Ua(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${Td(n)}/${t[0]}`:`${Td(n)}/(${t.join("//")})`}}function yg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yl(n){return yg(n).replace(/%3B/gi,";")}function Bi(n){return yg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wo(n){return decodeURIComponent(n)}function lf(n){return Wo(n.replace(/\+/g,"%20"))}function _g(n){return`${Bi(n.path)}${function Jw(n){return Object.keys(n).map(e=>`;${Bi(e)}=${Bi(n[e])}`).join("")}(n.parameters)}`}const e0=/^[^\/()?;=#]+/;function df(n){const e=n.match(e0);return e?e[0]:""}const vg=/^[^=?&#]+/,Ky=/^[^&#]+/;class Ba{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new Gt(e,t)),r}parseSegment(){const e=df(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new bd(Wo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=df(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=df(this.remaining);s&&(r=s,this.capture(r))}e[Wo(t)]=Wo(r)}parseQueryParam(e){const t=function wg(n){const e=n.match(vg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function t0(n){const e=n.match(Ky);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=lf(t),u=lf(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=df(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new f.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Rt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Rt]:new Gt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function _l(n){return n.segments.length>0?new Gt([],{[Rt]:n}):n}function ji(n){const e={};for(const r of Object.keys(n.children)){const u=ji(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ja(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}function Ko(n){return n instanceof Va}function r0(n,e,t,r,s){if(0===t.length)return vl(e.root,e.root,e.root,r,s);const u=function Ig(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new hf(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return rr(u.outlets,(v,I)=>{m[I]="string"==typeof v?v.split("/"):v}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new hf(t,e,r)}(t);return u.toRoot()?vl(e.root,e.root,new Gt([],{}),r,s):function l(v){const I=function ff(n,e,t,r){if(n.isAbsolute)return new Xu(e.root,!0,0);if(-1===r)return new Xu(t,t===e.root,0);return function pf(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new f.vHH(4005,!1);s=r.segments.length}return new Xu(r,!1,s-u)}(t,r+(Ha(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=I.processChildren?vo(I.segmentGroup,I.index,u.commands):wl(I.segmentGroup,I.index,u.commands);return vl(e.root,I.segmentGroup,A,r,s)}(n.snapshot?._lastPathIndex)}function Ha(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _o(n){return"object"==typeof n&&null!=n&&n.outlets}function vl(n,e,t,r,s){let l,u={};r&&rr(r,(v,I)=>{u[I]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),l=n===e?t:Yy(n,e,t);const m=_l(ji(l));return new Va(m,u,s)}function Yy(n,e,t){const r={};return rr(n.children,(s,u)=>{r[u]=s===e?t:Yy(s,e,t)}),new Gt(n.segments,r)}class hf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ha(r[0]))throw new f.vHH(4003,!1);const s=r.find(_o);if(s&&s!==hg(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function wl(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return vo(n,e,t);const r=function Qy(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if(_o(m))break;const v=`${m}`,I=r<t.length-1?t[r+1]:null;if(s>0&&void 0===v)break;if(v&&I&&"object"==typeof I&&void 0===I.outlets){if(!xd(v,I,l))return u;r+=2}else{if(!xd(v,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Gt(n.segments.slice(0,r.pathIndex),{});return u.children[Rt]=new Gt(n.segments.slice(r.pathIndex),n.children),vo(u,0,s)}return r.match&&0===s.length?new Gt(n.segments,{}):r.match&&!n.hasChildren()?Ln(n,e,t):r.match?vo(n,0,s):Ln(n,e,t)}function vo(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const r=function Sd(n){return _o(n[0])?n[0].outlets:{[Rt]:n}}(t),s={};return rr(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=wl(n.children[l],e,u))}),rr(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new Gt(n.segments,s)}}function Ln(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(_o(u)){const v=Ad(u.outlets);return new Gt(r,v)}if(0===s&&Ha(t[0])){r.push(new bd(n.segments[e].path,Cg(t[0]))),s++;continue}const l=_o(u)?u.outlets[Rt]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&Ha(m)?(r.push(new bd(l,Cg(m))),s+=2):(r.push(new bd(l,{})),s++)}return new Gt(r,{})}function Ad(n){const e={};return rr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ln(new Gt([],{}),0,t))}),e}function Cg(n){const e={};return rr(n,(t,r)=>e[r]=`${t}`),e}function xd(n,e,t){return n==t.path&&Ei(e,t.parameters)}class Vs{constructor(e,t){this.id=e,this.url=t}}class Md extends Vs{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $a extends Vs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rd extends Vs{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dg extends Vs{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jy extends Vs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nd extends Vs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s0 extends Vs{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ec extends Vs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gf extends Vs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tg{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Sg{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ag{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xg{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kd{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Od{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class El{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Pd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Il(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Il(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Lr(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Lr(e,this._root).map(t=>t.value)}}function Il(n,e){if(n===e.value)return e;for(const t of e.children){const r=Il(n,t);if(r)return r}return null}function Lr(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Lr(n,t);if(r.length)return r.unshift(e),r}return[]}class ci{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ii(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Mg extends Pd{constructor(e,t){super(e),this.snapshot=t,Cl(this,e)}toString(){return this.snapshot.toString()}}function tc(n,e){const t=function nc(n,e){const l=new Tr([],{},{},"",{},Rt,e,null,n.root,-1,{});return new Ld("",new ci(l,[]))}(n,e),r=new En([new bd("",{})]),s=new En({}),u=new En({}),l=new En({}),m=new En(""),v=new Zo(r,s,l,m,u,Rt,e,t.root);return v.snapshot=t.root,new Mg(new ci(v,[]),t)}class Zo{constructor(e,t,r,s,u,l,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,We.U)(I=>I[Vi]))??nt(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,We.U)(e=>ui(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,We.U)(e=>ui(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Fd(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Tr{constructor(e,t,r,s,u,l,m,v,I,A,M,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.[Vi],this.routeConfig=v,this._urlSegment=I,this._lastPathIndex=A,this._correctedLastPathIndex=L??A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ui(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ui(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ld extends Pd{constructor(e,t){super(t),this.url=e,Cl(this,t)}toString(){return Rg(this._root)}}function Cl(n,e){e.value._routerState=n,e.children.forEach(t=>Cl(n,t))}function Rg(n){const e=n.children.length>0?` { ${n.children.map(Rg).join(", ")} } `:"";return`${n.value}${e}`}function mf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ei(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ei(e.params,t.params)||n.params.next(t.params),function go(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ei(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ei(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Dl(n,e){const t=Ei(n.params,e.params)&&function ml(n,e){return yo(n,e)&&n.every((t,r)=>Ei(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Dl(n.parent,e.parent))}function Ga(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function yf(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Ga(n,r,s);return Ga(n,r)})}(n,e,t);return new ci(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>Ga(n,m)),l}}const r=function Xy(n){return new Zo(new En(n.url),new En(n.params),new En(n.queryParams),new En(n.fragment),new En(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Ga(n,u));return new ci(r,s)}}const is="ngNavigationCancelingError";function Yo(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ko(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=_f(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function _f(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[is]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Vd(n){return Ng(n)&&Ko(n.url)}function Ng(n){return n&&n[is]}class Ud{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Bd,this.attachRef=null}}let Bd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ud,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jd=!1;let za=(()=>{class n{constructor(t,r,s,u,l){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=s||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,jd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,jd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,jd);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,jd);this._activatedRoute=t;const s=this.location,l=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new e_(t,m,s.injector);if(r&&function y(n){return!!n.resolveComponentFactory}(r)){const I=r.resolveComponentFactory(l);this.activated=s.createComponent(I,s.length,v)}else this.activated=s.createComponent(l,{index:s.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Bd),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class e_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Zo?this.route:e===Bd?this.childContexts:this.parent.get(e,t)}}let h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[za],encapsulation:2}),n})();function g(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function gt(n){const e=n.children&&n.children.map(gt),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=h),t}function un(n){return n.outlet||Rt}function li(n,e){const t=n.filter(r=>un(r)===e);return t.push(...n.filter(r=>un(r)!==e)),t}function qa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Tl{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),mf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Ii(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),rr(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Ii(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Ii(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Ii(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Od(u.value.snapshot))}),e.children.length&&this.forwardEvent(new xg(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(mf(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),mf(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=qa(s.snapshot),v=m?.get(f._Vd)??null;l.attachRef=null,l.route=s,l.resolver=v,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class kg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Hd{constructor(e,t){this.component=e,this.route=t}}function Og(n,e,t){const r=n._root;return Wa(r,e?e._root:null,t,[r.value])}function rc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Wa(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ii(e);return n.children.forEach(l=>{(function vf(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const v=function wf(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!yo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yo(n.url,e.url)||!Ei(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dl(n,e)||!Ei(n.queryParams,e.queryParams);default:return!Dl(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);v?s.canActivateChecks.push(new kg(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Wa(n,e,u.component?m?m.children:null:t,r,s),v&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new Hd(m.outlet.component,l))}else l&&Qo(e,m,s),s.canActivateChecks.push(new kg(r)),Wa(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),rr(u,(l,m)=>Qo(l,t.getContext(m),s)),s}function Qo(n,e,t){const r=Ii(n),s=n.value;rr(r,(u,l)=>{Qo(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Hd(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function ic(n){return"function"==typeof n}function Pg(n){return n instanceof ka||"EmptyError"===n?.name}const Fg=Symbol("INITIAL_VALUE");function $d(){return gn(n=>zo(n.map(e=>e.pipe(Zt(1),Qu(Fg)))).pipe((0,We.U)(e=>{for(const t of e)if(!0!==t){if(t===Fg)return Fg;if(!1===t||t instanceof Va)return t}return!0}),C(e=>e!==Fg),Zt(1)))}function di(n){return(0,gl.z)((0,Ne.b)(e=>{if(Ko(e))throw Yo(0,e)}),(0,We.U)(e=>!0===e))}const Lg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vg(n,e,t,r,s){const u=Vr(n,e,t);return u.matched?function o_(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?nt(s.map(l=>{const m=rc(l,n);return Ui(function cC(n){return n&&ic(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe($d(),di()):nt(!0)}(r=g(e,r),e,t).pipe((0,We.U)(l=>!0===l?u:{...Lg})):nt(u)}function Vr(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Lg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||qo)(t,n,e);if(!s)return{...Lg};const u={};rr(s.posParams,(m,v)=>{u[v]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function sc(n,e,t,r,s="corrected"){if(t.length>0&&function vC(n,e,t){return t.some(r=>Ug(n,e,r)&&un(r)!==Rt)}(n,t,r)){const l=new Gt(e,function _C(n,e,t,r){const s={};s[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&un(u)!==Rt){const l=new Gt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[un(u)]=l}return s}(n,e,r,new Gt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function l0(n,e,t){return t.some(r=>Ug(n,e,r))}(n,t,r)){const l=new Gt(n.segments,function c0(n,e,t,r,s,u){const l={};for(const m of r)if(Ug(n,t,m)&&!s[un(m)]){const v=new Gt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[un(m)]=v}return{...s,...l}}(n,e,t,r,n.children,s));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new Gt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ug(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function a_(n,e,t,r){return!!(un(n)===r||r!==Rt&&Ug(e,t,n))&&("**"===n.path||Vr(e,n,t).matched)}function d0(n,e,t){return 0===e.length&&!n.children[t]}const If=!1;class Bg{constructor(e){this.segmentGroup=e||null}}class h0{constructor(e){this.urlTree=e}}function bf(n){return Fr(new Bg(n))}function f0(n){return Fr(new h0(n))}class EC{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=sc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Gt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Rt).pipe((0,We.U)(u=>this.createUrlTree(ji(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(it(u=>{if(u instanceof h0)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Bg?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Rt).pipe((0,We.U)(s=>this.createUrlTree(ji(s),e.queryParams,e.fragment))).pipe(it(s=>{throw s instanceof Bg?this.noMatchError(s):s}))}noMatchError(e){return new f.vHH(4002,If)}createUrlTree(e,t,r){const s=_l(e);return new Va(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,We.U)(u=>new Gt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Jt.D)(s).pipe(Ee(u=>{const l=r.children[u],m=li(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,We.U)(v=>({segment:v,outlet:u})))}),Mt((u,l)=>(u[l.outlet]=l.segment,u),{}),bn())}expandSegment(e,t,r,s,u,l){return(0,Jt.D)(r).pipe(Ee(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(it(I=>{if(I instanceof Bg)return nt(null);throw I}))),te(m=>!!m),it((m,v)=>{if(Pg(m))return d0(t,s,u)?nt(new Gt([],{})):bf(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return a_(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):bf(t):bf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?f0(u):this.lineralizeSegments(r,u).pipe((0,D.z)(l=>{const m=new Gt(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:v,remainingSegments:I,positionalParamSegments:A}=Vr(t,s,u);if(!m)return bf(t);const M=this.applyRedirectCommands(v,s.redirectTo,A);return s.redirectTo.startsWith("/")?f0(M):this.lineralizeSegments(s,M).pipe((0,D.z)(L=>this.expandSegment(e,t,r,L.concat(I),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=g(r,e),r.loadChildren?(r._loadedRoutes?nt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,We.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Gt(s,{})))):nt(new Gt(s,{}))):Vg(t,r,s,e).pipe(gn(({matched:l,consumedSegments:m,remainingSegments:v})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,D.z)(A=>{const M=A.injector??e,L=A.routes,{segmentGroup:H,slicedSegments:Z}=sc(t,m,v,L),Ce=new Gt(H.segments,H.children);if(0===Z.length&&Ce.hasChildren())return this.expandChildren(M,L,Ce).pipe((0,We.U)(ht=>new Gt(m,ht)));if(0===L.length&&0===Z.length)return nt(new Gt(m,{}));const be=un(r)===u;return this.expandSegment(M,Ce,L,Z,be?Rt:u,!0).pipe((0,We.U)(yt=>new Gt(m.concat(yt.segments),yt.children)))})):bf(t)))}getChildConfig(e,t,r){return t.children?nt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?nt({routes:t._loadedRoutes,injector:t._loadedInjector}):function yC(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?nt(!0):nt(s.map(l=>{const m=rc(l,n);return Ui(function r_(n){return n&&ic(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe($d(),di())}(e,t,r).pipe((0,D.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Ne.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Gd(n){return Fr(_f(If,3))}())):nt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return nt(r);if(s.numberOfChildren>1||!s.children[Rt])return Fr(new f.vHH(4e3,If));s=s.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Va(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return rr(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return rr(t.children,(m,v)=>{l[v]=this.createSegmentGroup(e,m,r,s)}),new Gt(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new f.vHH(4001,If);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class CA{}class Jo{constructor(e,t,r,s,u,l,m,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=m,this.urlSerializer=v}recognize(){const e=sc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Rt).pipe((0,We.U)(t=>{if(null===t)return null;const r=new Tr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new ci(r,t),u=new Ld(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=bl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,Jt.D)(Object.keys(r.children)).pipe(Ee(s=>{const u=r.children[s],l=li(t,s);return this.processSegmentGroup(e,l,u,s)}),Mt((s,u)=>s&&u?(s.push(...u),s):null),function vr(n,e=!1){return(0,$n.e)((t,r)=>{let s=0;t.subscribe((0,Fn.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),x(null),bn(),(0,We.U)(s=>{if(null===s)return null;const u=d_(s);return function c_(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,Jt.D)(t).pipe(Ee(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),te(l=>!!l),it(l=>{if(Pg(l))return d0(r,s,u)?nt([]):nt(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!a_(t,r,s,u))return nt(null);let l;if("**"===t.path){const m=s.length>0?hg(s).parameters:{},v=g0(r)+s.length;l=nt({snapshot:new Tr(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jg(t),un(t),t.component??t._loadedComponent??null,t,zd(r),v,Hg(t),v),consumedSegments:[],remainingSegments:[]})}else l=Vg(r,t,s,e).pipe((0,We.U)(({matched:m,consumedSegments:v,remainingSegments:I,parameters:A})=>{if(!m)return null;const M=g0(r)+v.length;return{snapshot:new Tr(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jg(t),un(t),t.component??t._loadedComponent??null,t,zd(r),M,Hg(t),M),consumedSegments:v,remainingSegments:I}}));return l.pipe(gn(m=>{if(null===m)return nt(null);const{snapshot:v,consumedSegments:I,remainingSegments:A}=m;e=t._injector??e;const M=t._loadedInjector??e,L=function l_(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:H,slicedSegments:Z}=sc(r,I,A,L.filter(be=>void 0===be.redirectTo),this.relativeLinkResolution);if(0===Z.length&&H.hasChildren())return this.processChildren(M,L,H).pipe((0,We.U)(be=>null===be?null:[new ci(v,be)]));if(0===L.length&&0===Z.length)return nt([new ci(v,[])]);const Ce=un(t)===u;return this.processSegment(M,L,H,Z,Ce?Rt:u).pipe((0,We.U)(be=>null===be?null:[new ci(v,be)]))}))}}function bC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function d_(n){const e=[],t=new Set;for(const r of n){if(!bC(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=d_(r.children);e.push(new ci(r.value,s))}return e.filter(r=>!t.has(r))}function zd(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function g0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function jg(n){return n.data||{}}function Hg(n){return n.resolve||{}}function $g(n){return"string"==typeof n.title||null===n.title}function f_(n){return gn(e=>{const t=n(e);return t?(0,Jt.D)(t).pipe((0,We.U)(()=>e)):nt(e)})}let v0=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Rt);return r}getResolvedTitleForRoute(t){return t.data[Vi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(w0)},providedIn:"root"}),n})(),w0=(()=>{class n extends v0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ts))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class TC{}class E0 extends class SC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Cf=new f.OlP("",{providedIn:"root",factory:()=>({})}),g_=new f.OlP("ROUTES");let m_=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return nt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ui(t.loadComponent()).pipe((0,Ne.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Fs(()=>{this.componentLoaders.delete(t)})),s=new Li(r,()=>new _r.x).pipe(Ps());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return nt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,We.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,I,A=!1;Array.isArray(m)?I=m:(v=m.create(t).injector,I=dg(v.get(g_,[],f.XFs.Self|f.XFs.Optional)));return{routes:I.map(gt),injector:v}}),Fs(()=>{this.childrenLoaders.delete(r)})),l=new Li(u,()=>new _r.x).pipe(Ps());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ui(t()).pipe((0,D.z)(r=>r instanceof f.YKP||Array.isArray(r)?nt(r):(0,Jt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class I0{}class b0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function C0(n){throw n}function D0(n,e,t){return e.parse("/")}const AC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function T0(){const n=(0,f.f3M)(cf),e=(0,f.f3M)(Bd),t=(0,f.f3M)(xe),r=(0,f.f3M)(f.zs3),s=(0,f.f3M)(f.Sil),u=(0,f.f3M)(g_,{optional:!0})??[],l=(0,f.f3M)(Cf,{optional:!0})??{},m=(0,f.f3M)(w0),v=(0,f.f3M)(v0,{optional:!0}),I=(0,f.f3M)(I0,{optional:!0}),A=(0,f.f3M)(TC,{optional:!0}),M=new Ur(null,n,e,t,r,s,dg(u));return I&&(M.urlHandlingStrategy=I),A&&(M.routeReuseStrategy=A),M.titleStrategy=v??m,function zg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,M),M}let Ur=(()=>{class n{constructor(t,r,s,u,l,m,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _r.x,this.errorHandler=C0,this.malformedUriErrorHandler=D0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>nt(void 0),this.urlHandlingStrategy=new b0,this.routeReuseStrategy=new E0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(m_),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new Sg(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new Tg(L)),this.ngModule=l.get(f.h0i),this.console=l.get(f.c2e);const M=l.get(f.R0b);this.isNgZoneEnabled=M instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function fg(){return new Va(new Gt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=tc(this.currentUrlTree,this.rootComponentType),this.transitions=new En({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(C(s=>0!==s.id),(0,We.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),gn(s=>{let u=!1,l=!1;return nt(s).pipe((0,Ne.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gn(m=>{const v=this.browserUrlTree.toString(),I=!this.navigated||m.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return y_(m.source)&&(this.browserUrlTree=m.extractedUrl),nt(m).pipe(gn(M=>{const L=this.transitions.getValue();return r.next(new Md(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?rs.E:Promise.resolve(M)}),function IC(n,e,t,r){return gn(s=>function Ka(n,e,t,r,s){return new EC(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,We.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ne.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},s.urlAfterRedirects=M.urlAfterRedirects}),function y0(n,e,t,r,s,u){return(0,D.z)(l=>function DA(n,e,t,r,s,u,l="emptyOnly",m="legacy"){return new Jo(n,e,t,r,s,l,m,u).recognize().pipe(gn(v=>null===v?function p0(n){return new Pn.y(e=>e.error(n))}(new CA):nt(v)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,s,u).pipe((0,We.U)(m=>({...l,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ne.b)(M=>{if(s.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(H,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new Jy(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:H,source:Z,restoredState:Ce,extras:be}=m,Ye=new Md(L,this.serializeUrl(H),Z,Ce);r.next(Ye);const yt=tc(H,this.rootComponentType).snapshot;return nt(s={...m,targetSnapshot:yt,urlAfterRedirects:H,extras:{...be,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),rs.E}),(0,Ne.b)(m=>{const v=new Nd(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),(0,We.U)(m=>s={...m,guards:Og(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function dC(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?nt({...t,guardsResult:!0}):function hC(n,e,t,r){return(0,Jt.D)(n).pipe((0,D.z)(s=>function mC(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?nt(u.map(m=>{const v=qa(e)??s,I=rc(m,v);return Ui(function Ef(n){return n&&ic(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):v.runInContext(()=>I(n,e,t,r))).pipe(te())})).pipe($d()):nt(!0)}(s.component,s.route,t,e,r)),te(s=>!0!==s,!0))}(l,r,s,n).pipe((0,D.z)(m=>m&&function a0(n){return"boolean"==typeof n}(m)?function s_(n,e,t,r){return(0,Jt.D)(e).pipe(Ee(s=>Oi(function pC(n,e){return null!==n&&e&&e(new Ag(n)),nt(!0)}(s.route.parent,r),function fC(n,e){return null!==n&&e&&e(new kd(n)),nt(!0)}(s.route,r),function u0(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function n_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Zr(()=>nt(l.guards.map(v=>{const I=qa(l.node)??t,A=rc(v,I);return Ui(function i_(n){return n&&ic(n.canActivateChild)}(A)?A.canActivateChild(r,n):I.runInContext(()=>A(r,n))).pipe(te())})).pipe($d())));return nt(u).pipe($d())}(n,s.path,t),function gC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return nt(!0);const s=r.map(u=>Zr(()=>{const l=qa(e)??t,m=rc(u,l);return Ui(function uC(n){return n&&ic(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(te())}));return nt(s).pipe($d())}(n,s.route,t))),te(s=>!0!==s,!0))}(r,u,n,e):nt(m)),(0,We.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Ne.b)(m=>{if(s.guardsResult=m.guardsResult,Ko(m.guardsResult))throw Yo(0,m.guardsResult);const v=new s0(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(v)}),C(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),f_(m=>{if(m.guards.canActivateChecks.length)return nt(m).pipe((0,Ne.b)(v=>{const I=new ec(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}),gn(v=>{let I=!1;return nt(v).pipe(function TA(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return nt(t);let u=0;return(0,Jt.D)(s).pipe(Ee(l=>function qd(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!$g(s)&&(u[Vi]=s.title),function h_(n,e,t,r){const s=function _0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return nt({});const u={};return(0,Jt.D)(s).pipe((0,D.z)(l=>function DC(n,e,t,r){const s=qa(e)??r,u=rc(n,s);return Ui(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(te(),(0,Ne.b)(m=>{u[l]=m}))),pt(1),po(u),it(l=>Pg(l)?rs.E:Fr(l)))}(u,n,e,r).pipe((0,We.U)(l=>(n._resolvedData=l,n.data=bl(n,t).resolve,s&&$g(s)&&(n.data[Vi]=s.title),null)))}(l.route,r,n,e)),(0,Ne.b)(()=>u++),pt(1),(0,D.z)(l=>u===s.length?nt(t):rs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ne.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,Ne.b)(v=>{const I=new gf(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}))}),f_(m=>{const v=I=>{const A=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,Ne.b)(M=>{I.component=M}),(0,We.U)(()=>{})));for(const M of I.children)A.push(...v(M));return A};return zo(v(m.targetSnapshot.root)).pipe(x(),Zt(1))}),f_(()=>this.afterPreactivation()),(0,We.U)(m=>{const v=function hr(n,e,t){const r=Ga(n,e._root,t?t._root:void 0);return new Mg(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return s={...m,targetRouterState:v}}),(0,Ne.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,We.U)(r=>(new Tl(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Ne.b)({next(){u=!0},complete(){u=!0}}),Fs(()=>{u||l||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),it(m=>{if(l=!0,Ng(m)){Vd(m)||(this.navigated=!0,this.restoreHistory(s,!0));const v=new Rd(s.id,this.serializeUrl(s.extractedUrl),m.message,m.cancellationCode);if(r.next(v),Vd(m)){const I=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||y_(s.source)};this.scheduleNavigation(I,"imperative",null,A,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const v=new Dg(s.id,this.serializeUrl(s.extractedUrl),m,s.targetSnapshot??void 0);r.next(v);try{s.resolve(this.errorHandler(m))}catch(I){s.reject(I)}}return rs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(gt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:v}=r,I=s||this.routerState.root,A=v?this.currentUrlTree.fragment:l;let M=null;switch(m){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),r0(I,this.currentUrlTree,t,M,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Ko(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function S0(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...AC}:!1===r?{...AA}:r,Ko(t))return qy(this.currentUrlTree,t,s);const u=this.parseUrl(t);return qy(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $a(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,v,I;l?(m=l.resolve,v=l.reject,I=l.promise):I=new Promise((L,H)=>{m=L,v=H});const A=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),M=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:A,targetPageId:M,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:v,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new Rd(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return T0()},providedIn:"root"}),n})();function y_(n){return"imperative"!==n}class __{}let v_=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(C(t=>t instanceof $a),Ee(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Jt.D)(s).pipe((0,Yu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):nt(null);const u=s.pipe((0,D.z)(l=>null===l?nt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Jt.D)([u,l]).pipe((0,Yu.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ur),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(__),f.LFG(m_))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Sl=new f.OlP("");let x0=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Md?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $a&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof El&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new El(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Al(n,e){return{\u0275kind:n,\u0275providers:e}}function Sf(n){return[{provide:g_,multi:!0,useValue:n}]}function RC(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Ur),s=n.get(w_);1===n.get(E_)&&r.initialNavigation(),n.get(Us,null,f.XFs.Optional)?.setUpPreloading(),n.get(Sl,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.next(),s.complete()}}const w_=new f.OlP("",{factory:()=>new _r.x}),E_=new f.OlP("",{providedIn:"root",factory:()=>1});const Us=new f.OlP("");function OC(n){return Al(0,[{provide:Us,useExisting:v_},{provide:__,useExisting:n}])}const N0=new f.OlP("ROUTER_FORROOT_GUARD"),FC=[xe,{provide:cf,useClass:Cd},{provide:Ur,useFactory:T0},Bd,{provide:Zo,useFactory:function M0(n){return n.routerState.root},deps:[Ur]},m_];function k0(){return new f.PXZ("Router",Ur)}let Yg=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[FC,[],Sf(t),{provide:N0,useFactory:O0,deps:[[Ur,new f.FiY,new f.tp0]]},{provide:Cf,useValue:r||{}},r?.useHash?{provide:ge,useClass:at}:{provide:ge,useClass:Xe},{provide:Sl,useFactory:()=>{const n=(0,f.f3M)(Ur),e=(0,f.f3M)(Eu),t=(0,f.f3M)(Cf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new x0(n,e,t)}},r?.preloadingStrategy?OC(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:k0},r?.initialNavigation?P0(r):[],[{provide:I_,useFactory:RC},{provide:f.tb,multi:!0,useExisting:I_}]]}}static forChild(t){return{ngModule:n,providers:[Sf(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(N0,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[h]}),n})();function O0(n){return"guarded"}function P0(n){return["disabled"===n.initialNavigation?Al(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Ur);return()=>{e.setUpLocationChangeListener()}}},{provide:E_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Al(2,[{provide:E_,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const l=e.get(Ur),m=e.get(w_);(function s(u){e.get(Ur).events.pipe(C(m=>m instanceof $a||m instanceof Rd||m instanceof Dg),(0,We.U)(m=>m instanceof $a||m instanceof Rd&&(0===m.code||1===m.code)&&null),C(m=>null!==m),Zt(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),l.afterPreactivation=()=>(u(!0),r||m.closed?nt(void 0):m),l.initialNavigation()}))}}]).\u0275providers:[]]}const I_=new f.OlP("");class b_{}class F0{}class ea{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ea?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ea;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ea?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(m=>-1===u.indexOf(m)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class BC{encodeKey(e){return oc(e)}encodeValue(e){return oc(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const L0=/%(\d[a-f0-9])/gi,V0={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function oc(n){return encodeURIComponent(n).replace(L0,(e,t)=>V0[t]??e)}function Qg(n){return`${n}`}class ta{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new BC,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function kA(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,m]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],v=t.get(l)||[];v.push(m),t.set(l,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(Qg):[Qg(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ta({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Qg(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(Qg(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class jC{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function HC(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function $C(n){return typeof Blob<"u"&&n instanceof Blob}function B0(n){return typeof FormData<"u"&&n instanceof FormData}class Jg{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function OA(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new ea),this.context||(this.context=new jC),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+l}}else this.params=new ta,this.urlWithParams=t}serializeBody(){return null===this.body?null:HC(this.body)||$C(this.body)||B0(this.body)||function j0(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ta?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||B0(this.body)?null:$C(this.body)?this.body.type||null:HC(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ta?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,I=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((M,L)=>M.set(L,e.setHeaders[L]),v)),e.setParams&&(I=Object.keys(e.setParams).reduce((M,L)=>M.set(L,e.setParams[L]),I)),new Jg(t,r,u,{params:I,headers:v,context:A,reportProgress:m,responseType:s,withCredentials:l})}}var wr=(()=>((wr=wr||{})[wr.Sent=0]="Sent",wr[wr.UploadProgress=1]="UploadProgress",wr[wr.ResponseHeader=2]="ResponseHeader",wr[wr.DownloadProgress=3]="DownloadProgress",wr[wr.Response=4]="Response",wr[wr.User=5]="User",wr))();class ac{constructor(e,t=200,r="OK"){this.headers=e.headers||new ea,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class C_ extends ac{constructor(e={}){super(e),this.type=wr.ResponseHeader}clone(e={}){return new C_({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Af extends ac{constructor(e={}){super(e),this.type=wr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Af({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class xf extends ac{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function D_(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let T_=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof Jg)u=t;else{let v,I;v=s.headers instanceof ea?s.headers:new ea(s.headers),s.params&&(I=s.params instanceof ta?s.params:new ta({fromObject:s.params})),u=new Jg(t,r,void 0!==s.body?s.body:null,{headers:v,context:s.context,params:I,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=nt(u).pipe(Ee(v=>this.handler.handle(v)));if(t instanceof Jg||"events"===s.observe)return l;const m=l.pipe(C(v=>v instanceof Af));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,We.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return m.pipe((0,We.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return m.pipe((0,We.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return m.pipe((0,We.U)(v=>v.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ta).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,D_(s,r))}post(t,r,s={}){return this.request("POST",t,D_(s,r))}put(t,r,s={}){return this.request("PUT",t,D_(s,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(b_))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class H0{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const $0=new f.OlP("HTTP_INTERCEPTORS");let GC=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const KC=/^\)\]\}',?\n/;let xl=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Pn.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((H,Z)=>s.setRequestHeader(H,Z.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const H=t.detectContentTypeHeader();null!==H&&s.setRequestHeader("Content-Type",H)}if(t.responseType){const H=t.responseType.toLowerCase();s.responseType="json"!==H?H:"text"}const u=t.serializeBody();let l=null;const m=()=>{if(null!==l)return l;const H=s.statusText||"OK",Z=new ea(s.getAllResponseHeaders()),Ce=function VA(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return l=new C_({headers:Z,status:s.status,statusText:H,url:Ce}),l},v=()=>{let{headers:H,status:Z,statusText:Ce,url:be}=m(),Ye=null;204!==Z&&(Ye=typeof s.response>"u"?s.responseText:s.response),0===Z&&(Z=Ye?200:0);let yt=Z>=200&&Z<300;if("json"===t.responseType&&"string"==typeof Ye){const ht=Ye;Ye=Ye.replace(KC,"");try{Ye=""!==Ye?JSON.parse(Ye):null}catch(ut){Ye=ht,yt&&(yt=!1,Ye={error:ut,text:Ye})}}yt?(r.next(new Af({body:Ye,headers:H,status:Z,statusText:Ce,url:be||void 0})),r.complete()):r.error(new xf({error:Ye,headers:H,status:Z,statusText:Ce,url:be||void 0}))},I=H=>{const{url:Z}=m(),Ce=new xf({error:H,status:s.status||0,statusText:s.statusText||"Unknown Error",url:Z||void 0});r.error(Ce)};let A=!1;const M=H=>{A||(r.next(m()),A=!0);let Z={type:wr.DownloadProgress,loaded:H.loaded};H.lengthComputable&&(Z.total=H.total),"text"===t.responseType&&!!s.responseText&&(Z.partialText=s.responseText),r.next(Z)},L=H=>{let Z={type:wr.UploadProgress,loaded:H.loaded};H.lengthComputable&&(Z.total=H.total),r.next(Z)};return s.addEventListener("load",v),s.addEventListener("error",I),s.addEventListener("timeout",I),s.addEventListener("abort",I),t.reportProgress&&(s.addEventListener("progress",M),null!==u&&s.upload&&s.upload.addEventListener("progress",L)),s.send(u),r.next({type:wr.Sent}),()=>{s.removeEventListener("error",I),s.removeEventListener("abort",I),s.removeEventListener("load",v),s.removeEventListener("timeout",I),t.reportProgress&&(s.removeEventListener("progress",M),null!==u&&s.upload&&s.upload.removeEventListener("progress",L)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(eo))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Xg=new f.OlP("XSRF_COOKIE_NAME"),em=new f.OlP("XSRF_HEADER_NAME");class Mf{}let wo=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=fa(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(f.Lbi),f.LFG(Xg))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),tm=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Mf),f.LFG(em))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ZC=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get($0,[]);this.chain=r.reduceRight((s,u)=>new H0(s,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(F0),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),S_=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:tm,useClass:GC}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Xg,useValue:t.cookieName}:[],t.headerName?{provide:em,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[tm,{provide:$0,useExisting:tm,multi:!0},{provide:Mf,useClass:wo},{provide:Xg,useValue:"XSRF-TOKEN"},{provide:em,useValue:"X-XSRF-TOKEN"}]}),n})(),W0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[T_,{provide:b_,useClass:ZC},xl,{provide:F0,useExisting:xl}],imports:[S_.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),nm=(()=>{class n{constructor(t){this._http=t,this._menuBibliajsonURL="assets/menuBiblia.json",this._bibliajsonURL="assets/biblia.json"}getMenuBiblia(){return this._http.get(this._menuBibliajsonURL)}getBiblia(t){return this._http.get(this._bibliajsonURL).pipe((0,We.U)(r=>this.handlerBookChapter(r,t)))}handlerBookChapter(t,r){const s=t.find(u=>u.name===r.livro);return{name:s?.name||"G\xeanesis",chapter:s?.chapters[r.chapter||0]||[]}}saveLastSelectedBook(t){window.localStorage.setItem("lastBook",JSON.stringify(t))}getLastSelectedBook(){const t=window.localStorage.getItem("lastBook");return t?JSON.parse(t):null}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(T_))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),YC=(()=>{class n{constructor(t){this._bibliaService=t}resolve(){return this._bibliaService.getMenuBiblia()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(nm))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();var Za=(()=>{return(n=Za||(Za={})).DARK="dark",n.LIGTH="ligth",Za;var n})();let Wd=(()=>{class n{constructor(){this.themeSubject=new En(this.getThemeLocalStorage())}changeTheme(t){this.setThemeLocalStorage(t),this.themeSubject.next(t)}getTheme(){return this.themeSubject.asObservable()}setThemeLocalStorage(t){window.localStorage.setItem("theme",t)}getThemeLocalStorage(){return window.localStorage.getItem("theme")||Za.LIGTH}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Kd=O(4986),Dn=O(5813);function Rf(){return(0,$n.e)((n,e)=>{let t,r=!1;n.subscribe((0,Fn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function QC(n,e){return n===e}var dt,bi=O(2011),Z0=(O(1277),O(3942)),me=O(5861),na=O(9681),Zd=O(4859),Ml=O(1877),Vt=O(2090),Y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ya={},Q0=Q0||{},Ut=Y0||self;function A_(){}function x_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function rm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var J0="closure_uid_"+(1e9*Math.random()>>>0),HA=0;function $A(n,e,t){return n.call.apply(n.bind,arguments)}function GA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Gn(n,e,t){return(Gn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$A:GA).apply(null,arguments)}function Yd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Yr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function Qa(){this.s=this.s,this.o=this.o}Qa.prototype.s=!1,Qa.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function jA(n){Object.prototype.hasOwnProperty.call(n,J0)&&n[J0]||(n[J0]=++HA)}(this)},Qa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const R_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Nf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function X0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(x_(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function zn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}zn.prototype.h=function(){this.defaultPrevented=!0};var eE=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",A_,e),Ut.removeEventListener("test",A_,e)}catch{}return n}();function im(n){return/^[\s\xa0]*$/.test(n)}var tE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function sm(n,e){return n<e?-1:n>e?1:0}function om(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function ra(n){return-1!=om().indexOf(n)}function Qd(n){return Qd[" "](n),n}Qd[" "]=A_;var eh,n,N_=ra("Opera"),Eo=ra("Trident")||ra("MSIE"),am=ra("Edge"),Xd=am||Eo,k_=ra("Gecko")&&!(-1!=om().toLowerCase().indexOf("webkit")&&!ra("Edge"))&&!(ra("Trident")||ra("MSIE"))&&!ra("Edge"),nE=-1!=om().toLowerCase().indexOf("webkit")&&!ra("Edge");function um(){var n=Ut.document;return n?n.documentMode:void 0}e:{var cm="",kf=(n=om(),k_?/rv:([^\);]+)(\)|;)/.exec(n):am?/Edge\/([\d\.]+)/.exec(n):Eo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):nE?/WebKit\/(\S+)/.exec(n):N_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(kf&&(cm=kf?kf[1]:""),Eo){var O_=um();if(null!=O_&&O_>parseFloat(cm)){eh=String(O_);break e}}eh=cm}var zA={};var iE=Ut.document&&Eo&&(um()||parseInt(eh,10))||void 0;function th(n,e){if(zn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(k_){e:{try{Qd(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:XC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&th.X.h.call(this)}}Yr(th,zn);var XC={2:"touch",3:"pen",4:"mouse"};th.prototype.h=function(){th.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Qr="closure_listenable_"+(1e6*Math.random()|0),sE=0;function eD(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++sE,this.ba=this.ea=!1}function P_(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function F_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function dm(n){const e={};for(const t in n)e[t]=n[t];return e}const L_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oE(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<L_.length;u++)t=L_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function hm(n){this.src=n,this.g={},this.h=0}function V_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=R_(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(P_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function fm(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}hm.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=fm(n,e,r,s);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new eD(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var U_="closure_lm_"+(1e6*Math.random()|0),pm={};function aE(n,e,t,r,s){if(r&&r.once)return B_(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)aE(n,e[u],t,r,s);return null}return t=mm(t),n&&n[Qr]?n.N(e,t,rm(r)?!!r.capture:!!r,s):uE(n,e,t,!1,r,s)}function uE(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=rm(s)?!!s.capture:!!s,m=j_(n);if(m||(n[U_]=m=new hm(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function cE(){const e=tD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)eE||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(gm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function B_(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)B_(n,e[u],t,r,s);return null}return t=mm(t),n&&n[Qr]?n.O(e,t,rm(r)?!!r.capture:!!r,s):uE(n,e,t,!0,r,s)}function lE(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)lE(n,e[u],t,r,s);else r=rm(r)?!!r.capture:!!r,t=mm(t),n&&n[Qr]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=fm(u=n.g[e],t,r,s))&&(P_(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=j_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=fm(e,t,r,s)),(t=-1<n?e[n]:null)&&Bs(t))}function Bs(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Qr])V_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(gm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=j_(e))?(V_(t,n),0==t.h&&(t.src=null,e[U_]=null)):P_(n)}}}function gm(n){return n in pm?pm[n]:pm[n]="on"+n}function tD(n,e){if(n.ba)n=!0;else{e=new th(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Bs(n),n=t.call(r,e)}return n}function j_(n){return(n=n[U_])instanceof hm?n:null}var dE="__closure_events_fn_"+(1e9*Math.random()>>>0);function mm(n){return"function"==typeof n?n:(n[dE]||(n[dE]=function(e){return n.handleEvent(e)}),n[dE])}function Br(){Qa.call(this),this.i=new hm(this),this.P=this,this.I=null}function Jr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new zn(e,n);else if(e instanceof zn)e.target=e.target||n;else{var s=e;oE(e=new zn(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=ym(l,r,!0,e)&&s}if(s=ym(l=e.g=n,r,!0,e)&&s,s=ym(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=ym(l=e.g=t[u],r,!1,e)&&s}function ym(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,v=l.ha||l.src;l.ea&&V_(n.i,l),s=!1!==m.call(v,r)&&s}}return s&&!r.defaultPrevented}Yr(Br,Qa),Br.prototype[Qr]=!0,Br.prototype.removeEventListener=function(n,e,t,r){lE(this,n,e,t,r)},Br.prototype.M=function(){if(Br.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)P_(t[r]);delete n.g[e],n.h--}}this.I=null},Br.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Br.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Of=Ut.JSON.stringify;function nD(){var n=$_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ff,Pf=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new H_,n=>n.reset());class H_{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _m(n){Ut.setTimeout(()=>{throw n},0)}function iD(n,e){Ff||function qA(){var n=Ut.Promise.resolve(void 0);Ff=function(){n.then(hE)}}(),vm||(Ff(),vm=!0),$_.add(n,e)}var vm=!1,$_=new class rD{constructor(){this.h=this.g=null}add(e,t){const r=Pf.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function hE(){for(var n;n=nD();){try{n.h.call(n.g)}catch(t){_m(t)}var e=Pf;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vm=!1}function Lf(n,e){Br.call(this),this.h=n||1,this.g=e||Ut,this.j=Gn(this.lb,this),this.l=Date.now()}function Vf(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Io(n,e,t){if("function"==typeof n)t&&(n=Gn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gn(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function Uf(n){n.g=Io(()=>{n.g=null,n.i&&(n.i=!1,Uf(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Yr(Lf,Br),(dt=Lf.prototype).ca=!1,dt.R=null,dt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Jr(this,"tick"),this.ca&&(Vf(this),this.start()))}},dt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dt.M=function(){Lf.X.M.call(this),Vf(this),delete this.g};class wm extends Qa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Uf(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ja(n){Qa.call(this),this.h=n,this.g={}}Yr(Ja,Qa);var fE=[];function Em(n,e,t,r){Array.isArray(t)||(t&&(fE[0]=t.toString()),t=fE);for(var s=0;s<t.length;s++){var u=aE(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function G_(n){F_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Bs(e)},n),n.g={}}function Im(){this.g=!0}function nh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function oD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return Of(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ja.prototype.M=function(){Ja.X.M.call(this),G_(this)},Ja.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Im.prototype.Aa=function(){this.g=!1},Im.prototype.info=function(){};var rh={},pE=null;function bm(){return pE=pE||new Br}function gE(n){zn.call(this,rh.Pa,n)}function ih(n){const e=bm();Jr(e,new gE(e))}function Cm(n,e){zn.call(this,rh.STAT_EVENT,n),this.stat=e}function Ci(n){const e=bm();Jr(e,new Cm(e,n))}function Dm(n,e){zn.call(this,rh.Qa,n),this.size=e}function jf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}rh.Pa="serverreachability",Yr(gE,zn),rh.STAT_EVENT="statevent",Yr(Cm,zn),rh.Qa="timingevent",Yr(Dm,zn);var Tm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},mE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function z_(){}function _E(){}z_.prototype.h=null;var Rl,cc={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Xa(){zn.call(this,"d")}function vE(){zn.call(this,"c")}function Sm(){}function Hf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ja(this),this.O=aD,this.T=new Lf(n=Xd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Am}function Am(){this.i=null,this.g="",this.h=!1}Yr(Xa,zn),Yr(vE,zn),Yr(Sm,z_),Sm.prototype.g=function(){return new XMLHttpRequest},Sm.prototype.i=function(){return{}},Rl=new Sm;var aD=45e3,js={},lc={};function jr(n,e,t){n.K=1,n.v=qf(oa(e)),n.s=t,n.P=!0,dc(n,null)}function dc(n,e){n.F=Date.now(),ia(n),n.A=oa(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Zf(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Am,n.g=LE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new wm(Gn(n.La,n,n.g),n.N)),Em(n.S,n.g,"readystatechange",n.ib),e=n.H?dm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),ih(),function sD(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),v=0;v<m.length;v++){var I=m[v].split("=");if(1<I.length){var A=I[0];I=I[1];var M=A.split("_");l=2<=M.length&&"type"==M[1]?l+(A+"=")+I+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function $f(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function ss(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=q_(n,t),s==lc){4==e&&(n.o=4,Ci(14),r=!1),nh(n.j,n.m,null,"[Incomplete Response]");break}if(s==js){n.o=4,Ci(15),nh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}nh(n.j,n.m,s,null),hc(n,s)}$f(n)&&s!=lc&&s!=js&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ci(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),lv(e),e.K=!0,Ci(11))):(nh(n.j,n.m,t,"[Invalid Chunked Response]"),Hs(n),sa(n))}function q_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?lc:(t=Number(e.substring(t,r)),isNaN(t)?js:(r+=1)+t>e.length?lc:(e=e.substr(r,t),n.C=r+t,e))}function ia(n){n.V=Date.now()+n.O,Nl(n,n.O)}function Nl(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=jf(Gn(n.gb,n),e)}function eu(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function sa(n){0==n.l.G||n.I||Gs(n.l,n)}function Hs(n){eu(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Vf(n.T),G_(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function hc(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Nm(t.h,n)))if(!n.J&&Nm(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;os(t),Fm(t)}$s(t),Ci(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=jf(Gn(t.cb,t),6e3));if(1>=Rm(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else mc(t,11)}else if((n.J||t.g==n)&&os(t),!im(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let I=s[e];if(t.T=I[0],I=I[1],2==t.G)if("c"==I[0]){t.I=I[1],t.ka=I[2];const A=I[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const M=I[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.J=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const Z=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var u=r.h;u.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(J_(u,u.h),u.h=null))}if(r.D){const Ce=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;Ce&&(r.za=Ce,Rn(r.F,r.D,Ce))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=FE(r,r.H?r.ka:null,r.V),l.J){X_(r.h,l);var m=l,v=r.J;v&&m.setTimeout(v),m.B&&(eu(m),ia(m)),r.g=l}else Vm(r);0<t.i.length&&Yf(t)}else"stop"!=I[0]&&"close"!=I[0]||mc(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?mc(t,7):gc(t):"noop"!=I[0]&&t.l&&t.l.wa(I),t.A=0)}ih()}catch{}}function kl(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(x_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function oh(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(x_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function sh(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(x_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(dt=Hf.prototype).setTimeout=function(n){this.O=n},dt.ib=function(n){n=n.target;const e=this.L;e&&3==nu(n)?e.l():this.La(n)},dt.La=function(n){try{if(n==this.g)e:{const A=nu(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||Xd||this.g&&(this.h.h||this.g.fa()||kE(this.g)))){this.I||4!=A||7==e||ih(),eu(this);var t=this.g.aa();this.Y=t;t:if($f(this)){var r=kE(this.g);n="";var s=r.length,u=4==nu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),sa(this);var l="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function Bf(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!im(m)){var I=m;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Ci(12),Hs(this),sa(this);break e}nh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hc(this,t)}this.P?(ss(this,A,l),Xd&&this.i&&3==A&&(Em(this.S,this.T,"tick",this.hb),this.T.start())):(nh(this.j,this.m,l,null),hc(this,l)),4==A&&Hs(this),this.i&&!this.I&&(4==A?Gs(this.l,this):(this.i=!1,ia(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ci(12)):(this.o=0,Ci(13)),Hs(this),sa(this)}}}catch{}},dt.hb=function(){if(this.g){var n=nu(this.g),e=this.g.fa();this.C<e.length&&(eu(this),ss(this,n,e),this.i&&4!=n&&ia(this))}},dt.cancel=function(){this.I=!0,Hs(this)},dt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function WA(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ih(),Ci(17)),Hs(this),this.o=2,sa(this)):Nl(this,this.V-n)};var W_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fc){this.h=void 0!==e?e:n.h,Gf(this,n.j),this.s=n.s,this.g=n.g,zf(this,n.m),this.l=n.l,e=n.i;var t=new pc;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),K_(this,t),this.o=n.o}else n&&(t=String(n).match(W_))?(this.h=!!e,Gf(this,t[1]||"",!0),this.s=Wf(t[2]||""),this.g=Wf(t[3]||"",!0),zf(this,t[4]),this.l=Wf(t[5]||"",!0),K_(this,t[6]||"",!0),this.o=Wf(t[7]||"")):(this.h=!!e,this.i=new pc(null,this.h))}function oa(n){return new fc(n)}function Gf(n,e,t){n.j=t?Wf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function K_(n,e,t){e instanceof pc?(n.i=e,function DE(n,e){e&&!n.j&&(bo(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(xm(this,r),Zf(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Kf(e,Y_)),n.i=new pc(e,n.h))}function Rn(n,e,t){n.i.set(e,t)}function qf(n){return Rn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Wf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Kf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,EE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function EE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Kf(e,IE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Kf(e,IE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Kf(t,"/"==t.charAt(0)?Z_:bE,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Kf(t,uD)),n.join("")};var IE=/[#\/\?@]/g,bE=/[#\?:]/g,Z_=/[#\?]/g,Y_=/[#\?@]/g,uD=/#/g;function pc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bo(n){n.g||(n.g=new Map,n.h=0,n.i&&function wE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xm(n,e){bo(n),e=tu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function CE(n,e){return bo(n),e=tu(n,e),n.g.has(e)}function Zf(n,e,t){xm(n,e),0<t.length&&(n.i=null,n.g.set(tu(n,e),Nf(t)),n.h+=t.length)}function tu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Mm(n){this.l=n||SE,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ga&&Ut.g.Ga()&&Ut.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(dt=pc.prototype).add=function(n,e){bo(this),this.i=null,n=tu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},dt.forEach=function(n,e){bo(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},dt.oa=function(){bo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},dt.W=function(n){bo(this);let e=[];if("string"==typeof n)CE(this,n)&&(e=e.concat(this.g.get(tu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},dt.set=function(n,e){return bo(this),this.i=null,CE(this,n=tu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},dt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var SE=10;function Q_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Rm(n){return n.h?1:n.g?n.g.size:0}function Nm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function J_(n,e){n.g?n.g.add(e):n.h=e}function X_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ev(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Nf(n.i)}function km(){}function AE(){this.g=new km}function cD(n,e,t){const r=t||"";try{kl(n,function(s,u){let l=s;rm(s)&&(l=Of(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Om(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function ah(n){this.l=n.ac||null,this.j=n.jb||!1}function uh(n,e){Br.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Pm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mm.prototype.cancel=function(){if(this.i=ev(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},km.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},km.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},Yr(ah,z_),ah.prototype.g=function(){return new uh(this.l,this.j)},ah.prototype.i=function(n){return function(){return n}}({}),Yr(uh,Br);var Pm=0;function tv(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function ch(n){n.readyState=4,n.l=null,n.j=null,n.A=null,lh(n)}function lh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(dt=uh.prototype).open=function(n,e){if(this.readyState!=Pm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,lh(this)},dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ch(this)),this.readyState=Pm},dt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,lh(this)),this.g&&(this.readyState=3,lh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tv(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},dt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ch(this):lh(this),3==this.readyState&&tv(this)}},dt.Va=function(n){this.g&&(this.response=this.responseText=n,ch(this))},dt.Ua=function(n){this.g&&(this.response=n,ch(this))},dt.ga=function(){this.g&&ch(this)},dt.setRequestHeader=function(n,e){this.v.append(n,e)},dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(uh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xE=Ut.JSON.parse;function qn(n){Br.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nv,this.K=this.L=!1}Yr(qn,Br);var nv="",ME=/^https?$/i,KA=["POST","PUT"];function RE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,rv(n),ir(n)}function rv(n){n.D||(n.D=!0,Jr(n,"complete"),Jr(n,"error"))}function NE(n){if(n.h&&typeof Q0<"u"&&(!n.C[1]||4!=nu(n)||2!=n.aa()))if(n.v&&4==nu(n))Io(n.Ha,0,n);else if(Jr(n,"readystatechange"),4==nu(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(W_)[1]||null;if(!s&&Ut.self&&Ut.self.location){var u=Ut.self.location.protocol;s=u.substr(0,u.length-1)}r=!ME.test(s?s.toLowerCase():"")}t=r}if(t)Jr(n,"complete"),Jr(n,"success");else{n.m=6;try{var l=2<nu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",rv(n)}}finally{ir(n)}}}function ir(n,e){if(n.g){iv(n);const t=n.g,r=n.C[0]?A_:null;n.g=null,n.C=null,e||Jr(n,"ready");try{t.onreadystatechange=r}catch{}}}function iv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function nu(n){return n.g?n.g.readyState:0}function kE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function sv(n){let e="";return F_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ov(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=sv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Rn(n,e,t))}function dh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function av(n){this.Ca=0,this.i=[],this.j=new Im,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=dh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=dh("baseRetryDelayMs",5e3,n),this.bb=dh("retryDelaySeedMs",1e4,n),this.$a=dh("forwardChannelMaxRetries",2,n),this.ta=dh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Mm(n&&n.concurrentRequestLimit),this.Fa=new AE,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function gc(n){if(OE(n),3==n.G){var e=n.U++,t=oa(n.F);Rn(t,"SID",n.I),Rn(t,"RID",e),Rn(t,"TYPE","terminate"),Lm(n,t),(e=new Hf(n,n.j,e,void 0)).K=2,e.v=qf(oa(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=LE(e.l,null),e.g.da(e.v)),e.F=Date.now(),ia(e)}dv(n)}function Fm(n){n.g&&(lv(n),n.g.cancel(),n.g=null)}function OE(n){Fm(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),os(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function Yf(n){Q_(n.h)||n.m||(n.m=!0,iD(n.Ja,n),n.C=0)}function uv(n,e){var t;t=e?e.m:n.U++;const r=oa(n.F);Rn(r,"SID",n.I),Rn(r,"RID",t),Rn(r,"AID",n.T),Lm(n,r),n.o&&n.s&&ov(r,n.o,n.s),t=new Hf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=cv(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),J_(n.h,t),jr(t,r,e)}function Lm(n,e){n.ia&&F_(n.ia,function(t,r){Rn(e,r,t)}),n.l&&kl({},function(t,r){Rn(e,r,t)})}function cv(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Gn(n.l.Ra,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let I=s[v].h;const A=s[v].g;if(I-=u,0>I)u=Math.max(0,s[v].h-100),m=!1;else try{cD(A,l,"req"+I+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Vm(n){n.g||n.u||(n.Z=1,iD(n.Ia,n),n.A=0)}function $s(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=jf(Gn(n.Ia,n),zs(n,n.A)),n.A++,0))}function lv(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function PE(n){n.g=new Hf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=oa(n.sa);Rn(e,"RID","rpc"),Rn(e,"SID",n.I),Rn(e,"CI",n.L?"0":"1"),Rn(e,"AID",n.T),Rn(e,"TYPE","xmlhttp"),Lm(n,e),n.o&&n.s&&ov(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=qf(oa(e)),t.s=null,t.P=!0,dc(t,n)}function os(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function Gs(n,e){var t=null;if(n.g==e){os(n),lv(n),n.g=null;var r=2}else{if(!Nm(n.h,e))return;t=e.D,X_(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;Jr(r=bm(),new Dm(r,t)),Yf(n)}else Vm(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function hD(n,e){return!(Rm(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=jf(Gn(n.Ja,n,e),zs(n,n.C)),n.C++,0)))}(n,e)||2==r&&$s(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:mc(n,5);break;case 4:mc(n,10);break;case 3:mc(n,6);break;default:mc(n,2)}}function zs(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function mc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Gn(n.kb,n);t||(t=new fc("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||Gf(t,"https"),qf(t)),function lD(n,e){const t=new Im;if(Ut.Image){const r=new Image;r.onload=Yd(Om,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yd(Om,t,r,"TestLoadImage: error",!1,e),r.onabort=Yd(Om,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yd(Om,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ci(2);n.G=0,n.l&&n.l.va(e),dv(n),OE(n)}function dv(n){if(n.G=0,n.la=[],n.l){const e=ev(n.h);(0!=e.length||0!=n.i.length)&&(X0(n.la,e),X0(n.la,n.i),n.h.i.length=0,Nf(n.i),n.i.length=0),n.l.ua()}}function FE(n,e,t){var r=t instanceof fc?oa(t):new fc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),zf(r,r.m);else{var s=Ut.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new fc(null,void 0);r&&Gf(u,r),e&&(u.g=e),s&&zf(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Rn(r,t,e),Rn(r,"VER",n.ma),Lm(n,r),r}function LE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qn(t&&n.Da&&!n.ra?new ah({jb:!0}):n.ra)).Ka(n.H),e}function VE(){}function Um(){if(Eo&&!(10<=Number(iE)))throw Error("Environmental error: no available transport.")}function Di(n,e){Br.call(this),this.g=new av(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!im(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!im(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ol(this)}function hh(n){Xa.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function UE(){vE.call(this),this.status=1}function Ol(n){this.g=n}(dt=qn.prototype).Ka=function(n){this.L=n},dt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rl.g(),this.C=function yE(n){return n.h||(n.h=n.i())}(this.u?this.u:Rl),this.g.onreadystatechange=Gn(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void RE(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Ut.FormData&&n instanceof Ut.FormData,!(0<=R_(KA,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{iv(this),0<this.B&&((this.K=function dD(n){return Eo&&function JC(){return function Jd(n){var e=zA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=tE(String(eh)).split("."),t=tE("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var s=e[l]||"",u=t[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=sm(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||sm(0==s[2].length,0==u[2].length)||sm(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gn(this.qa,this)):this.A=Io(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){RE(this,u)}},dt.qa=function(){typeof Q0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jr(this,"timeout"),this.abort(8))},dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Jr(this,"complete"),Jr(this,"abort"),ir(this))},dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ir(this,!0)),qn.X.M.call(this)},dt.Ha=function(){this.s||(this.F||this.v||this.l?NE(this):this.fb())},dt.fb=function(){NE(this)},dt.aa=function(){try{return 2<nu(this)?this.g.status:-1}catch{return-1}},dt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},dt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),xE(e)}},dt.Ea=function(){return this.m},dt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(dt=av.prototype).ma=8,dt.G=1,dt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Hf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=dm(u),oE(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cv(this,s,e),Rn(t=oa(this.F),"RID",n),Rn(t,"CVER",22),this.D&&Rn(t,"X-HTTP-Session-Id",this.D),Lm(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(sv(u)))+"&"+e:this.o&&ov(t,this.o,u)),J_(this.h,s),this.Ya&&Rn(t,"TYPE","init"),this.O?(Rn(t,"$req",e),Rn(t,"SID","null"),s.Z=!0,jr(s,t,null)):jr(s,t,e),this.G=2}}else 3==this.G&&(n?uv(this,n):0==this.i.length||Q_(this.h)||uv(this))},dt.Ia=function(){if(this.u=null,PE(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=jf(Gn(this.eb,this),n)}},dt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ci(10),Fm(this),PE(this))},dt.cb=function(){null!=this.v&&(this.v=null,Fm(this),$s(this),Ci(19))},dt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ci(2)):(this.j.info("Failed to ping google.com"),Ci(1))},(dt=VE.prototype).xa=function(){},dt.wa=function(){},dt.va=function(){},dt.ua=function(){},dt.Ra=function(){},Um.prototype.g=function(n,e){return new Di(n,e)},Yr(Di,Br),Di.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ci(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=FE(n,null,n.V),Yf(n)},Di.prototype.close=function(){gc(this.g)},Di.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Of(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Yf(e)},Di.prototype.M=function(){this.g.l=null,delete this.j,gc(this.g),delete this.g,Di.X.M.call(this)},Yr(hh,Xa),Yr(UE,vE),Yr(Ol,VE),Ol.prototype.xa=function(){Jr(this.g,"a")},Ol.prototype.wa=function(n){Jr(this.g,new hh(n))},Ol.prototype.va=function(n){Jr(this.g,new UE)},Ol.prototype.ua=function(){Jr(this.g,"b")},Um.prototype.createWebChannel=Um.prototype.g,Di.prototype.send=Di.prototype.u,Di.prototype.open=Di.prototype.m,Di.prototype.close=Di.prototype.close,Tm.NO_ERROR=0,Tm.TIMEOUT=8,Tm.HTTP_ERROR=6,mE.COMPLETE="complete",_E.EventType=cc,cc.OPEN="a",cc.CLOSE="b",cc.ERROR="c",cc.MESSAGE="d",Br.prototype.listen=Br.prototype.N,qn.prototype.listenOnce=qn.prototype.O,qn.prototype.getLastError=qn.prototype.Oa,qn.prototype.getLastErrorCode=qn.prototype.Ea,qn.prototype.getStatus=qn.prototype.aa,qn.prototype.getResponseJson=qn.prototype.Sa,qn.prototype.getResponseText=qn.prototype.fa,qn.prototype.send=qn.prototype.da,qn.prototype.setWithCredentials=qn.prototype.Ka;var fD=Ya.createWebChannelTransport=function(){return new Um},BE=Ya.getStatEventTarget=function(){return bm()},Bm=Ya.ErrorCode=Tm,jm=Ya.EventType=mE,pD=Ya.Event=rh,hv=Ya.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},jE=Ya.FetchXmlHttpFactory=ah,Qf=Ya.WebChannel=_E,Hm=Ya.XhrIo=qn;const $m="@firebase/firestore";class Sr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sr.UNAUTHENTICATED=new Sr(null),Sr.GOOGLE_CREDENTIALS=new Sr("google-credentials-uid"),Sr.FIRST_PARTY=new Sr("first-party-uid"),Sr.MOCK_USER=new Sr("mock-user");let Pl="9.13.0";const ru=new Ml.Yd("@firebase/firestore");function Gm(){return ru.logLevel}function ke(n,...e){if(ru.logLevel<=Ml.in.DEBUG){const t=e.map(fv);ru.debug(`Firestore (${Pl}): ${n}`,...t)}}function sr(n,...e){if(ru.logLevel<=Ml.in.ERROR){const t=e.map(fv);ru.error(`Firestore (${Pl}): ${n}`,...t)}}function yc(n,...e){if(ru.logLevel<=Ml.in.WARN){const t=e.map(fv);ru.warn(`Firestore (${Pl}): ${n}`,...t)}}function fv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: `+n;throw sr(e),new Error(e)}function At(n,e){n||st()}function qe(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Vt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ar{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $E{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sr.UNAUTHENTICATED))}shutdown(){}}class yD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _D{constructor(e){this.t=e,this.currentUser=Sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=I=>this.i!==s?(s=this.i,t(I)):Promise.resolve();let l=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ar,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const I=l;e.enqueueRetryable((0,me.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},v=I=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(I=>v(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?v(I):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ar)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new $E(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new Sr(e)}}class vD{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=Sr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(At(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class wD{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new vD(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ED{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.A=t.token,new GE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class pv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=zE(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function Fl(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function gv(n){return n+"\0"}class Nn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Nn(0,0))}static max(){return new Dt(new Nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class fh{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===fh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends fh{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const qE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends fh{construct(e,t,r){return new Wn(e,t,r)}static isValidIdentifier(e){return qE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Re(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Re(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new Re(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(t)}static emptyPath(){return new Wn([])}}class je{constructor(e){this.path=e}static fromPath(e){return new je(Xt.fromString(e))}static fromName(e){return new je(Xt.fromString(e).popFirst(5))}static empty(){return new je(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Xt(e.slice()))}}class zm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function mv(n){return n.fields.find(e=>2===e.kind)}function qs(n){return n.fields.filter(e=>2!==e.kind)}zm.UNKNOWN_ID=-1;class ph{constructor(e,t){this.fieldPath=e,this.kind=t}}class gh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gh(0,ot.min())}}function yv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Dt.fromTimestamp(1e9===r?new Nn(t+1,0):new Nn(t,r));return new ot(s,je.empty(),e)}function ID(n){return new ot(n.readTime,n.key,-1)}class ot{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ot(Dt.min(),je.empty(),-1)}static max(){return new ot(Dt.max(),je.empty(),-1)}}function _v(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const WE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function as(n){return vv.apply(this,arguments)}function vv(){return vv=(0,me.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==WE)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),vv.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},v=>r(v))}),l=!0,u===s&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(s=>s?re.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let v=0;v<u;v++){const I=v;t(e[I]).next(A=>{l[I]=A,++m,m===u&&r(l)},A=>s(A))}})}static doWhile(e,t){return new re((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Ll{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ar,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new mh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=qm(r.target.error);this.P.reject(new mh(e,s))}}static open(e,t,r,s){try{return new Ll(t,e.transaction(s,r))}catch(u){throw new mh(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bD(t)}}class cn{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===cn.D((0,Vt.z$)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),_c(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Vt.hl)())return!1;if(cn.N())return!0;const e=(0,Vt.z$)(),t=cn.D(e),r=0<t&&t<10,s=cn.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new mh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new Re(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new mh(e,m))},u.onupgradeneeded=l=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,me.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const v=Ll.open(u.db,e,l?"readonly":"readwrite",r),I=s(v).next(A=>(v.V(),A)).catch(A=>(v.abort(A),re.reject(A))).toPromise();return I.catch(()=>{}),yield v.v,I}catch(v){const I=v,A="FirebaseError"!==I.name&&m<3;if(ke("SimpleDb","Transaction failed with error:",I.message,"Retrying:",A),u.close(),!A)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class JA{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return _c(this.U.delete())}}class mh extends Re{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function iu(n){return"IndexedDbTransactionError"===n.name}class bD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_c(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),_c(this.store.add(e))}get(e){return _c(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),_c(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),_c(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new re((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,l,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new re((r,s)=>{t.onerror=u=>{const l=qm(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}H(e,t){const r=[];return new re((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const v=new JA(m),I=t(m.primaryKey,m.value,v);if(I instanceof re){const A=I.catch(M=>(v.done(),re.reject(M)));r.push(A)}v.isDone?s():null===v.G?m.continue():m.continue(v.G)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _c(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=qm(r.target.error);t(s)}})}let wv=!1;function qm(n){const e=cn.D((0,Vt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wv||(wv=!0,setTimeout(()=>{throw r},0)),r}}return n}class ZE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){iu(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield as(r)}yield t.nt(6e4)}))}}class CD{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return re.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ke("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(s,u)).next(m=>(ke("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=ID(u);_v(l,r)>0&&(r=l)}),new ot(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function YE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Co(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function QE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Hi.at=-1;class or{constructor(e,t){this.comparator=e,this.root=t||Er.EMPTY}insert(e,t){return new or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Er.BLACK,null,null))}remove(e){return new or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wm(this.root,e,this.comparator,!0)}}class Wm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Er{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Er.RED,this.left=s??Er.EMPTY,this.right=u??Er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Er(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Er.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Er.EMPTY=null,Er.RED=!0,Er.BLACK=!1,Er.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Er(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new or(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ev(this.data.getIterator())}getIteratorFrom(e){return new Ev(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class Ev{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vl(n){return n.hasNext()?n.getNext():void 0}class us{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new us([])}unionWith(e){let t=new mn(Wn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new us(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Kn(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const DD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vc(n){if(At(!!n),"string"==typeof n){let e=0;const t=DD.exec(n);if(At(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function wc(n){return"string"==typeof n?Kn.fromBase64String(n):Kn.fromUint8Array(n)}function Km(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Iv(n){const e=n.mapValue.fields.__previous_value__;return Km(e)?Iv(e):e}function Xf(n){const e=vc(n.mapValue.fields.__local_write_time__.timestampValue);return new Nn(e.seconds,e.nanos)}class JE{constructor(e,t,r,s,u,l,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class Ec{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ec("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ec&&e.projectId===this.projectId&&e.database===this.database}}function ep(n){return null==n}function Zm(n){return 0===n&&1/n==-1/0}function TD(n){return"number"==typeof n&&Number.isInteger(n)&&!Zm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ul={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bv={nullValue:"NULL_VALUE"};function Ic(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Km(n)?4:yh(n)?9007199254740991:10:st()}function cs(n,e){if(n===e)return!0;const t=Ic(n);if(t!==Ic(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xf(n).isEqual(Xf(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=vc(r.timestampValue),l=vc(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,wc(n.bytesValue).isEqual(wc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ar(r.geoPointValue.latitude)===ar(s.geoPointValue.latitude)&&ar(r.geoPointValue.longitude)===ar(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ar(r.integerValue)===ar(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=ar(r.doubleValue),l=ar(s.doubleValue);return u===l?Zm(u)===Zm(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Fl(n.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(YE(u)!==YE(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!cs(u[m],l[m])))return!1;return!0}(n,e);default:return st()}var s}function tp(n,e){return void 0!==(n.values||[]).find(t=>cs(t,e))}function bc(n,e){if(n===e)return 0;const t=Ic(n),r=Ic(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=ar(s.integerValue||s.doubleValue),m=ar(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return Cv(n.timestampValue,e.timestampValue);case 4:return Cv(Xf(n),Xf(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=wc(s),m=wc(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let v=0;v<l.length&&v<m.length;v++){const I=Nt(l[v],m[v]);if(0!==I)return I}return Nt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Nt(ar(s.latitude),ar(u.latitude));return 0!==l?l:Nt(ar(s.longitude),ar(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let v=0;v<l.length&&v<m.length;++v){const I=bc(l[v],m[v]);if(I)return I}return Nt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Ul.mapValue&&u===Ul.mapValue)return 0;if(s===Ul.mapValue)return 1;if(u===Ul.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),v=u.fields||{},I=Object.keys(v);m.sort(),I.sort();for(let A=0;A<m.length&&A<I.length;++A){const M=Nt(m[A],I[A]);if(0!==M)return M;const L=bc(l[m[A]],v[I[A]]);if(0!==L)return L}return Nt(m.length,I.length)}(n.mapValue,e.mapValue);default:throw st()}}function Cv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=vc(n),r=vc(e),s=Nt(t.seconds,r.seconds);return 0!==s?s:Nt(t.nanos,r.nanos)}function aa(n){return Dv(n)}function Dv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=vc(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?wc(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=Dv(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${Dv(r.fields[m])}`;return u+"}"}(n.mapValue):st();var e}function Bl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Tv(n){return!!n&&"integerValue"in n}function np(n){return!!n&&"arrayValue"in n}function XE(n){return!!n&&"nullValue"in n}function Sv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ym(n){return!!n&&"mapValue"in n}function rp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Co(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yh(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function SD(n){return"nullValue"in n?bv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Bl(Ec.empty(),je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function eI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Bl(Ec.empty(),je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ul:st()}function tI(n,e){const t=bc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Av(n,e){const t=bc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Xr{constructor(e){this.value=e}static empty(){return new Xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ym(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rp(t)}setAll(e){let t=Wn.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=rp(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Ym(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Ym(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Co(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Xr(rp(this.value))}}function xv(n){const e=[];return Co(n.fields,(t,r)=>{const s=new Wn([t]);if(Ym(r)){const u=xv(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new us(e)}class Tn{constructor(e,t,r,s,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=l}static newInvalidDocument(e){return new Tn(e,0,Dt.min(),Dt.min(),Xr.empty(),0)}static newFoundDocument(e,t,r){return new Tn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new Tn(e,2,t,Dt.min(),Xr.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Dt.min(),Xr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mv{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.ht=null}}function nI(n,e=null,t=[],r=[],s=null,u=null,l=null){return new Mv(n,e,t,r,s,u,l)}function Cc(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+aa(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ep(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>aa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>aa(r)).join(",")),e.ht=t}return e.ht}function ip(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!PD(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!cs(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rv(n.startAt,e.startAt)&&Rv(n.endAt,e.endAt)}function Qm(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Jm(n,e){return n.filters.filter(t=>t instanceof Hr&&t.field.isEqual(e))}function Xm(n,e,t){let r=bv,s=!0;for(const u of Jm(n,e)){let l=bv,m=!0;switch(u.op){case"<":case"<=":l=SD(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=bv}tI({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];tI({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function iI(n,e,t){let r=Ul,s=!0;for(const u of Jm(n,e)){let l=Ul,m=!0;switch(u.op){case">=":case">":l=eI(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Ul}Av({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];Av({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class Hr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new AD(e,t,r):"array-contains"===t?new RD(e,r):"in"===t?new ND(e,r):"not-in"===t?new kD(e,r):"array-contains-any"===t?new OD(e,r):new Hr(e,t,r)}static lt(e,t,r){return"in"===t?new xD(e,r):new MD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(bc(t,this.value)):null!==t&&Ic(this.value)===Ic(t)&&this.ft(bc(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class AD extends Hr{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.ft(t)}}class xD extends Hr{constructor(e,t){super(e,"in",t),this.keys=sI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class MD extends Hr{constructor(e,t){super(e,"not-in",t),this.keys=sI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class RD extends Hr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return np(t)&&tp(t.arrayValue,this.value)}}class ND extends Hr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tp(this.value.arrayValue,t)}}class kD extends Hr{constructor(e,t){super(e,"not-in",t)}matches(e){if(tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tp(this.value.arrayValue,t)}}class OD extends Hr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!np(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tp(this.value.arrayValue,r))}}class su{constructor(e,t){this.position=e,this.inclusive=t}}class jl{constructor(e,t="asc"){this.field=e,this.dir=t}}function PD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function oI(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?je.comparator(je.fromName(l.referenceValue),t.key):bc(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Rv(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cs(n.position[t],e.position[t]))return!1;return!0}class ou{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=v,this._t=null,this.wt=null}}function aI(n,e,t,r,s,u,l,m){return new ou(n,e,t,r,s,u,l,m)}function _h(n){return new ou(n)}function ey(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function sp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ty(n){for(const e of n.filters)if(e.dt())return e.field;return null}function op(n){return null!==n.collectionGroup}function vh(n){const e=qe(n);if(null===e._t){e._t=[];const t=ty(e),r=sp(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new jl(t)),e._t.push(new jl(Wn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new jl(Wn.keyField(),u))}}}return e._t}function Ti(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=nI(e.path,e.collectionGroup,vh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of vh(e))t.push(new jl(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new su(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new su(e.startAt.position,e.startAt.inclusive):null;e.wt=nI(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function wh(n,e,t){return new ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ap(n,e){return ip(Ti(n),Ti(e))&&n.limitType===e.limitType}function Nv(n){return`${Cc(Ti(n))}|lt:${n.limitType}`}function Dc(n){return`Query(target=${function rI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${aa(r.value)}`;var r}).join(", ")}]`),ep(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>aa(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>aa(t)).join(",")),`Target(${e})`}(Ti(n))}; limitType=${n.limitType})`}function ny(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):je.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=oI(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,vh(t),r)||t.endAt&&!function(s,u,l){const m=oI(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,vh(t),r)));var t,r}function uI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FD(n){return(e,t)=>{let r=!1;for(const s of vh(n)){const u=cI(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function cI(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),v=l.data.field(s);return null!==m&&null!==v?bc(m,v):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function ry(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zm(e)?"-0":e}}function lI(n){return{integerValue:""+n}}function iy(n,e){return TD(e)?lI(e):ry(n,e)}class sy{constructor(){this._=void 0}}function dI(n,e,t){return n instanceof Hl?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Tc?Pv(n,e):n instanceof $l?hI(n,e):function(r,s){const u=Ov(r,s),l=fI(u)+fI(r.yt);return Tv(u)&&Tv(r.yt)?lI(l):ry(r.It,l)}(n,e)}function kv(n,e,t){return n instanceof Tc?Pv(n,e):n instanceof $l?hI(n,e):t}function Ov(n,e){return n instanceof Eh?Tv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Hl extends sy{}class Tc extends sy{constructor(e){super(),this.elements=e}}function Pv(n,e){const t=Fv(e);for(const r of n.elements)t.some(s=>cs(s,r))||t.push(r);return{arrayValue:{values:t}}}class $l extends sy{constructor(e){super(),this.elements=e}}function hI(n,e){let t=Fv(e);for(const r of n.elements)t=t.filter(s=>!cs(s,r));return{arrayValue:{values:t}}}class Eh extends sy{constructor(e,t){super(),this.It=e,this.yt=t}}function fI(n){return ar(n.integerValue||n.doubleValue)}function Fv(n){return np(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class oy{constructor(e,t){this.field=e,this.transform=t}}class LD{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Vv{}function gI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new bh(n.key,Vn.none()):new Ih(n.key,n.data,Vn.none());{const t=n.data,r=Xr.empty();let s=new mn(Wn.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new au(n.key,r,new us(s.toArray()),Vn.none())}}function VD(n,e,t){n instanceof Ih?function(r,s,u){const l=r.value.clone(),m=_I(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof au?function(r,s,u){if(!Lv(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=_I(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(yI(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function up(n,e,t,r){return n instanceof Ih?function(s,u,l,m){if(!Lv(s.precondition,u))return l;const v=s.value.clone(),I=vI(s.fieldTransforms,m,u);return v.setAll(I),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof au?function(s,u,l,m){if(!Lv(s.precondition,u))return l;const v=vI(s.fieldTransforms,m,u),I=u.data;return I.setAll(yI(s)),I.setAll(v),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,Lv(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function mI(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=Ov(r.transform,s||null);null!=u&&(null===t&&(t=Xr.empty()),t.set(r.field,u))}return t||null}function Uv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Fl(t,r,(s,u)=>function pI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Tc&&r instanceof Tc||t instanceof $l&&r instanceof $l?Fl(t.elements,r.elements,cs):t instanceof Eh&&r instanceof Eh?cs(t.yt,r.yt):t instanceof Hl&&r instanceof Hl);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ih extends Vv{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class au extends Vv{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function yI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _I(n,e,t){const r=new Map;At(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,kv(l,m,t[s]))}return r}function vI(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,dI(u,l,e))}return r}class bh extends Vv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bv extends Vv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class cp{constructor(e){this.count=e}}var fr,en;function jv(n){switch(n){default:return st();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function Hv(n){if(void 0===n)return sr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case fr.OK:return ue.OK;case fr.CANCELLED:return ue.CANCELLED;case fr.UNKNOWN:return ue.UNKNOWN;case fr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case fr.INTERNAL:return ue.INTERNAL;case fr.UNAVAILABLE:return ue.UNAVAILABLE;case fr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case fr.NOT_FOUND:return ue.NOT_FOUND;case fr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case fr.ABORTED:return ue.ABORTED;case fr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case fr.DATA_LOSS:return ue.DATA_LOSS;default:return st()}}(en=fr||(fr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class uu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return QE(this.inner)}size(){return this.innerSize}}const wI=new or(je.comparator);function $i(){return wI}const UD=new or(je.comparator);function Ch(...n){let e=UD;for(const t of n)e=e.insert(t.key,t);return e}function EI(n){let e=UD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ua(){return lp()}function II(){return lp()}function lp(){return new uu(n=>n.toString(),(n,e)=>n.isEqual(e))}const dp=new or(je.comparator),BD=new mn(je.comparator);function Bt(...n){let e=BD;for(const t of n)e=e.add(t);return e}const ca=new mn(Nt);function ay(){return ca}class Gl{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Gl(Dt.min(),s,ay(),$i(),Bt())}}class cu{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cu(r,t,Bt(),Bt(),Bt())}}class uy{constructor(e,t,r,s){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=s}}class bI{constructor(e,t){this.targetId=e,this.At=t}}class CI{constructor(e,t,r=Kn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class hp{constructor(){this.Rt=0,this.bt=TI(),this.Pt=Kn.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Bt(),t=Bt(),r=Bt();return this.bt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:st()}}),new cu(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=TI()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class cy{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=$i(),this.qt=DI(),this.Kt=new mn(Nt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,r=e.At.count,s=this.Xt(t);if(s){const u=s.target;if(Qm(u))if(0===r){const l=new je(u.path);this.jt(t,l,Tn.newNoDocument(l,Dt.min()))}else At(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,l)=>{const m=this.Xt(l);if(m){if(u.current&&Qm(m.target)){const v=new je(m.target.path);null!==this.Ut.get(v)||this.ee(l,v)||this.jt(l,v,Tn.newNoDocument(v,e))}u.Dt&&(t.set(l,u.xt()),u.Nt())}});let r=Bt();this.qt.forEach((u,l)=>{let m=!0;l.forEachWhile(v=>{const I=this.Xt(v);return!I||2===I.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const s=new Gl(e,t,this.Kt,this.Ut,r);return this.Ut=$i(),this.qt=DI(),this.Kt=new mn(Nt),s}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new hp,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new mn(Nt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new hp),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function DI(){return new or(je.comparator)}function TI(){return new or(je.comparator)}const SI={asc:"ASCENDING",desc:"DESCENDING"},AI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class $v{constructor(e,t){this.databaseId=e,this.gt=t}}function Dh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xI(n,e){return n.gt?e.toBase64():e.toUint8Array()}function jD(n,e){return Dh(n,e.toTimestamp())}function ei(n){return At(!!n),Dt.fromTimestamp(function(e){const t=vc(e);return new Nn(t.seconds,t.nanos)}(n))}function fp(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ly(n){const e=Xt.fromString(n);return At(Kv(e)),e}function Th(n,e){return fp(n.databaseId,e.path)}function Ws(n,e){const t=ly(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(RI(t))}function pp(n,e){return fp(n.databaseId,e)}function MI(n){const e=ly(n);return 4===e.length?Xt.emptyPath():RI(e)}function gp(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RI(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function NI(n,e,t){return{name:Th(n,e),fields:t.value.mapValue.fields}}function Gv(n,e,t){const r=Ws(n,e.name),s=ei(e.updateTime),u=new Xr({mapValue:{fields:e.fields}}),l=Tn.newFoundDocument(r,s,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function mp(n,e){let t;if(e instanceof Ih)t={update:NI(n,e.key,e.value)};else if(e instanceof bh)t={delete:Th(n,e.key)};else if(e instanceof au)t={update:NI(n,e.key,e.data),updateMask:ex(e.fieldMask)};else{if(!(e instanceof Bv))return st();t={verify:Th(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Hl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Tc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof $l)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Eh)return{fieldPath:u.field.canonicalString(),increment:l.yt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:jD(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:st()),t;var s}function dy(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Vn.updateTime(ei(s.updateTime)):void 0!==s.exists?Vn.exists(s.exists):Vn.none():Vn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(At("REQUEST_TIME"===l.setToServerValue),m=new Hl):"appendMissingElements"in l?m=new Tc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new $l(l.removeAllFromArray.values||[]):"increment"in l?m=new Eh(u,l.increment):st();const v=Wn.fromServerFormat(l.fieldPath);return new oy(v,m)}(n,s)):[];var s;if(e.update){const s=Ws(n,e.update.name),u=new Xr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new us((e.updateMask.fieldPaths||[]).map(I=>Wn.fromServerFormat(I)));return new au(s,u,l,t,r)}return new Ih(s,u,t,r)}if(e.delete){const s=Ws(n,e.delete);return new bh(s,t)}if(e.verify){const s=Ws(n,e.verify);return new Bv(s,t)}return st()}function PI(n,e){return{documents:[pp(n,e.path)]}}function hy(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=pp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=pp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(v){if(0===v.length)return;const I=v.map(A=>function(M){if("=="===M.op){if(Sv(M.value))return{unaryFilter:{field:Do(M.field),op:"IS_NAN"}};if(XE(M.value))return{unaryFilter:{field:Do(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(Sv(M.value))return{unaryFilter:{field:Do(M.field),op:"IS_NOT_NAN"}};if(XE(M.value))return{unaryFilter:{field:Do(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Do(M.field),op:Si(M.op),value:M.value}}}(A));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(v){if(0!==v.length)return v.map(I=>{return{field:Do((A=I).field),direction:FI(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(I=e.limit,n.gt||ep(I)?I:{value:I});var I,m,v;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function qv(n){let e=MI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){At(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=Wv(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new jl(Sh((M=A).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let m=null;t.limit&&(m=function(A){let M;return M="object"==typeof A?A.value:A,ep(M)?null:M}(t.limit));let v=null;var A;t.startAt&&(v=new su((A=t.startAt).values||[],!!A.before));let I=null;return t.endAt&&(I=function(A){return new su(A.values||[],!A.before)}(t.endAt)),aI(e,s,l,u,m,"F",v,I)}function Wv(n){return n?void 0!==n.unaryFilter?[XA(n)]:void 0!==n.fieldFilter?[$D(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Wv(e)).reduce((e,t)=>e.concat(t)):st():[]}function FI(n){return SI[n]}function Si(n){return AI[n]}function Do(n){return{fieldPath:n.canonicalString()}}function Sh(n){return Wn.fromServerFormat(n.fieldPath)}function $D(n){return Hr.create(Sh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function XA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Sh(n.unaryFilter.field);return Hr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Sh(n.unaryFilter.field);return Hr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Sh(n.unaryFilter.field);return Hr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Sh(n.unaryFilter.field);return Hr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function ex(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Kv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function hi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=LI(e)),e=yp(n.get(t),e);return LI(e)}function yp(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function LI(n){return n+"\x01\x01"}function Ks(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&st(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let v;0===s.length?v=m:(s+=m,v=s,s=""),r.push(v);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:st()}u=l+2}return new Xt(r)}const VI=["userId","batchId"];function _p(n,e){return[n,hi(e)]}function UI(n,e,t){return[n,hi(e),t]}const GD={},zD=["prefixPath","collectionGroup","readTime","documentId"],Zv=["prefixPath","collectionGroup","documentId"],BI=["collectionGroup","readTime","prefixPath","documentId"],jI=["canonicalId","targetId"],fy=["targetId","path"],Yv=["path","targetId"],tx=["collectionId","parent"],HI=["indexId","uid"],qD=["uid","sequenceNumber"],$I=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ah=["indexId","uid","orderedDocumentKey"],WD=["userId","collectionPath","documentId"],GI=["userId","collectionPath","largestBatchId"],Qv=["userId","collectionGroup","largestBatchId"],KD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZD=[...KD,"documentOverlays"],YD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zI=YD,QD=[...zI,"indexConfiguration","indexState","indexEntries"];class Jv extends KE{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function xr(n,e){const t=qe(n);return cn.M(t.ie,e)}class py{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&VD(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=up(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=up(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=II();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const v=gI(l,m);null!==v&&r.set(s.key,v),l.isValidDocument()||l.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&Fl(this.mutations,e.mutations,(t,r)=>Uv(t,r))&&Fl(this.baseMutations,e.baseMutations,(t,r)=>Uv(t,r))}}class Xv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){At(e.mutations.length===r.length);let s=dp;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new Xv(e,t,r,s)}}class gy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lu{constructor(e,t,r,s,u=Dt.min(),l=Dt.min(),m=Kn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class qI{constructor(e){this.re=e}}function ew(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:my(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Th(s=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Dh(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Sc(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Sc(e.version)}}var s,u;return r}function my(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Sc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ac(n){const e=new Nn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function xc(n,e){const t=(e.baseMutations||[]).map(u=>dy(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>dy(n.re,u)),s=Nn.fromMillis(e.localWriteTimeMs);return new py(e.batchId,s,t,r)}function xh(n){const e=Ac(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ac(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var s;return void 0!==n.query.documents?(At(1===(s=n.query).documents.length),r=Ti(_h(MI(s.documents[0])))):r=Ti(qv(n.query)),new lu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Kn.fromBase64String(n.resumeToken))}function WI(n,e){const t=Sc(e.snapshotVersion),r=Sc(e.lastLimboFreeSnapshotVersion);let s;s=Qm(e.target)?PI(n.re,e.target):hy(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Cc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function tw(n){const e=qv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wh(e,e.limit,"L"):e}function KI(n,e){return new gy(e.largestBatchId,dy(n.re,e.overlayMutation))}function nw(n,e){const t=e.path.lastSegment();return[n,hi(e.path.popLast()),t]}function XD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Sc(r.readTime),documentKey:hi(r.documentKey.path),largestBatchId:r.largestBatchId}}class nx{getBundleMetadata(e,t){return eT(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Ac(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return eT(e).put({bundleId:(r=t).id,createTime:Sc(ei(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return tT(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:tw(s.bundledQuery),readTime:Ac(s.readTime)};var s})}saveNamedQuery(e,t){return tT(e).put({name:(r=t).name,readTime:Sc(ei(r.readTime)),bundledQuery:r.bundledQuery});var r}}function eT(n){return xr(n,"bundles")}function tT(n){return xr(n,"namedQueries")}class rw{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new rw(e,t.uid||"")}getOverlay(e,t){return yy(e).get(nw(this.userId,t)).next(r=>r?KI(this.It,r):null)}getOverlays(e,t){const r=ua();return re.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new gy(t,l);s.push(this.ue(e,m))}),re.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(hi(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(yy(e).Y("collectionPathOverlayIndex",m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const s=ua(),u=hi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return yy(e).W("collectionPathOverlayIndex",l).next(m=>{for(const v of m){const I=KI(this.It,v);s.set(I.getKey(),I)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=ua();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yy(e).Z({index:"collectionGroupOverlayIndex",range:m},(v,I,A)=>{const M=KI(this.It,I);u.size()<s||M.largestBatchId===l?(u.set(M.getKey(),M),l=M.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return yy(e).put(function(r,s,u){const[l,m,v]=nw(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:mp(r.re,u.mutation)}}(this.It,this.userId,t))}}function yy(n){return xr(n,"documentOverlays")}class Mh{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Zm(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(wc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?yh(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):st()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const s of Object.keys(r))this._e(s,t),this.ae(r[s],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const s of r)this.ae(s,t)}ge(e,t){this.le(t,37),je.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function rx(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function vp(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=rx(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Mh.Te=new Mh;class ix{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),r=vp(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),r=vp(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class ZI{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class _y{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Rh{constructor(){this.Be=new ix,this.Le=new ZI(this.Be),this.Ue=new _y(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Mc{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Mc(this.indexId,this.documentKey,this.arrayValue,r)}}function Nh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=vy(n.arrayValue,e.arrayValue),0!==t?t:(t=vy(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function vy(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class YI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=mv(e);if(void 0!==t&&!this.ze(t))return!1;const r=qs(e);let s=0,u=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.je){const l=r[s];if(!this.He(this.je,l)||!this.Je(this.Ge[u++],l))return!1;++s}for(;s<r.length;++s){const l=r[s];if(u>=this.Ge.length||!this.Je(this.Ge[u++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class nT{constructor(){this.Ye=new wy}addToCollectionParentIndex(e,t){return this.Ye.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ot.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ot.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class wy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new mn(Xt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new mn(Xt.comparator)).toArray()}}const iw=new Uint8Array(0);class sx{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new wy,this.Ze=new uu(r=>Cc(r),(r,s)=>ip(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:hi(s)};return QI(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[gv(t),""],!1,!0);return QI(e).W(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Ks(l.parent))}return r})}addFieldIndex(e,t){const r=zl(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=Ep(e);return u.next(m=>{l.put(XD(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=zl(e),s=Ep(e),u=wp(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=wp(e);let s=!0;const u=new Map;return re.forEach(this.tn(t),l=>this.en(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=Bt();const m=[];return re.forEach(u,(v,I)=>{var A;ke("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(ht=>`${ht.fieldPath}:${ht.kind}`).join(",")}`} to execute ${Cc(t)}`);const M=function(ht,ut){const Tt=mv(ut);if(void 0===Tt)return null;for(const Ot of Jm(ht,Tt.fieldPath))switch(Ot.op){case"array-contains-any":return Ot.value.arrayValue.values||[];case"array-contains":return[Ot.value]}return null}(I,v),L=function(ht,ut){const Tt=new Map;for(const Ot of qs(ut))for(const pr of Jm(ht,Ot.fieldPath))switch(pr.op){case"==":case"in":Tt.set(Ot.fieldPath.canonicalString(),pr.value);break;case"not-in":case"!=":return Tt.set(Ot.fieldPath.canonicalString(),pr.value),Array.from(Tt.values())}return null}(I,v),H=function(ht,ut){const Tt=[];let Ot=!0;for(const pr of qs(ut)){const pu=0===pr.kind?Xm(ht,pr.fieldPath,ht.startAt):iI(ht,pr.fieldPath,ht.startAt);Tt.push(pu.value),Ot&&(Ot=pu.inclusive)}return new su(Tt,Ot)}(I,v),Z=function(ht,ut){const Tt=[];let Ot=!0;for(const pr of qs(ut)){const pu=0===pr.kind?iI(ht,pr.fieldPath,ht.endAt):Xm(ht,pr.fieldPath,ht.endAt);Tt.push(pu.value),Ot&&(Ot=pu.inclusive)}return new su(Tt,Ot)}(I,v),Ce=this.nn(v,I,H),be=this.nn(v,I,Z),Ye=this.sn(v,I,L),yt=this.rn(v.indexId,M,Ce,H.inclusive,be,Z.inclusive,Ye);return re.forEach(yt,ht=>r.J(ht,t.limit).next(ut=>{ut.forEach(Tt=>{const Ot=je.fromSegments(Tt.documentKey);l.has(Ot)||(l=l.add(Ot),m.push(Ot))})}))}).next(()=>m)}return re.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,s,u,l,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),I=v/(null!=t?t.length:1),A=[];for(let M=0;M<v;++M){const L=t?this.on(t[M/I]):iw,H=this.un(e,L,r[M%I],s),Z=this.cn(e,L,u[M%I],l),Ce=m.map(be=>this.un(e,L,be,!0));A.push(...this.createRange(H,Z,Ce))}return A}un(e,t,r,s){const u=new Mc(e,je.empty(),t,r);return s?u:u.Ke()}cn(e,t,r,s){const u=new Mc(e,je.empty(),t,r);return s?u.Ke():u}en(e,t){const r=new YI(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.We(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;return re.forEach(this.tn(t),s=>this.en(e,s).next(u=>{u?0!==r&&u.fields.length<function(l){let m=new mn(Wn.comparator),v=!1;for(const I of l.filters){const A=I;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:m=m.add(A.field))}for(const I of l.orderBy)I.field.isKeyField()||(m=m.add(I.field));return m.size+(v?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Rh;for(const s of qs(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.qe(s.kind);Mh.Te.ce(u,l)}return r.$e()}on(e){const t=new Rh;return Mh.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Rh;return Mh.Te.ce(Bl(this.databaseId,t),r.qe(function(s){const u=qs(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let s=[];s.push(new Rh);let u=0;for(const l of qs(e)){const m=r[u++];for(const v of s)if(this.ln(t,l.fieldPath)&&np(m))s=this.fn(s,l,m);else{const I=v.qe(l.kind);Mh.Te.ce(m,I)}}return this.dn(s)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const v=new Rh;v.seed(m.$e()),Mh.Te.ce(l,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Hr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=zl(e),s=Ep(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return re.forEach(u,m=>s.get([m.indexId,this.uid]).next(v=>{l.push(function(I,A){const M=A?new gh(A.sequenceNumber,new ot(Ac(A.readTime),new je(Ks(A.documentKey)),A.largestBatchId)):gh.empty(),L=I.fields.map(([H,Z])=>new ph(Wn.fromServerFormat(H),Z));return new zm(I.indexId,I.collectionGroup,L,M)}(m,v))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Nt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=zl(e),u=Ep(e);return this._n(e).next(l=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,v=>u.put(XD(v.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?re.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),re.forEach(m,v=>this.wn(e,s,v).next(I=>{const A=this.mn(u,v);return I.isEqual(A)?re.resolve():this.gn(e,u,v,I,A)}))))})}yn(e,t,r,s){return wp(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,s){return wp(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=wp(e);let u=new mn(Nh);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,m)=>{u=u.add(new Mc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new mn(Nh);const s=this.an(t,e);if(null==s)return r;const u=mv(t);if(null!=u){const l=e.data.field(u.fieldPath);if(np(l))for(const m of l.arrayValue.values||[])r=r.add(new Mc(t.indexId,e.key,this.on(m),s))}else r=r.add(new Mc(t.indexId,e.key,iw,s));return r}gn(e,t,r,s,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,v,I,A,M){const L=m.getIterator(),H=v.getIterator();let Z=Vl(L),Ce=Vl(H);for(;Z||Ce;){let be=!1,Ye=!1;if(Z&&Ce){const yt=I(Z,Ce);yt<0?Ye=!0:yt>0&&(be=!0)}else null!=Z?Ye=!0:be=!0;be?(A(Ce),Ce=Vl(H)):Ye?(M(Z),Z=Vl(L)):(Z=Vl(L),Ce=Vl(H))}}(s,u,Nh,m=>{l.push(this.yn(e,t,r,m))},m=>{l.push(this.pn(e,t,r,m))}),re.waitFor(l)}_n(e){let t=1;return Ep(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Nh(l,m)).filter((l,m,v)=>!m||0!==Nh(l,v[m-1]));const s=[];s.push(e);for(const l of r){const m=Nh(l,e),v=Nh(l,t);if(0===m)s[0]=e.Ke();else if(m>0&&v<0)s.push(l),s.push(l.Ke());else if(v>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2)u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,iw,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,iw,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rT)}getMinOffset(e,t){return re.mapArray(this.tn(t),r=>this.en(e,r).next(s=>s||st())).next(rT)}}function QI(n){return xr(n,"collectionParents")}function wp(n){return xr(n,"indexEntries")}function zl(n){return xr(n,"indexConfiguration")}function Ep(n){return xr(n,"indexState")}function rT(n){At(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;_v(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ot(e.readTime,e.documentKey,t)}const iT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ls{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ls(e,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function JI(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const v=r.Z({range:l},(A,M,L)=>(m++,L.delete()));u.push(v.next(()=>{At(1===m)}));const I=[];for(const A of t.mutations){const M=UI(e,A.key.path,t.batchId);u.push(s.delete(M)),I.push(A.key)}return re.waitFor(u).next(()=>I)}function Ey(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}ls.DEFAULT_COLLECTION_PERCENTILE=10,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ls.DEFAULT=new ls(41943040,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ls.DISABLED=new ls(-1,0,0);class Iy{constructor(e,t,r,s){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,t,r,s){At(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Iy(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rc(e).Z({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=ql(e),l=Rc(e);return l.add({}).next(m=>{At("number"==typeof m);const v=new py(m,t,r,s),I=function(L,H,Z){const Ce=Z.baseMutations.map(Ye=>mp(L.re,Ye)),be=Z.mutations.map(Ye=>mp(L.re,Ye));return{userId:H,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:Ce,mutations:be}}(this.It,this.userId,v),A=[];let M=new mn((L,H)=>Nt(L.canonicalString(),H.canonicalString()));for(const L of s){const H=UI(this.userId,L.key.path,m);M=M.add(L.key.path.popLast()),A.push(l.put(I)),A.push(u.put(H,GD))}return M.forEach(L=>{A.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[m]=v.keys()}),re.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return Rc(e).get(t).next(r=>r?(At(r.userId===this.userId),xc(this.It,r)):null)}Tn(e,t){return this.In[t]?re.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Rc(e).Z({index:"userMutationsIndex",range:s},(l,m,v)=>{m.userId===this.userId&&(At(m.batchId>=r),u=xc(this.It,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Rc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rc(e).W("userMutationsIndex",t).next(r=>r.map(s=>xc(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_p(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return ql(e).Z({range:s},(l,m,v)=>{const[I,A,M]=l,L=Ks(A);if(I===this.userId&&t.path.isEqual(L))return Rc(e).get(M).next(H=>{if(!H)throw st();At(H.userId===this.userId),u.push(xc(this.It,H))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Nt);const s=[];return t.forEach(u=>{const l=_p(this.userId,u.path),m=IDBKeyRange.lowerBound(l),v=ql(e).Z({range:m},(I,A,M)=>{const[L,H,Z]=I,Ce=Ks(H);L===this.userId&&u.path.isEqual(Ce)?r=r.add(Z):M.done()});s.push(v)}),re.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=_p(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new mn(Nt);return ql(e).Z({range:l},(v,I,A)=>{const[M,L,H]=v,Z=Ks(L);M===this.userId&&r.isPrefixOf(Z)?Z.length===s&&(m=m.add(H)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Rc(e).get(u).next(l=>{if(null===l)throw st();At(l.userId===this.userId),r.push(xc(this.It,l))}))}),re.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return JI(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),re.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return ql(e).Z({range:r},(u,l,m)=>{if(u[0]===this.userId){const v=Ks(u[1]);s.push(v)}else m.done()}).next(()=>{At(0===s.length)})})}containsKey(e,t){return sT(e,this.userId,t)}Rn(e){return sw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sT(n,e,t){const r=_p(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return ql(n).Z({range:u,X:!0},(m,v,I)=>{const[A,M,L]=m;A===e&&M===s&&(l=!0),I.done()}).next(()=>l)}function Rc(n){return xr(n,"mutations")}function ql(n){return xr(n,"documentMutations")}function sw(n){return xr(n,"mutationQueues")}class kh{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new kh(0)}static vn(){return new kh(-1)}}class To{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new kh(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Dt.fromTimestamp(new Nn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Oh(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Oh(e).Z((l,m)=>{const v=xh(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(s++,u.push(this.removeTargetData(e,v)))}).next(()=>re.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Oh(e).Z((r,s)=>{const u=xh(s);t(u)})}Vn(e){return by(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}Sn(e,t){return by(e).put("targetGlobalKey",t)}Dn(e,t){return Oh(e).put(WI(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Cc(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Oh(e).Z({range:s,index:"queryTargetsIndex"},(l,m,v)=>{const I=xh(m);ip(t,I.target)&&(u=I,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Nc(e);return t.forEach(l=>{const m=hi(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),re.waitFor(s)}removeMatchingKeys(e,t,r){const s=Nc(e);return re.forEach(t,u=>{const l=hi(u.path);return re.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Nc(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Nc(e);let u=Bt();return s.Z({range:r,X:!0},(l,m,v)=>{const I=Ks(l[1]),A=new je(I);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=hi(t.path),s=IDBKeyRange.bound([r],[gv(r)],!1,!0);let u=0;return Nc(e).Z({index:"documentTargetsIndex",X:!0,range:s},([l,m],v,I)=>{0!==l&&(u++,I.done())}).next(()=>u>0)}se(e,t){return Oh(e).get(t).next(r=>r?xh(r):null)}}function Oh(n){return xr(n,"targets")}function by(n){return xr(n,"targetGlobal")}function Nc(n){return xr(n,"targetDocuments")}function ds([n,e],[t,r]){const s=Nt(n,t);return 0===s?Nt(e,r):s}class oT{constructor(e){this.xn=e,this.buffer=new mn(ds),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ds(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ow{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){iu(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield as(r)}yield t.Fn(3e5)}))}}class aT{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Hi.at);const r=new oT(t);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(iT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iT):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,s,u,l,m,v,I;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),s=this.params.maximumSequenceNumbersToCollect):s=M,l=Date.now(),this.nthSequenceNumber(e,s))).next(M=>(r=M,m=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(I=Date.now(),Gm()<=Ml.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${M} documents in `+(I-v)+`ms\nTotal Duration: ${I-A}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:M})))}}class uT{constructor(e,t){this.db=e,this.garbageCollector=new aT(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return Ph(e,r)}removeReference(e,t,r){return Ph(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ph(e,t)}Gn(e,t){return function(r,s){let u=!1;return sw(r).tt(l=>sT(r,l,s).next(m=>(m&&(u=!0),re.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(l,m)=>{if(m<=t){const v=this.Gn(e,l).next(I=>{if(!I)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),Nc(e).delete([0,hi(l.path)])))});s.push(v)}}).next(()=>re.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ph(e,t)}Kn(e,t){const r=Nc(e);let s,u=Hi.at;return r.Z({index:"documentTargetsIndex"},([l,m],{path:v,sequenceNumber:I})=>{0===l?(u!==Hi.at&&t(new je(Ks(s)),u),u=I,s=v):u=Hi.at}).next(()=>{u!==Hi.at&&t(new je(Ks(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ph(n,e){return Nc(n).put((r=n.currentSequenceNumber,{targetId:0,path:hi(e.path),sequenceNumber:r}));var r}class aw{constructor(){this.changes=new uu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XI{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wl(e).put(r)}removeEntry(e,t,r){return Wl(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],my(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return Wl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Fh(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return Wl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Fh(t))},(s,u)=>{r={document:this.jn(t,u),size:Ey(u)}}).next(()=>r)}getEntries(e,t){let r=$i();return this.zn(e,t,(s,u)=>{const l=this.jn(s,u);r=r.insert(s,l)}).next(()=>r)}Hn(e,t){let r=$i(),s=new or(je.comparator);return this.zn(e,t,(u,l)=>{const m=this.jn(u,l);r=r.insert(u,m),s=s.insert(u,Ey(l))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return re.resolve();let s=new mn(Cy);t.forEach(v=>s=s.add(v));const u=IDBKeyRange.bound(Fh(s.first()),Fh(s.last())),l=s.getIterator();let m=l.getNext();return Wl(e).Z({index:"documentKeyIndex",range:u},(v,I,A)=>{const M=je.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;m&&Cy(m,M)<0;)r(m,null),m=l.getNext();m&&m.isEqual(M)&&(r(m,I),m=l.hasNext()?l.getNext():null),m?A.j(Fh(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),my(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wl(e).W(IDBKeyRange.bound(s,u,!0)).next(l=>{let m=$i();for(const v of l){const I=this.jn(je.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);m=m.insert(I.key,I)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=$i();const l=nb(t,r),m=nb(t,ot.max());return Wl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(v,I,A)=>{const M=this.jn(je.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(M.key,M),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new tb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return uw(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}Qn(e,t){return uw(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function JD(n,e){let t;if(e.document)t=Gv(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),s=Ac(e.noDocument.readTime);t=Tn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=je.fromSegments(e.unknownDocument.path),s=Ac(e.unknownDocument.version);t=Tn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Nn(r[0],r[1]);return Dt.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return Tn.newInvalidDocument(e)}}function eb(n){return new XI(n)}class tb extends aw{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new uu(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new mn((u,l)=>Nt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const v=ew(this.Yn.It,l);s=s.add(u.path.popLast()),r+=Ey(v)-m.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=ew(this.Yn.It,l.convertToNoDocument(Dt.min()));t.push(this.Yn.addEntry(e,u,v))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function uw(n){return xr(n,"remoteDocumentGlobal")}function Wl(n){return xr(n,"remoteDocumentsV14")}function Fh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nb(n,e){const t=e.documentKey.path.toArray();return[n,my(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Cy(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Nt(t[u],r[u]),s)return s;return s=Nt(t.length,r.length),s||(s=Nt(t[t.length-2],r[r.length-2]),s||Nt(t[t.length-1],r[r.length-1]))}class kc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cw{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&up(r.mutation,s,us.empty(),Nn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const s=ua();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=Ch();return u.forEach((m,v)=>{l=l.insert(m,v.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ua();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=$i();const l=lp(),m=lp();return t.forEach((v,I)=>{const A=r.get(I.key);s.has(I.key)&&(void 0===A||A.mutation instanceof au)?u=u.insert(I.key,I):void 0!==A&&(l.set(I.key,A.mutation.getFieldMask()),up(A.mutation,I,A.mutation.getFieldMask(),Nn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((I,A)=>l.set(I,A)),t.forEach((I,A)=>{var M;return m.set(I,new kc(A,null!==(M=l.get(I))&&void 0!==M?M:null))}),m))}recalculateAndSaveOverlays(e,t){const r=lp();let s=new or((l,m)=>l-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(v=>{const I=t.get(v);if(null===I)return;let A=r.get(v)||us.empty();A=m.applyToLocalView(I,A),r.set(v,A);const M=(s.get(m.batchId)||Bt()).add(v);s=s.insert(m.batchId,M)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),I=v.key,A=v.value,M=II();A.forEach(L=>{if(!u.has(L)){const H=gI(t.get(L),r.get(L));null!==H&&M.set(L,H),u=u.add(L)}}),l.push(this.documentOverlayCache.saveOverlays(e,I,M))}return re.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return je.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):op(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):re.resolve(ua());let m=-1,v=u;return l.next(I=>re.forEach(I,(A,M)=>(m<M.largestBatchId&&(m=M.largestBatchId),u.get(A)?re.resolve():this.getBaseDocument(e,A,M).next(L=>{v=v.insert(A,L)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,v,I,Bt())).next(A=>({batchId:m,changes:EI(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(r=>{let s=Ch();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Ch();return this.indexManager.getCollectionParents(e,s).next(l=>re.forEach(l,m=>{const v=(I=t,A=m.child(s),new ou(A,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(I=>{I.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,v)=>{const I=v.getKey();null===s.get(I)&&(s=s.insert(I,Tn.newInvalidDocument(I)))});let l=Ch();return s.forEach((m,v)=>{const I=u.get(m);void 0!==I&&up(I.mutation,v,us.empty(),Nn.now()),ny(t,v)&&(l=l.insert(m,v))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):re.resolve(Tn.newInvalidDocument(t))}}class lw{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:ei(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:tw(r.bundledQuery),readTime:ei(r.readTime)}),re.resolve();var r}}class du{constructor(){this.overlays=new or(je.comparator),this.es=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ua();return re.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ue(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const s=ua(),u=t.length+1,l=new je(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const v=m.getNext().value,I=v.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&v.largestBatchId>r&&s.set(v.getKey(),v)}return re.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new or((I,A)=>I-A);const l=this.overlays.getIterator();for(;l.hasNext();){const I=l.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let A=u.get(I.largestBatchId);null===A&&(A=ua(),u=u.insert(I.largestBatchId,A)),A.set(I.getKey(),I)}}const m=ua(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((I,A)=>m.set(I,A)),!(m.size()>=s)););return re.resolve(m)}ue(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new gy(t,r));let u=this.es.get(t);void 0===u&&(u=Bt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class dw{constructor(){this.ns=new mn(ti.ss),this.rs=new mn(ti.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ti(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ti(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new je(new Xt([])),r=new ti(t,e),s=new ti(t,e+1),u=[];return this.rs.forEachInRange([r,s],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new je(new Xt([])),r=new ti(t,e),s=new ti(t,e+1);let u=Bt();return this.rs.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new ti(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ti{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return je.comparator(e.key,t.key)||Nt(e._s,t._s)}static os(e,t){return Nt(e._s,t._s)||je.comparator(e.key,t.key)}}class cT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new mn(ti.ss)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const l=new py(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.gs=this.gs.add(new ti(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,t){return re.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ti(t,0),s=new ti(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],l=>{const m=this.ys(l._s);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Nt);return t.forEach(s=>{const u=new ti(s,0),l=new ti(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],m=>{r=r.add(m._s)})}),re.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const l=new ti(new je(u),0);let m=new mn(Nt);return this.gs.forEachWhile(v=>{const I=v.key.path;return!!r.isPrefixOf(I)&&(I.length===s&&(m=m.add(v._s)),!0)},l),re.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){At(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return re.forEach(t.mutations,s=>{const u=new ti(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ti(t,0),s=this.gs.firstAfterOrEqual(r);return re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return re.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lT{constructor(e){this.Es=e,this.docs=new or(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=$i();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Tn.newInvalidDocument(s))}),re.resolve(r)}getAllFromCollection(e,t,r){let s=$i();const u=new je(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:m,value:{document:v}}=l.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||_v(ID(v),r)<=0||(s=s.insert(v.key,v.mutableCopy()))}return re.resolve(s)}getAllFromCollectionGroup(e,t,r,s){st()}As(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dT(this)}getSize(e){return re.resolve(this.size)}}class dT extends aw{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class hT{constructor(e){this.persistence=e,this.Rs=new uu(t=>Cc(t),ip),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new dw,this.targetCount=0,this.vs=kh.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),re.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new kh(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Dn(t),re.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),re.waitFor(u).next(()=>s)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ps.containsKey(t))}}class hw{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Hi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new hT(this),this.indexManager=new nT,this.remoteDocumentCache=new lT(r=>this.referenceDelegate.xs(r)),this.It=new qI(t),this.Ns=new lw(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new du,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new cT(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const s=new ox(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Os(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ms(e,t){return re.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class ox extends KE{constructor(e){super(),this.currentSequenceNumber=e}}class Ip{constructor(e){this.persistence=e,this.Fs=new dw,this.$s=null}static Bs(e){return new Ip(e)}get Ls(){if(this.$s)return this.$s;throw st()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),re.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ls,r=>{const s=je.fromPath(r);return this.Us(e,s).next(u=>{u||t.removeEntry(s,Dt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return re.or([()=>re.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class fT{constructor(e){this.It=e}$(e,t,r,s){const u=new Ll("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VI,{unique:!0}),m.createObjectStore("documentMutations"),fw(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=re.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),fw(e)),l=l.next(()=>function(m){const v=m.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",I)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,v){return v.store("mutations").W().next(I=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VI,{unique:!0});const A=v.store("mutations"),M=I.map(L=>A.put(L));return re.waitFor(M)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.qs(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(l=l.next(()=>this.Gs(u))),r<8&&s>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.js(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:WD});v.createIndex("collectionPathOverlayIndex",GI,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",Qv,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:zD});v.createIndex("documentKeyIndex",Zv),v.createIndex("collectionGroupIndex",BI)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:HI}).createIndex("sequenceNumberIndex",qD,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:$I}).createIndex("documentKeyIndex",Ah,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=Ey(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>re.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(m=>re.forEach(m,v=>{At(v.userId===u.userId);const I=xc(this.It,v);return JI(e,u.userId,I).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((l,m)=>{const v=new Xt(l),I=[0,hi(v)];u.push(t.get(I).next(A=>A?re.resolve():t.put({targetId:0,path:hi(v),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:tx});const r=t.store("collectionParents"),s=new wy,u=l=>{if(s.add(l)){const m=l.lastSegment(),v=l.popLast();return r.put({collectionId:m,parent:hi(v)})}};return t.store("remoteDocuments").Z({X:!0},(l,m)=>{const v=new Xt(l);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,m,v],I)=>{const A=Ks(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=xh(s),l=WI(this.It,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,l)=>{const m=t.store("remoteDocumentsV14"),v=(I=l,I.document?new je(Xt.fromString(I.document.name).popFirst(5)):I.noDocument?je.fromSegments(I.noDocument.path):I.unknownDocument?je.fromSegments(I.unknownDocument.path):st()).path.toArray();var I;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(A))}).next(()=>re.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=eb(this.It),u=new hw(Ip.Bs,this.It.re);return r.W().next(l=>{const m=new Map;return l.forEach(v=>{var I;let A=null!==(I=m.get(v.userId))&&void 0!==I?I:Bt();xc(this.It,v).keys().forEach(M=>A=A.add(M)),m.set(v.userId,A)}),re.forEach(m,(v,I)=>{const A=new Sr(I),M=rw.oe(this.It,A),L=u.getIndexManager(A),H=Iy.oe(A,this.It,L,u.referenceDelegate);return new cw(s,H,M,L).recalculateAndSaveOverlaysForDocumentKeys(new Jv(t,Hi.at),v).next()})})}}function fw(n){n.createObjectStore("targetDocuments",{keyPath:fy}).createIndex("documentTargetsIndex",Yv,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jI,{unique:!0}),n.createObjectStore("targetGlobal")}const rb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class bp{constructor(e,t,r,s,u,l,m,v,I,A,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=m,this.Js=I,this.Ys=A,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!bp.C())throw new Re(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uT(this,s),this.ii=t+"main",this.It=new qI(v),this.ri=new cn(this.ii,this.Xs,new fT(this.It)),this.Cs=new To(this.referenceDelegate,this.It),this.remoteDocumentCache=eb(this.It),this.Ns=new nx,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,rb);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Hi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,me.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(iu(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Lh(e).get("owner").next(t=>re.resolve(this.mi(t)))}gi(e){return Cp(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=xr(r,"clientMetadata");return s.W().next(u=>{const l=e.Ii(u,18e5),m=u.filter(v=>-1===l.indexOf(v));return re.forEach(m,v=>s.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?re.resolve(!0):Lh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,rb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cp(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const l=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||l&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Jv(t,Hi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Cp(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Iy.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sx(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return rw.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?QD:14===l?zI:13===l?YD:12===l?ZD:11===l?KD:void st();var l;let m;return this.ri.runTransaction(e,s,u,v=>(m=new Jv(v,this.Ss?this.Ss.next():Hi.at),"readwrite-primary"===t?this.fi(m).next(I=>!!I||this.di(m)).next(I=>{if(!I)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Re(ue.FAILED_PRECONDITION,WE);return r(m)}).next(I=>this.wi(m).next(()=>I)):this.Vi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Vi(e){return Lh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ue.FAILED_PRECONDITION,rb)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lh(e).put("owner",t)}static C(){return cn.C()}_i(e){const t=Lh(e);return t.get("owner").next(r=>this.mi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Vt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lh(n){return xr(n,"owner")}function Cp(n){return xr(n,"clientMetadata")}function Dy(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ty{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Bt(),s=Bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new Ty(e,t.fromCache,r,s)}}class pw{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Oi(e,t,s,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(ey(t))return re.resolve(null);let r=Ti(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=wh(t,null,"F"),r=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Bt(...u);return this.Ni.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const I=this.Fi(t,m);return this.$i(t,I,l,v.readTime)?this.ki(e,wh(t,null,"F")):this.Bi(e,I,t,v)}))})))}Oi(e,t,r,s){return ey(t)||s.isEqual(Dt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,s)?this.Mi(e,t):(Gm()<=Ml.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Dc(t)),this.Bi(e,l,t,yv(s,-1)))})}Fi(e,t){let r=new mn(FD(e));return t.forEach((s,u)=>{ny(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Mi(e,t){return Gm()<=Ml.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Dc(t)),this.Ni.getDocumentsMatchingQuery(e,t,ot.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class Sy{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new or(Nt),this.qi=new uu(u=>Cc(u),ip),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cw(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Dp(n,e,t,r){return new Sy(n,e,t,r)}function gw(n,e){return mw.apply(this,arguments)}function mw(){return mw=(0,me.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let v=Bt();for(const I of s){l.push(I.batchId);for(const A of I.mutations)v=v.add(A.key)}for(const I of u){m.push(I.batchId);for(const A of I.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(I=>({ji:I,removedBatchIds:l,addedBatchIds:m}))})})}),mw.apply(this,arguments)}function ib(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,m,v,I){const A=v.batch,M=A.keys();let L=re.resolve();return M.forEach(H=>{L=L.next(()=>I.getEntry(m,H)).next(Z=>{const Ce=v.docVersions.get(H);At(null!==Ce),Z.version.compareTo(Ce)<0&&(A.applyToRemoteDocument(Z,v),Z.isValidDocument()&&(Z.setReadTime(v.commitVersion),I.addEntry(Z)))})}),L.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Bt();for(let v=0;v<l.mutationResults.length;++v)l.mutationResults[v].transformResults.length>0&&(m=m.add(l.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function yw(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function pT(n,e){const t=qe(n),r=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const m=[];e.targetChanges.forEach((A,M)=>{const L=s.get(M);if(!L)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,M)));let H=L.withSequenceNumber(u.currentSequenceNumber);var Z,Ce,be;e.targetMismatches.has(M)?H=H.withResumeToken(Kn.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):A.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(A.resumeToken,r)),s=s.insert(M,H),Ce=H,be=A,(0===(Z=L).resumeToken.approximateByteSize()||Ce.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||be.addedDocuments.size+be.modifiedDocuments.size+be.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,H))});let v=$i(),I=Bt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(sb(u,l,e.documentUpdates).next(A=>{v=A.Wi,I=A.zi})),!r.isEqual(Dt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return re.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,I)).next(()=>v)}).then(u=>(t.Ui=s,u))}function sb(n,e,t){let r=Bt(),s=Bt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=$i();return t.forEach((m,v)=>{const I=u.get(m);v.isFoundDocument()!==I.isFoundDocument()&&(s=s.add(m)),v.isNoDocument()&&v.version.isEqual(Dt.min())?(e.removeEntry(m,v.readTime),l=l.insert(m,v)):!I.isValidDocument()||v.version.compareTo(I.version)>0||0===v.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(v),l=l.insert(m,v)):ke("LocalStore","Ignoring outdated watch update for ",m,". Current version:",I.version," Watch version:",v.version)}),{Wi:l,zi:s}})}function ax(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tp(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,re.resolve(s)):t.Cs.allocateTargetId(r).next(l=>(s=new lu(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Kl(n,e,t){return _w.apply(this,arguments)}function _w(){return _w=(0,me.Z)(function*(n,e,t){const r=qe(n),s=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!iu(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}),_w.apply(this,arguments)}function Ay(n,e,t){const r=qe(n);let s=Dt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,v,I){const A=qe(m),M=A.qi.get(I);return void 0!==M?re.resolve(A.Ui.get(M)):A.Cs.getTargetData(v,I)}(r,l,Ti(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,m.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?s:Dt.min(),t?u:Bt())).next(m=>(mT(r,uI(e),m),{documents:m,Hi:u})))}function ob(n,e){const t=qe(n),r=qe(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(l=>l?l.target:null))}function gT(n,e){const t=qe(n),r=t.Ki.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,yv(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(mT(t,e,s),s))}function mT(n,e,t){let r=n.Ki.get(e)||Dt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function ab(){return ab=(0,me.Z)(function*(n,e,t,r){const s=qe(n);let u=Bt(),l=$i();for(const I of t){const A=e.Ji(I.metadata.name);I.document&&(u=u.add(A));const M=e.Yi(I);M.setReadTime(e.Xi(I.metadata.readTime)),l=l.insert(A,M)}const m=s.Gi.newChangeBuffer({trackRemovals:!0}),v=yield Tp(s,(I=r,Ti(_h(Xt.fromString(`__bundle__/docs/${I}`)))));var I;return s.persistence.runTransaction("Apply bundle documents","readwrite",I=>sb(I,m,l).next(A=>(m.apply(I),A)).next(A=>s.Cs.removeMatchingKeysForTargetId(I,v.targetId).next(()=>s.Cs.addMatchingKeys(I,u,v.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(I,A.Wi,A.zi)).next(()=>A.Wi)))}),ab.apply(this,arguments)}function cx(n,e){return vw.apply(this,arguments)}function vw(){return vw=(0,me.Z)(function*(n,e,t=Bt()){const r=yield Tp(n,Ti(tw(e.bundledQuery))),s=qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=ei(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Kn.EMPTY_BYTE_STRING,l);return s.Ui=s.Ui.insert(m.targetId,m),s.Cs.updateTargetData(u,m).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),vw.apply(this,arguments)}function Sp(n,e){return`firestore_clients_${n}_${e}`}function ub(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ww(n,e){return`firestore_targets_${n}_${e}`}class Ap{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Re(s.error.code,s.error.message))),l?new Ap(e,t,s.state,u):(sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class So{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Re(r.error.code,r.error.message))),u?new So(e,r.state,s):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=ay();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=TD(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new xp(e,u):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Mp{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Mp(t.clientId,t.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Rp{constructor(){this.activeTargetIds=ay()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ew{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new or(Nt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=Sp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Rp),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(Sp(e.persistenceKey,s));if(u){const l=xp.Zi(s,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ww(this.persistenceKey,e));if(r){const s=So.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ww(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let l=Hi.at;if(null!=u)try{const m=JSON.parse(u);At("number"==typeof m),l=m}catch(m){sr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==Hi.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new Ap(this.currentUser,e,t,r),u=ub(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=ub(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=ww(this.persistenceKey,e),u=new So(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return xp.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return Ap.Zi(new Sr(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return So.Zi(s,t)}yr(e){return Mp.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),l=[],m=[];return u.forEach(v=>{s.has(v)||l.push(v)}),s.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Br(l,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=ay();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class xy{constructor(){this.Lr=new Rp,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Rp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Iw{qr(e){}shutdown(){}}class Np{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const lx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dx{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class hx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,s,u){const l=this.ho(e,t);ke("RestConnection","Sending: ",l,r);const m={};return this.lo(m,s,u),this.fo(e,l,m,r).then(v=>(ke("RestConnection","Received: ",v),v),v=>{throw yc("RestConnection",`${e} failed with error: `,v,"url: ",l,"request:",r),v})}_o(e,t,r,s,u,l){return this.ao(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.oo}/v1/${t}:${lx[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,l)=>{const m=new Hm;m.setWithCredentials(!0),m.listenOnce(jm.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Bm.NO_ERROR:const I=m.getResponseJson();ke("Connection","XHR received:",JSON.stringify(I)),u(I);break;case Bm.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),l(new Re(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Bm.HTTP_ERROR:const A=m.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const M=m.getResponseJson().error;if(M&&M.status&&M.message){const L=function(H){const Z=H.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(Z)>=0?Z:ue.UNKNOWN}(M.status);l(new Re(L,M.message))}else l(new Re(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new Re(ue.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(s);m.send(t,"POST",v,r,15)})}wo(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=fD(),l=BE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new jE({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=s.join("");ke("Connection","Creating WebChannel: "+v,m);const I=u.createWebChannel(v,m);let A=!1,M=!1;const L=new dx({Hr:Z=>{M?ke("Connection","Not sending because WebChannel is closed:",Z):(A||(ke("Connection","Opening WebChannel transport."),I.open(),A=!0),ke("Connection","WebChannel sending:",Z),I.send(Z))},Jr:()=>I.close()}),H=(Z,Ce,be)=>{Z.listen(Ce,Ye=>{try{be(Ye)}catch(yt){setTimeout(()=>{throw yt},0)}})};return H(I,Qf.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),H(I,Qf.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),L.io())}),H(I,Qf.EventType.ERROR,Z=>{M||(M=!0,yc("Connection","WebChannel transport errored:",Z),L.io(new Re(ue.UNAVAILABLE,"The operation could not be completed")))}),H(I,Qf.EventType.MESSAGE,Z=>{var Ce;if(!M){const be=Z.data[0];At(!!be);const Ye=be,yt=Ye.error||(null===(Ce=Ye[0])||void 0===Ce?void 0:Ce.error);if(yt){ke("Connection","WebChannel received error:",yt);const ht=yt.status;let ut=function(Ot){const pr=fr[Ot];if(void 0!==pr)return Hv(pr)}(ht),Tt=yt.message;void 0===ut&&(ut=ue.INTERNAL,Tt="Unknown error status: "+ht+" with message "+yt.message),M=!0,L.io(new Re(ut,Tt)),I.close()}else ke("Connection","WebChannel received:",be),L.ro(be)}}),H(l,pD.STAT_EVENT,Z=>{Z.stat===hv.PROXY?ke("Connection","Detected buffering proxy"):Z.stat===hv.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function yT(){return typeof window<"u"?window:null}function kp(){return typeof document<"u"?document:null}function Op(n){return new $v(n,!0)}class bw{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class cb{constructor(e,t,r,s,u,l,m,v){this.Hs=e,this.vo=r,this.Vo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new bw(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Re(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _T extends cb{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function kI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:st(),s=e.targetChange.targetIds||[],u=function(v,I){return v.gt?(At(void 0===I||"string"==typeof I),Kn.fromBase64String(I||"")):(At(void 0===I||I instanceof Uint8Array),Kn.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(v){const I=void 0===v.code?ue.UNKNOWN:Hv(v.code);return new Re(I,v.message||"")}(l);t=new CI(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=Ws(n,r.document.name),u=ei(r.document.updateTime),l=new Xr({mapValue:{fields:r.document.fields}}),m=Tn.newFoundDocument(s,u,l);t=new uy(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=Ws(n,r.document),u=r.readTime?ei(r.readTime):Dt.min(),l=Tn.newNoDocument(s,u);t=new uy([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=Ws(n,r.document);t=new uy([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new cp(r.count||0);t=new bI(r.targetId,u)}}var v;return t}(this.It,e),r=function(s){if(!("targetChange"in s))return Dt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?ei(u.readTime):Dt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=gp(this.It),t.addTarget=function(s,u){let l;const m=u.target;return l=Qm(m)?{documents:PI(s,m)}:{query:hy(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=xI(s,u.resumeToken):u.snapshotVersion.compareTo(Dt.min())>0&&(l.readTime=Dh(s,u.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function HD(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=gp(this.It),t.removeTarget=e,this.Bo(t)}}class lb extends cb{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function OI(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,s){let u=ei(r.updateTime?r.updateTime:s);return u.isEqual(Dt.min())&&(u=ei(s)),new LD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ei(e.commitTime);return this.listener.Zo(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=gp(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>mp(this.It,r))};this.Bo(t)}}class db extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.ao(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(ue.UNKNOWN,s.toString())})}_o(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ue.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class vT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(sr(t),this.ou=!1):ke("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class fb{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,me.Z)(function*(){var v;hu(l)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,me.Z)(function*(I){const A=qe(I);A._u.add(4),yield Yl(A),A.gu.set("Unknown"),A._u.delete(4),yield Zl(A)}),function(I){return v.apply(this,arguments)})(l))}))}),this.gu=new vT(r,s)}}function Zl(n){return pb.apply(this,arguments)}function pb(){return pb=(0,me.Z)(function*(n){if(hu(n))for(const e of n.wu)yield e(!0)}),pb.apply(this,arguments)}function Yl(n){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Pp.apply(this,arguments)}function My(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Tw(t)?Dw(t):He(t).ko()&&gb(t,e))}function Fp(n,e){const t=qe(n),r=He(t);t.du.delete(e),r.ko()&&wT(t,e),0===t.du.size&&(r.ko()?r.Fo():hu(t)&&t.gu.set("Unknown"))}function gb(n,e){n.yu.Mt(e.targetId),He(n).zo(e)}function wT(n,e){n.yu.Mt(e),He(n).Ho(e)}function Dw(n){n.yu=new cy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),He(n).start(),n.gu.uu()}function Tw(n){return hu(n)&&!He(n).No()&&n.du.size>0}function hu(n){return 0===qe(n)._u.size}function ET(n){n.yu=void 0}function fx(n){return mb.apply(this,arguments)}function mb(){return mb=(0,me.Z)(function*(n){n.du.forEach((e,t)=>{gb(n,e)})}),mb.apply(this,arguments)}function px(n,e){return yb.apply(this,arguments)}function yb(){return yb=(0,me.Z)(function*(n,e){ET(n),Tw(n)?(n.gu.hu(e),Dw(n)):n.gu.set("Unknown")}),yb.apply(this,arguments)}function IT(n,e,t){return _b.apply(this,arguments)}function _b(){return _b=(0,me.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof CI&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.du.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.du.delete(m),s.yu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sw(n,r)}else if(e instanceof uy?n.yu.Gt(e):e instanceof bI?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Dt.min()))try{const r=yield yw(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.yu.te(u);return l.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const I=s.du.get(v);I&&s.du.set(v,I.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const v=s.du.get(m);if(!v)return;s.du.set(m,v.withResumeToken(Kn.EMPTY_BYTE_STRING,v.snapshotVersion)),wT(s,m);const I=new lu(v.target,m,1,v.sequenceNumber);gb(s,I)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Sw(n,r)}var r}),_b.apply(this,arguments)}function Sw(n,e,t){return vb.apply(this,arguments)}function vb(){return vb=(0,me.Z)(function*(n,e,t){if(!iu(e))throw e;n._u.add(1),yield Yl(n),n.gu.set("Offline"),t||(t=()=>yw(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Zl(n)}))}),vb.apply(this,arguments)}function bT(n,e){return e().catch(t=>Sw(n,t,e))}function Lp(n){return wb.apply(this,arguments)}function wb(){return wb=(0,me.Z)(function*(n){const e=qe(n),t=Je(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;i(e);)try{const s=yield ax(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,o(e,s)}catch(s){yield Sw(e,s)}a(e)&&c(e)}),wb.apply(this,arguments)}function i(n){return hu(n)&&n.fu.length<10}function o(n,e){n.fu.push(e);const t=Je(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function a(n){return hu(n)&&!Je(n).No()&&n.fu.length>0}function c(n){Je(n).start()}function d(n){return p.apply(this,arguments)}function p(){return p=(0,me.Z)(function*(n){Je(n).eu()}),p.apply(this,arguments)}function _(n){return E.apply(this,arguments)}function E(){return E=(0,me.Z)(function*(n){const e=Je(n);for(const t of n.fu)e.Xo(t.mutations)}),E.apply(this,arguments)}function b(n,e,t){return T.apply(this,arguments)}function T(){return T=(0,me.Z)(function*(n,e,t){const r=n.fu.shift(),s=Xv.from(r,e,t);yield bT(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Lp(n)}),T.apply(this,arguments)}function R(n,e){return P.apply(this,arguments)}function P(){return P=(0,me.Z)(function*(n,e){var t;e&&Je(n).Yo&&(yield(t=(0,me.Z)(function*(r,s){if(jv(u=s.code)&&u!==ue.ABORTED){const l=r.fu.shift();Je(r).Mo(),yield bT(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Lp(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),a(n)&&c(n)}),P.apply(this,arguments)}function G(n,e){return ee.apply(this,arguments)}function ee(){return ee=(0,me.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=hu(t);t._u.add(3),yield Yl(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Zl(t)}),ee.apply(this,arguments)}function ye(n,e){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,me.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield Zl(t)):e||(t._u.add(2),yield Yl(t),t.gu.set("Unknown"))}),Pe.apply(this,arguments)}function He(n){return n.pu||(n.pu=function(e,t,r){const s=qe(e);return s.su(),new _T(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:fx.bind(null,n),Zr:px.bind(null,n),Wo:IT.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.pu.Mo(),Tw(n)?Dw(n):n.gu.set("Unknown")):(yield n.pu.stop(),ET(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Je(n){return n.Iu||(n.Iu=function(e,t,r){const s=qe(e);return s.su(),new lb(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:d.bind(null,n),Zr:R.bind(null,n),tu:_.bind(null,n),Zo:b.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Mo(),yield Lp(n)):(yield n.Iu.stop(),n.fu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class vt{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new vt(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Te(n,e){if(sr("AsyncQueue",`${e}: ${n}`),iu(n))return new Re(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Et{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Ch(),this.sortedSet=new or(this.comparator)}static emptySet(e){return new Et(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Et;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ln{constructor(){this.Tu=new or(je.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):st():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class yn{constructor(e,t,r,s,u,l,m,v,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new yn(e,t,Et.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ap(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class Ql{constructor(){this.Au=void 0,this.listeners=[]}}class Aw{constructor(){this.queries=new uu(e=>Nv(e),ap),this.onlineState="Unknown",this.Ru=new Set}}function Vp(n,e){return Up.apply(this,arguments)}function Up(){return Up=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new Ql),s)try{u.Au=yield t.onListen(r)}catch(l){const m=Te(l,`Initialization of query '${Dc(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&Hp(t)}),Up.apply(this,arguments)}function Bp(n,e){return jp.apply(this,arguments)}function jp(){return jp=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),jp.apply(this,arguments)}function xw(n,e){const t=qe(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.Pu(s)&&(r=!0);l.Au=s}}r&&Hp(t)}function Mw(n,e,t){const r=qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function Hp(n){n.Ru.forEach(e=>{e.next()})}class $p{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new yn(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=yn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class hk{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class gx{constructor(e){this.It=e}Ji(e){return Ws(this.It,e)}Yi(e){return e.metadata.exists?Gv(this.It,e.document,!1):Tn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return ei(e)}}class fk{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mx(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Xt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new gx(this.It);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||Bt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function ux(n,e,t,r){return ab.apply(this,arguments)}(e.localStore,new gx(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const s of e.queries)yield cx(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function mx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yx{constructor(e){this.key=e}}class _x{constructor(e){this.key=e}}class vx{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Bt(),this.mutatedKeys=Bt(),this.Gu=FD(e),this.Qu=new Et(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new ln,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const v="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,I="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,M)=>{const L=s.get(A),H=ny(this.query,M)?M:null,Z=!!L&&this.mutatedKeys.has(L.key),Ce=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let be=!1;L&&H?L.data.isEqual(H.data)?Z!==Ce&&(r.track({type:3,doc:H}),be=!0):this.Hu(L,H)||(r.track({type:2,doc:H}),be=!0,(v&&this.Gu(H,v)>0||I&&this.Gu(H,I)<0)&&(m=!0)):!L&&H?(r.track({type:0,doc:H}),be=!0):L&&!H&&(r.track({type:1,doc:L}),be=!0,(v||I)&&(m=!0)),be&&(H?(l=l.add(H),u=Ce?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:l,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((I,A)=>function(M,L){const H=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return H(M)-H(L)}(I.type,A.type)||this.Gu(I.doc,A.doc)),this.Ju(r);const l=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,v=m!==this.qu;return this.qu=m,0!==u.length||v?{snapshot:new yn(this.query,e.Qu,s,u,e.mutatedKeys,0===m,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ln,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Bt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new _x(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new yx(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Bt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return yn.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class pk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gk{constructor(e){this.key=e,this.nc=!1}}class mk{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new uu(m=>Nv(m),ap),this.rc=new Map,this.oc=new Set,this.uc=new or(je.comparator),this.cc=new Map,this.ac=new dw,this.hc={},this.lc=new Map,this.fc=kh.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function yk(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,me.Z)(function*(n,e){const t=WT(n);let r,s;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ec();else{const l=yield Tp(t.localStore,Ti(e));t.isPrimaryClient&&My(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield DT(t,e,r,"current"===m,l.resumeToken)}return s}),CT.apply(this,arguments)}function DT(n,e,t,r,s){return TT.apply(this,arguments)}function TT(){return TT=(0,me.Z)(function*(n,e,t,r,s){n._c=(M,L,H)=>{return(Z=(0,me.Z)(function*(Ce,be,Ye,yt){let ht=be.view.Wu(Ye);ht.$i&&(ht=yield Ay(Ce.localStore,be.query,!1).then(({documents:Ot})=>be.view.Wu(Ot,ht)));const ut=yt&&yt.targetChanges.get(be.targetId),Tt=be.view.applyChanges(ht,Ce.isPrimaryClient,ut);return FT(Ce,be.targetId,Tt.Xu),Tt.snapshot}),function(Ce,be,Ye,yt){return Z.apply(this,arguments)})(n,M,L,H);var Z};const u=yield Ay(n.localStore,e,!0),l=new vx(e,u.Hi),m=l.Wu(u.documents),v=cu.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),I=l.applyChanges(m,n.isPrimaryClient,v);FT(n,t,I.Xu);const A=new pk(e,t,l);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),I.snapshot}),TT.apply(this,arguments)}function _k(n,e){return ST.apply(this,arguments)}function ST(){return ST=(0,me.Z)(function*(n,e){const t=qe(n),r=t.ic.get(e),s=t.rc.get(r.targetId);if(s.length>1)return t.rc.set(r.targetId,s.filter(u=>!ap(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Kl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Fp(t.remoteStore,r.targetId),Ry(t,r.targetId)}).catch(as))):(Ry(t,r.targetId),yield Kl(t.localStore,r.targetId,!0))}),ST.apply(this,arguments)}function AT(){return AT=(0,me.Z)(function*(n,e,t){const r=KT(n);try{const s=yield function(u,l){const m=qe(u),v=Nn.now(),I=l.reduce((L,H)=>L.add(H.key),Bt());let A,M;return m.persistence.runTransaction("Locally write mutations","readwrite",L=>{let H=$i(),Z=Bt();return m.Gi.getEntries(L,I).next(Ce=>{H=Ce,H.forEach((be,Ye)=>{Ye.isValidDocument()||(Z=Z.add(be))})}).next(()=>m.localDocuments.getOverlayedDocuments(L,H)).next(Ce=>{A=Ce;const be=[];for(const Ye of l){const yt=mI(Ye,A.get(Ye.key).overlayedDocument);null!=yt&&be.push(new au(Ye.key,yt,xv(yt.value.mapValue),Vn.exists(!0)))}return m.mutationQueue.addMutationBatch(L,v,be,l)}).next(Ce=>{M=Ce;const be=Ce.applyToLocalDocumentSet(A,Z);return m.documentOverlayCache.saveOverlays(L,Ce.batchId,be)})}).then(()=>({batchId:M.batchId,changes:EI(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let v=u.hc[u.currentUser.toKey()];v||(v=new or(Nt)),v=v.insert(l,m),u.hc[u.currentUser.toKey()]=v}(r,s.batchId,t),yield Jl(r,s.changes),yield Lp(r.remoteStore)}catch(s){const u=Te(s,"Failed to persist write");t.reject(u)}}),AT.apply(this,arguments)}function wx(n,e){return xT.apply(this,arguments)}function xT(){return xT=(0,me.Z)(function*(n,e){const t=qe(n);try{const r=yield pT(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.cc.get(u);l&&(At(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.nc=!0:s.modifiedDocuments.size>0?At(l.nc):s.removedDocuments.size>0&&(At(l.nc),l.nc=!1))}),yield Jl(t,r,e)}catch(r){yield as(r)}}),xT.apply(this,arguments)}function Ex(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ic.forEach((u,l)=>{const m=l.view.bu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=qe(u);m.onlineState=l;let v=!1;m.queries.forEach((I,A)=>{for(const M of A.listeners)M.bu(l)&&(v=!0)}),v&&Hp(m)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wk(n,e,t){return MT.apply(this,arguments)}function MT(){return MT=(0,me.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.cc.get(e),u=s&&s.key;if(u){let l=new or(je.comparator);l=l.insert(u,Tn.newNoDocument(u,Dt.min()));const m=Bt().add(u),v=new Gl(Dt.min(),new Map,new mn(Nt),l,m);yield wx(r,v),r.uc=r.uc.remove(u),r.cc.delete(e),LT(r)}else yield Kl(r.localStore,e,!1).then(()=>Ry(r,e,t)).catch(as)}),MT.apply(this,arguments)}function Ek(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,me.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const s=yield ib(t.localStore,e);PT(t,r,null),OT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Jl(t,s)}catch(s){yield as(s)}}),RT.apply(this,arguments)}function Ik(n,e,t){return NT.apply(this,arguments)}function NT(){return NT=(0,me.Z)(function*(n,e,t){const r=qe(n);try{const s=yield function(u,l){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return m.mutationQueue.lookupMutationBatch(v,l).next(A=>(At(null!==A),I=A.keys(),m.mutationQueue.removeMutationBatch(v,A))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,I,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,I)).next(()=>m.localDocuments.getDocuments(v,I))})}(r.localStore,e);PT(r,e,t),OT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Jl(r,s)}catch(s){yield as(s)}}),NT.apply(this,arguments)}function kT(){return kT=(0,me.Z)(function*(n,e){const t=qe(n);hu(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=qe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.lc.get(r)||[];s.push(e),t.lc.set(r,s)}catch(r){const s=Te(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),kT.apply(this,arguments)}function OT(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function PT(n,e,t){const r=qe(n);let s=r.hc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function Ry(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||Ix(n,r)})}function Ix(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Fp(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),LT(n))}function FT(n,e,t){for(const r of t)r instanceof yx?(n.ac.addReference(r.key,e),Ck(n,r)):r instanceof _x?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||Ix(n,r.key)):st()}function Ck(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oc.add(r),LT(n))}function LT(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new je(Xt.fromString(e)),r=n.fc.next();n.cc.set(r,new gk(t)),n.uc=n.uc.insert(t,r),My(n.remoteStore,new lu(Ti(_h(t.path)),r,2,Hi.at))}}function Jl(n,e,t){return VT.apply(this,arguments)}function VT(){return VT=(0,me.Z)(function*(n,e,t){const r=qe(n),s=[],u=[],l=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,v)=>{l.push(r._c(v,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,I?.fromCache?"not-current":"current"),I){s.push(I);const A=Ty.Ci(v.targetId,I);u.push(A)}}))}),yield Promise.all(l),r.sc.Wo(s),yield(m=(0,me.Z)(function*(v,I){const A=qe(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>re.forEach(I,L=>re.forEach(L.Si,H=>A.persistence.referenceDelegate.addReference(M,L.targetId,H)).next(()=>re.forEach(L.Di,H=>A.persistence.referenceDelegate.removeReference(M,L.targetId,H)))))}catch(M){if(!iu(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of I){const L=M.targetId;if(!M.fromCache){const H=A.Ui.get(L),Ce=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);A.Ui=A.Ui.insert(L,Ce)}}}),function(v,I){return m.apply(this,arguments)})(r.localStore,u))}),VT.apply(this,arguments)}function Dk(n,e){return UT.apply(this,arguments)}function UT(){return UT=(0,me.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield gw(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(l=>{l.forEach(m=>{m.reject(new Re(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jl(t,r.ji)}var s}),UT.apply(this,arguments)}function Tk(n,e){const t=qe(n),r=t.cc.get(e);if(r&&r.nc)return Bt().add(r.key);{let s=Bt();const u=t.rc.get(e);if(!u)return s;for(const l of u){const m=t.ic.get(l);s=s.unionWith(m.view.ju)}return s}}function Sk(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,me.Z)(function*(n,e){const t=qe(n),r=yield Ay(t.localStore,e.query,!0),s=e.view.tc(r);return t.isPrimaryClient&&FT(t,e.targetId,s.Xu),s}),BT.apply(this,arguments)}function Ak(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,me.Z)(function*(n,e){const t=qe(n);return gT(t.localStore,e).then(r=>Jl(t,r))}),jT.apply(this,arguments)}function xk(n,e,t,r){return HT.apply(this,arguments)}function HT(){return HT=(0,me.Z)(function*(n,e,t,r){const s=qe(n),u=yield function(l,m){const v=qe(l),I=qe(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>I.Tn(A,m).next(M=>M?v.localDocuments.getDocuments(A,M):re.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Lp(s.remoteStore):"acknowledged"===t||"rejected"===t?(PT(s,e,r||null),OT(s,e),m=e,qe(qe(s.localStore).mutationQueue).An(m)):st(),yield Jl(s,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),HT.apply(this,arguments)}function $T(){return $T=(0,me.Z)(function*(n,e){const t=qe(n);if(WT(t),KT(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield bx(t,r.toArray());t.dc=!0,yield ye(t.remoteStore,!0);for(const u of s)My(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let s=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(Ry(t,l),Kl(t.localStore,l,!0))),Fp(t.remoteStore,l)}),yield s,yield bx(t,r),function(u){const l=qe(u);l.cc.forEach((m,v)=>{Fp(l.remoteStore,v)}),l.ac.fs(),l.cc=new Map,l.uc=new or(je.comparator)}(t),t.dc=!1,yield ye(t.remoteStore,!1)}}),$T.apply(this,arguments)}function bx(n,e,t){return GT.apply(this,arguments)}function GT(){return GT=(0,me.Z)(function*(n,e,t){const r=qe(n),s=[],u=[];for(const l of e){let m;const v=r.rc.get(l);if(v&&0!==v.length){m=yield Tp(r.localStore,Ti(v[0]));for(const I of v){const A=r.ic.get(I),M=yield Sk(r,A);M.snapshot&&u.push(M.snapshot)}}else{const I=yield ob(r.localStore,l);m=yield Tp(r.localStore,I),yield DT(r,Cx(I),l,!1,m.resumeToken)}s.push(m)}return r.sc.Wo(u),s}),GT.apply(this,arguments)}function Cx(n){return aI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Rk(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function Nk(n,e,t,r){return zT.apply(this,arguments)}function zT(){return zT=(0,me.Z)(function*(n,e,t,r){const s=qe(n);if(s.dc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=s.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield gT(s.localStore,uI(u[0])),m=Gl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Kn.EMPTY_BYTE_STRING);yield Jl(s,l,m);break}case"rejected":yield Kl(s.localStore,e,!0),Ry(s,e,r);break;default:st()}}),zT.apply(this,arguments)}function kk(n,e,t){return qT.apply(this,arguments)}function qT(){return qT=(0,me.Z)(function*(n,e,t){const r=WT(n);if(r.dc){for(const s of e){if(r.rc.has(s)){ke("SyncEngine","Adding an already active target "+s);continue}const u=yield ob(r.localStore,s),l=yield Tp(r.localStore,u);yield DT(r,Cx(u),l.targetId,!1,l.resumeToken),My(r.remoteStore,l)}for(const s of t)r.rc.has(s)&&(yield Kl(r.localStore,s,!1).then(()=>{Fp(r.remoteStore,s),Ry(r,s)}).catch(as))}}),qT.apply(this,arguments)}function WT(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wk.bind(null,e),e.sc.Wo=xw.bind(null,e.eventManager),e.sc.wc=Mw.bind(null,e.eventManager),e}function KT(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ek.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ik.bind(null,e),e}class Dx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.It=Op(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Dp(this.persistence,new pw,e.initialUser,this.It)}yc(e){return new hw(Ip.Bs,this.It)}gc(e){return new xy}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Tx extends Dx{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield KT(r.Ac.syncEngine),yield Lp(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Dp(this.persistence,new pw,e.initialUser,this.It)}Tc(e,t){return new ow(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new CD(t,this.persistence);return new ZE(e.asyncQueue,r)}yc(e){const t=Dy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ls.withCacheSize(this.cacheSizeBytes):ls.DEFAULT;return new bp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yT(),kp(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new xy}}class Pk extends Tx{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const s=r.Ac.syncEngine;r.sharedClientState instanceof Ew&&(r.sharedClientState.syncEngine={Fr:xk.bind(null,s),$r:Nk.bind(null,s),Br:kk.bind(null,s),vi:Rk.bind(null,s),Mr:Ak.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,me.Z)(function*(l){yield function Mk(n,e){return $T.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=yT();if(!Ew.C(t))throw new Re(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Dy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ew(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ZT{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>Ex(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=Dk.bind(null,r.syncEngine),yield ye(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Aw}createDatastore(e){const t=Op(e.databaseInfo.databaseId),r=new hx(e.databaseInfo);return new db(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>Ex(this.syncEngine,m,0),l=Np.C()?new Np:new Iw,new fb(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,v,I){const A=new mk(r,s,u,l,m,v);return I&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=qe(t);ke("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Yl(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function YT(n,e,t){if(!t)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Sx(n,e,t,r){if(!0===e&&!0===r)throw new Re(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ax(n){if(!je.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xx(n){if(je.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Eb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Eb(n);throw new Re(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Mx(n,e){if(e<=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const Rx=new Map;class Nx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Sx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rw{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mD;switch(t.type){case"gapi":return new wD(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Rx.get(e);t&&(ke("ComponentProvider","Removing Datastore"),Rx.delete(e),t.terminate())}(this),Promise.resolve()}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class Gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class Oc extends Gi{constructor(e,t,r){super(e,t,_h(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new je(e))}withConverter(e){return new Oc(this.firestore,e,this._path)}}function Ox(n,e,...t){if(n=(0,Vt.m9)(n),YT("collection","path",e),n instanceof Rw){const r=Xt.fromString(e,...t);return xx(r),new Oc(n,null,r)}{if(!(n instanceof Zn||n instanceof Oc))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return xx(r),new Oc(n.firestore,null,r)}}function Ib(n,e,...t){if(n=(0,Vt.m9)(n),1===arguments.length&&(e=pv.R()),YT("doc","path",e),n instanceof Rw){const r=Xt.fromString(e,...t);return Ax(r),new Zn(n,null,new je(r))}{if(!(n instanceof Zn||n instanceof Oc))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return Ax(r),new Zn(n.firestore,n instanceof Oc?n.converter:null,new je(r))}}function Px(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),(n instanceof Zn||n instanceof Oc)&&(e instanceof Zn||e instanceof Oc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function QT(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),n instanceof Gi&&e instanceof Gi&&n.firestore===e.firestore&&ap(n._query,e._query)&&n.converter===e.converter}function Fx(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class bb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Lk{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Ar,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),s=Number(r);isNaN(s)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(s);return new hk(JSON.parse(u),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Bk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,me.Z)(function*(u,l){const m=qe(u),v=gp(m.It)+"/documents",I={documents:l.map(H=>Th(m.It,H))},A=yield m._o("BatchGetDocuments",v,I,l.length),M=new Map;A.forEach(H=>{const Z=function zv(n,e){return"found"in e?function(t,r){At(!!r.found);const s=Ws(t,r.found.name),u=ei(r.found.updateTime),l=new Xr({mapValue:{fields:r.found.fields}});return Tn.newFoundDocument(s,u,l)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const s=Ws(t,r.missing),u=ei(r.readTime);return Tn.newNoDocument(s,u)}(n,e):st()}(m.It,H);M.set(Z.key.toString(),Z)});const L=[];return l.forEach(H=>{const Z=M.get(H.toString());At(!!Z),L.push(Z)}),L}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new bh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=je.fromPath(s);e.mutations.push(new Bv(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(s,u){const l=qe(s),m=gp(l.It)+"/documents",v={writes:u.map(I=>mp(l.It,I))};yield l.ao("Commit",m,v)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Vn.exists(!1):Vn.updateTime(t):Vn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Re(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vn.updateTime(t)}return Vn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class jk{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.kc=r.maxAttempts,this.xo=new bw(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,me.Z)(function*(){const t=new Bk(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Fc(u)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!ep(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!jv(t)}return!1}}class Hk{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Sr.UNAUTHENTICATED,this.clientId=pv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,me.Z)(function*(m){ke("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Te(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Lx(n,e){return JT.apply(this,arguments)}function JT(){return JT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,me.Z)(function*(u){r.isEqual(u)||(yield gw(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),JT.apply(this,arguments)}function Vx(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield eS(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>G(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>G(e.remoteStore,u)),n.onlineComponents=e}),XT.apply(this,arguments)}function eS(n){return tS.apply(this,arguments)}function tS(){return tS=(0,me.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield Lx(n,new Dx)),n.offlineComponents}),tS.apply(this,arguments)}function Cb(n){return nS.apply(this,arguments)}function nS(){return nS=(0,me.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield Vx(n,new ZT)),n.onlineComponents}),nS.apply(this,arguments)}function Ux(n){return eS(n).then(e=>e.persistence)}function Db(n){return eS(n).then(e=>e.localStore)}function rS(n){return Cb(n).then(e=>e.remoteStore)}function iS(n){return Cb(n).then(e=>e.syncEngine)}function Ny(n){return sS.apply(this,arguments)}function sS(){return sS=(0,me.Z)(function*(n){const e=yield Cb(n),t=e.eventManager;return t.onListen=yk.bind(null,e.syncEngine),t.onUnlisten=_k.bind(null,e.syncEngine),t}),sS.apply(this,arguments)}function jx(n,e,t={}){const r=new Ar;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(s,u,l,m,v){const I=new bb({next:M=>{u.enqueueAndForget(()=>Bp(s,A));const L=M.docs.has(l);!L&&M.fromCache?v.reject(new Re(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&m&&"server"===m.source?v.reject(new Re(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new $p(_h(l.path),I,{includeMetadataChanges:!0,Nu:!0});return Vp(s,A)}(yield Ny(n),n.asyncQueue,e,t,r)})),r.promise}function Hx(n,e,t={}){const r=new Ar;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(s,u,l,m,v){const I=new bb({next:M=>{u.enqueueAndForget(()=>Bp(s,A)),M.fromCache&&"server"===m.source?v.reject(new Re(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new $p(l,I,{includeMetadataChanges:!0,Nu:!0});return Vp(s,A)}(yield Ny(n),n.asyncQueue,e,t,r)})),r.promise}class Yk{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new bw(this,"async_queue_retry"),this.Wc=()=>{const t=kp();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=kp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=kp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Ar;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!iu(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,sr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=vt.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(s),s}zc(){this.Kc&&st()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function oS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class Qk{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ar,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Yn extends Rw{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Yk,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$x(this),this._firestoreClient.terminate()}}function Mr(n){return n._firestoreClient||$x(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function $x(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new JE(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new Hk(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Gx(n,e,t){const r=new Ar;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield Lx(n,t),yield Vx(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(l=u).name?l.code===ue.FAILED_PRECONDITION||l.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;yc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function zx(n){if(n._initialized||n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pc(Kn.fromBase64String(e))}catch(t){throw new Re(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pc(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gp{constructor(e){this._methodName=e}}class Tb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const aO=/^__.*__$/;class uO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new au(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ih(e,this.data,t,this.fieldTransforms)}}class qx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new au(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Sb{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=s,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Sb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Mb(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Wx(this.sa)&&aO.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class cO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Op(e)}da(e,t,r,s=!1){return new Sb({sa:e,methodName:t,fa:r,path:Wn.emptyPath(),oa:!1,la:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function zp(n){const e=n._freezeSettings(),t=Op(n._databaseId);return new cO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ab(n,e,t,r,s,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,s);lS("Data must be an object, but it was:",l,r);const m=Yx(r,l);let v,I;if(u.merge)v=new us(l.fieldMask),I=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const L=dS(e,M,t);if(!l.contains(L))throw new Re(ue.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);Jx(A,L)||A.push(L)}v=new us(A),I=l.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,I=l.fieldTransforms;return new uO(new Xr(m),v,I)}class Nw extends Gp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nw}}function Kx(n,e,t){return new Sb({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class aS extends Gp{_toFieldTransform(e){return new oy(e.path,new Hl)}isEqual(e){return e instanceof aS}}class lO extends Gp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Kx(this,e,!0),r=this._a.map(u=>qp(u,t)),s=new Tc(r);return new oy(e.path,s)}isEqual(e){return this===e}}class dO extends Gp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Kx(this,e,!0),r=this._a.map(u=>qp(u,t)),s=new $l(r);return new oy(e.path,s)}isEqual(e){return this===e}}class hO extends Gp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Eh(e.It,iy(e.It,this.wa));return new oy(e.path,t)}isEqual(e){return this===e}}function uS(n,e,t,r){const s=n.da(1,e,t);lS("Data must be an object, but it was:",s,r);const u=[],l=Xr.empty();Co(r,(v,I)=>{const A=xb(e,v,t);I=(0,Vt.m9)(I);const M=s.ca(A);if(I instanceof Nw)u.push(A);else{const L=qp(I,M);null!=L&&(u.push(A),l.set(A,L))}});const m=new us(u);return new qx(l,m,s.fieldTransforms)}function cS(n,e,t,r,s,u){const l=n.da(1,e,t),m=[dS(e,r,t)],v=[s];if(u.length%2!=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)m.push(dS(e,u[L])),v.push(u[L+1]);const I=[],A=Xr.empty();for(let L=m.length-1;L>=0;--L)if(!Jx(I,m[L])){const H=m[L];let Z=v[L];Z=(0,Vt.m9)(Z);const Ce=l.ca(H);if(Z instanceof Nw)I.push(H);else{const be=qp(Z,Ce);null!=be&&(I.push(H),A.set(H,be))}}const M=new us(I);return new qx(A,M,l.fieldTransforms)}function Zx(n,e,t,r=!1){return qp(t,n.da(r?4:3,e))}function qp(n,e){if(Qx(n=(0,Vt.m9)(n)))return lS("Unsupported field value:",e,n),Yx(n,e);if(n instanceof Gp)return function(t,r){if(!Wx(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=qp(l,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Vt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return iy(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Nn.fromDate(t);return{timestampValue:Dh(r.It,s)}}if(t instanceof Nn){const s=new Nn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Dh(r.It,s)}}if(t instanceof Tb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pc)return{bytesValue:xI(r.It,t._byteString)};if(t instanceof Zn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Eb(t)}`)}(n,e)}function Yx(n,e){const t={};return QE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(n,(r,s)=>{const u=qp(s,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Qx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nn||n instanceof Tb||n instanceof Pc||n instanceof Zn||n instanceof Gp)}function lS(n,e,t){if(!Qx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Eb(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function dS(n,e,t){if((e=(0,Vt.m9)(e))instanceof Xl)return e._internalPath;if("string"==typeof e)return xb(n,e);throw Mb("Field path arguments must be of type string or ",n,!1,void 0,t)}const fO=new RegExp("[~\\*/\\[\\]]");function xb(n,e,t){if(e.search(fO)>=0)throw Mb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xl(...e.split("."))._internalPath}catch{throw Mb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Mb(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||l)&&(v+=" (found",u&&(v+=` in field ${r}`),l&&(v+=` in document ${s}`),v+=")"),new Re(ue.INVALID_ARGUMENT,m+n+v)}function Jx(n,e){return n.some(t=>t.isEqual(e))}class kw{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pO extends kw{data(){return super.data()}}function Rb(n,e){return"string"==typeof e?xb(n,e):e instanceof Xl?e._internalPath:e._delegate._internalPath}function Xx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ow{}function Vh(n,...e){for(const t of e)n=t._apply(n);return n}class gO extends Ow{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=zp(e.firestore),r=function(s,u,l,m,v,I,A){let M;if(v.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){sM(A,I);const H=[];for(const Z of A)H.push(iM(m,s,Z));M={arrayValue:{values:H}}}else M=iM(m,s,A)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||sM(A,I),M=Zx(l,"where",A,"in"===I||"not-in"===I);const L=Hr.create(v,I,M);return function(H,Z){if(Z.dt()){const be=ty(H);if(null!==be&&!be.isEqual(Z.field))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${be.toString()}' and '${Z.field.toString()}'`);const Ye=sp(H);null!==Ye&&oM(0,Z.field,Ye)}const Ce=function(be,Ye){for(const yt of be.filters)if(Ye.indexOf(yt.op)>=0)return yt.op;return null}(H,function(be){switch(be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==Ce)throw new Re(ue.INVALID_ARGUMENT,Ce===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${Ce.toString()}' filters.`)}(s,L),L}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Gi(e.firestore,e.converter,function(s,u){const l=s.filters.concat([u]);return new ou(s.path,s.collectionGroup,s.explicitOrderBy.slice(),l,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class yO extends Ow{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new jl(s,u);return function(m,v){if(null===sp(m)){const I=ty(m);null!==I&&oM(0,I,v.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Gi(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new ou(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class eM extends Ow{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Gi(e.firestore,e.converter,wh(e._query,this.Ia,this.Ta))}}class tM extends Ow{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=rM(e,this.type,this.Ea,this.Aa);return new Gi(e.firestore,e.converter,(s=t,new ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class nM extends Ow{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=rM(e,this.type,this.Ea,this.Aa);return new Gi(e.firestore,e.converter,(s=t,new ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function rM(n,e,t,r){if(t[0]=(0,Vt.m9)(t[0]),t[0]instanceof kw)return function(s,u,l,m,v){if(!m)throw new Re(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const I=[];for(const A of vh(s))if(A.field.isKeyField())I.push(Bl(u,m.key));else{const M=m.data.field(A.field);if(Km(M))throw new Re(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=A.field.canonicalString();throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(M)}return new su(I,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=zp(n.firestore);return function(u,l,m,v,I,A){const M=u.explicitOrderBy;if(I.length>M.length)throw new Re(ue.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let H=0;H<I.length;H++){const Z=I[H];if(M[H].field.isKeyField()){if("string"!=typeof Z)throw new Re(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Z}`);if(!op(u)&&-1!==Z.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Z}' contains a slash.`);const Ce=u.path.child(Xt.fromString(Z));if(!je.isDocumentKey(Ce))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Ce}' is not because it contains an odd number of segments.`);const be=new je(Ce);L.push(Bl(l,be))}else{const Ce=Zx(m,v,Z);L.push(Ce)}}return new su(L,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function iM(n,e,t){if("string"==typeof(t=(0,Vt.m9)(t))){if(""===t)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!op(e)&&-1!==t.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!je.isDocumentKey(r))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bl(n,new je(r))}if(t instanceof Zn)return Bl(n,t._key);throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eb(t)}.`)}function sM(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function oM(n,e,t){if(!t.isEqual(e))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class hS{convertValue(e,t="none"){switch(Ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Co(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Tb(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Iv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xf(e));default:return null}}convertTimestamp(e){const t=vc(e);return new Nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);At(Kv(r));const s=new Ec(r.get(1),r.get(3)),u=new je(r.popFirst(5));return s.isEqual(t)||sr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Nb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class DO extends hS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class Wp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ed extends kw{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Rb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Pw extends ed{data(e={}){return super.data(e)}}class Uh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Wp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Pw(this._firestore,this._userDataWriter,r.key,r,new Wp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Pw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Wp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new Pw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Wp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,I=-1;return 0!==l.type&&(v=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),I=u.indexOf(l.doc.key)),{type:TO(l.type),doc:m,oldIndex:v,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function TO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function aM(n,e){return n instanceof ed&&e instanceof ed?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Uh&&e instanceof Uh&&n._firestore===e._firestore&&QT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bh extends hS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function uM(n,e,t){n=sn(n,Zn);const r=sn(n.firestore,Yn),s=Nb(n.converter,e,t);return ky(r,[Ab(zp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Vn.none())])}function cM(n,e,t,...r){n=sn(n,Zn);const s=sn(n.firestore,Yn),u=zp(s);let l;return l="string"==typeof(e=(0,Vt.m9)(e))||e instanceof Xl?cS(u,"updateDoc",n._key,e,t,r):uS(u,"updateDoc",n._key,e),ky(s,[l.toMutation(n._key,Vn.exists(!0))])}function lM(n,...e){var t,r,s;n=(0,Vt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||oS(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(oS(e[l])){const M=e[l];e[l]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[l+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[l+2]=null===(s=M.complete)||void 0===s?void 0:s.bind(M)}let v,I,A;if(n instanceof Zn)I=sn(n.firestore,Yn),A=_h(n._key.path),v={next:M=>{e[l]&&e[l](fS(I,n,M))},error:e[l+1],complete:e[l+2]};else{const M=sn(n,Gi);I=sn(M.firestore,Yn),A=M._query;const L=new Bh(I);v={next:H=>{e[l]&&e[l](new Uh(I,L,M,H))},error:e[l+1],complete:e[l+2]},Xx(n._query)}return function(M,L,H,Z){const Ce=new bb(Z),be=new $p(L,Ce,H);return M.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Vp(yield Ny(M),be)})),()=>{Ce.bc(),M.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Bp(yield Ny(M),be)}))}}(Mr(I),A,m,v)}function ky(n,e){return function(t,r){const s=new Ar;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function vk(n,e,t){return AT.apply(this,arguments)}(yield iS(t),r,s)})),s.promise}(Mr(n),e)}function fS(n,e,t){const r=t.docs.get(e._key),s=new Bh(n);return new ed(n,s,e._key,r,new Wp(t.hasPendingWrites,t.fromCache),e.converter)}const FO={maxAttempts:5};class dM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zp(e)}set(e,t,r){this._verifyNotCommitted();const s=jh(e,this._firestore),u=Nb(s.converter,t,r),l=Ab(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Vn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=jh(e,this._firestore);let l;return l="string"==typeof(t=(0,Vt.m9)(t))||t instanceof Xl?cS(this._dataReader,"WriteBatch.update",u._key,t,r,s):uS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jh(e,this._firestore);return this._mutations=this._mutations.concat(new bh(t._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jh(n,e){if((n=(0,Vt.m9)(n)).firestore!==e)throw new Re(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class LO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=zp(e)}get(e){const t=jh(e,this._firestore),r=new DO(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return st();const u=s[0];if(u.isFoundDocument())return new kw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new kw(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const s=jh(e,this._firestore),u=Nb(s.converter,t,r),l=Ab(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=jh(e,this._firestore);let l;return l="string"==typeof(t=(0,Vt.m9)(t))||t instanceof Xl?cS(this._dataReader,"Transaction.update",u._key,t,r,s):uS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=jh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jh(e,this._firestore),r=new Bh(this._firestore);return super.get(e).then(s=>new ed(this._firestore,r,t._key,s._document,new Wp(!1,!1),t.converter))}}function pS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function fM(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function pM(){if(!function Jf(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Pl=na.SDK_VERSION,(0,na._registerComponent)(new Zd.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Yn(new _D(t.getProvider("auth-internal")),new ED(t.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Re(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(m.options.projectId,v)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,na.registerVersion)($m,"3.7.2",n),(0,na.registerVersion)($m,"3.7.2","esm2017")}();class Fw{constructor(e){this._delegate=e}static fromBase64String(e){return pM(),new Fw(Pc.fromBase64String(e))}static fromUint8Array(e){return fM(),new Fw(Pc.fromUint8Array(e))}toBase64(){return pM(),this._delegate.toBase64()}toUint8Array(){return fM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gS(n){return function qO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class WO{enableIndexedDbPersistence(e,t){return function Xk(n,e){zx(n=sn(n,Yn));const t=Mr(n),r=n._freezeSettings(),s=new ZT;return Gx(t,s,new Tx(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function eO(n){zx(n=sn(n,Yn));const e=Mr(n),t=n._freezeSettings(),r=new ZT;return Gx(e,r,new Pk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function tO(n){if(n._initialized&&!n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ar;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!cn.C())return Promise.resolve();const s=r+"main";yield cn.delete(s)}),function(r){return t.apply(this,arguments)})(Dy(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class gM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ec||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&yc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function kx(n,e,t,r={}){var s;const u=(n=sn(n,Rw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&yc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Sr.MOCK_USER;else{l=(0,Vt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Re(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Sr(v)}n._authCredentials=new yD(new $E(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function rO(n){return function $k(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Ux(n),t=yield rS(n);return e.setNetworkEnabled(!0),function(r){const s=qe(r);return s._u.delete(0),Zl(s)}(t)}))}(Mr(n=sn(n,Yn)))}(this._delegate)}disableNetwork(){return function iO(n){return function Gk(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Ux(n),t=yield rS(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(s){const u=qe(s);u._u.add(0),yield Yl(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Mr(n=sn(n,Yn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Sx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nO(n){return function(e){const t=new Ar;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function bk(n,e){return kT.apply(this,arguments)}(yield iS(e),t)})),t.promise}(Mr(n=sn(n,Yn)))}(this._delegate)}onSnapshotsInSync(e){return function PO(n,e){return function Wk(n,e){const t=new bb(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Ny(n),s=t,qe(r).Ru.add(s),void s.next();var r,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Ny(n),s=t,void qe(r).Ru.delete(s);var r,s}))}}(Mr(n=sn(n,Yn)),oS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Oy(this,Ox(this._delegate,e))}catch(t){throw hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new la(this,Ib(this._delegate,e))}catch(t){throw hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fs(this,function Fk(n,e){if(n=sn(n,Rw),YT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gi(n,null,(t=e,new ou(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function VO(n,e,t){n=sn(n,Yn);const r=Object.assign(Object.assign({},FO),t);return function(s){if(s.maxAttempts<1)throw new Re(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new Ar;return s.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const v=yield function Bx(n){return Cb(n).then(e=>e.datastore)}(s);new jk(s.asyncQueue,v,l,u,m).run()})),m.promise}(Mr(n),s=>e(new LO(n,s)),r)}(this._delegate,t=>e(new mM(this,t)))}batch(){return Mr(this._delegate),new yM(new dM(this._delegate,e=>ky(this._delegate,e)))}loadBundle(e){return function sO(n,e){const t=Mr(n=sn(n,Yn)),r=new Qk;return function Kk(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,I){if(v instanceof Uint8Array)return Fx(v,I);if(v instanceof ArrayBuffer)return Fx(new Uint8Array(v),I);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Lk(v,l);var v}(t,Op(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function Ok(n,e,t){const r=qe(n);var s;(s=(0,me.Z)(function*(u,l,m){try{const v=yield l.getMetadata();if(yield function(L,H){const Z=qe(L),Ce=ei(H.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",be=>Z.Ns.getBundleMetadata(be,H.id)).then(be=>!!be&&be.createTime.compareTo(Ce)>=0)}(u.localStore,v))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(L=v).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);m._updateProgress(mx(v));const I=new fk(v,u.localStore,l.It);let A=yield l.mc();for(;A;){const L=yield I.Fu(A);L&&m._updateProgress(L),A=yield l.mc()}const M=yield I.complete();return yield Jl(u,M.Lu,void 0),yield function(L,H){const Z=qe(L);return Z.persistence.runTransaction("Save bundle","readwrite",Ce=>Z.Ns.saveBundleMetadata(Ce,H))}(u.localStore,v),m._completeWith(M.progress),Promise.resolve(M.Bu)}catch(v){return yc("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var L}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield iS(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function oO(n,e){return function Zk(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const s=qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield Db(n),e)}))}(Mr(n=sn(n,Yn)),e).then(t=>t?new Gi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fs(this,t):null)}}class kb extends hS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fw(new Pc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return la.forKey(t,this.firestore,null)}}class mM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kb(e)}get(e){const t=Zp(e);return this._delegate.get(t).then(r=>new Lw(this._firestore,new ed(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Zp(e);return r?(pS("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Zp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Zp(e);return this._delegate.delete(t),this}}class yM{constructor(e){this._delegate=e}set(e,t,r){const s=Zp(e);return r?(pS("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Zp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Zp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Pw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Kp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Kp(e,new kb(e),t),s.set(t,u)),u}}Kp.INSTANCES=new WeakMap;class la{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new la(t,new Zn(t._delegate,r,new je(e)))}static forKey(e,t,r){return new la(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Oy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Oy(this.firestore,Ox(this._delegate,e))}catch(t){throw hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Vt.m9)(e))instanceof Zn&&Px(this._delegate,e)}set(e,t){t=pS("DocumentReference.set",t);try{return t?uM(this._delegate,e,t):uM(this._delegate,e)}catch(r){throw hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?cM(this._delegate,e):cM(this._delegate,e,t,...r)}catch(s){throw hs(s,"updateDoc()","DocumentReference.update()")}}delete(){return function kO(n){return ky(sn(n.firestore,Yn),[new bh(n._key,Vn.none())])}(this._delegate)}onSnapshot(...e){const t=_M(e),r=vM(e,s=>new Lw(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return lM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function AO(n){n=sn(n,Zn);const e=sn(n.firestore,Yn),t=Mr(e),r=new Bh(e);return function zk(n,e){const t=new Ar;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(s,u,l){try{const m=yield function(v,I){const A=qe(v);return A.persistence.runTransaction("read document","readonly",M=>A.localDocuments.getDocument(M,I))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Re(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Te(m,`Failed to get document '${u} from cache`);l.reject(v)}}),function(s,u,l){return r.apply(this,arguments)})(yield Db(n),e,t);var r})),t.promise}(t,n._key).then(s=>new ed(e,r,n._key,s,new Wp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function xO(n){n=sn(n,Zn);const e=sn(n.firestore,Yn);return jx(Mr(e),n._key,{source:"server"}).then(t=>fS(e,n,t))}(this._delegate):function SO(n){n=sn(n,Zn);const e=sn(n.firestore,Yn);return jx(Mr(e),n._key).then(t=>fS(e,n,t))}(this._delegate),t.then(r=>new Lw(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new la(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}function hs(n,e,t){return n.message=n.message.replace(e,t),n}function _M(n){for(const e of n)if("object"==typeof e&&!gS(e))return e;return{}}function vM(n,e){var t,r;let s;return s=gS(n[0])?n[0]:gS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class Lw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new la(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return aM(this._delegate,e._delegate)}}class Vw extends Lw{data(e){const t=this._delegate.data(e);return function gD(n,e){n||st()}(void 0!==t),t}}class fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kb(e)}where(e,t,r){try{return new fs(this.firestore,Vh(this._delegate,function mO(n,e,t){const r=e,s=Rb("where",n);return new gO(s,r,t)}(e,t,r)))}catch(s){throw hs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fs(this.firestore,Vh(this._delegate,function _O(n,e="asc"){const t=e,r=Rb("orderBy",n);return new yO(r,t)}(e,t)))}catch(r){throw hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fs(this.firestore,Vh(this._delegate,function vO(n){return Mx("limit",n),new eM("limit",n,"F")}(e)))}catch(t){throw hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fs(this.firestore,Vh(this._delegate,function wO(n){return Mx("limitToLast",n),new eM("limitToLast",n,"L")}(e)))}catch(t){throw hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fs(this.firestore,Vh(this._delegate,function EO(...n){return new tM("startAt",n,!0)}(...e)))}catch(t){throw hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fs(this.firestore,Vh(this._delegate,function IO(...n){return new tM("startAfter",n,!1)}(...e)))}catch(t){throw hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fs(this.firestore,Vh(this._delegate,function bO(...n){return new nM("endBefore",n,!1)}(...e)))}catch(t){throw hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fs(this.firestore,Vh(this._delegate,function CO(...n){return new nM("endAt",n,!0)}(...e)))}catch(t){throw hs(t,"endAt()","Query.endAt()")}}isEqual(e){return QT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function RO(n){n=sn(n,Gi);const e=sn(n.firestore,Yn),t=Mr(e),r=new Bh(e);return function qk(n,e){const t=new Ar;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(s,u,l){try{const m=yield Ay(s,u,!0),v=new vx(u,m.Hi),I=v.Wu(m.documents),A=v.applyChanges(I,!1);l.resolve(A.snapshot)}catch(m){const v=Te(m,`Failed to execute query '${u} against cache`);l.reject(v)}}),function(s,u,l){return r.apply(this,arguments)})(yield Db(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Uh(e,r,n,s))}(this._delegate):"server"===e?.source?function NO(n){n=sn(n,Gi);const e=sn(n.firestore,Yn),t=Mr(e),r=new Bh(e);return Hx(t,n._query,{source:"server"}).then(s=>new Uh(e,r,n,s))}(this._delegate):function MO(n){n=sn(n,Gi);const e=sn(n.firestore,Yn),t=Mr(e),r=new Bh(e);return Xx(n._query),Hx(t,n._query).then(s=>new Uh(e,r,n,s))}(this._delegate),t.then(r=>new mS(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=_M(e),r=vM(e,s=>new mS(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return lM(this._delegate,t,r)}withConverter(e){return new fs(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}class ZO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Vw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Vw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ZO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Vw(this._firestore,r))})}isEqual(e){return aM(this._delegate,e._delegate)}}class Oy extends fs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new la(this.firestore,e):null}doc(e){try{return new la(this.firestore,void 0===e?Ib(this._delegate):Ib(this._delegate,e))}catch(t){throw hs(t,"doc()","CollectionReference.doc()")}}add(e){return function OO(n,e){const t=sn(n.firestore,Yn),r=Ib(n),s=Nb(n.converter,e);return ky(t,[Ab(zp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Vn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new la(this.firestore,t))}isEqual(e){return Px(this._delegate,e._delegate)}withConverter(e){return new Oy(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}function Zp(n){return sn(n,Zn)}class yS{constructor(...e){this._delegate=new Xl(...e)}static documentId(){return new yS(Wn.keyField().canonicalString())}isEqual(e){return(e=(0,Vt.m9)(e))instanceof Xl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Yp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function BO(){return new aS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Yp(e)}static delete(){const e=function UO(){return new Nw("deleteField")}();return e._methodName="FieldValue.delete",new Yp(e)}static arrayUnion(...e){const t=function jO(...n){return new lO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Yp(t)}static arrayRemove(...e){const t=function HO(...n){return new dO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Yp(t)}static increment(e){const t=function $O(n){return new hO("increment",n)}(e);return t._methodName="FieldValue.increment",new Yp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const YO={Firestore:gM,GeoPoint:Tb,Timestamp:Nn,Blob:Fw,Transaction:mM,WriteBatch:yM,DocumentReference:la,DocumentSnapshot:Lw,Query:fs,QueryDocumentSnapshot:Vw,QuerySnapshot:mS,CollectionReference:Oy,FieldPath:yS,FieldValue:Yp,setLogLevel:function KO(n){!function HE(n){ru.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function JO(n){(function QO(n,e){n.INTERNAL.registerComponent(new Zd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},YO)))})(n,(e,t)=>new gM(e,t,new WO)),n.registerVersion("@firebase/firestore-compat","0.2.2")}(Z0.Z);var _S=O(6451),Ob=O(5363),XO=O(6063);class eP extends _r.x{constructor(e=1/0,t=1/0,r=XO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=l;v+=2)m=v;m&&r.splice(0,m+1)}}}var tP=O(3099);function wM(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,tP.B)({connector:()=>new eP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function EM(n,e){return(0,Dr.m)(e)?gn(()=>n,e):gn(()=>n)}var vS=O(9468);O(5867);const bM=new Map,oP={activated:!1,tokenObservers:[]},aP={initialized:!1,enabled:!1};function fi(n){return bM.get(n)||oP}function da(n,e){bM.set(n,e)}function Fb(){return aP}class hP{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new Vt.BH,yield function fP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Vt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ps=new Vt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function DM(n){if(!fi(n).activated)throw ps.create("use-before-activation",{appName:n.name})}function bS(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,me.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const H=yield l.getHeartbeatsHeader();H&&(u["X-Firebase-Client"]=H)}const m={method:"POST",body:JSON.stringify(e),headers:u};let v,I;try{v=yield fetch(n,m)}catch(H){throw ps.create("fetch-network-error",{originalErrorMessage:null===(r=H)||void 0===r?void 0:r.message})}if(200!==v.status)throw ps.create("fetch-status-error",{httpStatus:v.status});try{I=yield v.json()}catch(H){throw ps.create("fetch-parse-error",{originalErrorMessage:null===(s=H)||void 0===s?void 0:s.message})}const A=I.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw ps.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${I.ttl}`});const M=1e3*Number(A[1]),L=Date.now();return{token:I.token,expireTimeMillis:L+M,issuedAtTimeMillis:L}}),CS.apply(this,arguments)}function yP(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const Uw="firebase-app-check-store";let Ub=null;function SM(){return Ub||(Ub=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(ps.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(Uw,{keyPath:"compositeKey"})}}catch(r){e(ps.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Ub)}function DS(){return DS=(0,me.Z)(function*(n,e){const r=(yield SM()).transaction(Uw,"readwrite"),u=r.objectStore(Uw).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=v=>{l()},r.onerror=v=>{var I;m(ps.create("storage-set",{originalErrorMessage:null===(I=v.target.error)||void 0===I?void 0:I.message}))}})}),DS.apply(this,arguments)}const Bw=new Ml.Yd("@firebase/app-check");function AS(n,e){return(0,Vt.hl)()?function EP(n,e){return function AM(n,e){return DS.apply(this,arguments)}(function MM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Bw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function RM(){return Fb().enabled}function NM(){return MS.apply(this,arguments)}function MS(){return MS=(0,me.Z)(function*(){const n=Fb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),MS.apply(this,arguments)}const SP={error:"UNKNOWN_ERROR"};function AP(n){return Vt.US.encodeString(JSON.stringify(n),!1)}function Bb(n){return RS.apply(this,arguments)}function RS(){return RS=(0,me.Z)(function*(n,e=!1){const t=n.app;DM(t);const r=fi(t);let u,s=r.token;if(s&&!Py(s)&&(da(t,Object.assign(Object.assign({},r),{token:void 0})),s=void 0),!s){const v=yield r.cachedTokenPromise;v&&(Py(v)?s=v:yield AS(t,void 0))}if(!e&&s&&Py(s))return{token:s.token};let m,l=!1;if(RM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=bS(yP(t,yield NM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const v=yield r.exchangeTokenPromise;return yield AS(t,v),da(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Bw.warn(v.message):Bw.error(v),u=v}return s?u?m=Py(s)?{token:s.token,internalError:u}:PM(u):(m={token:s.token},da(t,Object.assign(Object.assign({},r),{token:s})),yield AS(t,s)):m=PM(u),l&&OM(t,m),m}),RS.apply(this,arguments)}function kS(n,e){const t=fi(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),da(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function kM(n){const{app:e}=n,t=fi(e);let r=t.tokenRefresher;r||(r=function xP(n){const{app:e}=n;return new hP((0,me.Z)(function*(){let r;if(r=fi(e).token?yield Bb(n,!0):yield Bb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=fi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),da(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function OM(n,e){const t=fi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Py(n){return n.expireTimeMillis-Date.now()>0}function PM(n){return{token:AP(SP),error:n}}class MP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=fi(this.app);for(const t of e)kS(this.app,t.next);return Promise.resolve()}}const $M="app-check-internal";!function GP(){(0,na._registerComponent)(new Zd.wA("app-check",n=>function RP(n,e){return new MP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($M).initialize()})),(0,na._registerComponent)(new Zd.wA($M,n=>function NP(n){return{getToken:e=>Bb(n,e),addTokenListener:e=>function NS(n,e,t,r){const{app:s}=n,u=fi(s),l={next:t,error:r,type:e};if(da(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,l]})),u.token&&Py(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),kM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>kM(n))}(n,"INTERNAL",e),removeTokenListener:e=>kS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,na.registerVersion)("@firebase/app-check","0.5.16")}();class Hb{constructor(){return(0,Dn.vb)("app-check")}}typeof window<"u"&&window;var VS=O(127);const zM=new f.OlP("angularfire2.auth.use-emulator"),qM=new f.OlP("angularfire2.auth.settings"),WM=new f.OlP("angularfire2.auth.tenant-id"),KM=new f.OlP("angularfire2.auth.langugage-code"),ZM=new f.OlP("angularfire2.auth.use-device-language"),YM=new f.OlP("angularfire.auth.persistence"),QM=(n,e,t,r,s,u,l,m)=>(0,bi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=s,u&&v.useDeviceLanguage(),l)for(const[I,A]of Object.entries(l))v.settings[I]=A;return m&&v.setPersistence(m),v},[t,r,s,u,l,m]);let US=(()=>{class n{constructor(t,r,s,u,l,m,v,I,A,M,L,H){const Z=new _r.x,Ce=nt(void 0).pipe((0,Ob.Q)(l.outsideAngular),gn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,1277)))),(0,We.U)(()=>(0,bi.on)(t,u,r)),(0,We.U)(be=>QM(be,u,m,I,A,M,v,L)),wM({bufferSize:1,refCount:!1}));if(yr(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nt(null);else{Ce.pipe(te()).subscribe();const Ye=Ce.pipe(gn(ut=>ut.getRedirectResult().then(Tt=>Tt,()=>null)),Dn.iC,wM({bufferSize:1,refCount:!1})),yt=Ce.pipe(gn(ut=>new Pn.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>ut.onAuthStateChanged(Ot=>Tt.next(Ot),Ot=>Tt.error(Ot),()=>Tt.complete()))})))),ht=Ce.pipe(gn(ut=>new Pn.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>ut.onIdTokenChanged(Ot=>Tt.next(Ot),Ot=>Tt.error(Ot),()=>Tt.complete()))}))));this.authState=Ye.pipe(EM(yt),(0,vS.R)(l.outsideAngular),(0,Ob.Q)(l.insideAngular)),this.user=Ye.pipe(EM(ht),(0,vS.R)(l.outsideAngular),(0,Ob.Q)(l.insideAngular)),this.idToken=this.user.pipe(gn(ut=>ut?(0,Jt.D)(ut.getIdToken()):nt(null))),this.idTokenResult=this.user.pipe(gn(ut=>ut?(0,Jt.D)(ut.getIdTokenResult()):nt(null))),this.credential=(0,_S.T)(Ye,Z,this.authState.pipe(C(ut=>!ut))).pipe((0,We.U)(ut=>ut?.user?ut:null),(0,vS.R)(l.outsideAngular),(0,Ob.Q)(l.insideAngular))}return(0,bi.pX)(this,Ce,u,{spy:{apply:(be,Ye,yt)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&yt.then(ht=>Z.next(ht))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bi.Dh),f.LFG(bi.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Dn.HU),f.LFG(zM,8),f.LFG(qM,8),f.LFG(WM,8),f.LFG(KM,8),f.LFG(ZM,8),f.LFG(YM,8),f.LFG(Hb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YP=(()=>{class n{constructor(){VS.Z.registerVersion("angularfire",Dn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[US]}),n})();function JM(n,e){return function QP(n,e=Kd.z){return new Pn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function BS(n,e){return JM(n,e).pipe((0,We.U)(t=>({payload:t,type:"query"})))}function $b(n,e){return BS(n,e).pipe(Qu(void 0),Rf(),(0,We.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const v=s.find(A=>A.doc.ref.isEqual(l.ref)),I=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(l.metadata)||!v&&I&&JSON.stringify(I.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function XM(n,e,t){return $b(n,t).pipe(Mt((r,s)=>function XP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function e1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function UA(n,e=ks.y){return n=n??QC,(0,$n.e)((t,r)=>{let s,u=!0;t.subscribe((0,Fn.x)(r,l=>{const m=e(l);(u||!n(s,m))&&(u=!1,s=m,r.next(l))}))})}(),(0,We.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function jS(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function eR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class tR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=$b(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,We.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Qu(void 0),Rf(),C(([r,s])=>s.length>0||!r),(0,We.U)(([r,s])=>s),Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=eR(e);return XM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return BS(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Dn.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(Dn.iC)}add(e){return this.ref.add(e)}doc(e){return new nR(this.ref.doc(e),this.afs)}}class nR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=sR(r,t);return new tR(s,u,this.afs)}snapshotChanges(){return function JP(n,e){return JM(n,e).pipe(Qu(void 0),Rf(),(0,We.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,We.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Jt.D)(this.ref.get(e)).pipe(Dn.iC)}}class t1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$b(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),C(t=>t.length>0),Dn.iC):$b(this.query,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=eR(e);return XM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return BS(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Dn.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(Dn.iC)}}const rR=new f.OlP("angularfire2.enableFirestorePersistence"),iR=new f.OlP("angularfire2.firestore.persistenceSettings"),n1=new f.OlP("angularfire2.firestore.settings"),r1=new f.OlP("angularfire2.firestore.use-emulator");function sR(n,e=(t=>t)){return{query:e(n),ref:n}}let oR=(()=>{class n{constructor(t,r,s,u,l,m,v,I,A,M,L,H,Z,Ce,be,Ye,yt){this.schedulers=v;const ht=(0,bi.on)(t,m,r),ut=A;M&&QM(ht,m,L,Z,Ce,be,H,Ye),[this.firestore,this.persistenceEnabled$]=(0,bi.cc)(`${ht.name}.firestore`,"AngularFirestore",ht.name,()=>{const Tt=m.runOutsideAngular(()=>ht.firestore());if(u&&Tt.settings(u),ut&&Tt.useEmulator(...ut),s&&!yr(l)){const Ot=()=>{try{return(0,Jt.D)(Tt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(pr){return typeof console<"u"&&console.warn(pr),nt(!1)}};return[Tt,m.runOutsideAngular(Ot)]}return[Tt,nt(!1)]},[u,ut,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=sR(s,r),m=this.schedulers.ngZone.run(()=>u);return new tR(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new t1(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new nR(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bi.Dh),f.LFG(bi.xv,8),f.LFG(rR,8),f.LFG(n1,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Dn.HU),f.LFG(iR,8),f.LFG(r1,8),f.LFG(US,8),f.LFG(zM,8),f.LFG(qM,8),f.LFG(WM,8),f.LFG(KM,8),f.LFG(ZM,8),f.LFG(YM,8),f.LFG(Hb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),i1=(()=>{class n{constructor(){VS.Z.registerVersion("angularfire",Dn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:rR,useValue:!0},{provide:iR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[oR]}),n})(),s1=(()=>{class n{constructor(t){this._db=t,this._dbPath="AccessCount",this._deviceList=t.collection(this._dbPath)}getAllAccess(){return this._deviceList.snapshotChanges().pipe((0,We.U)(t=>t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))))}getAccessCount(){const t=new Date,r=`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`;this._deviceList.ref.where("date","==",r).get().then(s=>{const u=s.docs?.map(l=>({id:l.id,...l.data()}))[0]||null;u?.id?this._updateAccessCount(u.id,{date:r,count:u.count+1}):this._addAccessCount({date:r,count:1})})}_addAccessCount(t){return this._deviceList.add(t)}_updateAccessCount(t,r){return this._deviceList.doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oR))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aR(n,e=Kd.z){return(0,$n.e)((t,r)=>{let s=null,u=null,l=null;const m=()=>{if(s){s.unsubscribe(),s=null;const I=u;u=null,r.next(I)}};function v(){const I=l+n,A=e.now();if(A<I)return s=this.schedule(void 0,I-A),void r.add(s);m()}t.subscribe((0,Fn.x)(r,I=>{u=I,l=e.now(),s||(s=e.schedule(v,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}function o1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",11)(1,"p"),f._uU(2,"Livros"),f.qZA(),f.TgZ(3,"input",12),f.NdJ("input",function(s){f.CHM(t);const u=f.oxw();return f.KtG(u.searchBooks(s.target))}),f.qZA()()}}function a1(n,e){1&n&&f._UZ(0,"img",16)}function u1(n,e){1&n&&f._UZ(0,"img",17)}function c1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",13)(1,"p"),f._uU(2,"Capt\xfalos"),f.qZA(),f.TgZ(3,"p",10),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.comeBack())}),f.YNc(4,a1,1,0,"img",14),f.YNc(5,u1,1,0,"img",15),f._uU(6," Voltar "),f.qZA()()}if(2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngIf","dark"===t.theme),f.xp6(1),f.Q6J("ngIf","ligth"===t.theme)}}function l1(n,e){1&n&&f._UZ(0,"img",21)}function d1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",19),f.NdJ("click",function(){const u=f.CHM(t).$implicit,l=f.oxw(2);return f.KtG(l.selectBook(u.livro))}),f._uU(1),f.YNc(2,l1,1,0,"img",20),f.qZA()}if(2&n){const t=e.$implicit,r=f.oxw(2);f.xp6(1),f.hij(" ",t.livro," "),f.xp6(1),f.Q6J("ngIf",r.livroSelected.livro===t.livro)}}function h1(n,e){if(1&n&&(f.ynx(0),f.YNc(1,d1,3,2,"div",18),f.BQk()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngForOf",t.filterBooks())}}function f1(n,e){1&n&&f._UZ(0,"img",21)}function p1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",24),f.NdJ("click",function(){const u=f.CHM(t).$implicit,l=f.oxw(3);return f.KtG(l.selectChapter(u.chapterNumber))}),f._uU(1),f.YNc(2,f1,1,0,"img",20),f.qZA()}if(2&n){const t=e.$implicit,r=f.oxw(3);f.xp6(1),f.hij(" ",t.chapterNumber+1," "),f.xp6(1),f.Q6J("ngIf",r.livroSelected.chapter===t.chapterNumber)}}function g1(n,e){if(1&n&&(f.ynx(0),f.YNc(1,p1,3,2,"div",23),f.BQk()),2&n){const t=f.oxw(2);f.xp6(1),f.Q6J("ngForOf",t.chapters)}}function m1(n,e){if(1&n&&f.YNc(0,g1,2,1,"ng-container",22),2&n){const t=f.oxw();f.Q6J("ngIf",t.showCapters)}}const uR=function(n){return{rotate:n}};function y1(n,e){if(1&n&&f._UZ(0,"img",25),2&n){const t=f.oxw();f.Q6J("ngClass",f.VKq(1,uR,t.expanded))}}function _1(n,e){if(1&n&&f._UZ(0,"img",26),2&n){const t=f.oxw();f.Q6J("ngClass",f.VKq(1,uR,t.expanded))}}function v1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",27),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.changeTheme(s.eTheme.DARK))}),f._UZ(1,"img",28),f.qZA()}}function w1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",27),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.changeTheme(s.eTheme.LIGTH))}),f._UZ(1,"img",29),f.qZA()}}const E1=function(n,e){return{dark:n,"expanded-menu":e}},cR=function(n){return{dark:n}};let I1=(()=>{class n{constructor(t){this._themeService=t,this._subs=[],this.theme=Za.LIGTH,this.menuBiblia=[],this.chapters=[],this.versesNumber=[],this.eTheme=Za,this.onSelectedLivro=new f.vpe,this.onChangeFontSize=new f.vpe,this._debounceSearch=new _r.x,this.livroSelected={livro:null,chapter:null,verse:null,size:16},this.expanded=!1,this.showCapters=!1,this.maxFontSize=24,t.getTheme().subscribe({next:r=>this.theme=r,error:r=>console.error("Get theme not found!!!")})}ngOnInit(){this._subs.push(this._debounceSearch.pipe(aR(800)).subscribe(t=>this._searchText=t))}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe())}expandedMenu(){this.expanded=!this.expanded}selectBook(t){this.livroSelected={chapter:this.livroSelected.livro===t?this.livroSelected.chapter:0,livro:t,verse:null,size:this.livroSelected.size},this.chapters=this.menuBiblia.find(r=>r.livro===t)?.chapter||[],this.onSelectedLivro.next(this.livroSelected),this.showCapters=!0}selectChapter(t){this.livroSelected.chapter=t,this.livroSelected={...this.livroSelected,chapter:t,verse:null},this.versesNumber=this.chapters[t].versesNumber,this.onSelectedLivro.next(this.livroSelected)}selectVerse(t){this.livroSelected={...this.livroSelected,verse:t},this.onSelectedLivro.next(this.livroSelected)}comeBack(){this.showCapters=!1}changeTheme(t){this._themeService.changeTheme(t)}plusSize(){this.livroSelected.size!==this.maxFontSize&&(this.livroSelected.size+=1,this.onChangeFontSize.emit(this.livroSelected.size))}anyLessSize(){16!==this.livroSelected.size&&(this.livroSelected.size-=1,this.onChangeFontSize.emit(this.livroSelected.size))}searchBooks(t){this._debounceSearch.next(t.value)}filterBooks(){return this._searchText?this.menuBiblia.filter(t=>t.livro.toLocaleUpperCase().includes(this._searchText.toLocaleUpperCase())):this.menuBiblia}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Wd))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-menu"]],inputs:{menuBiblia:"menuBiblia",livroSelected:"livroSelected"},outputs:{onSelectedLivro:"onSelectedLivro",onChangeFontSize:"onChangeFontSize"},decls:18,vars:24,consts:[[1,"livros-chapters",3,"ngClass"],["class","livros",4,"ngIf","ngIfElse"],["chaptersTemplate",""],[1,"cards",3,"ngClass"],[4,"ngIf","ngIfElse"],["chapterTemplate",""],[1,"btn","book",3,"ngClass","click"],["src","assets/img/menu_open_black.svg","alt","Book image",3,"ngClass",4,"ngIf"],["src","assets/img/menu_open_ligth.svg","alt","Book image",3,"ngClass",4,"ngIf"],["class","btn theme",3,"click",4,"ngIf"],[3,"click"],[1,"livros"],["type","text","placeholder","Buscar livro...",3,"input"],[1,"chapters"],["src","assets/img/caret-left-bold-ligth.svg","alt","Icone para voltar aos livros",4,"ngIf"],["src","assets/img/caret-left-bold.svg","alt","Icone para voltar aos livros",4,"ngIf"],["src","assets/img/caret-left-bold-ligth.svg","alt","Icone para voltar aos livros"],["src","assets/img/caret-left-bold.svg","alt","Icone para voltar aos livros"],["class","card",3,"click",4,"ngFor","ngForOf"],[1,"card",3,"click"],["src","assets/img/mark.svg","alt","Marcador",4,"ngIf"],["src","assets/img/mark.svg","alt","Marcador"],[4,"ngIf"],["class","card chapter",3,"click",4,"ngFor","ngForOf"],[1,"card","chapter",3,"click"],["src","assets/img/menu_open_black.svg","alt","Book image",3,"ngClass"],["src","assets/img/menu_open_ligth.svg","alt","Book image",3,"ngClass"],[1,"btn","theme",3,"click"],["src","assets/img/moon.svg","alt","Theme dark"],["src","assets/img/sun.svg","alt","Theme dark"]],template:function(t,r){if(1&t&&(f.TgZ(0,"div",0),f.YNc(1,o1,4,0,"div",1),f.YNc(2,c1,7,2,"ng-template",null,2,f.W1O),f.TgZ(4,"div",3),f.YNc(5,h1,2,1,"ng-container",4),f.YNc(6,m1,1,1,"ng-template",null,5,f.W1O),f.qZA()(),f.TgZ(8,"div",6),f.NdJ("click",function(){return r.expandedMenu()}),f._uU(9," MENU "),f.YNc(10,y1,1,3,"img",7),f.YNc(11,_1,1,3,"img",8),f.qZA(),f.YNc(12,v1,2,0,"div",9),f.YNc(13,w1,2,0,"div",9),f.TgZ(14,"div",10),f.NdJ("click",function(){return r.plusSize()}),f._uU(15,"A+"),f.qZA(),f.TgZ(16,"div",10),f.NdJ("click",function(){return r.anyLessSize()}),f._uU(17,"a-"),f.qZA()),2&t){const s=f.MAs(3),u=f.MAs(7);f.Q6J("ngClass",f.WLB(17,E1,"dark"===r.theme,r.expanded)),f.xp6(1),f.Q6J("ngIf",!r.showCapters)("ngIfElse",s),f.xp6(3),f.Q6J("ngClass",f.VKq(20,cR,"dark"===r.theme)),f.xp6(1),f.Q6J("ngIf",!r.showCapters)("ngIfElse",u),f.xp6(3),f.Q6J("ngClass",f.VKq(22,cR,"dark"===r.theme)),f.xp6(2),f.Q6J("ngIf","ligth"===r.theme),f.xp6(1),f.Q6J("ngIf","dark"===r.theme),f.xp6(1),f.Q6J("ngIf","ligth"===r.theme),f.xp6(1),f.Q6J("ngIf","dark"===r.theme),f.xp6(1),f.Gre("btn plus ",r.theme,""),f.xp6(2),f.Gre("btn anyLess ",r.theme,"")}},dependencies:[an,bs,er],styles:[".livros-chapters[_ngcontent-%COMP%]{width:0;position:fixed;bottom:0;right:0;height:100%;overflow-y:auto;overflow-x:hidden;background-color:#3aa3ff;transition-duration:.3s;transition-property:transform;transition:all .5s cubic-bezier(.75,-.02,.2,.97)}.livros-chapters[_ngcontent-%COMP%]   .livros[_ngcontent-%COMP%]{margin-bottom:1rem}.livros-chapters[_ngcontent-%COMP%]   .livros[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500}.livros-chapters[_ngcontent-%COMP%]   .livros[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.livros-chapters[_ngcontent-%COMP%]   .livros[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{margin-top:1rem;height:2rem;width:100%;padding:0 1rem;border-radius:16px;border:none;border:solid 1px rgba(95,95,95,.2)}.livros-chapters[_ngcontent-%COMP%]   .chapters[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.livros-chapters[_ngcontent-%COMP%]   .chapters[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;display:flex;align-items:center;cursor:pointer}.livros-chapters[_ngcontent-%COMP%]   .chapters[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5rem;margin-right:1rem}.livros-chapters.dark[_ngcontent-%COMP%]{background-color:#16213e}.livros-chapters.dark[_ngcontent-%COMP%]   .livros[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .livros-chapters.dark[_ngcontent-%COMP%]   .chapters[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fafafa}.livros-chapters.expanded-menu[_ngcontent-%COMP%]{width:100%;padding:1rem 3.5rem 1rem 1rem;transition:all .5s cubic-bezier(.75,-.02,.2,.97)}.livros-chapters[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:1rem;font-weight:500}.livros-chapters[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:rgba(215,212,212,.26);display:flex;justify-content:center;align-items:center;position:relative;border-radius:4px;height:4rem;cursor:pointer}.livros-chapters[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:-4px;right:5px;width:2rem}.livros-chapters[_ngcontent-%COMP%]   .cards.dark[_ngcontent-%COMP%]{color:#fafafa}.livros-chapters[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.livros-chapters[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fafafa}.btn[_ngcontent-%COMP%]{position:fixed;cursor:pointer;background:rgba(215,212,212,.5);display:flex;justify-content:center;align-items:center;width:2.5rem;height:2.5rem;border-radius:50%;right:.5rem;font-weight:600}.btn.theme[_ngcontent-%COMP%]{top:1rem}.btn.plus[_ngcontent-%COMP%]{top:4rem}.btn.anyLess[_ngcontent-%COMP%]{top:7rem}.btn.book[_ngcontent-%COMP%]{bottom:2.5rem;writing-mode:vertical-lr;text-orientation:upright;height:-moz-fit-content;height:fit-content;padding:.5rem 0;border-radius:4px}.btn.book[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:.5rem;width:2rem}.btn.book[_ngcontent-%COMP%]   .rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.btn.dark[_ngcontent-%COMP%]{color:#fafafa}"]}),n})();const b1=function(n){return{"font-size":n}};function C1(n,e){if(1&n&&(f.TgZ(0,"p",5),f._uU(1),f.qZA()),2&n){const t=e.$implicit,r=e.index,s=f.oxw(2);f.Q6J("id",s.book.name+r)("ngStyle",f.VKq(4,b1,s.bookSelected.size+"px")),f.xp6(1),f.AsE(" ",r+1,". ",t.verse," ")}}function D1(n,e){if(1&n&&(f.TgZ(0,"div"),f.ALo(1,"async"),f.TgZ(2,"div")(3,"p",2)(4,"span",3),f._uU(5),f.qZA()(),f.TgZ(6,"p",2)(7,"span"),f._uU(8),f.qZA()(),f.YNc(9,C1,2,6,"p",4),f.qZA()()),2&n){const t=f.oxw();f.Gre("book ",f.lcZ(1,6,t.themeService.getTheme()),""),f.xp6(5),f.hij(" ",t.book.name," "),f.xp6(3),f.hij(" Cap\xedtulo ",t.bookSelected.chapter?t.bookSelected.chapter+1:1," "),f.xp6(1),f.Q6J("ngForOf",t.book.chapter)}}const T1=[{path:"",resolve:{menuBiblia:YC},component:(()=>{class n{constructor(t,r,s,u){this._route=t,this._bibliaService=r,this.themeService=s,this._deviceService=u,this.menuBiblia=[],this.bookSelected={livro:"G\xeanesis",chapter:0,verse:0,size:16}}ngOnInit(){this.menuBiblia=this._route.snapshot.data.menuBiblia||[];const t=this._bibliaService.getLastSelectedBook();t&&(this.bookSelected=t),this.getBook(this.bookSelected),this._deviceService.getAccessCount()}getBook(t){this._bibliaService.getBiblia(t).subscribe({next:r=>{this.book=r,this.bookSelected=t,this.saveLastSelectedBook()},error:r=>console.error("Livro N\xe3o encontrado!!!")})}bookChangeSelectedSize(t){this.bookSelected.size=t,this.saveLastSelectedBook()}saveLastSelectedBook(){this._bibliaService.saveLastSelectedBook(this.bookSelected)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Zo),f.Y36(nm),f.Y36(Wd),f.Y36(s1))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:3,consts:[[3,"class",4,"ngIf"],[3,"menuBiblia","livroSelected","onSelectedLivro","onChangeFontSize"],[1,"book-name"],[1,"name"],["class","verse",3,"id","ngStyle",4,"ngFor","ngForOf"],[1,"verse",3,"id","ngStyle"]],template:function(t,r){1&t&&(f.YNc(0,D1,10,8,"div",0),f.TgZ(1,"app-menu",1),f.NdJ("onSelectedLivro",function(u){return r.getBook(u)})("onChangeFontSize",function(u){return r.bookChangeSelectedSize(u)}),f.qZA()),2&t&&(f.Q6J("ngIf",r.book),f.xp6(1),f.Q6J("menuBiblia",r.menuBiblia)("livroSelected",r.bookSelected))},dependencies:[bs,er,id,I1,yu],styles:[".book[_ngcontent-%COMP%]{display:flex;justify-content:center}.book.dark[_ngcontent-%COMP%]{color:#fafafa}.book[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:1rem}.book[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .book-name[_ngcontent-%COMP%]{text-align:center}.book[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .book-name[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:1rem;font-size:2.5rem}.book[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .verse[_ngcontent-%COMP%]{padding:.1rem 3rem .1rem .5rem}"]}),n})()}];let S1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Yg.forChild(T1),Yg]}),n})(),XR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),SF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[XR]}),n})(),AF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[SF]}),n})(),MF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[YC,nm],imports:[Mo,W0,AF,S1]}),n})();const RF=[{path:"",loadChildren:()=>MF},{path:"**",redirectTo:""}];let NF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Yg.forRoot(RF),Yg]}),n})(),kF=(()=>{class n{constructor(t){this.themeService=t}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Wd))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:5,template:function(t,r){1&t&&(f.TgZ(0,"div"),f.ALo(1,"async"),f._UZ(2,"router-outlet"),f.qZA()),2&t&&f.Gre("content-body ",f.lcZ(1,3,r.themeService.getTheme()),"")},dependencies:[za,yu],styles:[".content-body[_ngcontent-%COMP%]{width:100%;min-height:100vh}.content-body.dark[_ngcontent-%COMP%]{background:#2c3639}"]}),n})();var OF=O(1144);const PF=["addListener","removeListener"],FF=["addEventListener","removeEventListener"],LF=["on","off"];function Xb(n,e,t,r){if((0,Dr.m)(t)&&(r=t,t=void 0),r)return Xb(n,e,t).pipe($o(r));const[s,u]=function BF(n){return(0,Dr.m)(n.addEventListener)&&(0,Dr.m)(n.removeEventListener)}(n)?FF.map(l=>m=>n[l](e,m,t)):function VF(n){return(0,Dr.m)(n.addListener)&&(0,Dr.m)(n.removeListener)}(n)?PF.map(yN(n,e)):function UF(n){return(0,Dr.m)(n.on)&&(0,Dr.m)(n.off)}(n)?LF.map(yN(n,e)):[];if(!s&&(0,OF.z)(n))return(0,D.z)(l=>Xb(l,e,t))((0,Pi.Xf)(n));if(!s)throw new TypeError("Invalid event target");return new Pn.y(l=>{const m=(...v)=>l.next(1<v.length?v:v[0]);return s(m),()=>u(m)})}function yN(n,e){return t=>r=>n[t](e,r)}var _N=O(5032);const zh=new Pn.y(_N.Z),HF={connector:()=>new _r.x};function vN(n,e=HF){const{connector:t}=e;return(0,$n.e)((r,s)=>{const u=t();(0,Pi.Xf)(n(function jF(n){return new Pn.y(e=>n.subscribe(e))}(u))).subscribe(s),s.add(r.subscribe(u))})}function wN(n,e){return e?t=>Oi(e.pipe(Zt(1),function zF(){return(0,$n.e)((n,e)=>{n.subscribe((0,Fn.x)(e,_N.Z))})}()),t.pipe(wN(n))):(0,D.z)((t,r)=>n(t,r).pipe(Zt(1),po(t)))}var qF=O(3532);const zw="Service workers are disabled or not supported by this browser";class eC{constructor(e){if(this.serviceWorker=e,e){const r=Xb(e,"controllerchange").pipe((0,We.U)(()=>e.controller)),u=Oi(Zr(()=>nt(e.controller)),r);this.worker=u.pipe(C(A=>!!A)),this.registration=this.worker.pipe(gn(()=>e.getRegistration()));const I=Xb(e,"message").pipe((0,We.U)(A=>A.data)).pipe(C(A=>A&&A.type)).pipe(function GF(n){return n?e=>vN(n)(e):e=>function $F(n,e){const t=(0,Dr.m)(n)?n:()=>n;return(0,Dr.m)(e)?vN(e,{connector:t}):r=>new Li(r,t)}(new _r.x)(e)}());I.connect(),this.events=I}else this.worker=this.events=this.registration=function YF(n){return Zr(()=>Fr(new Error(n)))}(zw)}postMessage(e,t){return this.worker.pipe(Zt(1),(0,Ne.b)(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const s=this.waitForOperationCompleted(r),u=this.postMessage(e,t);return Promise.all([u,s]).then(([,l])=>l)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(C(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Zt(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(C(t=>t.nonce===e),Zt(1),(0,We.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let QF=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new _r.x,!t.isEnabled)return this.messages=zh,this.notificationClicks=zh,void(this.subscription=zh);this.messages=this.sw.eventsOfType("PUSH").pipe((0,We.U)(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,We.U)(s=>s.data)),this.pushManager=this.sw.registration.pipe((0,We.U)(s=>s.pushManager));const r=this.pushManager.pipe(gn(s=>s.getSubscription()));this.subscription=(0,_S.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(zw));const r={userVisibleOnly:!0};let s=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),u=new Uint8Array(new ArrayBuffer(s.length));for(let l=0;l<s.length;l++)u[l]=s.charCodeAt(l);return r.applicationServerKey=u,this.pushManager.pipe(gn(l=>l.subscribe(r)),Zt(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Zt(1),gn(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(zw))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(eC))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),JF=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=zh,this.available=zh,this.activated=zh,void(this.unrecoverable=zh);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(C(r=>"VERSION_READY"===r.type),(0,We.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(zw));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(zw));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(eC))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class uA{}const EN=new f.OlP("NGSW_REGISTER_SCRIPT");function XF(n,e,t,r){return()=>{if(!wu(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)s=t.registrationStrategy();else{const[l,...m]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(l){case"registerImmediately":s=nt(null);break;case"registerWithDelay":s=IN(+m[0]||0);break;case"registerWhenStable":s=m[0]?(0,_S.T)(bN(n),IN(+m[0])):bN(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(f.R0b).runOutsideAngular(()=>s.pipe(Zt(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(l=>console.error("Service worker registration failed with:",l))))}}function IN(n){return nt(null).pipe(function ZF(n,e=Kd.z){const t=function KF(n=0,e,t=Kd.P){let r=-1;return null!=e&&((0,qF.K)(e)?t=e:r=e),new Pn.y(s=>{let u=function WF(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let l=0;return t.schedule(function(){s.closed||(s.next(l++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(n,e);return wN(()=>t)}(n))}function bN(n){return n.get(f.z2F).isStable.pipe(C(t=>t))}function eL(n,e){return new eC(wu(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let tL=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:EN,useValue:t},{provide:uA,useValue:r},{provide:eC,useFactory:eL,deps:[uA,f.Lbi]},{provide:f.ip1,useFactory:XF,deps:[f.zs3,EN,uA,f.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[QF,JF]}),n})();const cA_firebase={projectId:"abibliadetodos",appId:"1:924239833288:web:f119f0c4d6724a49c39dfd",storageBucket:"abibliadetodos.appspot.com",locationId:"asia-northeast3",apiKey:"AIzaSyBsYTlialonV2bxqP0IPk8MJWOuOBu40E0",authDomain:"abibliadetodos.firebaseapp.com",messagingSenderId:"924239833288"},CN="firebasestorage.googleapis.com",DN="storageBucket";class Ir extends Vt.ZR{constructor(e,t,r=0){super(lA(e),`Firebase Storage: ${t} (${lA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ir.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function lA(n){return"storage/"+n}function dA(){return new Ir("unknown","An unknown error occurred, please check the error payload for server response.")}function TN(){return new Ir("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function SN(){return new Ir("canceled","User canceled the upload/download.")}function AN(){return new Ir("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ly(n){return new Ir("invalid-argument",n)}function xN(){return new Ir("app-deleted","The Firebase app was deleted.")}function MN(n){return new Ir("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qw(n,e){return new Ir("invalid-format","String does not match format '"+n+"': "+e)}function Ww(n){throw new Ir("internal-error","Internal error: "+n)}class qi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=qi.makeFromUrl(e,t)}catch{return new qi(e,"")}if(""===r.path)return r;throw function dL(n){return new Ir("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function I(ut){ut.path_=decodeURIComponent(ut.path)}const M=t.replace(/[.]/g,"\\."),ht=[{regex:m,indices:{bucket:1,path:3},postModify:function u(ut){"/"===ut.path.charAt(ut.path.length-1)&&(ut.path_=ut.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:I},{regex:new RegExp(`^https?://${t===CN?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:I}];for(let ut=0;ut<ht.length;ut++){const Tt=ht[ut],Ot=Tt.regex.exec(e);if(Ot){let pu=Ot[Tt.indices.path];pu||(pu=""),r=new qi(Ot[Tt.indices.bucket],pu),Tt.postModify(r);break}}if(null==r)throw function lL(n){return new Ir("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class gL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function tC(n){return"string"==typeof n||n instanceof String}function RN(n){return hA()&&n instanceof Blob}function hA(){return typeof Blob<"u"&&!(0,Vt.UG)()}function fA(n,e,t,r){if(r<e)throw Ly(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ly(`Invalid value for '${n}'. Expected ${t} or less.`)}function td(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function NN(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var qh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(qh||(qh={})),qh))();function kN(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||s||u}class EL{constructor(e,t,r,s,u,l,m,v,I,A,M,L=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=m,this.errorCallback_=v,this.timeout_=I,this.progressCallback_=A,this.connectionFactory_=M,this.retry=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,Z)=>{this.resolve_=H,this.reject_=Z,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,l=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const v=this.callback_(m,m.getResponse());!function _L(n){return void 0!==n}(v)?u():u(v)}catch(v){l(v)}else if(null!==m){const v=dA();v.serverResponse=m.getErrorText(),l(this.errorCallback_?this.errorCallback_(m,v):v)}else l(s.canceled?this.appDelete_?xN():SN():TN())};this.canceled_?t(0,new nC(!1,null,!0)):this.backoffId_=function mL(n,e,t){let r=1,s=null,u=null,l=!1,m=0;function v(){return 2===m}let I=!1;function A(...be){I||(I=!0,e.apply(null,be))}function M(be){s=setTimeout(()=>{s=null,n(H,v())},be)}function L(){u&&clearTimeout(u)}function H(be,...Ye){if(I)return void L();if(be)return L(),void A.call(null,be,...Ye);if(v()||l)return L(),void A.call(null,be,...Ye);let ht;r<64&&(r*=2),1===m?(m=2,ht=0):ht=1e3*(r+Math.random()),M(ht)}let Z=!1;function Ce(be){Z||(Z=!0,L(),!I&&(null!==s?(be||(m=2),clearTimeout(s),M(0)):be||(m=1)))}return M(0),u=setTimeout(()=>{l=!0,Ce(!0)},t),Ce}((r,s)=>{if(s)return void r(!1,new nC(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const m=u.getErrorCode()===qh.NO_ERROR,v=u.getStatus();if((!m||kN(v,this.additionalRetryCodes_))&&this.retry){const A=u.getErrorCode()===qh.ABORT;return void r(!1,new nC(!1,null,A))}const I=-1!==this.successCodes_.indexOf(v);r(!0,new nC(I,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function yL(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class nC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function AL(...n){const e=function SL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(hA())return new Blob(n);throw new Ir("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ao={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pA{constructor(e,t){this.data=e,this.contentType=t||null}}function gA(n,e){switch(n){case Ao.RAW:return new pA(ON(e));case Ao.BASE64:case Ao.BASE64URL:return new pA(PN(n,e));case Ao.DATA_URL:return new pA(function NL(n){const e=new FN(n);return e.base64?PN(Ao.BASE64,e.rest):function RL(n){let e;try{e=decodeURIComponent(n)}catch{throw qw(Ao.DATA_URL,"Malformed data URL.")}return ON(e)}(e.rest)}(e),function kL(n){return new FN(n).contentType}(e))}throw dA()}function ON(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function PN(n,e){switch(n){case Ao.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw qw(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ao.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw qw(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function ML(n){return atob(n)}(e)}catch{throw qw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class FN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw qw(Ao.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function OL(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Lc{constructor(e,t){let r=0,s="";RN(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(RN(this.data_)){const s=function xL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new Lc(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Lc(r,!0)}}static getBlob(...e){if(hA()){const t=e.map(r=>r instanceof Lc?r.data_:r);return new Lc(AL.apply(null,t))}{const t=e.map(l=>tC(l)?gA(Ao.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let m=0;m<l.length;m++)s[u++]=l[m]}),new Lc(s,!0)}}uploadData(){return this.data_}}function mA(n){let e;try{e=JSON.parse(n)}catch{return null}return function wL(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function LN(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function LL(n,e){return e}class ms{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||LL}}let rC=null;function Kw(){if(rC)return rC;const n=[];n.push(new ms("bucket")),n.push(new ms("generation")),n.push(new ms("metageneration")),n.push(new ms("name","fullPath",!0));const t=new ms("name");t.xform=function e(u,l){return function VL(n){return!tC(n)||n.length<2?n:LN(n)}(l)},n.push(t);const s=new ms("size");return s.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(s),n.push(new ms("timeCreated")),n.push(new ms("updated")),n.push(new ms("md5Hash",null,!0)),n.push(new ms("cacheControl",null,!0)),n.push(new ms("contentDisposition",null,!0)),n.push(new ms("contentEncoding",null,!0)),n.push(new ms("contentLanguage",null,!0)),n.push(new ms("contentType",null,!0)),n.push(new ms("metadata","customMetadata",!0)),rC=n,rC}function VN(n,e,t){const r=mA(e);return null===r?null:function BL(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function UL(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new qi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function yA(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const UN="prefixes";class Vc{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Uc(n){if(!n)throw dA()}function iC(n,e){return function t(r,s){const u=VN(n,s,e);return Uc(null!==u),u}}function Vy(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function uL(){return new Ir("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function aL(){return new Ir("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function oL(n){return new Ir("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function cL(n){return new Ir("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function Zw(n){const e=Vy(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function sL(n){return new Ir("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function jN(n,e,t){const s=td(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Vc(s,"GET",iC(n,t),l);return m.errorHandler=Zw(e),m}function qL(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=td(e.bucketOnlyServerUrl(),n.host,n._protocol),I=n.maxOperationRetryTime,A=new Vc(m,"GET",function GL(n,e){return function t(r,s){const u=function $L(n,e,t){const r=mA(t);return null===r?null:function HL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[UN])for(const s of t[UN]){const u=s.replace(/\/$/,""),l=n._makeStorageReference(new qi(e,u));r.prefixes.push(l)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new qi(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return Uc(null!==u),u}}(n,e.bucket),I);return A.urlParams=u,A.errorHandler=Vy(e),A}function $N(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function YL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class sC{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function _A(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Uc(!1)}return Uc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const eV={STATE_CHANGED:"state_changed"},ys={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vA(n){switch(n){case"running":case"pausing":case"canceling":return ys.RUNNING;case"paused":return ys.PAUSED;case"success":return ys.SUCCESS;case"canceled":return ys.CANCELED;default:return ys.ERROR}}class tV{constructor(e,t,r){if(function vL(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Uy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class rV extends class nV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Ww("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ww("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ww("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ww("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ww("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function fu(){return new rV}class WN{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Kw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(kN(s.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=TN()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function QL(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),l=$N(e,r,s),m={name:l.fullPath},v=td(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},M=yA(l,t),Z=new Vc(v,"POST",function H(Ce){let be;_A(Ce);try{be=Ce.getResponseHeader("X-Goog-Upload-URL")}catch{Uc(!1)}return Uc(tC(be)),be},n.maxUploadRetryTime);return Z.urlParams=m,Z.headers=A,Z.body=M,Z.errorHandler=Vy(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,fu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function JL(n,e,t,r){const v=new Vc(t,"POST",function u(I){const A=_A(I,["active","final"]);let M=null;try{M=I.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Uc(!1)}M||Uc(!1);const L=Number(M);return Uc(!isNaN(L)),new sC(L,r.size(),"final"===A)},n.maxUploadRetryTime);return v.headers={"X-Goog-Upload-Command":"query"},v.errorHandler=Vy(e),v}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,fu,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new sC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let l;try{l=function XL(n,e,t,r,s,u,l,m){const v=new sC(0,0);if(l?(v.current=l.current,v.total=l.total):(v.current=0,v.total=r.size()),r.size()!==v.total)throw function fL(){return new Ir("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const I=v.total-v.current;let A=I;s>0&&(A=Math.min(A,s));const M=v.current;let H="";H=0===A?"finalize":I===A?"upload, finalize":"upload";const Z={"X-Goog-Upload-Command":H,"X-Goog-Upload-Offset":`${v.current}`},Ce=r.slice(M,M+A);if(null===Ce)throw AN();const ht=new Vc(t,"POST",function be(ut,Tt){const Ot=_A(ut,["active","final"]),pr=v.current+A,pu=r.size();let IA;return IA="final"===Ot?iC(e,u)(ut,Tt):null,new sC(pr,pu,"final"===Ot,IA)},e.maxUploadRetryTime);return ht.headers=Z,ht.body=Ce.uploadData(),ht.progressCallback=m||null,ht.errorHandler=Vy(n),ht}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(v){return this._error=v,void this._transition("error")}const m=this._ref.storage._makeRequest(l,fu,s,u,!1);this._request=m,m.getPromise().then(v=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(v.current),v.finalized?(this._metadata=v.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=jN(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,fu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function GN(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},v=function m(){let ht="";for(let ut=0;ut<2;ut++)ht+=Math.random().toString().slice(2);return ht}();l["Content-Type"]="multipart/related; boundary="+v;const I=$N(e,r,s),A=yA(I,t),H=Lc.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+v+"\r\nContent-Type: "+I.contentType+"\r\n\r\n",r,"\r\n--"+v+"--");if(null===H)throw AN();const Z={name:I.fullPath},Ce=td(u,n.host,n._protocol),Ye=n.maxUploadRetryTime,yt=new Vc(Ce,"POST",iC(n,t),Ye);return yt.urlParams=Z,yt.headers=l,yt.body=H.uploadData(),yt.errorHandler=Vy(e),yt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,fu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=SN(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=vA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new tV(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(vA(this._state)){case ys.SUCCESS:Uy(this._resolve.bind(null,this.snapshot))();break;case ys.CANCELED:case ys.ERROR:Uy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(vA(this._state)){case ys.RUNNING:case ys.PAUSED:e.next&&Uy(e.next.bind(e,this.snapshot))();break;case ys.SUCCESS:e.complete&&Uy(e.complete.bind(e))();break;default:e.error&&Uy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Xp{constructor(e,t){this._service=e,this._location=t instanceof qi?t:qi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xp(e,t)}get root(){const e=new qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LN(this._location.path)}get storage(){return this._service}get parent(){const e=function PL(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new qi(this._location.bucket,e);return new Xp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw MN(e)}}function ZN(n,e,t){return wA.apply(this,arguments)}function wA(){return wA=(0,me.Z)(function*(n,e,t){const s=yield YN(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield ZN(n,e,s.nextPageToken))}),wA.apply(this,arguments)}function YN(n,e){null!=e&&"number"==typeof e.maxResults&&fA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=qL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,fu)}function gV(n){n._throwIfRoot("getDownloadURL");const e=function WL(n,e,t){const s=td(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Vc(s,"GET",function zL(n,e){return function t(r,s){const u=VN(n,s,e);return Uc(null!==u),function jL(n,e,t,r){const s=mA(e);if(null===s||!tC(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(I=>{const M=n.fullPath;return td("/b/"+l(n.bucket)+"/o/"+l(M),t,r)+NN({alt:"media",token:I})})[0]}(u,s,n.host,n._protocol)}}(n,t),l);return m.errorHandler=Zw(e),m}(n.storage,n._location,Kw());return n.storage.makeRequestWithTokens(e,fu).then(t=>{if(null===t)throw function pL(){return new Ir("no-download-url","The given file does not have any download URLs.")}();return t})}function QN(n,e){const t=function FL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new qi(n._location.bucket,t);return new Xp(n.storage,r)}function JN(n,e){if(n instanceof EA){const t=n;if(null==t._bucket)throw function hL(){return new Ir("no-default-bucket","No default bucket found. Did you set the '"+DN+"' property when initializing the app?")}();const r=new Xp(t,t._bucket);return null!=e?JN(r,e):r}return void 0!==e?QN(n,e):n}function vV(n,e){if(e&&function yV(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof EA)return function _V(n,e){return new Xp(n,e)}(n,e);throw Ly("To use ref(service, url), the first argument must be a Storage instance.")}return JN(n,e)}function XN(n,e){const t=e?.[DN];return null==t?null:qi.makeFromBucketSpec(t,n)}class EA{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=CN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?qi.makeFromBucketSpec(s,this._host):XN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?qi.makeFromBucketSpec(this._url,e):XN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xp(this,e)}_makeRequest(e,t,r,s,u=!0){if(this._deleted)return new gL(xN());{const l=function TL(n,e,t,r,s,u,l=!0){const m=NN(n.urlParams),v=n.url+m,I=Object.assign({},n.headers);return function CL(n,e){e&&(n["X-Firebase-GMPID"]=e)}(I,e),function IL(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(I,t),function bL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(I,u),function DL(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(I,r),new EL(v,n.method,I,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}(e,this._appId,r,s,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const ek="@firebase/storage";function rk(n,e){return vV(n=(0,Vt.m9)(n),e)}function xV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new EA(t,r,s,e,na.SDK_VERSION)}!function MV(){(0,na._registerComponent)(new Zd.wA("storage",xV,"PUBLIC").setMultipleInstances(!0)),(0,na.registerVersion)(ek,"0.9.13",""),(0,na.registerVersion)(ek,"0.9.13","esm2017")}();class oC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class sk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new oC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new oC(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?l=>t(new oC(l,this,this._ref)):{next:t.next?l=>t.next(new oC(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class ok{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new nd(e,this._service))}get items(){return this._delegate.items.map(e=>new nd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class nd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function AV(n,e){return QN(n,e)}(this._delegate,e);return new nd(t,this.storage)}get root(){return new nd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new nd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new sk(function EV(n,e,t){return function lV(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new WN(n,new Lc(e),t)}(n=(0,Vt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ao.RAW,r){this._throwIfRoot("putString");const s=gA(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new sk(new WN(this._delegate,new Lc(s.data,!0),u),this)}listAll(){return function DV(n){return function hV(n){const e={prefixes:[],items:[]};return ZN(n,e).then(()=>e)}(n=(0,Vt.m9)(n))}(this._delegate).then(e=>new ok(e,this.storage))}list(e){return function CV(n,e){return YN(n=(0,Vt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new ok(t,this.storage))}getMetadata(){return function IV(n){return function fV(n){n._throwIfRoot("getMetadata");const e=jN(n.storage,n._location,Kw());return n.storage.makeRequestWithTokens(e,fu)}(n=(0,Vt.m9)(n))}(this._delegate)}updateMetadata(e){return function bV(n,e){return function pV(n,e){n._throwIfRoot("updateMetadata");const t=function KL(n,e,t,r){const u=td(e.fullServerUrl(),n.host,n._protocol),m=yA(t,r),I=n.maxOperationRetryTime,A=new Vc(u,"PATCH",iC(n,r),I);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=m,A.errorHandler=Zw(e),A}(n.storage,n._location,e,Kw());return n.storage.makeRequestWithTokens(t,fu)}(n=(0,Vt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function TV(n){return gV(n=(0,Vt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function SV(n){return function mV(n){n._throwIfRoot("deleteObject");const e=function ZL(n,e){const r=td(e.fullServerUrl(),n.host,n._protocol),m=new Vc(r,"DELETE",function l(v,I){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=Zw(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,fu)}(n=(0,Vt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw MN(e)}}class ak{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(uk(e))throw Ly("ref() expected a child path but got a URL, use refFromURL instead.");return new nd(rk(this._delegate,e),this)}refFromURL(e){if(!uk(e))throw Ly("refFromURL() expected a full URL but got a child path, use ref() instead.");try{qi.makeFromUrl(e,this._delegate.host)}catch{throw Ly("refFromUrl() expected a valid full URL but got an invalid one.")}return new nd(rk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function ik(n,e,t,r={}){!function wV(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Vt.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function uk(n){return/^[A-Za-z]+:\/\//.test(n)}function OV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new ak(t,r)}function ck(n){const e=function FV(n){return new Pn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(aR(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,We.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function aC(n){return{getDownloadURL:()=>nt(void 0).pipe(Dn.fc,gn(()=>n.getDownloadURL()),Dn.iC),getMetadata:()=>nt(void 0).pipe(Dn.fc,gn(()=>n.getMetadata()),Dn.iC),delete:()=>(0,Jt.D)(n.delete()),child:e=>aC(n.child(e)),updateMetadata:e=>(0,Jt.D)(n.updateMetadata(e)),put:(e,t)=>ck(n.put(e,t)),putString:(e,t,r)=>ck(n.putString(e,t,r)),list:e=>(0,Jt.D)(n.list(e)),listAll:()=>(0,Jt.D)(n.listAll())}}!function PV(n){const e={TaskState:ys,TaskEvent:eV,StringFormat:Ao,Storage:ak,Reference:nd};n.INTERNAL.registerComponent(new Zd.wA("storage-compat",OV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.21")}(Z0.Z);const LV=new f.OlP("angularfire2.storageBucket"),VV=new f.OlP("angularfire2.storage.maxUploadRetryTime"),UV=new f.OlP("angularfire2.storage.maxOperationRetryTime"),BV=new f.OlP("angularfire2.storage.use-emulator");let jV=(()=>{class n{constructor(t,r,s,u,l,m,v,I,A,M){const L=(0,bi.on)(t,l,r);this.storage=(0,bi.cc)(`${L.name}.storage.${s}`,"AngularFireStorage",L.name,()=>{const H=l.runOutsideAngular(()=>L.storage(s||void 0)),Z=A;return Z&&H.useEmulator(...Z),v&&H.setMaxUploadRetryTime(v),I&&H.setMaxOperationRetryTime(I),H},[v,I])}ref(t){return aC(this.storage.ref(t))}refFromURL(t){return aC(this.storage.refFromURL(t))}upload(t,r,s){return aC(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bi.Dh),f.LFG(bi.xv,8),f.LFG(LV,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Dn.HU),f.LFG(VV,8),f.LFG(UV,8),f.LFG(BV,8),f.LFG(Hb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),HV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),$V=(()=>{class n{constructor(){VS.Z.registerVersion("angularfire",Dn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[jV],imports:[HV]}),n})(),GV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[kF]}),n.\u0275inj=f.cJS({imports:[ul,NF,tL.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),bi.hO.initializeApp(cA_firebase),YP,i1,$V]}),n})();(0,f.G48)(),Gu().bootstrapModule(GV).catch(n=>console.error(n))},5867:(ct,De,O)=>{O.d(De,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=O(9681);(0,f.registerVersion)("firebase","9.13.0","app")},127:(ct,De,O)=>{O.d(De,{Z:()=>f.Z});var f=O(3942);f.Z.registerVersion("firebase","9.13.0","app-compat")},1277:(ct,De,O)=>{O.r(De);var f=O(5861),X=O(3942),k=O(2090),se=O(9681),oe=O(1877),le=O(655),ce=O(4859);const we=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},rt=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new oe.Yd("@firebase/auth");function at(y,...h){Xe.logLevel<=oe.in.ERROR&&Xe.error(`Auth (${se.SDK_VERSION}): ${y}`,...h)}function xe(y,...h){throw $e(y,...h)}function _e(y,...h){return $e(y,...h)}function Ie(y,h,g){const w=Object.assign(Object.assign({},rt()),{[h]:g});return new k.LL("auth","Firebase",w).create(h,{appName:y.name})}function Be(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&xe(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...h){if("string"!=typeof y){const g=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return ge.create(y,...h)}function U(y,h,...g){if(!y)throw $e(h,...g)}function pe(y){const h="INTERNAL ASSERTION FAILED: "+y;throw at(h),new Error(h)}function q(y,h){y||pe(h)}const J=new Map;function ie(y){q(y instanceof Function,"Expected a class definition");let h=J.get(y);return h?(q(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,J.set(y,h),h)}function Oe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function mt(){return"http:"===Yt()||"https:"===Yt()}function Yt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class on{constructor(h,g){this.shortDelay=h,this.longDelay=g,q(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Ht(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(mt()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _n(y,h){q(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Wt{static initialize(h,g,w){this.fetchImpl=h,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Rr=new on(3e4,6e4);function kt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function dn(y,h,g,w){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,f.Z)(function*(y,h,g,w,S={}){return pi(y,S,(0,f.Z)(function*(){let N={},z={};w&&("GET"===h?z=w:N={body:JSON.stringify(w)});const ae=(0,k.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),Wt.fetch()(gi(y,y.config.apiHost,g,ae),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function pi(y,h,g){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Qt),h);try{const S=new ni(y),N=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const z=yield N.json();if("needConfirmation"in z)throw ri(y,"account-exists-with-different-credential",z);if(N.ok&&!("errorMessage"in z))return z;{const ae=N.ok?z.errorMessage:z.error.message,[Ve,Qe]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw ri(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ve)throw ri(y,"email-already-in-use",z);if("USER_DISABLED"===Ve)throw ri(y,"user-disabled",z);const wt=w[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ie(y,wt,Qe);xe(y,wt)}}catch(S){if(S instanceof k.ZR)throw S;xe(y,"network-request-failed")}})).apply(this,arguments)}function $r(y,h,g,w){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(y,h,g,w,S={}){const N=yield dn(y,h,g,w,S);return"mfaPendingCredential"in N&&xe(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function gi(y,h,g,w){const S=`${h}${g}?${w}`;return y.config.emulator?_n(y.config,S):`${y.config.apiScheme}://${S}`}class ni{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),Rr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ri(y,h,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const S=_e(y,h,w);return S.customData._tokenResponse=g,S}function Ze(){return(Ze=(0,f.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function br(y,h){return _s.apply(this,arguments)}function _s(){return(_s=(0,f.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Qn(y,h){return ii.apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ai(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function fn(){return(fn=(0,f.Z)(function*(y,h=!1){const g=(0,k.m9)(y),w=yield g.getIdToken(h),S=lt(w);U(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,z=N?.sign_in_provider;return{claims:S,token:w,authTime:Ai(_t(S.auth_time)),issuedAtTime:Ai(_t(S.iat)),expirationTime:Ai(_t(S.exp)),signInProvider:z||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function _t(y){return 1e3*Number(y)}function lt(y){var h;const[g,w,S]=y.split(".");if(void 0===g||void 0===w||void 0===S)return at("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,k.tV)(w);return N?JSON.parse(N):(at("Failed to decode base64 JWT payload"),null)}catch(N){return at("Caught error parsing JWT payload as JSON",null===(h=N)||void 0===h?void 0:h.toString()),null}}function gr(y,h){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(w){throw w instanceof k.ZR&&Gr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Gr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class xt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),w)}iteration(){var h=this;return(0,f.Z)(function*(){var g;try{yield h.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(g=w)||void 0===g?void 0:g.code)&&h.schedule(!0))}h.schedule()})()}}class vs{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ai(this.lastLoginAt),this.creationTime=Ai(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nn(y){return xi.apply(this,arguments)}function xi(){return(xi=(0,f.Z)(function*(y){var h;const g=y.auth,w=yield y.getIdToken(),S=yield gr(y,Qn(g,{idToken:w}));U(S?.users.length,g,"internal-error");const N=S.users[0];y._notifyReloadListener(N);const z=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?tt(N.providerUserInfo):[],ae=kr(y.providerData,z),wt=!!y.isAnonymous&&!(y.email&&N.passwordHash||ae?.length),gt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ae,metadata:new vs(N.createdAt,N.lastLoginAt),isAnonymous:wt};Object.assign(y,gt)})).apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(y){const h=(0,k.m9)(y);yield nn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function kr(y,h){return[...y.filter(w=>!h.some(S=>S.providerId===w.providerId)),...h]}function tt(y){return y.map(h=>{var{providerId:g}=h,w=(0,le._T)(h,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function et(){return(et=(0,f.Z)(function*(y,h){const g=yield pi(y,{},(0,f.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=y.config,z=gi(y,S,"/v1/token",`key=${N}`),ae=yield y._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(z,{method:"POST",headers:ae,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){U(h.idToken,"internal-error"),U(typeof h.idToken<"u","internal-error"),U(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function tn(y){const h=lt(y);return U(h,"internal-error"),U(typeof h.exp<"u","internal-error"),U(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var w=this;return(0,f.Z)(function*(){return U(!w.accessToken||w.refreshToken,h,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var w=this;return(0,f.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:z}=yield function Se(y,h){return et.apply(this,arguments)}(h,g);w.updateTokensAndExpiration(S,N,Number(z))})()}updateTokensAndExpiration(h,g,w){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,g){const{refreshToken:w,accessToken:S,expirationTime:N}=g,z=new Ct;return w&&(U("string"==typeof w,"internal-error",{appName:h}),z.refreshToken=w),S&&(U("string"==typeof S,"internal-error",{appName:h}),z.accessToken=S),N&&(U("number"==typeof N,"internal-error",{appName:h}),z.expirationTime=N),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return pe("not implemented")}}function It(y,h){U("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Pt{constructor(h){var{uid:g,auth:w,stsTokenManager:S}=h,N=(0,le._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new vs(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const w=yield gr(g,g.stsTokenManager.getToken(g.auth,h));return U(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(h){return function Un(y){return fn.apply(this,arguments)}(this,h)}reload(){return function rn(y){return Jn.apply(this,arguments)}(this)}_assign(h){this!==h&&(U(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Pt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var w=this;return(0,f.Z)(function*(){let S=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),S=!0),g&&(yield nn(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield gr(h,function ha(y,h){return Ze.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var w,S,N,z,ae,Ve,Qe,wt;const gt=null!==(w=g.displayName)&&void 0!==w?w:void 0,un=null!==(S=g.email)&&void 0!==S?S:void 0,li=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,qa=null!==(z=g.photoURL)&&void 0!==z?z:void 0,t_=null!==(ae=g.tenantId)&&void 0!==ae?ae:void 0,Tl=null!==(Ve=g._redirectEventId)&&void 0!==Ve?Ve:void 0,kg=null!==(Qe=g.createdAt)&&void 0!==Qe?Qe:void 0,Hd=null!==(wt=g.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:Og,emailVerified:n_,isAnonymous:rc,providerData:Wa,stsTokenManager:vf}=g;U(Og&&vf,h,"internal-error");const wf=Ct.fromJSON(this.name,vf);U("string"==typeof Og,h,"internal-error"),It(gt,h.name),It(un,h.name),U("boolean"==typeof n_,h,"internal-error"),U("boolean"==typeof rc,h,"internal-error"),It(li,h.name),It(qa,h.name),It(t_,h.name),It(Tl,h.name),It(kg,h.name),It(Hd,h.name);const Qo=new Pt({uid:Og,auth:h,email:un,emailVerified:n_,displayName:gt,isAnonymous:rc,photoURL:qa,phoneNumber:li,tenantId:t_,stsTokenManager:wf,createdAt:kg,lastLoginAt:Hd});return Wa&&Array.isArray(Wa)&&(Qo.providerData=Wa.map(ic=>Object.assign({},ic))),Tl&&(Qo._redirectEventId=Tl),Qo}static _fromIdTokenResponse(h,g,w=!1){return(0,f.Z)(function*(){const S=new Ct;S.updateFromServerResponse(g);const N=new Pt({uid:g.localId,auth:h,stsTokenManager:S,isAnonymous:w});return yield nn(N),N})()}}const V=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,w){var S=this;return(0,f.Z)(function*(){S.storage[g]=w})()}_get(g){var w=this;return(0,f.Z)(function*(){const S=w.storage[g];return void 0===S?null:S})()}_remove(g){var w=this;return(0,f.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function W(y,h,g){return`firebase:${y}:${h}:${g}`}class ve{constructor(h,g,w){this.persistence=h,this.auth=g,this.userKey=w;const{config:S,name:N}=this.auth;this.fullUserKey=W(this.userKey,S.apiKey,N),this.fullPersistenceKey=W("persistence",S.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?Pt._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,w="authUser"){return(0,f.Z)(function*(){if(!g.length)return new ve(ie(V),h,w);const S=(yield Promise.all(g.map(function(){var Qe=(0,f.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let N=S[0]||ie(V);const z=W(w,h.config.apiKey,h.name);let ae=null;for(const Qe of g)try{const wt=yield Qe._get(z);if(wt){const gt=Pt._fromJSON(h,wt);Qe!==N&&(ae=gt),N=Qe;break}}catch{}const Ve=S.filter(Qe=>Qe._shouldAllowMigration);return N._shouldAllowMigration&&Ve.length?(N=Ve[0],ae&&(yield N._set(z,ae.toJSON())),yield Promise.all(g.map(function(){var Qe=(0,f.Z)(function*(wt){if(wt!==N)try{yield wt._remove(z)}catch{}});return function(wt){return Qe.apply(this,arguments)}}())),new ve(N,h,w)):new ve(N,h,w)})()}}function Q(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(hn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ze(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ue(h))return"Blackberry";if(Ge(h))return"Webos";if(ft(h))return"Safari";if((h.includes("chrome/")||Kt(h))&&!h.includes("edge/"))return"Chrome";if(zt(h))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function ze(y=(0,k.z$)()){return/firefox\//i.test(y)}function ft(y=(0,k.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Kt(y=(0,k.z$)()){return/crios\//i.test(y)}function hn(y=(0,k.z$)()){return/iemobile/i.test(y)}function zt(y=(0,k.z$)()){return/android/i.test(y)}function Ue(y=(0,k.z$)()){return/blackberry/i.test(y)}function Ge(y=(0,k.z$)()){return/webos/i.test(y)}function jt(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Ys(y=(0,k.z$)()){return jt(y)||zt(y)||Ge(y)||Ue(y)||/windows phone/i.test(y)||hn(y)}function ws(y,h=[]){let g;switch(y){case"Browser":g=Q((0,k.z$)());break;case"Worker":g=`${Q((0,k.z$)())}-${y}`;break;default:g=y}const w=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${w}`}class xo{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const w=N=>new Promise((z,ae)=>{try{z(h(N))}catch(Ve){ae(Ve)}});w.onAbort=g,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,f.Z)(function*(){var w;if(g.auth.currentUser===h)return;const S=[];try{for(const N of g.queue)yield N(h),N.onAbort&&S.push(N.onAbort)}catch(N){S.reverse();for(const z of S)try{z()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=N)||void 0===w?void 0:w.message})}})()}}class Ft{constructor(h,g,w){this.app=h,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new xo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,g){var w=this;return g&&(this._popupRedirectResolver=ie(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var S,N;if(!w._deleted&&(w.persistenceManager=yield ve.create(w,h),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var w;const S=yield g.assertedPersistence.getCurrentUser();let N=S,z=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ae=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Ve=N?._redirectEventId,Qe=yield g.tryRedirectSignIn(h);(!ae||ae===Ve)&&Qe?.user&&(N=Qe.user,z=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if(z)try{yield g.beforeStateQueue.runMiddleware(N)}catch(ae){N=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ae))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return U(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){var w;try{yield nn(h)}catch(S){if("auth/network-request-failed"!==(null===(w=S)||void 0===w?void 0:w.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ke(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const w=h?(0,k.m9)(h):null;return w&&U(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(h,g=!1){var w=this;return(0,f.Z)(function*(){if(!w._deleted)return h&&U(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,f.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,g,w){return this.registerStateListener(this.authStateSubscription,h,g,w)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,w){return this.registerStateListener(this.idTokenSubscription,h,g,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var w=this;return(0,f.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(g);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const w=h&&ie(h)||g._popupRedirectResolver;U(w,g,"argument-error"),g.redirectPersistenceManager=yield ve.create(g,[ie(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var w,S;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===h?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,w,S){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return U(z,this,"internal-error"),z.then(()=>N(this.currentUser)),"function"==typeof g?h.addObserver(g,w,S):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ws(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function In(y){return(0,k.m9)(y)}class Qs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Mi(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Es(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class mr{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return pe("not implemented")}_getIdTokenResponse(h){return pe("not implemented")}_linkToIdToken(h,g){return pe("not implemented")}_getReauthenticationResolver(h){return pe("not implemented")}}function Hn(y,h){return fa.apply(this,arguments)}function fa(){return(fa=(0,f.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:resetPassword",kt(y,h))})).apply(this,arguments)}function an(y,h){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,f.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function jc(y,h){return Js.apply(this,arguments)}function Js(){return(Js=(0,f.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:update",kt(y,h))})).apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithPassword",kt(y,h))})).apply(this,arguments)}function Cs(y,h){return mi.apply(this,arguments)}function mi(){return(mi=(0,f.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:sendOobCode",kt(y,h))})).apply(this,arguments)}function er(y,h){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,f.Z)(function*(y,h){return Cs(y,h)})).apply(this,arguments)}function cr(y,h){return Or.apply(this,arguments)}function Or(){return(Or=(0,f.Z)(function*(y,h){return Cs(y,h)})).apply(this,arguments)}function mu(y,h){return ga.apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(y,h){return Cs(y,h)})).apply(this,arguments)}function $c(y,h){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,f.Z)(function*(y,h){return Cs(y,h)})).apply(this,arguments)}function rd(){return(rd=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,h))})).apply(this,arguments)}function Gc(){return(Gc=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,h))})).apply(this,arguments)}class zc extends mr{constructor(h,g,w,S=null){super("password",w),this._email=h,this._password=g,this._tenantId=S}static _fromEmailAndPassword(h,g){return new zc(h,g,"password")}static _fromEmailAndCode(h,g,w=null){return new zc(h,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function pa(y,h){return bs.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Wh(y,h){return rd.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:xe(h,"internal-error")}})()}_linkToIdToken(h,g){var w=this;return(0,f.Z)(function*(){switch(w.signInMethod){case"password":return an(h,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function id(y,h){return Gc.apply(this,arguments)}(h,{idToken:g,email:w._email,oobCode:w._password});default:xe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function tr(y,h){return sd.apply(this,arguments)}function sd(){return(sd=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithIdp",kt(y,h))})).apply(this,arguments)}class Ki extends mr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Ki(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):xe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S}=g,N=(0,le._T)(g,["providerId","signInMethod"]);if(!w||!S)return null;const z=new Ki(w,S);return z.idToken=N.idToken||void 0,z.accessToken=N.accessToken||void 0,z.secret=N.secret,z.nonce=N.nonce,z.pendingToken=N.pendingToken||null,z}_getIdTokenResponse(h){return tr(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,tr(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,tr(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,k.xO)(g)}return h}}function tg(y,h){return yu.apply(this,arguments)}function yu(){return(yu=(0,f.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:sendVerificationCode",kt(y,h))})).apply(this,arguments)}function Ds(){return(Ds=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,h))})).apply(this,arguments)}function od(){return(od=(0,f.Z)(function*(y,h){const g=yield $r(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,h));if(g.temporaryProof)throw ri(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const rg={USER_NOT_FOUND:"user-not-found"};function ad(){return(ad=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),rg)})).apply(this,arguments)}class Ts extends mr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Ts({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Ts({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function qc(y,h){return Ds.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function ng(y,h){return od.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ig(y,h){return ad.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:w,verificationCode:S}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:w,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:N}=h;return w||g||S||N?new Ts({verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:N}):null}}class _u{constructor(h){var g,w,S,N,z,ae;const Ve=(0,k.zd)((0,k.pd)(h)),Qe=null!==(g=Ve.apiKey)&&void 0!==g?g:null,wt=null!==(w=Ve.oobCode)&&void 0!==w?w:null,gt=function ud(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ve.mode)&&void 0!==S?S:null);U(Qe&&wt&&gt,"argument-error"),this.apiKey=Qe,this.operation=gt,this.code=wt,this.continueUrl=null!==(N=Ve.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(z=Ve.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ae=Ve.tenantId)&&void 0!==ae?ae:null}static parseLink(h){const g=function cd(y){const h=(0,k.zd)((0,k.pd)(y)).link,g=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||g||h||y}(h);try{return new _u(g)}catch{return null}}}let Ri=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return zc._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const S=_u.parseLink(w);return U(S,"argument-error"),zc._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Zi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Yi extends Zi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Xs extends Yi{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return U("providerId"in g&&"signInMethod"in g,"argument-error"),Ki._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return U(h.idToken||h.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Xs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Xs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:N,nonce:z,providerId:ae}=h;if(!w&&!S&&!g&&!N||!ae)return null;try{return new Xs(ae)._credential({idToken:g,accessToken:w,nonce:z,pendingToken:N})}catch{return null}}}let ma=(()=>{class y extends Yi{constructor(){super("facebook.com")}static credential(g){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),vu=(()=>{class y extends Yi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:S}=g;if(!w&&!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Wc=(()=>{class y extends Yi{constructor(){super("github.com")}static credential(g){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Mo extends mr{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return tr(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,tr(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,tr(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S,pendingToken:N}=g;return w&&S&&N&&w===S?new Mo(w,N):null}static _create(h,g){return new Mo(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class si extends Zi{constructor(h){U(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return si.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return si.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Mo.fromJSON(h);return U(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:w}=h;if(!g||!w)return null;try{return Mo._create(w,g)}catch{return null}}}let qr=(()=>{class y extends Yi{constructor(){super("twitter.com")}static credential(g,w){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=g;if(!w||!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ro(y,h){return wu.apply(this,arguments)}function wu(){return(wu=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signUp",kt(y,h))})).apply(this,arguments)}class yr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,w,S=!1){return(0,f.Z)(function*(){const N=yield Pt._fromIdTokenResponse(h,w,S),z=Yh(w);return new yr({user:N,providerId:z,_tokenResponse:w,operationType:g})})()}static _forOperation(h,g,w){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const S=Yh(w);return new yr({user:h,providerId:S,_tokenResponse:w,operationType:g})})()}}function Yh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Sn(){return(Sn=(0,f.Z)(function*(y){var h;const g=In(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new yr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Ro(g,{returnSecureToken:!0}),S=yield yr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Eu extends k.ZR{constructor(h,g,w,S){var N;super(g.code,g.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,Eu.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,g,w,S){return new Eu(h,g,w,S)}}function Jh(y,h,g,w){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Eu._fromErrorAndOperation(y,N,h,w):N})}function oi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Iu(){return(Iu=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y);yield qt(!0,g,h);const{providerUserInfo:w}=yield br(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),S=oi(w||[]);return g.providerData=g.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function eo(y,h){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(y,h,g=!1){const w=yield gr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return yr._forOperation(y,"link",w)})).apply(this,arguments)}function qt(y,h,g){return bu.apply(this,arguments)}function bu(){return(bu=(0,f.Z)(function*(y,h,g){yield nn(h);const S=!1===y?"provider-already-linked":"no-such-provider";U(oi(h.providerData).has(g)===y,h.auth,S)})).apply(this,arguments)}function to(y,h){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,f.Z)(function*(y,h,g=!1){var w;const{auth:S}=y,N="reauthenticate";try{const z=yield gr(y,Jh(S,N,h,y),g);U(z.idToken,S,"internal-error");const ae=lt(z.idToken);U(ae,S,"internal-error");const{sub:Ve}=ae;return U(y.uid===Ve,S,"user-mismatch"),yr._forOperation(y,N,z)}catch(z){throw"auth/user-not-found"===(null===(w=z)||void 0===w?void 0:w.code)&&xe(S,"user-mismatch"),z}})).apply(this,arguments)}function yi(y,h){return Du.apply(this,arguments)}function Du(){return(Du=(0,f.Z)(function*(y,h,g=!1){const w="signIn",S=yield Jh(y,w,h),N=yield yr._fromIdTokenResponse(y,w,S);return g||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Cn(y,h){return St.apply(this,arguments)}function St(){return(St=(0,f.Z)(function*(y,h){return yi(In(y),h)})).apply(this,arguments)}function Tu(y,h){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y);return yield qt(!1,g,h.providerId),eo(g,h)})).apply(this,arguments)}function Su(y,h){return Au.apply(this,arguments)}function Au(){return(Au=(0,f.Z)(function*(y,h){return to((0,k.m9)(y),h)})).apply(this,arguments)}function Kc(y,h){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithCustomToken",kt(y,h))})).apply(this,arguments)}function ya(){return(ya=(0,f.Z)(function*(y,h){const g=In(y),w=yield Kc(g,{token:h,returnSecureToken:!0}),S=yield yr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ae{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?$t._fromServerResponse(h,g):xe(h,"internal-error")}}class $t extends Ae{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new $t(g)}}function xu(y,h,g){var w;U((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),U(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(U(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(U(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function An(){return(An=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S={requestType:"PASSWORD_RESET",email:h};g&&xu(w,S,g),yield cr(w,S)})).apply(this,arguments)}function No(){return(No=(0,f.Z)(function*(y,h,g){yield Hn((0,k.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function _a(){return(_a=(0,f.Z)(function*(y,h){yield jc((0,k.m9)(y),{oobCode:h})})).apply(this,arguments)}function va(y,h){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y),w=yield Hn(g,{oobCode:h}),S=w.requestType;switch(U(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,g,"internal-error");default:U(w.email,g,"internal-error")}let N=null;return w.mfaInfo&&(N=Ae._fromServerResponse(In(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function ld(){return(ld=(0,f.Z)(function*(y,h){const{data:g}=yield va((0,k.m9)(y),h);return g.email})).apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(y,h,g){const w=In(y),S=yield Ro(w,{returnSecureToken:!0,email:h,password:g}),N=yield yr._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function no(){return(no=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};U(g.handleCodeInApp,w,"argument-error"),g&&xu(w,S,g),yield mu(w,S)})).apply(this,arguments)}function Ea(){return(Ea=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S=Ri.credentialWithLink(h,g||Oe());return U(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Cn(w,S)})).apply(this,arguments)}function og(y,h){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,f.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:createAuthUri",kt(y,h))})).apply(this,arguments)}function Ia(){return(Ia=(0,f.Z)(function*(y,h){const w={identifier:h,continueUri:mt()?Oe():"http://localhost"},{signinMethods:S}=yield og((0,k.m9)(y),w);return S||[]})).apply(this,arguments)}function ba(){return(ba=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&xu(g.auth,S,h);const{email:N}=yield er(g.auth,S);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function ku(){return(ku=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&xu(w.auth,N,g);const{email:z}=yield $c(w.auth,N);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ou(y,h){return nl.apply(this,arguments)}function nl(){return(nl=(0,f.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function il(){return(il=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const w=(0,k.m9)(y),N={idToken:yield w.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},z=yield gr(w,Ou(w.auth,N));w.displayName=z.displayName||null,w.photoURL=z.photoUrl||null;const ae=w.providerData.find(({providerId:Ve})=>"password"===Ve);ae&&(ae.displayName=w.displayName,ae.photoURL=w.photoURL),yield w._updateTokensIfNecessary(z)})).apply(this,arguments)}function io(y,h,g){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,f.Z)(function*(y,h,g){const{auth:w}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),g&&(N.password=g);const z=yield gr(y,an(w,N));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Wr{constructor(h,g,w={}){this.isNewUser=h,this.providerId=g,this.profile=w}}class wn extends Wr{constructor(h,g,w,S){super(h,g,w),this.username=S}}class hd extends Wr{constructor(h,g){super(h,"facebook.com",g)}}class sl extends wn{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class ef extends Wr{constructor(h,g){super(h,"google.com",g)}}class ol extends wn{constructor(h,g,w){super(h,"twitter.com",g,w)}}function Fu(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function nr(y){var h,g;if(!y)return null;const{providerId:w}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const z=null===(g=null===(h=lt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new Wr(N,"anonymous"!==z&&"custom"!==z?z:null)}if(!w)return null;switch(w){case"facebook.com":return new hd(N,S);case"github.com":return new sl(N,S);case"google.com":return new ef(N,S);case"twitter.com":return new ol(N,S,y.screenName||null);case"custom":case"anonymous":return new Wr(N,null);default:return new Wr(N,w,S)}}(g)}class oo{constructor(h,g,w){this.type=h,this.credential=g,this.auth=w}static _fromIdtoken(h,g){return new oo("enroll",h,g)}static _fromMfaPendingCredential(h){return new oo("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,w;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return oo._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return oo._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Vu{constructor(h,g,w){this.session=h,this.hints=g,this.signInResolver=w}static _fromError(h,g){const w=In(h),S=g.customData._serverResponse,N=(S.mfaInfo||[]).map(ae=>Ae._fromServerResponse(w,ae));U(S.mfaPendingCredential,w,"internal-error");const z=oo._fromMfaPendingCredential(S.mfaPendingCredential);return new Vu(z,N,function(){var ae=(0,f.Z)(function*(Ve){const Qe=yield Ve._process(w,z);delete S.mfaInfo,delete S.mfaPendingCredential;const wt=Object.assign(Object.assign({},S),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(g.operationType){case"signIn":const gt=yield yr._fromIdTokenResponse(w,g.operationType,wt);return yield w._updateCurrentUser(gt.user),gt;case"reauthenticate":return U(g.user,w,"internal-error"),yr._forOperation(g.user,g.operationType,wt);default:xe(w,"internal-error")}});return function(Ve){return ae.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function Uu(y,h){return dn(y,"POST","/v2/accounts/mfaEnrollment:start",kt(y,h))}class tf{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Ae._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new tf(h)}getSession(){var h=this;return(0,f.Z)(function*(){return oo._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var w=this;return(0,f.Z)(function*(){const S=h,N=yield w.getSession(),z=yield gr(w.user,S._process(w.user.auth,N,g));return yield w.user._updateTokensIfNecessary(z),w.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){var w;const S="string"==typeof h?h:h.uid,N=yield g.user.getIdToken(),z=yield gr(g.user,function md(y,h){return dn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(y,h))}(g.user.auth,{idToken:N,mfaEnrollmentId:S}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ae})=>ae!==S),yield g.user._updateTokensIfNecessary(z);try{yield g.user.reload()}catch(ae){if("auth/user-token-expired"!==(null===(w=ae)||void 0===w?void 0:w.code))throw ae}})()}}const Po=new WeakMap,ao="__sak";class ju{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ao,"1"),this.storage.removeItem(ao),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Da=(()=>{class y extends ju{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ca(){const y=(0,k.z$)();return ft(y)||jt(y)}()&&function vn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ys(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),N=this.localCache[w];S!==N&&g(w,N,S)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ae,Ve,Qe)=>{this.notifyListeners(ae,Qe)});const S=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(S);if(g.newValue!==ae)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!w)return}const N=()=>{const ae=this.storage.getItem(S);!w&&this.localCache[S]===ae||this.notifyListeners(S,ae)},z=this.storage.getItem(S);!function Xn(){return(0,k.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var S=()=>super._set,N=this;return(0,f.Z)(function*(){yield S().call(N,g,w),N.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,S=this;return(0,f.Z)(function*(){const N=yield w().call(S,g);return S.localCache[g]=JSON.stringify(N),N})()}_remove(g){var w=()=>super._remove,S=this;return(0,f.Z)(function*(){yield w().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),ki=(()=>{class y extends ju{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let vd=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(N=>N.isListeningto(g));if(w)return w;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,f.Z)(function*(){const S=g,{eventId:N,eventType:z,data:ae}=S.data,Ve=w.handlersMap[z];if(!Ve?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:z});const Qe=Array.from(Ve).map(function(){var gt=(0,f.Z)(function*(un){return un(S.origin,ae)});return function(un){return gt.apply(this,arguments)}}()),wt=yield function Sa(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return h.apply(this,arguments)}}()))}(Qe);S.ports[0].postMessage({status:"done",eventId:N,eventType:z,response:wt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Aa(y="",h=10){let g="";for(let w=0;w<h;w++)g+=Math.floor(10*Math.random());return y+g}class al{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,w=50){var S=this;return(0,f.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let z,ae;return new Promise((Ve,Qe)=>{const wt=Aa("",20);N.port1.start();const gt=setTimeout(()=>{Qe(new Error("unsupported_event"))},w);ae={messageChannel:N,onMessage(un){const li=un;if(li.data.eventId===wt)switch(li.data.status){case"ack":clearTimeout(gt),z=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ve(li.data.response);break;default:clearTimeout(gt),clearTimeout(z),Qe(new Error("invalid_response"))}}},S.handlers.add(ae),N.port1.addEventListener("message",ae.onMessage),S.target.postMessage({eventType:h,eventId:wt,data:g},[N.port2])}).finally(()=>{ae&&S.removeMessageHandler(ae)})})()}}function On(){return window}function Hu(){return typeof On().WorkerGlobalScope<"u"&&"function"==typeof On().importScripts}function xa(){return(xa=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const xs="firebaseLocalStorageDb",Ms="firebaseLocalStorage",ul="fbase_key";class co{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ma(y,h){return y.transaction([Ms],h?"readwrite":"readonly").objectStore(Ms)}function Lo(){const y=indexedDB.open(xs,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Ms,{keyPath:ul})}catch(S){g(S)}}),y.addEventListener("success",(0,f.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Ms)?h(w):(w.close(),yield function Ed(){const y=indexedDB.deleteDatabase(xs);return new co(y).toPromise()}(),h(yield Lo()))}))})}function ts(y,h,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,f.Z)(function*(y,h,g){const w=Ma(y,!0).put({[ul]:h,value:g});return new co(w).toPromise()})).apply(this,arguments)}function Ra(){return(Ra=(0,f.Z)(function*(y,h){const g=Ma(y,!1).get(h),w=yield new co(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function lo(y,h){const g=Ma(y,!0).delete(h);return new co(g).toPromise()}const Vo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield Lo()),g.db})()}_withRetries(g){var w=this;return(0,f.Z)(function*(){let S=0;for(;;)try{const N=yield w._openDb();return yield g(N)}catch(N){if(S++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return Hu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=vd._getInstance(function Gu(){return Hu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,f.Z)(function*(S,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(S,N){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,f.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var w,S;if(g.activeServiceWorker=yield function uo(){return xa.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new al(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,f.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function $u(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Lo();return yield ts(g,ao,"1"),yield lo(g,ao),!0}catch{}return!1})()}_withPendingWrite(g){var w=this;return(0,f.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var S=this;return(0,f.Z)(function*(){return S._withPendingWrite((0,f.Z)(function*(){return yield S._withRetries(N=>ts(N,g,w)),S.localCache[g]=w,S.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,f.Z)(function*(){const S=yield w._withRetries(N=>function zu(y,h){return Ra.apply(this,arguments)}(N,g));return w.localCache[g]=S,S})()}_remove(g){var w=this;return(0,f.Z)(function*(){return w._withPendingWrite((0,f.Z)(function*(){return yield w._withRetries(S=>lo(S,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const w=yield g._withRetries(z=>{const ae=Ma(z,!1).getAll();return new co(ae).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:z,value:ae}of w)N.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(ae)&&(g.notifyListeners(z,ae),S.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!N.has(z)&&(g.notifyListeners(z,null),S.push(z));return S})()}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Uo(y,h){return dn(y,"POST","/v2/accounts/mfaSignIn:start",kt(y,h))}function Rs(){return(Rs=(0,f.Z)(function*(y){return(yield dn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function jo(y){return new Promise((h,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=h,w.onerror=S=>{const N=_e("internal-error");N.customData=S,g(N)},w.type="text/javascript",w.charset="UTF-8",function Bo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(w)})}function Ku(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Na=1e12;class pn{constructor(h){this.auth=h,this.counter=Na,this._widgets=new Map}render(h,g){const w=this.counter;return this._widgets.set(w,new ag(h,this.auth.name,g||{})),this.counter++,w}reset(h){var g;const w=h||Na;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Na))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var w;return null===(w=g._widgets.get(h||Na))||void 0===w||w.execute(),""})()}}class ag{constructor(h,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;U(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function By(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ug=Ku("rcb"),jy=new on(3e4,6e4);class nf{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=On().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return U(function Yw(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(On().grecaptcha):new Promise((w,S)=>{const N=On().setTimeout(()=>{S(_e(h,"network-request-failed"))},jy.get());On()[ug]=()=>{On().clearTimeout(N),delete On()[ug];const ae=On().grecaptcha;if(!ae)return void S(_e(h,"internal-error"));const Ve=ae.render;ae.render=(Qe,wt)=>{const gt=Ve(Qe,wt);return this.counter++,gt},this.hostLanguage=g,w(ae)},jo(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:ug,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),S(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=On().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class dl{load(h){return(0,f.Z)(function*(){return new pn(h)})()}clearedOneInstance(){}}const $y="recaptcha",Gy={theme:"light",type:"image"};class dr{constructor(h,g=Object.assign({},Gy),w){this.parameters=g,this.type=$y,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;U(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dl:new nf,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(g)||new Promise(N=>{const z=ae=>{!ae||(h.tokenChangeListeners.delete(z),N(ae))};h.tokenChangeListeners.add(z),h.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof h)h(g);else if("string"==typeof h){const w=On()[h];"function"==typeof w&&w(g)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){U(mt()&&!Hu(),h.auth,"internal-error"),yield function Jt(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Kr(y){return Rs.apply(this,arguments)}(h.auth);U(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vi{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Ts._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function _r(){return(_r=(0,f.Z)(function*(y,h,g){const w=In(y),S=yield Ns(w,h,(0,k.m9)(g));return new vi(S,N=>Cn(w,N))})).apply(this,arguments)}function wi(){return(wi=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);yield qt(!1,w,"phone");const S=yield Ns(w.auth,h,(0,k.m9)(g));return new vi(S,N=>Tu(w,N))})).apply(this,arguments)}function Pn(){return(Pn=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S=yield Ns(w.auth,h,(0,k.m9)(g));return new vi(S,N=>Su(w,N))})).apply(this,arguments)}function Ns(y,h,g){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,f.Z)(function*(y,h,g){var w;const S=yield g.verify();try{let N;if(U("string"==typeof S,y,"argument-error"),U(g.type===$y,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const z=N.session;if("phoneNumber"in N)return U("enroll"===z.type,y,"internal-error"),(yield Uu(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{U("signin"===z.type,y,"internal-error");const ae=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return U(ae,y,"missing-multi-factor-info"),(yield Uo(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield tg(y,{phoneNumber:N.phoneNumber,recaptchaToken:S});return z}}finally{g._reset()}})).apply(this,arguments)}function hl(){return(hl=(0,f.Z)(function*(y,h){yield eo((0,k.m9)(y),h)})).apply(this,arguments)}let Oa=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=In(g)}verifyPhoneNumber(g,w){return Ns(this.auth,g,(0,k.m9)(w))}static credential(g,w){return Ts._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:S}=g;return w&&S?Ts._fromTokenResponse(w,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function fo(y,h){return h?ie(h):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ks extends mr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return tr(h,this._buildIdpRequest())}_linkToIdToken(h,g){return tr(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return tr(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function We(y){return yi(y.auth,new ks(y),y.bypassAuthState)}function Pa(y){const{auth:h,user:g}=y;return U(g,h,"internal-error"),to(g,new ks(y),y.bypassAuthState)}function Os(y){return $o.apply(this,arguments)}function $o(){return($o=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return U(g,h,"internal-error"),eo(g,new ks(y),y.bypassAuthState)})).apply(this,arguments)}class Go{constructor(h,g,w,S,N=!1){this.auth=h,this.resolver=w,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(w,S){h.pendingPromise={resolve:w,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(w,S){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:N,tenantId:z,error:ae,type:Ve}=h;if(ae)return void g.reject(ae);const Qe={auth:g.auth,requestUri:w,sessionId:S,tenantId:z||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ve)(Qe))}catch(wt){g.reject(wt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return We;case"linkViaPopup":case"linkViaRedirect":return Os;case"reauthViaPopup":case"reauthViaRedirect":return Pa;default:xe(this.auth,"internal-error")}}resolve(h){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Fn=new on(2e3,1e4);function zo(){return(zo=(0,f.Z)(function*(y,h,g){const w=In(y);Be(y,h,Zi);const S=fo(w,g);return new Oi(w,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function pl(){return(pl=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Be(w.auth,h,Zi);const S=fo(w.auth,g);return new Oi(w.auth,"reauthViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}function Fa(){return(Fa=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Be(w.auth,h,Zi);const S=fo(w.auth,g);return new Oi(w.auth,"linkViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}let Oi=(()=>{class y extends Go{constructor(g,w,S,N,z){super(g,w,N,z),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const w=yield g.execute();return U(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,f.Z)(function*(){q(1===g.filter.length,"Popup operations only handle one event");const w=Aa();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(_e(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Fn.get())};g()}}return y.currentPopupAction=null,y})();const Zr=new Map;class gl extends Go{constructor(h,g,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let w=Zr.get(g.auth._key());if(!w){try{const N=(yield function Dr(y,h){return Fr.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;w=()=>Promise.resolve(N)}catch(S){w=()=>Promise.reject(S)}Zr.set(g.auth._key(),w)}return g.bypassAuthState||Zr.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,w=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(w,h);if("unknown"!==h.type){if(h.eventId){const S=yield w.auth._redirectUserForId(h.eventId);if(S)return w.user=S,g().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Fr(){return(Fr=(0,f.Z)(function*(y,h){const g=gn(h),w=Li(y);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(g));return yield w._remove(g),S})).apply(this,arguments)}function rs(y,h){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(y,h){return Li(y)._set(gn(h),"true")})).apply(this,arguments)}function Ps(y,h){Zr.set(y._key(),h)}function Li(y){return ie(y._redirectPersistence)}function gn(y){return W("pendingRedirect",y.config.apiKey,y.name)}function C(){return(C=(0,f.Z)(function*(y,h,g){const w=In(y);Be(y,h,Zi);const S=fo(w,g);return yield rs(S,w),S._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Be(w.auth,h,Zi);const S=fo(w.auth,g);yield rs(S,w.auth);const N=yield pt(w);return S._openRedirect(w.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function Ee(){return(Ee=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Be(w.auth,h,Zi);const S=fo(w.auth,g);yield qt(!1,w,h.providerId),yield rs(S,w.auth);const N=yield pt(w);return S._openRedirect(w.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function it(){return(it=(0,f.Z)(function*(y,h){return yield In(y)._initializationPromise,bt(y,h,!1)})).apply(this,arguments)}function bt(y,h){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,f.Z)(function*(y,h,g=!1){const w=In(y),S=fo(w,h),z=yield new gl(w,S,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield w._persistUserIfCurrent(z.user),yield w._setRedirectUser(null,h)),z})).apply(this,arguments)}function pt(y){return bn.apply(this,arguments)}function bn(){return(bn=(0,f.Z)(function*(y){const h=Aa(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class po{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(g=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Vi(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rt(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var w;if(h.error&&!Rt(h)){const S=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(_e(this.auth,S))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const w=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fs(h))}saveEventToCache(h){this.cachedEventUids.add(Fs(h)),this.lastProcessedEventTime=Date.now()}}function Fs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Rt({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Ls(y){return ui.apply(this,arguments)}function ui(){return(ui=(0,f.Z)(function*(y,h={}){return dn(y,"GET","/v1/projects",h)})).apply(this,arguments)}const qo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,go=/^https?/;function rf(){return(rf=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Ls(y);for(const g of h)try{if(dg(g))return}catch{}xe(y,"unauthorized-domain")})).apply(this,arguments)}function dg(y){const h=Oe(),{protocol:g,hostname:w}=new URL(h);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===w}if(!go.test(g))return!1;if(qo.test(y))return w===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const hg=new on(3e4,6e4);function zy(){const y=On().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Ui=null;function sf(y){return Ui=Ui||function rr(y){return new Promise((h,g)=>{var w,S,N;function z(){zy(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{zy(),g(_e(y,"network-request-failed"))},timeout:hg.get()})}if(null!==(S=null===(w=On().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=On().gapi)||void 0===N||!N.load){const ae=Ku("iframefcb");return On()[ae]=()=>{gapi.load?z():g(_e(y,"network-request-failed"))},jo(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Ve=>g(Ve))}z()}}).catch(h=>{throw Ui=null,h})}(y),Ui}const fg=new on(5e3,15e3),qy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pg(y){const h=y.config;U(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?_n(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:y.name,v:se.SDK_VERSION},S=uf.get(y.config.apiHost);S&&(w.eid=S);const N=y._getFrameworks();return N.length&&(w.fw=N.join(",")),`${g}?${(0,k.xO)(w).slice(1)}`}function La(){return La=(0,f.Z)(function*(y){const h=yield sf(y),g=On().gapi;return U(g,y,"internal-error"),h.open({where:document.body,url:pg(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qy,dontclear:!0},w=>new Promise(function(){var S=(0,f.Z)(function*(N,z){yield w.restyle({setHideOnLeave:!1});const ae=_e(y,"network-request-failed"),Ve=On().setTimeout(()=>{z(ae)},fg.get());function Qe(){On().clearTimeout(Ve),N(w)}w.ping(Qe).then(Qe,()=>{z(ae)})});return function(N,z){return S.apply(this,arguments)}}()))}),La.apply(this,arguments)}const Id={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ml{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dd(y,h,g,w,S,N){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:se.SDK_VERSION,eventId:S};if(h instanceof Zi){h.setDefaultLanguage(y.languageCode),z.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,Qe]of Object.entries(N||{}))z[Ve]=Qe}if(h instanceof Yi){const Ve=h.getScopes().filter(Qe=>""!==Qe);Ve.length>0&&(z.scopes=Ve.join(","))}y.tenantId&&(z.tid=y.tenantId);const ae=z;for(const Ve of Object.keys(ae))void 0===ae[Ve]&&delete ae[Ve];return`${function Td({config:y}){return y.emulator?_n(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,k.xO)(ae).slice(1)}`}const Ua="webStorageSupport";class Bi extends class Wy{constructor(h){this.factorId=h}_process(h,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,w);case"signin":return this._finalizeSignIn(h,g.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Bi(h)}_finalizeEnroll(h,g,w){return function Bu(y,h){return dn(y,"POST","/v2/accounts/mfaEnrollment:finalize",kt(y,h))}(h,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Wu(y,h){return dn(y,"POST","/v2/accounts/mfaSignIn:finalize",kt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Wo=(()=>{class y{constructor(){}static assertion(g){return Bi._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var lf="@firebase/auth",_g="0.20.11";class Jw{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(w=>{var S;h((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ba(){return window}function ja(){return(ja=(0,f.Z)(function*(y,h,g){var w;const{BuildInfo:S}=Ba();q(h.sessionId,"AuthEvent did not contain a session ID");const N=yield Ha(h.sessionId),z={};return jt()?z.ibi=S.packageName:zt()?z.apn=S.packageName:xe(y,"operation-not-supported-in-this-environment"),S.displayName&&(z.appDisplayName=S.displayName),z.sessionId=N,Dd(y,g,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,z)})).apply(this,arguments)}function Ju(){return(Ju=(0,f.Z)(function*(y){const{BuildInfo:h}=Ba(),g={};jt()?g.iosBundleId=h.packageName:zt()?g.androidPackageName=h.packageName:xe(y,"operation-not-supported-in-this-environment"),yield Ls(y,g)})).apply(this,arguments)}function Eg(){return(Eg=(0,f.Z)(function*(y,h,g){const{cordova:w}=Ba();let S=()=>{};try{yield new Promise((N,z)=>{let ae=null;function Ve(){var gt;N();const un=null===(gt=w.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof un&&un(),"function"==typeof g?.close&&g.close()}function Qe(){ae||(ae=window.setTimeout(()=>{z(_e(y,"redirect-cancelled-by-user"))},2e3))}function wt(){"visible"===document?.visibilityState&&Qe()}h.addPassiveListener(Ve),document.addEventListener("resume",Qe,!1),zt()&&document.addEventListener("visibilitychange",wt,!1),S=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",wt,!1),ae&&window.clearTimeout(ae)}})}finally{S()}})).apply(this,arguments)}function Ha(y){return _o.apply(this,arguments)}function _o(){return(_o=(0,f.Z)(function*(y){const h=vl(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function vl(y){if(q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}(0,k.Pz)("authIdTokenMaxAge"),function e0(y){(0,se._registerComponent)(new ce.wA("auth",(h,{options:g})=>{const w=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:N,authDomain:z}=w.options;return((ae,Ve)=>{U(N&&!N.includes(":"),"invalid-api-key",{appName:ae.name}),U(!z?.includes(":"),"argument-error",{appName:ae.name});const Qe={apiKey:N,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ws(y)},wt=new Ft(ae,Ve,Qe);return function Fe(y,h){const g=h?.persistence||[],w=(Array.isArray(g)?g:[g]).map(ie);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(w,h?.popupRedirectResolver)}(wt,g),wt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,w)=>{h.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ce.wA("auth-internal",h=>{const g=In(h.getProvider("auth").getImmediate());return new Jw(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(lf,_g,function Xw(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(lf,_g,"esm2017")}("Browser");class hf extends po{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function bg(y){return ff.apply(this,arguments)}function ff(){return(ff=(0,f.Z)(function*(y){const h=yield wl()._get(vo(y));return h&&(yield wl()._remove(vo(y))),h})).apply(this,arguments)}function Sd(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*h.length);y.push(h.charAt(w))}return y.join("")}function wl(){return ie(Da)}function vo(y){return W("authEvent",y.config.apiKey,y.name)}function Ad(y){if(!y?.includes("?"))return{};const[h,...g]=y.split("?");return(0,k.zd)(g.join("?"))}function Md(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Nd(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function ec(y=(0,k.z$)()){return!("file:"!==Nd()&&"ionic:"!==Nd()&&"capacitor:"!==Nd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function xg(){try{const y=self.localStorage,h=Aa();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Ag(y=(0,k.z$)()){return function Tg(){return(0,k.w1)()&&11===document?.documentMode}()||function Sg(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch{return kd()&&(0,k.hl)()}return!1}function kd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Od(){return(function s0(){return"http:"===Nd()||"https:"===Nd()}()||(0,k.ru)()||ec())&&!function gf(){return(0,k.b$)()||(0,k.UG)()}()&&xg()&&!kd()}function El(){return ec()&&typeof document<"u"}function Pd(){return(Pd=(0,f.Z)(function*(){return!!El()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Lr={LOCAL:"local",NONE:"none",SESSION:"session"},ci=U,Ii="persistence";function tc(y){return nc.apply(this,arguments)}function nc(){return(nc=(0,f.Z)(function*(y){yield y._initializationPromise;const h=bl(),g=W(Ii,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function bl(){var y;try{return(null===(y=function Il(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Fd=U;class Tr{constructor(){this.browserResolver=ie(class yg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ki,this._completeRedirectFn=bt,this._overrideRedirectResult=Ps}_openPopup(h,g,w,S){var N=this;return(0,f.Z)(function*(){var z;q(null===(z=N.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ae=Dd(h,g,w,Oe(),S);return function yo(y,h,g,w=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),z=Math.max((window.screen.availWidth-w)/2,0).toString();let ae="";const Ve=Object.assign(Object.assign({},Id),{width:w.toString(),height:S.toString(),top:N,left:z}),Qe=(0,k.z$)().toLowerCase();g&&(ae=Kt(Qe)?"_blank":g),ze(Qe)&&(h=h||"http://localhost",Ve.scrollbars="yes");const wt=Object.entries(Ve).reduce((un,[li,qa])=>`${un}${li}=${qa},`,"");if(function zr(y=(0,k.z$)()){var h;return jt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Qe)&&"_self"!==ae)return function mg(y,h){const g=document.createElement("a");g.href=y,g.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(h||"",ae),new ml(null);const gt=window.open(h||"",ae,wt);U(gt,y,"popup-blocked");try{gt.focus()}catch{}return new ml(gt)}(h,ae,Aa())})()}_openRedirect(h,g,w,S){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(h),function _i(y){On().location.href=y}(Dd(h,g,w,Oe(),S)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:S,promise:N}=this.eventManagers[g];return S?Promise.resolve(S):(q(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(h);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const w=yield function gg(y){return La.apply(this,arguments)}(h),S=new po(h);return w.register("authEvent",N=>(U(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:S},g.iframes[h._key()]=w,S})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Ua,{type:Ua},S=>{var N;const z=null===(N=S?.[0])||void 0===N?void 0:N[Ua];void 0!==z&&g(!!z),xe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ei(y){return rf.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ys()||ft()||jt()}}),this.cordovaResolver=ie(class xd{constructor(){this._redirectPersistence=ki,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bt,this._overrideRedirectResult=Ps}_initialize(h){var g=this;return(0,f.Z)(function*(){const w=h._key();let S=g.eventManagers.get(w);return S||(S=new hf(h),g.eventManagers.set(w,S),g.attachCallbackListeners(h,S)),S})()}_openPopup(h){xe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,w,S){var N=this;return(0,f.Z)(function*(){!function r0(y){var h,g,w,S,N,z,ae,Ve,Qe,wt;const gt=Ba();U("function"==typeof(null===(h=gt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(g=gt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(N=null===(S=null===(w=gt?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Ve=null===(ae=null===(z=gt?.cordova)||void 0===z?void 0:z.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(wt=null===(Qe=gt?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===wt?void 0:wt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield N._initialize(h);yield z.initialized(),z.resetRedirect(),function $n(){Zr.clear()}(),yield N._originValidation(h);const ae=function Ig(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:Sd(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,w,S);yield function Xu(y,h){return wl()._set(vo(y),h)}(h,ae);const Ve=yield function ji(y,h,g){return ja.apply(this,arguments)}(h,ae,g),Qe=yield function Zy(y){const{cordova:h}=Ba();return new Promise(g=>{h.plugins.browsertab.isAvailable(w=>{let S=null;w?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function ur(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Ve);return function n0(y,h,g){return Eg.apply(this,arguments)}(h,z,Qe)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ko(y){return Ju.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:w,handleOpenURL:S,BuildInfo:N}=Ba(),z=setTimeout((0,f.Z)(function*(){yield bg(h),g.onEvent(Md())}),500),ae=function(){var wt=(0,f.Z)(function*(gt){clearTimeout(z);const un=yield bg(h);let li=null;un&&gt?.url&&(li=function pf(y,h){var g,w;const S=function Ln(y){const h=Ad(y),g=h.link?decodeURIComponent(h.link):void 0,w=Ad(g).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Ad(S).link||S||w||g||y}(h);if(S.includes("/__/auth/callback")){const N=Ad(S),z=N.firebaseError?function Qy(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ae=null===(w=null===(g=z?.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Ve=ae?_e(ae):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(un,gt.url)),g.onEvent(li||Md())});return function(un){return wt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ae);const Ve=S,Qe=`${N.packageName.toLowerCase()}://`;Ba().handleOpenURL=function(){var wt=(0,f.Z)(function*(gt){if(gt.toLowerCase().startsWith(Qe)&&ae({url:gt}),"function"==typeof Ve)try{Ve(gt)}catch(un){console.error(un)}});return function(gt){return wt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ki,this._completeRedirectFn=bt,this._overrideRedirectResult=Ps}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,w,S){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,g,w,S)})()}_openRedirect(h,g,w,S){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,g,w,S)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return El()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function o0(){return Pd.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function Ld(y){return y.unwrap()}function Rg(y){return Dl(y)}function Dl(y){const{_tokenResponse:h}=y instanceof k.ZR?y.customData:y;if(!h)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Oa.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=vu;break;case"facebook.com":w=ma;break;case"github.com":w=Wc;break;case"twitter.com":w=qr;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:z,pendingToken:ae,nonce:Ve}=h;return N||z||S||ae?ae?g.startsWith("saml.")?Mo._create(g,ae):Ki._fromParams({providerId:g,signInMethod:g,pendingToken:ae,idToken:S,accessToken:N}):new Xs(g).credential({idToken:S,accessToken:N,rawNonce:Ve}):null}return y instanceof k.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function hr(y,h){return h.catch(g=>{throw g instanceof k.ZR&&function mf(y,h){var g,w;const S=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=h)||void 0===w?void 0:w.code))h.resolver=new Xy(y,function Mn(y,h){var g;const w=(0,k.m9)(y),S=h;return U(h.customData.operationType,w,"argument-error"),U(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),Vu._fromError(w,S)}(y,h));else if(S){const N=Dl(h),z=h;N&&(z.credential=N,z.tenantId=S.tenantId||void 0,z.email=S.email||void 0,z.phoneNumber=S.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Rg(g),additionalUserInfo:Fu(g),user:is.getOrCreate(S)}})}function Ga(y,h){return yf.apply(this,arguments)}function yf(){return(yf=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:w=>hr(y,g.confirm(w))}})).apply(this,arguments)}class Xy{constructor(h,g){this.resolver=g,this.auth=function Cl(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return hr(Ld(this.auth),this.resolver.resolveSignIn(h))}}class is{constructor(h){this._delegate=h,this.multiFactor=function Fo(y){const h=(0,k.m9)(y);return Po.has(h)||Po.set(h,tf._fromUser(h)),Po.get(h)}(h)}static getOrCreate(h){return is.USER_MAP.has(h)||is.USER_MAP.set(h,new is(h)),is.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return hr(g.auth,Tu(g._delegate,h))})()}linkWithPhoneNumber(h,g){var w=this;return(0,f.Z)(function*(){return Ga(w.auth,function En(y,h,g){return wi.apply(this,arguments)}(w._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return hr(g.auth,function Yu(y,h,g){return Fa.apply(this,arguments)}(g._delegate,h,Tr))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield tc(In(g.auth)),function Y(y,h,g){return function te(y,h,g){return Ee.apply(this,arguments)}(y,h,g)}(g._delegate,h,Tr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return hr(g.auth,Su(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Ga(this.auth,function ka(y,h,g){return Pn.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return hr(this.auth,function lg(y,h,g){return pl.apply(this,arguments)}(this._delegate,h,Tr))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield tc(In(g.auth)),function D(y,h,g){return function x(y,h,g){return F.apply(this,arguments)}(y,h,g)}(g._delegate,h,Tr)})()}sendEmailVerification(h){return function el(y,h){return ba.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function Pr(y,h){return Iu.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function dd(y,h){return io((0,k.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function ro(y,h){return io((0,k.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function cg(y,h){return hl.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function rl(y,h){return il.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function tl(y,h,g){return ku.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}is.USER_MAP=new WeakMap;const Yo=U;let _f=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Yo(S,"invalid-api-key",{appName:g.name}),Yo(S,"invalid-api-key",{appName:g.name});const N=typeof window<"u"?Tr:void 0;this._delegate=w.initialize({options:{persistence:Ng(S,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?is.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function gu(y,h,g){const w=In(y);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const S=!!g?.disableWarnings,N=Mi(h),{host:z,port:ae}=function jn(y){const h=Mi(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const N=S[1];return{host:N,port:Es(w.substr(N.length+1))}}{const[N,z]=w.split(":");return{host:N,port:Es(z)}}}(h);w.config.emulator={url:`${N}//${z}${null===ae?"":`:${ae}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:z,port:ae,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Is(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function ai(y,h){return _a.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return va(this._delegate,g)}confirmPasswordReset(g,w){return function Ru(y,h,g){return No.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var S=this;return(0,f.Z)(function*(){return hr(S._delegate,function wa(y,h,g){return xn.apply(this,arguments)}(S._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Nu(y,h){return Ia.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function es(y,h){return"EMAIL_SIGNIN"===_u.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){Yo(Od(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function Ne(y,h){return it.apply(this,arguments)}(g._delegate,Tr);return w?hr(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function $a(y,h){In(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,w,S){const{next:N,error:z,complete:ae}=Vd(g,w,S);return this._delegate.onAuthStateChanged(N,z,ae)}onIdTokenChanged(g,w,S){const{next:N,error:z,complete:ae}=Vd(g,w,S);return this._delegate.onIdTokenChanged(N,z,ae)}sendSignInLinkToEmail(g,w){return function Jc(y,h,g){return no.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Mu(y,h,g){return An.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,f.Z)(function*(){let S;switch(function Mg(y,h){ci(Object.values(Lr).includes(h),y,"invalid-persistence-type"),(0,k.b$)()?ci(h!==Lr.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?ci(h===Lr.NONE,y,"unsupported-persistence-type"):kd()?ci(h===Lr.NONE||h===Lr.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):ci(h===Lr.NONE||xg(),y,"unsupported-persistence-type")}(w._delegate,g),g){case Lr.SESSION:S=ki;break;case Lr.LOCAL:S=(yield ie(Vo)._isAvailable())?Vo:Da;break;case Lr.NONE:S=V;break;default:return xe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return hr(this._delegate,function Qh(y){return Sn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return hr(this._delegate,Cn(this._delegate,g))}signInWithCustomToken(g){return hr(this._delegate,function Zc(y,h){return ya.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return hr(this._delegate,function Ni(y,h,g){return Cn((0,k.m9)(y),Ri.credential(h,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return hr(this._delegate,function sg(y,h,g){return Ea.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Ga(this._delegate,function nt(y,h,g){return _r.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,f.Z)(function*(){return Yo(Od(),w._delegate,"operation-not-supported-in-this-environment"),hr(w._delegate,function fl(y,h,g){return zo.apply(this,arguments)}(w._delegate,g,Tr))})()}signInWithRedirect(g){var w=this;return(0,f.Z)(function*(){return Yo(Od(),w._delegate,"operation-not-supported-in-this-environment"),yield tc(w._delegate),function Zt(y,h,g){return function Qu(y,h,g){return C.apply(this,arguments)}(y,h,g)}(w._delegate,g,Tr)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Qc(y,h){return ld.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Lr,y})();function Vd(y,h,g){let w=y;"function"!=typeof y&&({next:w,error:h,complete:g}=y);const S=w;return{next:z=>S(z&&is.getOrCreate(z)),error:h,complete:g}}function Ng(y,h){const g=function Zo(y,h){const g=bl();if(!g)return[];const w=W(Ii,y,h);switch(g.getItem(w)){case Lr.NONE:return[V];case Lr.LOCAL:return[Vo,ki];case Lr.SESSION:return[ki];default:return[]}}(y,h);if(typeof self<"u"&&!g.includes(Vo)&&g.push(Vo),typeof window<"u")for(const w of[Da,ki])g.includes(w)||g.push(w);return g.includes(V)||g.push(V),g}class Ud{constructor(){this.providerId="phone",this._delegate=new Oa(Ld(X.Z.auth()))}static credential(h,g){return Oa.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Ud.PHONE_SIGN_IN_METHOD=Oa.PHONE_SIGN_IN_METHOD,Ud.PROVIDER_ID=Oa.PROVIDER_ID;const Bd=U;class jd{constructor(h,g,w=X.Z.app()){var S;Bd(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new dr(h,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function e_(y){y.INTERNAL.registerComponent(new ce.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new _f(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ri,FacebookAuthProvider:ma,GithubAuthProvider:Wc,GoogleAuthProvider:vu,OAuthProvider:Xs,SAMLAuthProvider:si,PhoneAuthProvider:Ud,PhoneMultiFactorGenerator:Wo,RecaptchaVerifier:jd,TwitterAuthProvider:qr,Auth:_f,AuthCredential:mr,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(X.Z)},9751:(ct,De,O)=>{O.d(De,{y:()=>de});var f=O(930),X=O(727),k=O(8822),se=O(9635),oe=O(2416),le=O(576),ce=O(2806);let de=(()=>{class K{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const we=new K;return we.source=this,we.operator=Me,we}subscribe(Me,we,rt){const ge=function $(K){return K&&K instanceof f.Lv||function B(K){return K&&(0,le.m)(K.next)&&(0,le.m)(K.error)&&(0,le.m)(K.complete)}(K)&&(0,X.Nn)(K)}(Me)?Me:new f.Hp(Me,we,rt);return(0,ce.x)(()=>{const{operator:fe,source:Xe}=this;ge.add(fe?fe.call(ge,Xe):Xe?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Me){try{return this._subscribe(Me)}catch(we){Me.error(we)}}forEach(Me,we){return new(we=he(we))((rt,ge)=>{const fe=new f.Hp({next:Xe=>{try{Me(Xe)}catch(at){ge(at),fe.unsubscribe()}},error:ge,complete:rt});this.subscribe(fe)})}_subscribe(Me){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Me)}[k.L](){return this}pipe(...Me){return(0,se.U)(Me)(this)}toPromise(Me){return new(Me=he(Me))((we,rt)=>{let ge;this.subscribe(fe=>ge=fe,fe=>rt(fe),()=>we(ge))})}}return K.create=Le=>new K(Le),K})();function he(K){var Le;return null!==(Le=K??oe.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ct,De,O)=>{O.d(De,{x:()=>ce});var f=O(9751),X=O(727);const se=(0,O(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=O(8737),le=O(2806);let ce=(()=>{class he extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const K=new de(this,this);return K.operator=$,K}_throwIfClosed(){if(this.closed)throw new se}next($){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next($)}})}error($){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:K}=this;for(;K.length;)K.shift().error($)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:K,isStopped:Le,observers:Me}=this;return K||Le?X.Lc:(this.currentObservers=null,Me.push($),new X.w0(()=>{this.currentObservers=null,(0,oe.P)(Me,$)}))}_checkFinalizedStatuses($){const{hasError:K,thrownError:Le,isStopped:Me}=this;K?$.error(Le):Me&&$.complete()}asObservable(){const $=new f.y;return $.source=this,$}}return he.create=(B,$)=>new de(B,$),he})();class de extends ce{constructor(B,$){super(),this.destination=B,this.source=$}next(B){var $,K;null===(K=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===K||K.call($,B)}error(B){var $,K;null===(K=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===K||K.call($,B)}complete(){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===$||$.call(B)}_subscribe(B){var $,K;return null!==(K=null===($=this.source)||void 0===$?void 0:$.subscribe(B))&&void 0!==K?K:X.Lc}}},930:(ct,De,O)=>{O.d(De,{Hp:()=>rt,Lv:()=>K});var f=O(576),X=O(727),k=O(2416),se=O(7849),oe=O(5032);const le=he("C",void 0,void 0);function he(xe,_e,Ie){return{kind:xe,value:_e,error:Ie}}var B=O(3410),$=O(2806);class K extends X.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,X.Nn)(_e)&&_e.add(this)):this.destination=at}static create(_e,Ie,Be){return new rt(_e,Ie,Be)}next(_e){this.isStopped?Xe(function de(xe){return he("N",xe,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Xe(function ce(xe){return he("E",void 0,xe)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Xe(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Me(xe,_e){return Le.call(xe,_e)}class we{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(_e)}catch(Be){ge(Be)}}error(_e){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(_e)}catch(Be){ge(Be)}else ge(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ie){ge(Ie)}}}class rt extends K{constructor(_e,Ie,Be){let $e;if(super(),(0,f.m)(_e)||!_e)$e={next:_e??void 0,error:Ie??void 0,complete:Be??void 0};else{let U;this&&k.v.useDeprecatedNextContext?(U=Object.create(_e),U.unsubscribe=()=>this.unsubscribe(),$e={next:_e.next&&Me(_e.next,U),error:_e.error&&Me(_e.error,U),complete:_e.complete&&Me(_e.complete,U)}):$e=_e}this.destination=new we($e)}}function ge(xe){k.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(xe):(0,se.h)(xe)}function Xe(xe,_e){const{onStoppedNotification:Ie}=k.v;Ie&&B.z.setTimeout(()=>Ie(xe,_e))}const at={closed:!0,next:oe.Z,error:function fe(xe){throw xe},complete:oe.Z}},727:(ct,De,O)=>{O.d(De,{Lc:()=>le,w0:()=>oe,Nn:()=>ce});var f=O(576);const k=(0,O(3888).d)(he=>function($){he(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((K,Le)=>`${Le+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var se=O(8737);class oe{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Me of $)Me.remove(this);else $.remove(this);const{initialTeardown:K}=this;if((0,f.m)(K))try{K()}catch(Me){B=Me instanceof k?Me.errors:[Me]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Me of Le)try{de(Me)}catch(we){B=B??[],we instanceof k?B=[...B,...we.errors]:B.push(we)}}if(B)throw new k(B)}}add(B){var $;if(B&&B!==this)if(this.closed)de(B);else{if(B instanceof oe){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(B)}}_hasParent(B){const{_parentage:$}=this;return $===B||Array.isArray($)&&$.includes(B)}_addParent(B){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(B),$):$?[$,B]:B}_removeParent(B){const{_parentage:$}=this;$===B?this._parentage=null:Array.isArray($)&&(0,se.P)($,B)}remove(B){const{_finalizers:$}=this;$&&(0,se.P)($,B),B instanceof oe&&B._removeParent(this)}}oe.EMPTY=(()=>{const he=new oe;return he.closed=!0,he})();const le=oe.EMPTY;function ce(he){return he instanceof oe||he&&"closed"in he&&(0,f.m)(he.remove)&&(0,f.m)(he.add)&&(0,f.m)(he.unsubscribe)}function de(he){(0,f.m)(he)?he():he.unsubscribe()}},2416:(ct,De,O)=>{O.d(De,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ct,De,O)=>{O.d(De,{E:()=>X});const X=new(O(9751).y)(oe=>oe.complete())},8996:(ct,De,O)=>{O.d(De,{D:()=>_e});var f=O(8421),X=O(5363),k=O(9468),le=O(9751),de=O(2202),he=O(576),B=O(9672);function K(Ie,Be){if(!Ie)throw new Error("Iterable cannot be null");return new le.y($e=>{(0,B.f)($e,Be,()=>{const U=Ie[Symbol.asyncIterator]();(0,B.f)($e,Be,()=>{U.next().then(pe=>{pe.done?$e.complete():$e.next(pe.value)})},0,!0)})})}var Le=O(3670),Me=O(8239),we=O(1144),rt=O(6495),ge=O(2206),fe=O(4532),Xe=O(3260);function _e(Ie,Be){return Be?function xe(Ie,Be){if(null!=Ie){if((0,Le.c)(Ie))return function se(Ie,Be){return(0,f.Xf)(Ie).pipe((0,k.R)(Be),(0,X.Q)(Be))}(Ie,Be);if((0,we.z)(Ie))return function ce(Ie,Be){return new le.y($e=>{let U=0;return Be.schedule(function(){U===Ie.length?$e.complete():($e.next(Ie[U++]),$e.closed||this.schedule())})})}(Ie,Be);if((0,Me.t)(Ie))return function oe(Ie,Be){return(0,f.Xf)(Ie).pipe((0,k.R)(Be),(0,X.Q)(Be))}(Ie,Be);if((0,ge.D)(Ie))return K(Ie,Be);if((0,rt.T)(Ie))return function $(Ie,Be){return new le.y($e=>{let U;return(0,B.f)($e,Be,()=>{U=Ie[de.h](),(0,B.f)($e,Be,()=>{let pe,q;try{({value:pe,done:q}=U.next())}catch(J){return void $e.error(J)}q?$e.complete():$e.next(pe)},0,!0)}),()=>(0,he.m)(U?.return)&&U.return()})}(Ie,Be);if((0,Xe.L)(Ie))return function at(Ie,Be){return K((0,Xe.Q)(Ie),Be)}(Ie,Be)}throw(0,fe.z)(Ie)}(Ie,Be):(0,f.Xf)(Ie)}},8421:(ct,De,O)=>{O.d(De,{Xf:()=>Le});var f=O(655),X=O(1144),k=O(8239),se=O(9751),oe=O(3670),le=O(2206),ce=O(4532),de=O(6495),he=O(3260),B=O(576),$=O(7849),K=O(8822);function Le(xe){if(xe instanceof se.y)return xe;if(null!=xe){if((0,oe.c)(xe))return function Me(xe){return new se.y(_e=>{const Ie=xe[K.L]();if((0,B.m)(Ie.subscribe))return Ie.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,X.z)(xe))return function we(xe){return new se.y(_e=>{for(let Ie=0;Ie<xe.length&&!_e.closed;Ie++)_e.next(xe[Ie]);_e.complete()})}(xe);if((0,k.t)(xe))return function rt(xe){return new se.y(_e=>{xe.then(Ie=>{_e.closed||(_e.next(Ie),_e.complete())},Ie=>_e.error(Ie)).then(null,$.h)})}(xe);if((0,le.D)(xe))return fe(xe);if((0,de.T)(xe))return function ge(xe){return new se.y(_e=>{for(const Ie of xe)if(_e.next(Ie),_e.closed)return;_e.complete()})}(xe);if((0,he.L)(xe))return function Xe(xe){return fe((0,he.Q)(xe))}(xe)}throw(0,ce.z)(xe)}function fe(xe){return new se.y(_e=>{(function at(xe,_e){var Ie,Be,$e,U;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,f.KL)(xe);!(Be=yield Ie.next()).done;)if(_e.next(Be.value),_e.closed)return}catch(pe){$e={error:pe}}finally{try{Be&&!Be.done&&(U=Ie.return)&&(yield U.call(Ie))}finally{if($e)throw $e.error}}_e.complete()})})(xe,_e).catch(Ie=>_e.error(Ie))})}},6451:(ct,De,O)=>{O.d(De,{T:()=>le});var f=O(8189),X=O(8421),k=O(515),se=O(3269),oe=O(8996);function le(...ce){const de=(0,se.yG)(ce),he=(0,se._6)(ce,1/0),B=ce;return B.length?1===B.length?(0,X.Xf)(B[0]):(0,f.J)(he)((0,oe.D)(B,de)):k.E}},5403:(ct,De,O)=>{O.d(De,{x:()=>X});var f=O(930);function X(se,oe,le,ce,de){return new k(se,oe,le,ce,de)}class k extends f.Lv{constructor(oe,le,ce,de,he,B){super(oe),this.onFinalize=he,this.shouldUnsubscribe=B,this._next=le?function($){try{le($)}catch(K){oe.error(K)}}:super._next,this._error=de?function($){try{de($)}catch(K){oe.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch($){oe.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(ct,De,O)=>{O.d(De,{U:()=>k});var f=O(4482),X=O(5403);function k(se,oe){return(0,f.e)((le,ce)=>{let de=0;le.subscribe((0,X.x)(ce,he=>{ce.next(se.call(oe,he,de++))}))})}},8189:(ct,De,O)=>{O.d(De,{J:()=>k});var f=O(5577),X=O(4671);function k(se=1/0){return(0,f.z)(X.y,se)}},5577:(ct,De,O)=>{O.d(De,{z:()=>de});var f=O(4004),X=O(8421),k=O(4482),se=O(9672),oe=O(5403),ce=O(576);function de(he,B,$=1/0){return(0,ce.m)(B)?de((K,Le)=>(0,f.U)((Me,we)=>B(K,Me,Le,we))((0,X.Xf)(he(K,Le))),$):("number"==typeof B&&($=B),(0,k.e)((K,Le)=>function le(he,B,$,K,Le,Me,we,rt){const ge=[];let fe=0,Xe=0,at=!1;const xe=()=>{at&&!ge.length&&!fe&&B.complete()},_e=Be=>fe<K?Ie(Be):ge.push(Be),Ie=Be=>{Me&&B.next(Be),fe++;let $e=!1;(0,X.Xf)($(Be,Xe++)).subscribe((0,oe.x)(B,U=>{Le?.(U),Me?_e(U):B.next(U)},()=>{$e=!0},void 0,()=>{if($e)try{for(fe--;ge.length&&fe<K;){const U=ge.shift();we?(0,se.f)(B,we,()=>Ie(U)):Ie(U)}xe()}catch(U){B.error(U)}}))};return he.subscribe((0,oe.x)(B,_e,()=>{at=!0,xe()})),()=>{rt?.()}}(K,Le,he,$)))}},5363:(ct,De,O)=>{O.d(De,{Q:()=>se});var f=O(9672),X=O(4482),k=O(5403);function se(oe,le=0){return(0,X.e)((ce,de)=>{ce.subscribe((0,k.x)(de,he=>(0,f.f)(de,oe,()=>de.next(he),le),()=>(0,f.f)(de,oe,()=>de.complete(),le),he=>(0,f.f)(de,oe,()=>de.error(he),le)))})}},3099:(ct,De,O)=>{O.d(De,{B:()=>oe});var f=O(8421),X=O(7579),k=O(930),se=O(4482);function oe(ce={}){const{connector:de=(()=>new X.x),resetOnError:he=!0,resetOnComplete:B=!0,resetOnRefCountZero:$=!0}=ce;return K=>{let Le,Me,we,rt=0,ge=!1,fe=!1;const Xe=()=>{Me?.unsubscribe(),Me=void 0},at=()=>{Xe(),Le=we=void 0,ge=fe=!1},xe=()=>{const _e=Le;at(),_e?.unsubscribe()};return(0,se.e)((_e,Ie)=>{rt++,!fe&&!ge&&Xe();const Be=we=we??de();Ie.add(()=>{rt--,0===rt&&!fe&&!ge&&(Me=le(xe,$))}),Be.subscribe(Ie),!Le&&rt>0&&(Le=new k.Hp({next:$e=>Be.next($e),error:$e=>{fe=!0,Xe(),Me=le(at,he,$e),Be.error($e)},complete:()=>{ge=!0,Xe(),Me=le(at,B),Be.complete()}}),(0,f.Xf)(_e).subscribe(Le))})(K)}}function le(ce,de,...he){if(!0===de)return void ce();if(!1===de)return;const B=new k.Hp({next:()=>{B.unsubscribe(),ce()}});return de(...he).subscribe(B)}},9468:(ct,De,O)=>{O.d(De,{R:()=>X});var f=O(4482);function X(k,se=0){return(0,f.e)((oe,le)=>{le.add(k.schedule(()=>oe.subscribe(le),se))})}},8505:(ct,De,O)=>{O.d(De,{b:()=>oe});var f=O(576),X=O(4482),k=O(5403),se=O(4671);function oe(le,ce,de){const he=(0,f.m)(le)||ce||de?{next:le,error:ce,complete:de}:le;return he?(0,X.e)((B,$)=>{var K;null===(K=he.subscribe)||void 0===K||K.call(he);let Le=!0;B.subscribe((0,k.x)($,Me=>{var we;null===(we=he.next)||void 0===we||we.call(he,Me),$.next(Me)},()=>{var Me;Le=!1,null===(Me=he.complete)||void 0===Me||Me.call(he),$.complete()},Me=>{var we;Le=!1,null===(we=he.error)||void 0===we||we.call(he,Me),$.error(Me)},()=>{var Me,we;Le&&(null===(Me=he.unsubscribe)||void 0===Me||Me.call(he)),null===(we=he.finalize)||void 0===we||we.call(he)}))}):se.y}},4408:(ct,De,O)=>{O.d(De,{o:()=>oe});var f=O(727);class X extends f.w0{constructor(ce,de){super()}schedule(ce,de=0){return this}}const k={setInterval(le,ce,...de){const{delegate:he}=k;return he?.setInterval?he.setInterval(le,ce,...de):setInterval(le,ce,...de)},clearInterval(le){const{delegate:ce}=k;return(ce?.clearInterval||clearInterval)(le)},delegate:void 0};var se=O(8737);class oe extends X{constructor(ce,de){super(ce,de),this.scheduler=ce,this.work=de,this.pending=!1}schedule(ce,de=0){if(this.closed)return this;this.state=ce;const he=this.id,B=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(B,he,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(B,this.id,de),this}requestAsyncId(ce,de,he=0){return k.setInterval(ce.flush.bind(ce,this),he)}recycleAsyncId(ce,de,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return de;k.clearInterval(de)}execute(ce,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ce,de);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,de){let B,he=!1;try{this.work(ce)}catch($){he=!0,B=$||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ce,scheduler:de}=this,{actions:he}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(he,this),null!=ce&&(this.id=this.recycleAsyncId(de,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(ct,De,O)=>{O.d(De,{v:()=>k});var f=O(6063);class X{constructor(oe,le=X.now){this.schedulerActionCtor=oe,this.now=le}schedule(oe,le=0,ce){return new this.schedulerActionCtor(this,oe).schedule(ce,le)}}X.now=f.l.now;class k extends X{constructor(oe,le=X.now){super(oe,le),this.actions=[],this._active=!1,this._scheduled=void 0}flush(oe){const{actions:le}=this;if(this._active)return void le.push(oe);let ce;this._active=!0;do{if(ce=oe.execute(oe.state,oe.delay))break}while(oe=le.shift());if(this._active=!1,ce){for(;oe=le.shift();)oe.unsubscribe();throw ce}}}},4986:(ct,De,O)=>{O.d(De,{P:()=>se,z:()=>k});var f=O(4408);const k=new(O(7565).v)(f.o),se=k},6063:(ct,De,O)=>{O.d(De,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(ct,De,O)=>{O.d(De,{z:()=>f});const f={setTimeout(X,k,...se){const{delegate:oe}=f;return oe?.setTimeout?oe.setTimeout(X,k,...se):setTimeout(X,k,...se)},clearTimeout(X){const{delegate:k}=f;return(k?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(ct,De,O)=>{O.d(De,{h:()=>X});const X=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ct,De,O)=>{O.d(De,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ct,De,O)=>{O.d(De,{_6:()=>le,jO:()=>se,yG:()=>oe});var f=O(576),X=O(3532);function k(ce){return ce[ce.length-1]}function se(ce){return(0,f.m)(k(ce))?ce.pop():void 0}function oe(ce){return(0,X.K)(k(ce))?ce.pop():void 0}function le(ce,de){return"number"==typeof k(ce)?ce.pop():de}},8737:(ct,De,O)=>{function f(X,k){if(X){const se=X.indexOf(k);0<=se&&X.splice(se,1)}}O.d(De,{P:()=>f})},3888:(ct,De,O)=>{function f(X){const se=X(oe=>{Error.call(oe),oe.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}O.d(De,{d:()=>f})},2806:(ct,De,O)=>{O.d(De,{O:()=>se,x:()=>k});var f=O(2416);let X=null;function k(oe){if(f.v.useDeprecatedSynchronousErrorHandling){const le=!X;if(le&&(X={errorThrown:!1,error:null}),oe(),le){const{errorThrown:ce,error:de}=X;if(X=null,ce)throw de}}else oe()}function se(oe){f.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=oe)}},9672:(ct,De,O)=>{function f(X,k,se,oe=0,le=!1){const ce=k.schedule(function(){se(),le?X.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(X.add(ce),!le)return ce}O.d(De,{f:()=>f})},4671:(ct,De,O)=>{function f(X){return X}O.d(De,{y:()=>f})},1144:(ct,De,O)=>{O.d(De,{z:()=>f});const f=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(ct,De,O)=>{O.d(De,{D:()=>X});var f=O(576);function X(k){return Symbol.asyncIterator&&(0,f.m)(k?.[Symbol.asyncIterator])}},576:(ct,De,O)=>{function f(X){return"function"==typeof X}O.d(De,{m:()=>f})},3670:(ct,De,O)=>{O.d(De,{c:()=>k});var f=O(8822),X=O(576);function k(se){return(0,X.m)(se[f.L])}},6495:(ct,De,O)=>{O.d(De,{T:()=>k});var f=O(2202),X=O(576);function k(se){return(0,X.m)(se?.[f.h])}},8239:(ct,De,O)=>{O.d(De,{t:()=>X});var f=O(576);function X(k){return(0,f.m)(k?.then)}},3260:(ct,De,O)=>{O.d(De,{L:()=>se,Q:()=>k});var f=O(655),X=O(576);function k(oe){return(0,f.FC)(this,arguments,function*(){const ce=oe.getReader();try{for(;;){const{value:de,done:he}=yield(0,f.qq)(ce.read());if(he)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(de)}}finally{ce.releaseLock()}})}function se(oe){return(0,X.m)(oe?.getReader)}},3532:(ct,De,O)=>{O.d(De,{K:()=>X});var f=O(576);function X(k){return k&&(0,f.m)(k.schedule)}},4482:(ct,De,O)=>{O.d(De,{A:()=>X,e:()=>k});var f=O(576);function X(se){return(0,f.m)(se?.lift)}function k(se){return oe=>{if(X(oe))return oe.lift(function(le){try{return se(le,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ct,De,O)=>{function f(){}O.d(De,{Z:()=>f})},9635:(ct,De,O)=>{O.d(De,{U:()=>k,z:()=>X});var f=O(4671);function X(...se){return k(se)}function k(se){return 0===se.length?f.y:1===se.length?se[0]:function(le){return se.reduce((ce,de)=>de(ce),le)}}},7849:(ct,De,O)=>{O.d(De,{h:()=>k});var f=O(2416),X=O(3410);function k(se){X.z.setTimeout(()=>{const{onUnhandledError:oe}=f.v;if(!oe)throw se;oe(se)})}},4532:(ct,De,O)=>{function f(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(De,{z:()=>f})},655:(ct,De,O)=>{function se(q,J){var ie={};for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&J.indexOf(ne)<0&&(ie[ne]=q[ne]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(ne=Object.getOwnPropertySymbols(q);Fe<ne.length;Fe++)J.indexOf(ne[Fe])<0&&Object.prototype.propertyIsEnumerable.call(q,ne[Fe])&&(ie[ne[Fe]]=q[ne[Fe]])}return ie}function de(q,J,ie,ne){return new(ie||(ie=Promise))(function(Oe,mt){function Yt(on){try{Ke(ne.next(on))}catch(_n){mt(_n)}}function Ht(on){try{Ke(ne.throw(on))}catch(_n){mt(_n)}}function Ke(on){on.done?Oe(on.value):function Fe(Oe){return Oe instanceof ie?Oe:new ie(function(mt){mt(Oe)})}(on.value).then(Yt,Ht)}Ke((ne=ne.apply(q,J||[])).next())})}function ge(q){return this instanceof ge?(this.v=q,this):new ge(q)}function fe(q,J,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ne=ie.apply(q,J||[]),Oe=[];return Fe={},mt("next"),mt("throw"),mt("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function mt(Wt){ne[Wt]&&(Fe[Wt]=function(Qt){return new Promise(function(Rr,kt){Oe.push([Wt,Qt,Rr,kt])>1||Yt(Wt,Qt)})})}function Yt(Wt,Qt){try{!function Ht(Wt){Wt.value instanceof ge?Promise.resolve(Wt.value.v).then(Ke,on):_n(Oe[0][2],Wt)}(ne[Wt](Qt))}catch(Rr){_n(Oe[0][3],Rr)}}function Ke(Wt){Yt("next",Wt)}function on(Wt){Yt("throw",Wt)}function _n(Wt,Qt){Wt(Qt),Oe.shift(),Oe.length&&Yt(Oe[0][0],Oe[0][1])}}function at(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,J=q[Symbol.asyncIterator];return J?J.call(q):(q=function K(q){var J="function"==typeof Symbol&&Symbol.iterator,ie=J&&q[J],ne=0;if(ie)return ie.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ne>=q.length&&(q=void 0),{value:q&&q[ne++],done:!q}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ie={},ne("next"),ne("throw"),ne("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ne(Oe){ie[Oe]=q[Oe]&&function(mt){return new Promise(function(Yt,Ht){!function Fe(Oe,mt,Yt,Ht){Promise.resolve(Ht).then(function(Ke){Oe({value:Ke,done:Yt})},mt)}(Yt,Ht,(mt=q[Oe](mt)).done,mt.value)})}}}O.d(De,{FC:()=>fe,KL:()=>at,_T:()=>se,mG:()=>de,qq:()=>ge})},4650:(ct,De,O)=>{O.d(De,{$8M:()=>Wu,$Z:()=>Xg,AFp:()=>Rh,ALo:()=>wI,AaK:()=>de,AsE:()=>$m,BQk:()=>tu,CHM:()=>xu,CRH:()=>OI,CZH:()=>_y,CqO:()=>Q_,D6c:()=>hu,EJc:()=>Ep,EpF:()=>TE,F4k:()=>SE,FYo:()=>S,FiY:()=>Ne,G48:()=>sb,GfV:()=>Ve,Gpc:()=>$,Gre:()=>yc,JOm:()=>Jo,KtG:()=>Mu,LFG:()=>Zt,LSH:()=>xd,Lbi:()=>nT,Lck:()=>uI,MAs:()=>bE,MMx:()=>iy,NdJ:()=>Rm,OlP:()=>pn,PXZ:()=>lT,Q6J:()=>Z_,QGY:()=>Mm,QP$:()=>Kt,Qsj:()=>N,R0b:()=>ds,RDi:()=>pg,Rgc:()=>cu,SBq:()=>h,Sil:()=>Ey,Suo:()=>dy,TTD:()=>Yi,TgZ:()=>pc,VKq:()=>mI,W1O:()=>FI,WLB:()=>Uv,X6Q:()=>pT,XFs:()=>Ze,Xpm:()=>Se,Xts:()=>gf,Y36:()=>xl,YKP:()=>ny,YNc:()=>EE,Yjl:()=>ve,Yz7:()=>Qt,Z0I:()=>Wi,ZZ4:()=>Zl,_Bn:()=>Nv,_UZ:()=>xm,_Vd:()=>za,_c5:()=>Dw,_uU:()=>jE,aQg:()=>Pp,c2e:()=>QI,cJS:()=>kt,cg1:()=>ph,dDg:()=>Wl,dqk:()=>tn,eFA:()=>Ip,ekj:()=>Vm,eoX:()=>Fh,f3M:()=>C,g9A:()=>YI,h0i:()=>Dc,hGG:()=>Tw,hij:()=>Hm,iGM:()=>kI,ifc:()=>lt,ip1:()=>ZI,jDz:()=>dI,kL8:()=>gh,lG2:()=>W,lcZ:()=>Ch,lqb:()=>Tr,lri:()=>tb,n5z:()=>ns,oAB:()=>Pt,oxw:()=>AE,q4F:()=>Qe,qLn:()=>Ef,qOj:()=>Cm,qZA:()=>bo,rWj:()=>uw,sBO:()=>_w,sIi:()=>Rl,s_b:()=>cy,soG:()=>zl,tb:()=>wy,tp0:()=>bt,uIk:()=>q_,vHH:()=>we,vpe:()=>ca,wAp:()=>ot,xp6:()=>O0,ynx:()=>Zf,z2F:()=>Sy,zSh:()=>tc,zs3:()=>oc});var f=O(7579),X=O(727),k=O(9751),se=O(6451),oe=O(3099);function le(i){for(let o in i)if(i[o]===le)return o;throw Error("Could not find renamed property on target object.")}function ce(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function he(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const B=le({__forward_ref__:le});function $(i){return i.__forward_ref__=$,i.toString=function(){return de(this())},i}function K(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===$}class we extends Error{constructor(o,a){super(function rt(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function _e(i,o){throw new we(-201,!1)}function Ht(i,o){null==i&&function Ke(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function Qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function kt(i){return{providers:i.providers||[],imports:i.imports||[]}}function dn(i){return pi(i,gi)||pi(i,ri)}function Wi(i){return null!==dn(i)}function pi(i,o){return i.hasOwnProperty(o)?i[o]:null}function Zs(i){return i&&(i.hasOwnProperty(ni)||i.hasOwnProperty(ha))?i[ni]:null}const gi=le({\u0275prov:le}),ni=le({\u0275inj:le}),ri=le({ngInjectableDef:le}),ha=le({ngInjectorDef:le});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let br;function Qn(i){const o=br;return br=i,o}function ii(i,o,a){const c=dn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ze.Optional?null:void 0!==o?o:void _e(de(i))}function kn(i){return{toString:i}.toString()}var Un=(()=>((Un=Un||{})[Un.OnPush=0]="OnPush",Un[Un.Default=1]="Default",Un))(),lt=(()=>{return(i=lt||(lt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",lt;var i})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Gr={},xt=[],vs=le({\u0275cmp:le}),nn=le({\u0275dir:le}),xi=le({\u0275pipe:le}),rn=le({\u0275mod:le}),Jn=le({\u0275fac:le}),kr=le({__NG_ELEMENT_ID__:le});let tt=0;function Se(i){return kn(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Un.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||xt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||lt.Emulated,id:"c"+tt++,styles:i.styles||xt,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,_=i.features;return d.inputs=V(i.inputs,c),d.outputs=V(i.outputs),_&&_.forEach(E=>E(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(Ct).filter(It):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(ft).filter(It):null,d})}function Ct(i){return Q(i)||ze(i)}function It(i){return null!==i}function Pt(i){return kn(()=>({type:i.type,bootstrap:i.bootstrap||xt,declarations:i.declarations||xt,imports:i.imports||xt,exports:i.exports||xt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function V(i,o){if(null==i)return Gr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,o&&(o[d]=p)}return a}const W=Se;function ve(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Q(i){return i[vs]||null}function ze(i){return i[nn]||null}function ft(i){return i[xi]||null}function Kt(i){const o=Q(i)||ze(i)||ft(i);return null!==o&&o.standalone}function hn(i,o){const a=i[rn]||null;if(!a&&!0===o)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function cr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Or(i){return Array.isArray(i)&&!0===i[1]}function mu(i){return 0!=(8&i.flags)}function ga(i){return 2==(2&i.flags)}function $c(i){return 1==(1&i.flags)}function Cr(i){return null!==i.template}function Wh(i){return 0!=(256&i[2])}function Ri(i,o){return i.hasOwnProperty(Jn)?i[Jn]:null}class Zi{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Yi(){return Xs}function Xs(i){return i.type.prototype.ngOnChanges&&(i.setInput=vu),ma}function ma(){const i=Zh(this),o=i?.current;if(o){const a=i.previous;if(a===Gr)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function vu(i,o,a,c){const d=Zh(i)||function Mo(i,o){return i[Wc]=o}(i,{previous:Gr,current:null}),p=d.current||(d.current={}),_=d.previous,E=this.declaredInputs[a],b=_[E];p[E]=new Zi(b&&b.currentValue,o,_===Gr),i[c]=o}Yi.ngInherit=!0;const Wc="__ngSimpleChanges__";function Zh(i){return i[Wc]||null}function Sn(i){for(;Array.isArray(i);)i=i[0];return i}function oi(i,o){return Sn(o[i])}function Pr(i,o){return Sn(o[i.index])}function eo(i,o){return i.data[o]}function Ji(i,o){return i[o]}function qt(i,o){const a=o[i];return cr(a)?a:a[0]}function to(i){return 64==(64&i[2])}function yi(i,o){return null==o?null:i[o]}function Du(i){i[18]=0}function Cn(i,o){i[5]+=o;let a=i,c=i[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const St={lFrame:rl(null),bindingsEnabled:!0};function Xi(){return St.bindingsEnabled}function Ae(){return St.lFrame.lView}function $t(){return St.lFrame.tView}function xu(i){return St.lFrame.contextLView=i,i[8]}function Mu(i){return St.lFrame.contextLView=null,i}function An(){let i=Ru();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ru(){return St.lFrame.currentTNode}function ai(i,o){const a=St.lFrame;a.currentTNode=i,a.isParent=o}function _a(){return St.lFrame.isParent}function va(){St.lFrame.isParent=!1}function xn(){const i=St.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function no(){return St.lFrame.bindingIndex++}function es(i){const o=St.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function og(i,o){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,Nu(o)}function Nu(i){St.lFrame.currentDirectiveIndex=i}function el(){return St.lFrame.currentQueryIndex}function ba(i){St.lFrame.currentQueryIndex=i}function tl(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function ku(i,o,a){if(a&Ze.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&Ze.Host||(d=tl(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,i=p}const c=St.lFrame=nl();return c.currentTNode=o,c.lView=i,!0}function Ou(i){const o=nl(),a=i[1];St.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function nl(){const i=St.lFrame,o=null===i?null:i.child;return null===o?rl(i):o}function rl(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function il(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const dd=il;function ro(){const i=il();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function nr(){return St.lFrame.selectedIndex}function Wr(i){St.lFrame.selectedIndex=i}function wn(){const i=St.lFrame;return eo(i.tView,i.selectedIndex)}function Lu(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:R}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function so(i,o,a){Oo(i,o,3,a)}function ko(i,o,a,c){(3&i[2])===a&&Oo(i,o,a,c)}function pd(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Oo(i,o,a,c){const p=c??-1,_=o.length-1;let E=0;for(let b=void 0!==c?65535&i[18]:0;b<_;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(i[18]+=65536),(E<p||-1==p)&&(gd(i,a,o,b),i[18]=(4294901760&i[18])+b+2),b++}function gd(i,o,a,c){const d=a[c]<0,p=a[c+1],E=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class As{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Fo(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],_=a[c++],E=a[c++];i.setAttribute(o,_,E,p)}else{const p=d,_=a[++c];ju(p)?i.setProperty(o,p,_):i.setAttribute(o,p,_),c++}}return c}function ao(i){return 3===i||4===i||6===i}function ju(i){return 64===i.charCodeAt(0)}function Ca(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||yd(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function yd(i,o,a,c,d){let p=0,_=i.length;if(-1===o)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==_&&(i.splice(_,0,o),p=_+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}function _d(i){return-1!==i}function lr(i){return 32767&i}function Ta(i,o){let a=function Da(i){return i>>16}(i),c=o;for(;a>0;)c=c[15],a--;return c}let ki=!0;function Sa(i){const o=ki;return ki=i,o}let On=0;const _i={};function uo(i,o){const a=$u(i,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(i.injectorIndex=o.length,xa(c.data,i),xa(o,null),xa(c.blueprint,null));const d=Gu(i,o),p=i.injectorIndex;if(_d(d)){const _=lr(d),E=Ta(d,o),b=E[1].data;for(let T=0;T<8;T++)o[p+T]=E[_+T]|b[_+T]}return o[p+8]=d,p}function xa(i,o){i.push(0,0,0,0,0,0,0,0,o)}function $u(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Gu(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Uo(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function xs(i,o,a){!function Hu(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(kr)&&(c=a[kr]),null==c&&(c=a[kr]=On++);const d=255&c;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function Ms(i,o,a){if(a&Ze.Optional||void 0!==i)return i;_e()}function ul(i,o,a,c){if(a&Ze.Optional&&void 0===c&&(c=null),0==(a&(Ze.Self|Ze.Host))){const d=i[9],p=Qn(void 0);try{return d?d.get(o,c,a&Ze.Optional):ii(o,c,a&Ze.Optional)}finally{Qn(p)}}return Ms(c,0,a)}function co(i,o,a,c=Ze.Default,d){if(null!==i){if(1024&o[2]){const _=function Vo(i,o,a,c,d){let p=i,_=o;for(;null!==p&&null!==_&&1024&_[2]&&!(256&_[2]);){const E=Ma(p,_,a,c|Ze.Self,_i);if(E!==_i)return E;let b=p.parent;if(!b){const T=_[21];if(T){const R=T.get(a,_i,c);if(R!==_i)return R}b=Uo(_),_=_[15]}p=b}return d}(i,o,a,c,_i);if(_!==_i)return _}const p=Ma(i,o,a,c,_i);if(p!==_i)return p}return ul(o,a,c,d)}function Ma(i,o,a,c,d){const p=function cl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(kr)?i[kr]:void 0;return"number"==typeof o?o>=0?255&o:ll:o}(a);if("function"==typeof p){if(!ku(o,i,c))return c&Ze.Host?Ms(d,0,c):ul(o,a,c,d);try{const _=p(c);if(null!=_||c&Ze.Optional)return _;_e()}finally{dd()}}else if("number"==typeof p){let _=null,E=$u(i,o),b=-1,T=c&Ze.Host?o[16][6]:null;for((-1===E||c&Ze.SkipSelf)&&(b=-1===E?Gu(i,o):o[E+8],-1!==b&&Ra(c,!1)?(_=o[1],E=lr(b),o=Ta(b,o)):E=-1);-1!==E;){const R=o[1];if(zu(p,E,R.data)){const P=Ed(E,o,a,_,c,T);if(P!==_i)return P}b=o[E+8],-1!==b&&Ra(c,o[1].data[E+8]===T)&&zu(p,E,o)?(_=R,E=lr(b),o=Ta(b,o)):E=-1}}return d}function Ed(i,o,a,c,d,p){const _=o[1],E=_.data[i+8],R=Lo(E,_,a,null==c?ga(E)&&ki:c!=_&&0!=(3&E.type),d&Ze.Host&&p===E);return null!==R?ts(o,_,R,E):_i}function Lo(i,o,a,c,d){const p=i.providerIndexes,_=o.data,E=1048575&p,b=i.directiveStart,R=p>>20,G=d?E+R:i.directiveEnd;for(let ee=c?E:E+R;ee<G;ee++){const ye=_[ee];if(ee<b&&a===ye||ee>=b&&ye.type===a)return ee}if(d){const ee=_[b];if(ee&&Cr(ee)&&ee.type===a)return b}return null}function ts(i,o,a,c){let d=i[a];const p=o.data;if(function oo(i){return i instanceof As}(d)){const _=d;_.resolving&&function Xe(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}(p[a]));const E=Sa(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Qn(_.injectImpl):null;ku(i,c,Ze.Default);try{d=i[a]=_.factory(void 0,p,i,c),o.firstCreatePass&&a>=c.directiveStart&&function fd(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const _=Xs(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==b&&Qn(b),Sa(E),_.resolving=!1,dd()}}return d}function zu(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function Ra(i,o){return!(i&Ze.Self||i&Ze.Host&&o)}class lo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return co(this._tNode,this._lView,o,c,a)}}function ll(){return new lo(An(),Ae())}function ns(i){return kn(()=>{const o=i.prototype.constructor,a=o[Jn]||qu(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[Jn]||qu(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function qu(i){return Le(i)?()=>{const o=qu(K(i));return o&&o()}:Ri(i)}function Uo(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function Wu(i){return function wd(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(ao(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(An(),i)}const Rs="__parameters__";function Ho(i,o,a){return kn(()=>{const c=function Ku(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const _=new d(...p);return E.annotation=_,E;function E(b,T,R){const P=b.hasOwnProperty(Rs)?b[Rs]:Object.defineProperty(b,Rs,{value:[]})[Rs];for(;P.length<=R;)P.push(null);return(P[R]=P[R]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class pn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function En(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(o===i&&(o=i.slice(0,a)),En(c,o)):o!==i&&o.push(c)}return o}function wi(i,o){i.forEach(a=>Array.isArray(a)?wi(a,o):o(a))}function ka(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Pn(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function We(i,o,a){let c=Os(i,o);return c>=0?i[1|c]=a:(c=~c,function hl(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Pa(i,o){const a=Os(i,o);if(a>=0)return i[1|a]}function Os(i,o){return function Go(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const p=c+(d-c>>1),_=i[p<<a];if(o===_)return p<<a;_>o?d=p:c=p+1}return~(d<<a)}(i,o,1)}const Zr={},gl="__NG_DI_FLAG__",Dr="ngTempTokenPath",rs=/\n/gm,$n="__source";let Ps;function Li(i){const o=Ps;return Ps=i,o}function gn(i,o=Ze.Default){if(void 0===Ps)throw new we(-203,!1);return null===Ps?ii(i,void 0,o):Ps.get(i,o&Ze.Optional?null:void 0,o)}function Zt(i,o=Ze.Default){return(function _s(){return br}()||gn)(K(i),o)}function C(i,o=Ze.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Zt(i,o)}function D(i){const o=[];for(let a=0;a<i.length;a++){const c=K(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let d,p=Ze.Default;for(let _=0;_<c.length;_++){const E=c[_],b=F(E);"number"==typeof b?-1===b?d=E.token:p|=b:d=E}o.push(Zt(d,p))}else o.push(Zt(c))}return o}function x(i,o){return i[gl]=o,i.prototype[gl]=o,i}function F(i){return i[gl]}const Ne=x(Ho("Optional"),8),bt=x(Ho("SkipSelf"),4);let uf;function pg(i){uf=i}class Dd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Bi(i){return i instanceof Dd?i.changingThisBreaksApplicationSecurity:i}const Ba=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ln=(()=>((Ln=Ln||{})[Ln.NONE=0]="NONE",Ln[Ln.HTML=1]="HTML",Ln[Ln.STYLE=2]="STYLE",Ln[Ln.SCRIPT=3]="SCRIPT",Ln[Ln.URL=4]="URL",Ln[Ln.RESOURCE_URL=5]="RESOURCE_URL",Ln))();function xd(i){const o=function ec(){const i=Ae();return i&&i[12]}();return o?o.sanitize(Ln.URL,i)||"":function Wo(i,o){const a=function lf(i){return i instanceof Dd&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?Bi(i):function _l(i){return(i=String(i)).match(Ba)?i:"unsafe:"+i}(ge(i))}const gf=new pn("ENVIRONMENT_INITIALIZER"),Tg=new pn("INJECTOR",-1),Sg=new pn("INJECTOR_DEF_TYPES");class Ag{get(o,a=Zr){if(a===Zr){const c=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw c.name="NullInjectorError",c}return a}}function xg(...i){return{\u0275providers:kd(0,i)}}function kd(i,...o){const a=[],c=new Set;let d;return wi(o,p=>{const _=p;El(_,a,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&Od(d,a),a}function Od(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];wi(d,p=>{o.push(p)})}}function El(i,o,a,c){if(!(i=K(i)))return!1;let d=null,p=Zs(i);const _=!p&&Q(i);if(p||_){if(_&&!_.standalone)return!1;d=i}else{const b=i.ngModule;if(p=Zs(b),!p)return!1;d=b}const E=c.has(d);if(_){if(E)return!1;if(c.add(d),_.dependencies){const b="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of b)El(T,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let T;c.add(d);try{wi(p.imports,R=>{El(R,o,a,c)&&(T||(T=[]),T.push(R))})}finally{}void 0!==T&&Od(T,o)}if(!E){const T=Ri(d)||(()=>new d);o.push({provide:d,useFactory:T,deps:xt},{provide:Sg,useValue:d,multi:!0},{provide:gf,useValue:()=>Zt(d),multi:!0})}const b=p.providers;null==b||E||wi(b,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}const Pd=le({provide:String,useValue:le});function Il(i){return null!==i&&"object"==typeof i&&Pd in i}function Ii(i){return"function"==typeof i}const tc=new pn("Set Injector scope."),nc={},Zo={};let bl;function Fd(){return void 0===bl&&(bl=new Ag),bl}class Tr{}class Ld extends Tr{constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yo(o,_=>this.processProvider(_)),this.records.set(Tg,hr(void 0,this)),d.has("environment")&&this.records.set(Tr,hr(void 0,this));const p=this.records.get(tc);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Sg.multi,xt,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Li(this),c=Qn(void 0);try{return o()}finally{Li(a),Qn(c)}}get(o,a=Zr,c=Ze.Default){this.assertNotDestroyed();const d=Li(this),p=Qn(void 0);try{if(!(c&Ze.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function Xy(i){return"function"==typeof i||"object"==typeof i&&i instanceof pn}(o)&&dn(o);E=b&&this.injectableDefInScope(b)?hr(Cl(o),nc):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&Ze.Self?Fd():this.parent).get(o,a=c&Ze.Optional&&a===Zr?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Dr]=_[Dr]||[]).unshift(de(o)),d)throw _;return function Y(i,o,a,c){const d=i[Dr];throw o[$n]&&d.unshift(o[$n]),i.message=function te(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=de(o);if(Array.isArray(o))d=o.map(de).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):de(E)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(rs,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Dr]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{Qn(p),Li(d)}}resolveInjectorInitializers(){const o=Li(this),a=Qn(void 0);try{const c=this.get(gf.multi,xt,Ze.Self);for(const d of c)d()}finally{Li(o),Qn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(de(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(o){let a=Ii(o=K(o))?o:K(o&&o.provide);const c=function mf(i){return Il(i)?hr(void 0,i.useValue):hr(Dl(i),nc)}(o);if(Ii(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=hr(void 0,nc,!0),d.factory=()=>D(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===nc&&(a.value=Zo,a.value=a.factory()),"object"==typeof a.value&&a.value&&function yf(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=K(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Cl(i){const o=dn(i),a=null!==o?o.factory:Ri(i);if(null!==a)return a;if(i instanceof pn)throw new we(204,!1);if(i instanceof Function)return function Rg(i){const o=i.length;if(o>0)throw function Ns(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new we(204,!1);const a=function Nr(i){const o=i&&(i[gi]||i[ri]);if(o){const a=function $r(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function Dl(i,o,a){let c;if(Ii(i)){const d=K(i);return Ri(d)||Cl(d)}if(Il(i))c=()=>K(i.useValue);else if(function ci(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...D(i.deps||[]));else if(function Lr(i){return!(!i||!i.useExisting)}(i))c=()=>Zt(K(i.useExisting));else{const d=K(i&&(i.useClass||i.provide));if(!function Ga(i){return!!i.deps}(i))return Ri(d)||Cl(d);c=()=>new d(...D(i.deps))}return c}function hr(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function is(i){return!!i.\u0275providers}function Yo(i,o){for(const a of i)Array.isArray(a)?Yo(a,o):is(a)?Yo(a.\u0275providers,o):o(a)}class Vd{}class jd{resolveComponentFactory(o){throw function Ng(i){const o=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let za=(()=>{class i{}return i.NULL=new jd,i})();function e_(){return y(An(),Ae())}function y(i,o){return new h(Pr(i,o))}let h=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=e_,i})();function g(i){return i instanceof h?i.nativeElement:i}class S{}let N=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function z(){const i=Ae(),a=qt(An().index,i);return(cr(a)?a:i)[11]}(),i})(),ae=(()=>{class i{}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:()=>null}),i})();class Ve{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Qe=new Ve("14.2.3"),wt={};function i_(i){return i.ngOriginalError}class Ef{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&i_(o);for(;a&&i_(a);)a=i_(a);return a||null}}const s_=new Map;let fC=0;const Vg="__ngContext__";function Vr(i,o){cr(o)?(i[Vg]=o[20],function gC(i){s_.set(i[20],i)}(o)):i[Vg]=o}function Ka(i){return i instanceof Function?i():i}var Jo=(()=>((Jo=Jo||{})[Jo.Important=1]="Important",Jo[Jo.DashCase=2]="DashCase",Jo))();function l_(i,o){return undefined(i,o)}function zd(i){const o=i[3];return Or(o)?o[3]:o}function jg(i){return y0(i[13])}function Hg(i){return y0(i[4])}function y0(i){for(;null!==i&&!Or(i);)i=i[4];return i}function qd(i,o,a,c,d){if(null!=c){let p,_=!1;Or(c)?p=c:cr(c)&&(_=!0,c=c[0]);const E=Sn(c);0===i&&null!==a?null==d?C0(o,a,E):Xo(o,a,E,d||null,!0):1===i&&null!==a?Xo(o,a,E,d||null,!0):2===i?function xC(i,o,a){const c=zg(i,o);c&&function AC(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,E,_):3===i&&o.destroyNode(E),null!=p&&function xA(i,o,a,c,d){const p=a[7];p!==Sn(a)&&qd(o,i,c,p,d);for(let E=10;E<a.length;E++){const b=a[E];Sl(b[1],b,i,o,c,p)}}(o,i,p,a,d)}}function $g(i,o,a){return i.createElement(o,a)}function E0(i,o){const a=i[9],c=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Cn(d,-1)),a.splice(c,1)}function p_(i,o){if(i.length<=10)return;const a=10+o,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&E0(d,c),o>0&&(i[a-1][4]=c[4]);const p=Pn(i,10+o);!function f_(i,o){Sl(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=p[19];null!==_&&_.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Cf(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Sl(i,o,a,3,null,null),function SA(i){let o=i[13];if(!o)return Gg(i[1],i);for(;o;){let a=null;if(cr(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==i;)cr(o)&&Gg(o[1],o),o=o[3];null===o&&(o=i),cr(o)&&Gg(o[1],o),a=o&&o[4]}o=a}}(o)}}function Gg(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function m_(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof As)){const p=a[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=d[p[_]],b=p[_+1];try{b.call(E)}finally{}}else try{p.call(d)}finally{}}}}(i,o),function g_(i,o){const a=i.cleanup,c=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(o):Sn(o[_]),b=c[d=a[p+2]],T=a[p+3];"boolean"==typeof T?E.removeEventListener(a[p],b,T):T>=0?c[d=T]():c[d=-T].unsubscribe(),p+=2}else{const _=c[d=a[p+1]];a[p].call(_)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Or(o[3])){a!==o[3]&&E0(a,o);const c=o[19];null!==c&&c.detachView(i)}!function mC(i){s_.delete(i[20])}(o)}}function I0(i,o,a){return function b0(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===lt.None||d===lt.Emulated)return null}return Pr(c,a)}(i,o.parent,a)}function Xo(i,o,a,c,d){i.insertBefore(o,a,c,d)}function C0(i,o,a){i.appendChild(o,a)}function D0(i,o,a,c,d){null!==c?Xo(i,o,a,c,d):C0(i,o,a)}function zg(i,o){return i.parentNode(o)}let y_=function S0(i,o,a){return 40&i.type?Pr(i,a):null};function Wg(i,o,a,c){const d=I0(i,c,o),p=o[11],E=function Ur(i,o,a){return y_(i,o,a)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)D0(p,d,a[b],E,!1);else D0(p,d,a,E,!1)}function Kg(i,o){if(null!==o){const a=o.type;if(3&a)return Pr(o,i);if(4&a)return A0(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Kg(i,c);{const d=i[o.index];return Or(d)?A0(-1,d):Sn(d)}}if(32&a)return l_(o,i)()||Sn(i[o.index]);{const c=__(i,o);return null!==c?Array.isArray(c)?c[0]:Kg(zd(i[16]),c):Kg(i,o.next)}}return null}function __(i,o){return null!==o?i[16][6].projection[o.projection]:null}function A0(i,o){const a=10+i+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return Kg(c,d)}return o[7]}function v_(i,o,a,c,d,p,_){for(;null!=a;){const E=c[a.index],b=a.type;if(_&&0===o&&(E&&Vr(Sn(E),c),a.flags|=4),64!=(64&a.flags))if(8&b)v_(i,o,a.child,c,d,p,!1),qd(o,i,d,E,p);else if(32&b){const T=l_(a,c);let R;for(;R=T();)qd(o,i,d,R,p);qd(o,i,d,E,p)}else 16&b?Tf(i,o,c,a,d,p):qd(o,i,d,E,p);a=_?a.projectionNext:a.next}}function Sl(i,o,a,c,d,p){v_(a,c,i.firstChild,o,d,p,!1)}function Tf(i,o,a,c,d,p){const _=a[16],b=_[6].projection[c.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)qd(o,i,d,b[T],p);else v_(i,o,b,_[3],d,p,!0)}function Al(i,o,a){i.setAttribute(o,"style",a)}function Sf(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function MC(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}const w_="ng-template";function E_(i,o,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==MC(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function R0(i){return 4===i.type&&i.value!==w_}function NC(i,o,a){return o===(4!==i.type||a?i.value:w_)}function kC(i,o,a){let c=4;const d=i.attrs||[],p=function MA(i){for(let o=0;o<i.length;o++)if(ao(i[o]))return o;return i.length}(d);let _=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!_)if(4&c){if(c=2|1&c,""!==b&&!NC(i,b,a)||""===b&&1===o.length){if(Us(c))return!1;_=!0}}else{const T=8&c?b:o[++E];if(8&c&&null!==i.attrs){if(!E_(i.attrs,T,a)){if(Us(c))return!1;_=!0}continue}const P=OC(8&c?"class":b,d,R0(i),a);if(-1===P){if(Us(c))return!1;_=!0;continue}if(""!==T){let G;G=P>p?"":d[P+1].toLowerCase();const ee=8&c?G:null;if(ee&&-1!==MC(ee,T,0)||2&c&&T!==G){if(Us(c))return!1;_=!0}}}}else{if(!_&&!Us(c)&&!Us(b))return!1;if(_&&Us(b))continue;_=!1,c=b|1&c}}return Us(c)||_}function Us(i){return 0==(1&i)}function OC(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let p=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function N0(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function PC(i,o,a=!1){for(let c=0;c<o.length;c++)if(kC(i,o[c],a))return!0;return!1}function k0(i,o){return i?":not("+o.trim()+")":o}function Yg(i){let o=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const E=i[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!Us(_)&&(o+=k0(p,d),d=""),c=_,p=p||!Us(c);a++}return""!==d&&(o+=k0(p,d)),o}const Lt={};function O0(i){P0($t(),Ae(),nr()+i,!1)}function P0(i,o,a,c){if(!c)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&so(o,p,a)}else{const p=i.preOrderHooks;null!==p&&ko(o,p,0,a)}Wr(a)}function L0(i,o=null,a=null,c){const d=V0(i,o,a,c);return d.resolveInjectorInitializers(),d}function V0(i,o=null,a=null,c,d=new Set){const p=[a||xt,xg(i)];return c=c||("object"==typeof i?void 0:de(i)),new Ld(p,o||Fd(),c||null,d)}let oc=(()=>{class i{static create(a,c){if(Array.isArray(a))return L0({name:""},c,a,"");{const d=a.name??"";return L0({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Zr,i.NULL=new Ag,i.\u0275prov=Qt({token:i,providedIn:"any",factory:()=>Zt(Tg)}),i.__NG_ELEMENT_ID__=-1,i})();function xl(i,o=Ze.Default){const a=Ae();return null===a?Zt(i,o):co(An(),a,K(i),o)}function Xg(){throw new Error("invalid")}function Mf(i,o){return i<<17|o<<2}function wo(i){return i>>17&32767}function q0(i){return 2|i}function uc(i){return(131068&i)>>2}function S_(i,o){return-131069&i|o<<2}function K0(i){return 1|i}function sm(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],p=a[c+1];if(-1!==p){const _=i.data[p];ba(d),_.contentQueries(2,o[p],p)}}}function Qd(i,o,a,c,d,p,_,E,b,T,R){const P=o.blueprint.slice();return P[0]=d,P[2]=76|c,(null!==R||i&&1024&i[2])&&(P[2]|=1024),Du(P),P[3]=P[15]=i,P[8]=a,P[10]=_||i&&i[10],P[11]=E||i&&i[11],P[12]=b||i&&i[12]||null,P[9]=T||i&&i[9]||null,P[6]=p,P[20]=function pC(){return fC++}(),P[21]=R,P[16]=2==o.type?i[16]:P,P}function Jd(i,o,a,c,d){let p=i.data[o];if(null===p)p=function N_(i,o,a,c,d){const p=Ru(),_=_a(),b=i.data[o]=function rE(i,o,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,o,a,c,d),function sg(){return St.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const _=function No(){const i=St.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ai(p,!0),p}function Eo(i,o,a,c){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function am(i,o,a){Ou(o);try{const c=i.viewQuery;null!==c&&Ff(1,c,a);const d=i.template;null!==d&&k_(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&sm(i,o),i.staticViewQueries&&Ff(2,i.viewQuery,a);const p=i.components;null!==p&&function ra(i,o){for(let a=0;a<o.length;a++)nD(i,o[a])}(o,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[2]&=-5,ro()}}function Xd(i,o,a,c){const d=o[2];if(128!=(128&d)){Ou(o);try{Du(o),function Jc(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&k_(i,o,a,2,c);const _=3==(3&d);if(_){const T=i.preOrderCheckHooks;null!==T&&so(o,T,null)}else{const T=i.preOrderHooks;null!==T&&ko(o,T,0,null),pd(o,0)}if(function Jr(i){for(let o=jg(i);null!==o;o=Hg(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c],p=d[3];0==(512&d[2])&&Cn(p,1),d[2]|=512}}}(o),function Br(i){for(let o=jg(i);null!==o;o=Hg(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];to(c)&&Xd(d,c,d.template,c[8])}}(o),null!==i.contentQueries&&sm(i,o),_){const T=i.contentCheckHooks;null!==T&&so(o,T)}else{const T=i.contentHooks;null!==T&&ko(o,T,1),pd(o,1)}!function tE(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Wr(~d);else{const p=d,_=a[++c],E=a[++c];og(_,p),E(2,o[p])}}}finally{Wr(-1)}}(i,o);const E=i.components;null!==E&&function om(i,o){for(let a=0;a<o.length;a++)ym(i,o[a])}(o,E);const b=i.viewQuery;if(null!==b&&Ff(2,b,c),_){const T=i.viewCheckHooks;null!==T&&so(o,T)}else{const T=i.viewHooks;null!==T&&ko(o,T,2),pd(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Cn(o[3],-1))}finally{ro()}}}function k_(i,o,a,c,d){const p=nr(),_=2&c;try{Wr(-1),_&&o.length>22&&P0(i,o,22,!1),a(c,d)}finally{Wr(p)}}function nE(i,o,a){if(mu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function um(i,o,a){!Xi()||(function hm(i,o,a,c){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||uo(a,o),Vr(c,o);const _=a.initialInputs;for(let E=d;E<p;E++){const b=i.data[E],T=Cr(b);T&&lE(o,a,b);const R=ts(o,i,E,a);Vr(R,o),null!==_&&tD(0,E-d,R,b,0,_),T&&(qt(a.index,o)[8]=R)}}(i,o,a,Pr(a,o)),128==(128&a.flags)&&function V_(i,o,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,_=function Xc(){return St.lFrame.currentDirectiveIndex}();try{Wr(p);for(let E=c;E<d;E++){const b=i.data[E],T=o[E];Nu(E),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&fm(b,T)}}finally{Wr(-1),Nu(_)}}(i,o,a))}function eh(i,o,a=Pr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],E=-1===_?a(o,i):i[_];i[d++]=E}}}function cm(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=kf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function kf(i,o,a,c,d,p,_,E,b,T){const R=22+c,P=R+d,G=function O_(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Lt);return a}(R,P),ee="function"==typeof T?T():T;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:E,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:ee,incompleteFirstPass:!1}}function lm(i,o,a,c){const d=vm(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&$_(i).push(c,d.length-1))}function iE(i,o,a){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,d):a[c]=[o,d]}return a}function th(i,o){const c=o.directiveEnd,d=i.data,p=o.attrs,_=[];let E=null,b=null;for(let T=o.directiveStart;T<c;T++){const R=d[T],P=R.inputs,G=null===p||R0(o)?null:j_(P,p);_.push(G),E=iE(P,T,E),b=iE(R.outputs,T,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=b}function sE(i,o){const a=qt(o,i);16&a[2]||(a[2]|=32)}function dm(i,o,a,c){let d=!1;if(Xi()){const p=function U_(i,o,a){const c=i.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const _=c[p];PC(a,_.selectors,!1)&&(d||(d=[]),xs(uo(a,o),i,_.type),Cr(_)?(pm(i,a),d.unshift(_)):d.push(_))}return d}(i,o,a),_=null===c?null:{"":-1};if(null!==p){d=!0,cE(a,i.data.length,p.length);for(let R=0;R<p.length;R++){const P=p[R];P.providersResolver&&P.providersResolver(P)}let E=!1,b=!1,T=Eo(i,o,p.length,null);for(let R=0;R<p.length;R++){const P=p[R];a.mergedAttrs=Ca(a.mergedAttrs,P.hostAttrs),B_(i,a,o,T,P),uE(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const G=P.type.prototype;!E&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!b&&(G.ngOnChanges||G.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),T++}th(i,a)}_&&function aE(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new we(-301,!1);c.push(o[d],p)}}}(a,c,_)}return a.mergedAttrs=Ca(a.mergedAttrs,a.attrs),d}function L_(i,o,a,c,d,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const b=~o.index;(function oE(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(c,d,_)}}function fm(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function pm(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function uE(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Cr(o)&&(a[""]=i)}}function cE(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function B_(i,o,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=Ri(d.type)),_=new As(p,Cr(d),xl);i.blueprint[c]=_,a[c]=_,L_(i,o,0,c,Eo(i,a,d.hostVars,Lt),d)}function lE(i,o,a){const c=Pr(o,i),d=cm(a),p=i[10],_=Pf(i,Qd(i,d,null,a.onPush?32:16,c,o,p,p.createRenderer(c,a),null,null,null));i[o.index]=_}function Bs(i,o,a,c,d,p){const _=Pr(i,o);!function gm(i,o,a,c,d,p,_){if(null==p)i.removeAttribute(o,d,a);else{const E=null==_?ge(p):_(p,c||"",d);i.setAttribute(o,d,E,a)}}(o[11],_,p,i.value,a,c,d)}function tD(i,o,a,c,d,p){const _=p[o];if(null!==_){const E=c.setInput;for(let b=0;b<_.length;){const T=_[b++],R=_[b++],P=_[b++];null!==E?c.setInput(a,P,T,R):a[R]=P}}}function j_(i,o){let a=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[c+1])),c+=2}else c+=2;else c+=4}return a}function mm(i,o,a,c){return new Array(i,!0,!1,o,null,0,c,a,null,null)}function ym(i,o){const a=qt(o,i);if(to(a)){const c=a[1];48&a[2]?Xd(c,a,c.template,a[8]):a[5]>0&&Of(a)}}function Of(i){for(let c=jg(i);null!==c;c=Hg(c))for(let d=10;d<c.length;d++){const p=c[d];if(to(p))if(512&p[2]){const _=p[1];Xd(_,p,_.template,p[8])}else p[5]>0&&Of(p)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=qt(a[c],i);to(d)&&d[5]>0&&Of(d)}}function nD(i,o){const a=qt(o,i),c=a[1];(function rD(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),am(c,a,a[8])}function Pf(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function H_(i){for(;i;){i[2]|=32;const o=zd(i);if(Wh(i)&&!o)return i;i=o}return null}function _m(i,o,a,c=!0){const d=o[10];d.begin&&d.begin();try{Xd(i,o,i.template,a)}catch(_){throw c&&Lf(o,_),_}finally{d.end&&d.end()}}function Ff(i,o,a){ba(0),o(i,a)}function vm(i){return i[7]||(i[7]=[])}function $_(i){return i.cleanup||(i.cleanup=[])}function Lf(i,o){const a=i[9],c=a?a.get(Ef,null):null;c&&c.handleError(o)}function Vf(i,o,a,c,d){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],b=o[_],T=i.data[_];null!==T.setInput?T.setInput(b,d,c,E):b[E]=d}}function Io(i,o,a){const c=oi(o,i);!function _0(i,o,a){i.setValue(o,a)}(i[11],c,a)}function Uf(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?p=E:1==p?d=he(d,E):2==p&&(c=he(c,E+": "+o[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function wm(i,o,a,c,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(Sn(p)),Or(p))for(let E=10;E<p.length;E++){const b=p[E],T=b[1].firstChild;null!==T&&wm(b[1],b,T,c)}const _=a.type;if(8&_)wm(i,o,a.child,c);else if(32&_){const E=l_(a,o);let b;for(;b=E();)c.push(b)}else if(16&_){const E=__(o,a);if(Array.isArray(E))c.push(...E);else{const b=zd(o[16]);wm(b[1],b,E,c,!0)}}a=d?a.projectionNext:a.next}return c}class Ja{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return wm(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Or(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(p_(o,c),Pn(a,c))}this._attachedToViewContainer=!1}Cf(this._lView[1],this._lView)}onDestroy(o){lm(this._lView[1],this._lView,null,o)}markForCheck(){H_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){_m(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function w0(i,o){Sl(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=o}}class fE extends Ja{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;_m(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Em extends za{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Q(o);return new Bf(a,this.ngModule)}}function G_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class sD{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){const d=this.injector.get(o,wt,c);return d!==wt||a===wt?d:this.parentInjector.get(o,a,c)}}class Bf extends Vd{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function LC(i){return i.map(Yg).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return G_(this.componentDef.inputs)}get outputs(){return G_(this.componentDef.outputs)}create(o,a,c,d){let p=(d=d||this.ngModule)instanceof Tr?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new sD(o,p):o,E=_.get(S,null);if(null===E)throw new we(407,!1);const b=_.get(ae,null),T=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",P=c?function JC(i,o,a){return i.selectRootElement(o,a===lt.ShadowDom)}(T,c,this.componentDef.encapsulation):$g(E.createRenderer(null,this.componentDef),R,function Im(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),G=this.componentDef.onPush?288:272,ee=kf(0,null,null,1,0,null,null,null,null,null),ye=Qd(null,ee,null,G,null,null,E,T,b,_,null);let Pe,He;Ou(ye);try{const Je=function pE(i,o,a,c,d,p){const _=a[1];a[22]=i;const b=Jd(_,22,2,"#host",null),T=b.mergedAttrs=o.hostAttrs;null!==T&&(Uf(b,T,!0),null!==i&&(Fo(d,i,T),null!==b.classes&&Sf(d,i,b.classes),null!==b.styles&&Al(d,i,b.styles)));const R=c.createRenderer(i,o),P=Qd(a,cm(o),null,o.onPush?32:16,a[22],b,c,R,p||null,null,null);return _.firstCreatePass&&(xs(uo(b,a),_,o.type),pm(_,b),cE(b,a.length,1)),Pf(a,P),a[22]=P}(P,this.componentDef,ye,E,T);if(P)if(c)Fo(T,P,["ng-version",Qe.full]);else{const{attrs:vt,classes:Te}=function VC(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++c]):8===d&&a.push(p);else{if(!Us(d))break;d=p}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);vt&&Fo(T,P,vt),Te&&Te.length>0&&Sf(T,P,Te.join(" "))}if(He=eo(ee,22),void 0!==a){const vt=He.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const Et=a[Te];vt.push(null!=Et?Array.from(Et):null)}}Pe=function bm(i,o,a,c){const d=a[1],p=function F_(i,o,a){const c=An();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),B_(i,c,o,Eo(i,o,1,null),a),th(i,c));const d=ts(o,i,c.directiveStart,c);Vr(d,o);const p=Pr(c,o);return p&&Vr(p,o),d}(d,a,o);if(i[8]=a[8]=p,null!==c)for(const E of c)E(p,o);if(o.contentQueries){const E=An();o.contentQueries(1,p,E.directiveStart)}const _=An();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Wr(_.index),L_(a[1],_,0,_.directiveStart,_.directiveEnd,o),fm(o,p)),p}(Je,this.componentDef,ye,[gE]),am(ee,ye,null)}finally{ro()}return new oD(this.componentType,Pe,y(He,ye),ye,He)}}class oD extends class _f{}{constructor(o,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new fE(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;Vf(p[1],p,d,o,a),sE(p,this._tNode.index)}}get injector(){return new lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function gE(){const i=An();Lu(Ae()[1],i)}function Cm(i){let o=function ih(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(Cr(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new we(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const _=i;_.inputs=Dm(i.inputs),_.declaredInputs=Dm(i.declaredInputs),_.outputs=Dm(i.outputs);const E=d.hostBindings;E&&mE(i,E);const b=d.viewQuery,T=d.contentQueries;if(b&&jf(i,b),T&&Tm(i,T),ce(i.inputs,d.inputs),ce(i.declaredInputs,d.declaredInputs),ce(i.outputs,d.outputs),Cr(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===Cm&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Ci(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Ca(d.hostAttrs,a=Ca(a,d.hostAttrs))}}(c)}function Dm(i){return i===Gr?{}:i===xt?[]:i}function jf(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function Tm(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,p)=>{o(c,d,p),a(c,d,p)}:o}function mE(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}let cc=null;function Xa(){if(!cc){const i=tn.Symbol;if(i&&i.iterator)cc=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(cc=c)}}}return cc}function Rl(i){return!!Am(i)&&(Array.isArray(i)||!(i instanceof Map)&&Xa()in i)}function Am(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function js(i,o,a){return i[o]=a}function jr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function dc(i,o,a,c){const d=jr(i,o,a);return jr(i,o+1,c)||d}function q_(i,o,a,c){const d=Ae();return jr(d,no(),o)&&($t(),Bs(wn(),d,i,o,a,c)),q_}function Nl(i,o,a,c){return jr(i,no(),a)?o+ge(a)+c:Lt}function eu(i,o,a,c,d,p){const E=dc(i,function Ni(){return St.lFrame.bindingIndex}(),a,d);return es(2),E?o+ge(a)+c+ge(d)+p:Lt}function EE(i,o,a,c,d,p,_,E){const b=Ae(),T=$t(),R=i+22,P=T.firstCreatePass?function Kf(i,o,a,c,d,p,_,E,b){const T=o.consts,R=Jd(o,i,4,_||null,yi(T,E));dm(o,a,R,yi(T,b)),Lu(o,R);const P=R.tViews=kf(2,R,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,R),P.queries=o.queries.embeddedTView(R)),R}(R,T,b,o,a,c,d,p,_):T.data[R];ai(P,!1);const G=b[11].createComment("");Wg(T,b,G,P),Vr(G,b),Pf(b,b[R]=mm(G,b,G,P)),$c(P)&&um(T,b,P),null!=_&&eh(b,P,E)}function bE(i){return Ji(function Qc(){return St.lFrame.contextLView}(),22+i)}function Z_(i,o,a){const c=Ae();return jr(c,no(),o)&&function Qr(i,o,a,c,d,p,_,E){const b=Pr(o,a);let R,T=o.inputs;!E&&null!=T&&(R=T[c])?(Vf(i,a,R,c,d),ga(o)&&sE(a,o.index)):3&o.type&&(c=function XC(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=_?_(d,o.value||"",c):d,p.setProperty(b,c,d))}($t(),wn(),c,i,o,c[11],a,!1),Z_}function Y_(i,o,a,c,d){const _=d?"class":"style";Vf(i,a,o.inputs[_],_,c)}function pc(i,o,a,c){const d=Ae(),p=$t(),_=22+i,E=d[11],b=d[_]=$g(E,o,function Fu(){return St.lFrame.currentNamespace}()),T=p.firstCreatePass?function uD(i,o,a,c,d,p,_){const E=o.consts,T=Jd(o,i,2,d,yi(E,p));return dm(o,a,T,yi(E,_)),null!==T.attrs&&Uf(T,T.attrs,!1),null!==T.mergedAttrs&&Uf(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,p,d,0,o,a,c):p.data[_];ai(T,!0);const R=T.mergedAttrs;null!==R&&Fo(E,b,R);const P=T.classes;null!==P&&Sf(E,b,P);const G=T.styles;return null!==G&&Al(E,b,G),64!=(64&T.flags)&&Wg(p,d,b,T),0===function Su(){return St.lFrame.elementDepthCount}()&&Vr(b,d),function Au(){St.lFrame.elementDepthCount++}(),$c(T)&&(um(p,d,T),nE(p,T,d)),null!==c&&eh(d,T),pc}function bo(){let i=An();_a()?va():(i=i.parent,ai(i,!1));const o=i;!function Kc(){St.lFrame.elementDepthCount--}();const a=$t();return a.firstCreatePass&&(Lu(a,i),mu(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Bu(i){return 0!=(16&i.flags)}(o)&&Y_(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function md(i){return 0!=(32&i.flags)}(o)&&Y_(a,o,Ae(),o.stylesWithoutHost,!1),bo}function xm(i,o,a,c){return pc(i,o,a,c),bo(),xm}function Zf(i,o,a){const c=Ae(),d=$t(),p=i+22,_=d.firstCreatePass?function CE(i,o,a,c,d){const p=o.consts,_=yi(p,c),E=Jd(o,i,8,"ng-container",_);return null!==_&&Uf(E,_,!0),dm(o,a,E,yi(p,d)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,d,c,o,a):d.data[p];ai(_,!0);const E=c[p]=c[11].createComment("");return Wg(d,c,E,_),Vr(E,c),$c(_)&&(um(d,c,_),nE(d,_,c)),null!=a&&eh(c,_),Zf}function tu(){let i=An();const o=$t();return _a()?va():(i=i.parent,ai(i,!1)),o.firstCreatePass&&(Lu(o,i),mu(i)&&o.queries.elementEnd(i)),tu}function TE(){return Ae()}function Mm(i){return!!i&&"function"==typeof i.then}function SE(i){return!!i&&"function"==typeof i.subscribe}const Q_=SE;function Rm(i,o,a,c){const d=Ae(),p=$t(),_=An();return function X_(i,o,a,c,d,p,_,E){const b=$c(c),R=i.firstCreatePass&&$_(i),P=o[8],G=vm(o);let ee=!0;if(3&c.type||E){const He=Pr(c,o),Je=E?E(He):He,vt=G.length,Te=E?ln=>E(Sn(ln[c.index])):c.index;let Et=null;if(!E&&b&&(Et=function J_(i,o,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===c){const E=o[7],b=d[p+2];return E.length>b?E[b]:null}"string"==typeof _&&(p+=2)}return null}(i,o,d,c.index)),null!==Et)(Et.__ngLastListenerFn__||Et).__ngNextListenerFn__=p,Et.__ngLastListenerFn__=p,ee=!1;else{p=km(c,o,P,p,!1);const ln=a.listen(Je,d,p);G.push(p,ln),R&&R.push(d,Te,vt,vt+1)}}else p=km(c,o,P,p,!1);const ye=c.outputs;let Pe;if(ee&&null!==ye&&(Pe=ye[d])){const He=Pe.length;if(He)for(let Je=0;Je<He;Je+=2){const yn=o[Pe[Je]][Pe[Je+1]].subscribe(p),Ql=G.length;G.push(p,yn),R&&R.push(d,c.index,Ql,-(Ql+1))}}}(p,d,d[11],_,i,o,0,c),Rm}function ev(i,o,a,c){try{return!1!==a(c)}catch(d){return Lf(i,d),!1}}function km(i,o,a,c,d){return function p(_){if(_===Function)return c;H_(2&i.flags?qt(i.index,o):o);let b=ev(o,0,c,_),T=p.__ngNextListenerFn__;for(;T;)b=ev(o,0,T,_)&&b,T=T.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function AE(i=1){return function io(i){return(St.lFrame.contextLView=function Pu(i,o){for(;i>0;)o=o[15],i--;return o}(i,St.lFrame.contextLView))[8]}(i)}function rv(i,o,a,c,d){const p=i[a+1],_=null===o;let E=c?wo(p):uc(p),b=!1;for(;0!==E&&(!1===b||_);){const R=i[E+1];NE(i[E],o)&&(b=!0,i[E+1]=c?K0(R):q0(R)),E=c?wo(R):uc(R)}b&&(i[a+1]=c?q0(p):K0(p))}function NE(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Os(i,o)>=0}const ir={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function iv(i){return i.substring(ir.key,ir.keyEnd)}function sv(i,o){const a=ir.textEnd;return a===o?-1:(o=ir.keyEnd=function Fm(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,ir.key=o,a),gc(i,o,a))}function gc(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function Vm(i,o){return function Gs(i,o,a,c){const d=Ae(),p=$t(),_=es(2);p.firstUpdatePass&&dv(p,i,_,c),o!==Lt&&jr(d,_,o)&&BE(p,p.data[nr()],d,d[11],i,d[_+1]=function pD(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=de(Bi(i)))),i}(o,a),c,_)}(i,o,null,!0),Vm}function os(i,o){for(let a=function kE(i){return function av(i){ir.key=0,ir.keyEnd=0,ir.value=0,ir.valueEnd=0,ir.textEnd=i.length}(i),sv(i,gc(i,0,ir.textEnd))}(o);a>=0;a=sv(o,a))We(i,iv(o),!0)}function mc(i,o){return o>=i.expandoStartIndex}function dv(i,o,a,c){const d=i.data;if(null===d[a+1]){const p=d[nr()],_=mc(i,a);hv(p,c)&&null===o&&!_&&(o=!1),o=function FE(i,o,a,c){const d=function Ia(i){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=hh(a=Di(null,i,o,a,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Di(d,i,o,a,c),null===p){let b=function LE(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==uc(c))return i[wo(c)]}(i,o,c);void 0!==b&&Array.isArray(b)&&(b=Di(null,i,o,b[1],c),b=hh(b,o.attrs,c),function VE(i,o,a,c){i[wo(a?o.classBindings:o.styleBindings)]=c}(i,o,c,b))}else p=function Um(i,o,a){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=hh(c,i[p].hostAttrs,a);return hh(c,o.attrs,a)}(i,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,c),function dD(i,o,a,c,d,p){let _=p?o.classBindings:o.styleBindings,E=wo(_),b=uc(_);i[c]=a;let R,T=!1;if(Array.isArray(a)){const P=a;R=P[1],(null===R||Os(P,R)>0)&&(T=!0)}else R=a;if(d)if(0!==b){const G=wo(i[E+1]);i[c+1]=Mf(G,E),0!==G&&(i[G+1]=S_(i[G+1],c)),i[E+1]=function ZC(i,o){return 131071&i|o<<17}(i[E+1],c)}else i[c+1]=Mf(E,0),0!==E&&(i[E+1]=S_(i[E+1],c)),E=c;else i[c+1]=Mf(b,0),0===E?E=c:i[b+1]=S_(i[b+1],c),b=c;T&&(i[c+1]=q0(i[c+1])),rv(i,R,c,!0),rv(i,R,c,!1),function RE(i,o,a,c,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Os(p,o)>=0&&(a[c+1]=K0(a[c+1]))}(o,R,i,c,p),_=Mf(E,b),p?o.classBindings=_:o.styleBindings=_}(d,p,o,a,_,c)}}function Di(i,o,a,c,d){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=o[E],c=hh(c,p.hostAttrs,d),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function hh(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),We(i,_,!!a||o[++p]))}return void 0===i?null:i}function BE(i,o,a,c,d,p,_,E){if(!(3&o.type))return;const b=i.data,T=b[E+1];jm(function W0(i){return 1==(1&i)}(T)?Bm(b,o,a,d,uc(T),_):void 0)||(jm(p)||function tm(i){return 2==(2&i)}(T)&&(p=Bm(b,null,a,d,E,_)),function M0(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:Jo.DashCase;null==d?i.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Jo.Important),i.setStyle(a,c,d,p))}}(c,_,oi(nr(),a),d,p))}function Bm(i,o,a,c,d,p){const _=null===o;let E;for(;d>0;){const b=i[d],T=Array.isArray(b),R=T?b[1]:b,P=null===R;let G=a[d+1];G===Lt&&(G=P?xt:void 0);let ee=P?Pa(G,c):R===c?G:void 0;if(T&&!jm(ee)&&(ee=Pa(b,c)),jm(ee)&&(E=ee,_))return E;const ye=i[d+1];d=_?wo(ye):uc(ye)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(E=Pa(b,c))}return E}function jm(i){return void 0!==i}function hv(i,o){return 0!=(i.flags&(o?16:32))}function jE(i,o=""){const a=Ae(),c=$t(),d=i+22,p=c.firstCreatePass?Jd(c,d,1,o,null):c.data[d],_=a[d]=function h_(i,o){return i.createText(o)}(a[11],o);Wg(c,a,_,p),ai(p,!1)}function Hm(i,o,a){const c=Ae(),d=Nl(c,i,o,a);return d!==Lt&&Io(c,nr(),d),Hm}function $m(i,o,a,c,d){const p=Ae(),_=eu(p,i,o,a,c,d);return _!==Lt&&Io(p,nr(),_),$m}function yc(i,o,a){!function zs(i,o,a,c){const d=$t(),p=es(2);d.firstUpdatePass&&dv(d,null,p,c);const _=Ae();if(a!==Lt&&jr(_,p,a)){const E=d.data[nr()];if(hv(E,c)&&!mc(d,p)){let b=c?E.classesWithoutHost:E.stylesWithoutHost;null!==b&&(a=he(b,a||"")),Y_(d,E,_,a,c)}else!function fD(i,o,a,c,d,p,_,E){d===Lt&&(d=xt);let b=0,T=0,R=0<d.length?d[0]:null,P=0<p.length?p[0]:null;for(;null!==R||null!==P;){const G=b<d.length?d[b+1]:void 0,ee=T<p.length?p[T+1]:void 0;let Pe,ye=null;R===P?(b+=2,T+=2,G!==ee&&(ye=P,Pe=ee)):null===P||null!==R&&R<P?(b+=2,ye=R):(T+=2,ye=P,Pe=ee),null!==ye&&BE(i,o,a,c,ye,Pe,_,E),R=b<d.length?d[b]:null,P=T<p.length?p[T]:null}}(d,E,_,_[11],_[p+1],_[p+1]=function UE(i,o,a){if(null==a||""===a)return xt;const c=[],d=Bi(a);if(Array.isArray(d))for(let p=0;p<d.length;p++)i(c,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&i(c,p,d[p]);else"string"==typeof d&&o(c,d);return c}(i,o,a),c,p)}}(We,os,Nl(Ae(),i,o,a),!0)}const je=void 0;var mv=["en",[["a","p"],["AM","PM"],je],[["AM","PM"],je,je],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],je,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],je,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",je,"{1} 'at' {0}",je],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zm(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let qs={};function ph(i){const o=function _v(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=yv(o);if(a)return a;const c=o.split("-")[0];if(a=yv(c),a)return a;if("en"===c)return mv;throw new we(701,!1)}function gh(i){return ph(i)[ot.PluralCase]}function yv(i){return i in qs||(qs[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),qs[i]}var ot=(()=>((ot=ot||{})[ot.LocaleId=0]="LocaleId",ot[ot.DayPeriodsFormat=1]="DayPeriodsFormat",ot[ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",ot[ot.DaysFormat=3]="DaysFormat",ot[ot.DaysStandalone=4]="DaysStandalone",ot[ot.MonthsFormat=5]="MonthsFormat",ot[ot.MonthsStandalone=6]="MonthsStandalone",ot[ot.Eras=7]="Eras",ot[ot.FirstDayOfWeek=8]="FirstDayOfWeek",ot[ot.WeekendRange=9]="WeekendRange",ot[ot.DateFormat=10]="DateFormat",ot[ot.TimeFormat=11]="TimeFormat",ot[ot.DateTimeFormat=12]="DateTimeFormat",ot[ot.NumberSymbols=13]="NumberSymbols",ot[ot.NumberFormats=14]="NumberFormats",ot[ot.CurrencyCode=15]="CurrencyCode",ot[ot.CurrencySymbol=16]="CurrencySymbol",ot[ot.CurrencyName=17]="CurrencyName",ot[ot.Currencies=18]="Currencies",ot[ot.Directionality=19]="Directionality",ot[ot.PluralCase=20]="PluralCase",ot[ot.ExtraData=21]="ExtraData",ot))();const as="en-US";let mh=as;function ey(i,o,a,c,d){if(i=K(i),Array.isArray(i))for(let p=0;p<i.length;p++)ey(i[p],o,a,c,d);else{const p=$t(),_=Ae();let E=Ii(i)?i:K(i.provide),b=Dl(i);const T=An(),R=1048575&T.providerIndexes,P=T.directiveStart,G=T.providerIndexes>>20;if(Ii(i)||!i.multi){const ee=new As(b,d,xl),ye=op(E,o,d?R:R+G,P);-1===ye?(xs(uo(T,_),p,E),sp(p,i,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(ee),_.push(ee)):(a[ye]=ee,_[ye]=ee)}else{const ee=op(E,o,R+G,P),ye=op(E,o,R,R+G),Pe=ee>=0&&a[ee],He=ye>=0&&a[ye];if(d&&!He||!d&&!Pe){xs(uo(T,_),p,E);const Je=function ap(i,o,a,c,d){const p=new As(i,a,xl);return p.multi=[],p.index=o,p.componentProviders=0,ty(p,d,c&&!a),p}(d?Ti:vh,a.length,d,c,b);!d&&He&&(a[ye].providerFactory=Je),sp(p,i,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Je),_.push(Je)}else sp(p,i,ee>-1?ee:ye,ty(a[d?ye:ee],b,!d&&c));!d&&c&&He&&a[ye].componentProviders++}}}function sp(i,o,a,c){const d=Ii(o),p=function Mg(i){return!!i.useClass}(o);if(d||p){const b=(p?K(o.useClass):o).prototype.ngOnDestroy;if(b){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const R=T.indexOf(a);-1===R?T.push(a,[c,b]):T[R+1].push(c,b)}else T.push(a,b)}}}function ty(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function op(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function vh(i,o,a,c){return wh(this.multi,[])}function Ti(i,o,a,c){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=ts(a,a[1],this.providerFactory.index,c);p=E.slice(0,_),wh(d,p);for(let b=_;b<E.length;b++)p.push(E[b])}else p=[],wh(d,p);return p}function wh(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function Nv(i,o=[]){return a=>{a.providersResolver=(c,d)=>function _h(i,o,a){const c=$t();if(c.firstCreatePass){const d=Cr(i);ey(a,c.data,c.blueprint,d,!0),ey(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class Dc{}class ny{}function uI(i,o){return new cI(i,o??null)}class cI extends Dc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Em(this);const c=hn(o);this._bootstrapComponents=Ka(c.bootstrap),this._r3Injector=V0(o,a,[{provide:Dc,useValue:this},{provide:za,useValue:this.componentFactoryResolver}],de(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class ry extends ny{constructor(o){super(),this.moduleType=o}create(o){return new cI(this.moduleType,o)}}class lI extends Dc{constructor(o,a,c){super(),this.componentFactoryResolver=new Em(this),this.instance=null;const d=new Ld([...o,{provide:Dc,useValue:this},{provide:za,useValue:this.componentFactoryResolver}],a||Fd(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function iy(i,o,a=null){return new lI(i,o,a).injector}let sy=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=kd(0,a.type),d=c.length>0?iy([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Qt({token:i,providedIn:"environment",factory:()=>new i(Zt(Tr))}),i})();function dI(i){i.getStandaloneInjector=o=>o.get(sy).getOrCreateStandaloneInjector(i)}function mI(i,o,a,c){return fr(Ae(),xn(),i,o,a,c)}function Uv(i,o,a,c,d){return function en(i,o,a,c,d,p,_){const E=o+a;return dc(i,E,d,p)?js(i,E+2,_?c.call(_,d,p):c(d,p)):cp(i,E+2)}(Ae(),xn(),i,o,a,c,d)}function cp(i,o){const a=i[o];return a===Lt?void 0:a}function fr(i,o,a,c,d,p){const _=o+a;return jr(i,_,d)?js(i,_+1,p?c.call(p,d):c(d)):cp(i,_+1)}function wI(i,o){const a=$t();let c;const d=i+22;a.firstCreatePass?(c=function $i(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const p=c.factory||(c.factory=Ri(c.type)),_=Qn(xl);try{const E=Sa(!1),b=p();return Sa(E),function IE(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,Ae(),d,b),b}finally{Qn(_)}}function Ch(i,o,a){const c=i+22,d=Ae(),p=Ji(d,c);return function dp(i,o){return i[1].data[o].pure}(d,c)?fr(d,xn(),o,p.transform,a,p):p.transform(a)}function Bt(i){return o=>{setTimeout(i,void 0,o)}}const ca=class BD extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,p=a||(()=>null),_=c;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),p=b.error?.bind(b),_=b.complete?.bind(b)}this.__isAsync&&(p=Bt(p),d&&(d=Bt(d)),_&&(_=Bt(_)));const E=super.subscribe({next:d,error:p,complete:_});return o instanceof X.w0&&o.add(E),E}};function ay(){return this._results[Xa()]()}class Gl{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Xa(),c=Gl.prototype;c[a]||(c[a]=ay)}get changes(){return this._changes||(this._changes=new ca)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=En(o);(this._changesDetected=!function _r(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=o[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let cu=(()=>{class i{}return i.__NG_ELEMENT_ID__=CI,i})();const uy=cu,bI=class extends uy{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,d=Qd(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(c)),am(c,d,o),new Ja(d)}};function CI(){return hp(An(),Ae())}function hp(i,o){return 4&i.type?new bI(o,i,y(i,o)):null}let cy=(()=>{class i{}return i.__NG_ELEMENT_ID__=DI,i})();function DI(){return Dh(An(),Ae())}const TI=cy,SI=class extends TI{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new lo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Gu(this._hostTNode,this._hostLView);if(_d(o)){const a=Ta(o,this._hostLView),c=lr(o);return new lo(a[1].data[c+8],a)}return new lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=AI(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const _=o.createEmbeddedView(a||{},p);return this.insert(_,d),_}createComponent(o,a,c,d,p){const _=o&&!function vi(i){return"function"==typeof i}(o);let E;if(_)E=a;else{const P=a||{};E=P.index,c=P.injector,d=P.projectableNodes,p=P.environmentInjector||P.ngModuleRef}const b=_?o:new Bf(Q(o)),T=c||this.parentInjector;if(!p&&null==b.ngModule){const G=(_?T:this.parentInjector).get(Tr,null);G&&(p=G)}const R=b.create(T,d,void 0,p);return this.insert(R.hostView,E),R}insert(o,a){const c=o._lView,d=c[1];if(function Cu(i){return Or(i[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const P=c[3],G=new SI(P,P[6],P[3]);G.detach(G.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function TC(i,o,a,c){const d=10+c,p=a.length;c>0&&(a[d-1][4]=o),c<p-10?(o[4]=a[d],ka(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function SC(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=64}(d,c,_,p);const E=A0(p,_),b=c[11],T=zg(b,_[7]);return null!==T&&function v0(i,o,a,c,d,p){c[0]=d,c[6]=o,Sl(i,c,a,1,d,p)}(d,_[6],b,c,T,E),o.attachToViewContainerRef(),ka($v(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=AI(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=p_(this._lContainer,a);c&&(Pn($v(this._lContainer),a),Cf(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=p_(this._lContainer,a);return c&&null!=Pn($v(this._lContainer),a)?new Ja(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function AI(i){return i[8]}function $v(i){return i[8]||(i[8]=[])}function Dh(i,o){let a;const c=o[i.index];if(Or(c))a=c;else{let d;if(8&i.type)d=Sn(c);else{const p=o[11];d=p.createComment("");const _=Pr(i,o);Xo(p,zg(p,_),d,function T0(i,o){return i.nextSibling(o)}(p,_),!1)}o[i.index]=a=mm(c,o,d,i),Pf(o,a)}return new SI(a,i,o)}class fp{constructor(o){this.queryList=o,this.matches=null}clone(){return new fp(this.queryList)}setDirty(){this.queryList.setDirty()}}class ly{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new ly(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Wv(o,a).matches&&this.queries[a].setDirty()}}class Th{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class Ws{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new Ws(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class pp{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new pp(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,a,MI(a,p)),this.matchTNodeWithReadOption(o,a,Lo(a,o,p,!1,!1))}else c===cu?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Lo(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===h||d===cy||d===cu&&4&a.type)this.addMatch(a.index,-2);else{const p=Lo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function MI(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function RI(i,o,a,c){return-1===a?function gp(i,o){return 11&i.type?y(i,o):4&i.type?hp(i,o):null}(o,i):-2===a?function NI(i,o,a){return a===h?y(o,i):a===cu?hp(o,i):a===cy?Dh(o,i):void 0}(i,o,c):ts(i,i[1],a,o)}function Gv(i,o,a,c){const d=o[19].queries[c];if(null===d.matches){const p=i.data,_=a.matches,E=[];for(let b=0;b<_.length;b+=2){const T=_[b];E.push(T<0?null:RI(o,p[T],_[b+1],a.metadata.read))}d.matches=E}return d.matches}function zv(i,o,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const _=Gv(i,o,d,a);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)c.push(_[E/2]);else{const T=p[E+1],R=o[-b];for(let P=10;P<R.length;P++){const G=R[P];G[17]===G[3]&&zv(G[1],G,T,c)}if(null!==R[9]){const P=R[9];for(let G=0;G<P.length;G++){const ee=P[G];zv(ee[1],ee,T,c)}}}}}return c}function kI(i){const o=Ae(),a=$t(),c=el();ba(c+1);const d=Wv(a,c);if(i.dirty&&function bu(i){return 4==(4&i[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?zv(a,o,c,[]):Gv(a,o,d,c);i.reset(p,g),i.notifyOnChanges()}return!0}return!1}function dy(i,o,a,c){const d=$t();if(d.firstCreatePass){const p=An();(function qv(i,o,a){null===i.queries&&(i.queries=new Ws),i.queries.track(new pp(o,a))})(d,new Th(o,a,c),p.index),function HD(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function hy(i,o,a){const c=new Gl(4==(4&a));lm(i,o,c,c.destroy),null===o[19]&&(o[19]=new ly),o[19].queries.push(new fp(c))}(d,Ae(),a)}function OI(){return function PI(i,o){return i[19].queries[o].queryList}(Ae(),el())}function Wv(i,o){return i.queries.getByIndex(o)}function FI(i,o){return hp(i,o)}function vp(...i){}const ZI=new pn("Application Initializer");let _y=(()=>{class i{constructor(a){this.appInits=a,this.resolve=vp,this.reject=vp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Mm(p))a.push(p);else if(Q_(p)){const _=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Zt(ZI,8))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Rh=new pn("AppId",{providedIn:"root",factory:function Mc(){return`${vy()}${vy()}${vy()}`}});function vy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const YI=new pn("Platform Initializer"),nT=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wy=new pn("appBootstrapListener");let QI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const zl=new pn("LocaleId",{providedIn:"root",factory:()=>C(zl,Ze.Optional|Ze.SkipSelf)||function wp(){return typeof $localize<"u"&&$localize.locale||as}()}),Ep=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class JI{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Ey=(()=>{class i{compileModuleSync(a){return new ry(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Ka(hn(a).declarations).reduce((_,E)=>{const b=Q(E);return b&&_.push(new Bf(b)),_},[]);return new JI(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Oh=(()=>Promise.resolve(0))();function by(i){typeof Zone>"u"?Oh.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ds{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ca(!1),this.onMicrotaskEmpty=new ca(!1),this.onStable=new ca(!1),this.onError=new ca(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Nc(){let i=tn.requestAnimationFrame,o=tn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function uT(i){const o=()=>{!function aT(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ph(i),i.isCheckStableRunning=!0,ow(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ph(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,_,E)=>{try{return aw(i),a.invokeTask(d,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),XI(i)}},onInvoke:(a,c,d,p,_,E,b)=>{try{return aw(i),a.invoke(d,p,_,E,b)}finally{i.shouldCoalesceRunChangeDetection&&o(),XI(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Ph(i),ow(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ds.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(ds.isInAngularZone())throw new we(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,oT,vp,vp);try{return p.runTask(_,a,c)}finally{p.cancelTask(_)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const oT={};function ow(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ph(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function aw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function XI(i){i._nesting--,ow(i)}class eb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ca,this.onMicrotaskEmpty=new ca,this.onStable=new ca,this.onError=new ca}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const tb=new pn(""),uw=new pn("");let Cy,Wl=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Cy||(function nb(i){Cy=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ds.assertNotInAngularZone(),by(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())by(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Zt(ds),Zt(Fh),Zt(uw))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac}),i})(),Fh=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Cy?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),kc=null;const cw=new pn("AllowMultipleToken"),lw=new pn("PlatformDestroyListeners");class lT{constructor(o,a){this.name=o,this.token=a}}function Ip(i,o,a=[]){const c=`Platform: ${o}`,d=new pn(c);return(p=[])=>{let _=bp();if(!_||_.injector.get(cw,!1)){const E=[...a,...p,{provide:d,useValue:!0}];i?i(E):function dT(i){if(kc&&!kc.get(cw,!1))throw new we(400,!1);kc=i;const o=i.get(Lh);(function hw(i){const o=i.get(YI,null);o&&o.forEach(a=>a())})(i)}(function fw(i=[],o){return oc.create({name:o,providers:[{provide:tc,useValue:"platform"},{provide:lw,useValue:new Set([()=>kc=null])},...i]})}(E,c))}return function fT(i){const o=bp();if(!o)throw new we(401,!1);return o}()}}function bp(){return kc?.get(Lh)??null}let Lh=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function Dy(i,o){let a;return a="noop"===i?new eb:("zone.js"===i?void 0:i)||new ds(o),a}(c?.ngZone,function Cp(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:ds,useValue:d}];return d.run(()=>{const _=oc.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(_),b=E.injector.get(Ef,null);if(!b)throw new we(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:R=>{b.handleError(R)}});E.onDestroy(()=>{Dp(this._modules,E),T.unsubscribe()})}),function Ty(i,o,a){try{const c=a();return Mm(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(b,d,()=>{const T=E.injector.get(_y);return T.runInitializers(),T.donePromise.then(()=>(function iu(i){Ht(i,"Expected localeId to be defined"),"string"==typeof i&&(mh=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(zl,as)||as),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const d=pw({},c);return function dw(i,o,a){const c=new ry(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(Sy);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(lw,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Zt(oc))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function pw(i,o){return Array.isArray(o)?o.reduce(pw,i):{...i,...o}}let Sy=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new k.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),_=new k.y(E=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{ds.assertNotInAngularZone(),by(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{b.unsubscribe(),T.unsubscribe()}});this.isStable=(0,se.T)(p,_.pipe((0,oe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Vd;if(!this._injector.get(_y).done)throw!d&&Kt(a),new we(405,false);let _;_=d?a:this._injector.get(za).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const E=function cT(i){return i.isBoundToModule}(_)?void 0:this._injector.get(Dc),T=_.create(oc.NULL,[],c||_.selector,E),R=T.location.nativeElement,P=T.injector.get(tb,null);return P?.registerApplication(R),T.onDestroy(()=>{this.detachView(T.hostView),Dp(this.components,T),P?.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Dp(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(wy,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Dp(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Zt(ds),Zt(Tr),Zt(Ef))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Dp(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let ib=!0,yw=!1;function pT(){return yw=!0,ib}function sb(){if(yw)throw new Error("Cannot enable prod mode after platform setup.");ib=!1}let _w=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ay,i})();function Ay(i){return function ob(i,o,a){if(ga(i)&&!a){const c=qt(i.index,o);return new Ja(c,c)}return 47&i.type?new Ja(o[16],o):null}(An(),Ae(),16==(16&i))}class kp{constructor(){}supports(o){return Rl(o)}create(o){return new bw(o)}}const Op=(i,o)=>o;class bw{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Op}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const _=!c||a&&a.currentIndex<db(c,d,p)?a:c,E=db(_,d,p),b=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const T=E-d,R=b-d;if(T!=R){for(let G=0;G<T;G++){const ee=G<p.length?p[G]:p[G]=0,ye=ee+G;R<=ye&&ye<T&&(p[G]=ee+1)}p[_.previousIndex]=R-T}}E!==b&&o(_,E,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Rl(o))throw new we(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),c=!0),a=a._next}else d=0,function Hf(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Xa()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new cb(a,c),p,d),o}_verifyReinsertion(o,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new lb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class cb{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _T{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class lb{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new _T,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function db(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class hb{constructor(){}supports(o){return o instanceof Map||Am(o)}create(){return new Cw}}class Cw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Am(o)))throw new we(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const c=new vT(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class vT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fb(){return new Zl([new kp])}let Zl=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||fb()),deps:[[i,new bt,new Ne]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:fb}),i})();function Yl(){return new Pp([new hb])}let Pp=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Yl()),deps:[[i,new bt,new Ne]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:Yl}),i})();const Dw=Ip(null,"core",[]);let Tw=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Zt(Sy))},i.\u0275mod=Pt({type:i}),i.\u0275inj=kt({}),i})();function hu(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ct,De,O)=>{O.d(De,{Z:()=>we});var f=O(2090),X=O(4859),k=O(9681),se=O(1877);class oe{constructor(ge,fe){this._delegate=ge,this.firebase=fe,(0,k._addComponent)(ge,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ge,fe=k._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const at=this._delegate.container.getProvider(ge);return!at.isInitialized()&&"EXPLICIT"===(null===(Xe=at.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&at.initialize(),at.getImmediate({identifier:fe})}_removeServiceInstance(ge,fe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(fe)}_addComponent(ge){(0,k._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,k._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function he(){const rt=function de(rt){const ge={},fe={__esModule:!0,initializeApp:function xe($e,U={}){const pe=k.initializeApp($e,U);if((0,f.r3)(ge,pe.name))return ge[pe.name];const q=new rt(pe,fe);return ge[pe.name]=q,q},app:at,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ie($e){const U=$e.name,pe=U.replace("-compat","");if(k._registerComponent($e)&&"PUBLIC"===$e.type){const q=(J=at())=>{if("function"!=typeof J[pe])throw ce.create("invalid-app-argument",{appName:U});return J[pe]()};void 0!==$e.serviceProps&&(0,f.ZB)(q,$e.serviceProps),fe[pe]=q,rt.prototype[pe]=function(...J){return this._getService.bind(this,U).apply(this,$e.multipleInstances?J:[])}}return"PUBLIC"===$e.type?fe[pe]:null},removeApp:function Xe($e){delete ge[$e]},useAsService:function Be($e,U){return"serverAuth"===U?null:U},modularAPIs:k}};function at($e){if(!(0,f.r3)(ge,$e=$e||k._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:$e});return ge[$e]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function _e(){return Object.keys(ge).map($e=>ge[$e])}}),at.App=rt,fe}(oe);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ge(fe){(0,f.ZB)(rt,fe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),rt}(),$=new se.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=B;!function Me(rt){(0,k.registerVersion)("@firebase/app-compat","0.1.38",rt)}()},9681:(ct,De,O)=>{O.r(De),O.d(De,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Zs,_DEFAULT_ENTRY_NAME:()=>Ht,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Qt,_apps:()=>on,_clearComponents:()=>Wi,_components:()=>_n,_getProvider:()=>kt,_registerComponent:()=>Rr,_removeServiceInstance:()=>dn,deleteApp:()=>ha,getApp:()=>ni,getApps:()=>ri,initializeApp:()=>gi,onLog:()=>_s,registerVersion:()=>br,setLogLevel:()=>Qn});var f=O(5861),X=O(4859),k=O(1877),se=O(2090),oe=O(8766);class le{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function ce(tt){return"VERSION"===tt.getComponent()?.type}(et)){const Ct=et.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(et=>et).join(" ")}}const de="@firebase/app",B=new k.Yd("@firebase/app"),Ht="[DEFAULT]",Ke={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,_n=new Map;function Wt(tt,Se){try{tt.container.addComponent(Se)}catch(et){B.debug(`Component ${Se.name} failed to register with FirebaseApp ${tt.name}`,et)}}function Qt(tt,Se){tt.container.addOrOverwriteComponent(Se)}function Rr(tt){const Se=tt.name;if(_n.has(Se))return B.debug(`There were multiple attempts to register component ${Se}.`),!1;_n.set(Se,tt);for(const et of on.values())Wt(et,tt);return!0}function kt(tt,Se){const et=tt.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),tt.container.getProvider(Se)}function dn(tt,Se,et=Ht){kt(tt,Se).clearInstance(et)}function Wi(){_n.clear()}const Nr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $r{constructor(Se,et,Ct){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}const Zs="9.13.0";function gi(tt,Se={}){let et=tt;"object"!=typeof Se&&(Se={name:Se});const Ct=Object.assign({name:Ht,automaticDataCollectionEnabled:!1},Se),It=Ct.name;if("string"!=typeof It||!It)throw Nr.create("bad-app-name",{appName:String(It)});if(et||(et=(0,se.aH)()),!et)throw Nr.create("no-options");const Pt=on.get(It);if(Pt){if((0,se.vZ)(et,Pt.options)&&(0,se.vZ)(Ct,Pt.config))return Pt;throw Nr.create("duplicate-app",{appName:It})}const j=new X.H0(It);for(const W of _n.values())j.addComponent(W);const V=new $r(et,Ct,j);return on.set(It,V),V}function ni(tt=Ht){const Se=on.get(tt);if(!Se&&tt===Ht)return gi();if(!Se)throw Nr.create("no-app",{appName:tt});return Se}function ri(){return Array.from(on.values())}function ha(tt){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,f.Z)(function*(tt){const Se=tt.name;on.has(Se)&&(on.delete(Se),yield Promise.all(tt.container.getProviders().map(et=>et.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function br(tt,Se,et){var Ct;let It=null!==(Ct=Ke[tt])&&void 0!==Ct?Ct:tt;et&&(It+=`-${et}`);const Pt=It.match(/\s|\//),j=Se.match(/\s|\//);if(Pt||j){const V=[`Unable to register library "${It}" with version "${Se}":`];return Pt&&V.push(`library name "${It}" contains illegal characters (whitespace or "/")`),Pt&&j&&V.push("and"),j&&V.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void B.warn(V.join(" "))}Rr(new X.wA(`${It}-version`,()=>({library:It,version:Se}),"VERSION"))}function _s(tt,Se){if(null!==tt&&"function"!=typeof tt)throw Nr.create("invalid-log-argument");(0,k.Am)(tt,Se)}function Qn(tt){(0,k.Ub)(tt)}const kn="firebase-heartbeat-store";let Un=null;function fn(){return Un||(Un=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(tt,Se)=>{0===Se&&tt.createObjectStore(kn)}}).catch(tt=>{throw Nr.create("idb-open",{originalErrorMessage:tt.message})})),Un}function lt(){return(lt=(0,f.Z)(function*(tt){var Se;try{return(yield fn()).transaction(kn).objectStore(kn).get(Bn(tt))}catch(et){if(et instanceof se.ZR)B.warn(et.message);else{const Ct=Nr.create("idb-get",{originalErrorMessage:null===(Se=et)||void 0===Se?void 0:Se.message});B.warn(Ct.message)}}})).apply(this,arguments)}function tn(tt,Se){return gr.apply(this,arguments)}function gr(){return(gr=(0,f.Z)(function*(tt,Se){var et;try{const It=(yield fn()).transaction(kn,"readwrite");return yield It.objectStore(kn).put(Se,Bn(tt)),It.done}catch(Ct){if(Ct instanceof se.ZR)B.warn(Ct.message);else{const It=Nr.create("idb-set",{originalErrorMessage:null===(et=Ct)||void 0===et?void 0:et.message});B.warn(It.message)}}})).apply(this,arguments)}function Bn(tt){return`${tt.name}!${tt.options.appId}`}class vs{constructor(Se){this.container=Se,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new rn(et),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var Se=this;return(0,f.Z)(function*(){const Ct=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=nn();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==It&&!Se._heartbeatsCache.heartbeats.some(Pt=>Pt.date===It))return Se._heartbeatsCache.heartbeats.push({date:It,agent:Ct}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(Pt=>{const j=new Date(Pt.date).valueOf();return Date.now()-j<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,f.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const et=nn(),{heartbeatsToSend:Ct,unsentEntries:It}=function xi(tt,Se=1024){const et=[];let Ct=tt.slice();for(const It of tt){const Pt=et.find(j=>j.agent===It.agent);if(Pt){if(Pt.dates.push(It.date),Jn(et)>Se){Pt.dates.pop();break}}else if(et.push({agent:It.agent,dates:[It.date]}),Jn(et)>Se){et.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:et,unsentEntries:Ct}}(Se._heartbeatsCache.heartbeats),Pt=(0,se.L)(JSON.stringify({version:2,heartbeats:Ct}));return Se._heartbeatsCache.lastSentHeartbeatDate=et,It.length>0?(Se._heartbeatsCache.heartbeats=It,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),Pt})()}}function nn(){return(new Date).toISOString().substring(0,10)}class rn{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,f.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function _t(tt){return lt.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var et=this;return(0,f.Z)(function*(){var Ct;if(yield et._canUseIndexedDBPromise){const Pt=yield et.read();return tn(et.app,{lastSentHeartbeatDate:null!==(Ct=Se.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Pt.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var et=this;return(0,f.Z)(function*(){var Ct;if(yield et._canUseIndexedDBPromise){const Pt=yield et.read();return tn(et.app,{lastSentHeartbeatDate:null!==(Ct=Se.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Pt.lastSentHeartbeatDate,heartbeats:[...Pt.heartbeats,...Se.heartbeats]})}})()}}function Jn(tt){return(0,se.L)(JSON.stringify({version:2,heartbeats:tt})).length}!function kr(tt){Rr(new X.wA("platform-logger",Se=>new le(Se),"PRIVATE")),Rr(new X.wA("heartbeat",Se=>new vs(Se),"PRIVATE")),br(de,"0.8.3",tt),br(de,"0.8.3","esm2017"),br("fire-js","")}("")},4859:(ct,De,O)=>{O.d(De,{H0:()=>de,wA:()=>k});var f=O(5861),X=O(2090);class k{constructor(B,$,K){this.name=B,this.instanceFactory=$,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const se="[DEFAULT]";class oe{constructor(B,$){this.name=B,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const $=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has($)){const K=new X.BH;if(this.instancesDeferred.set($,K),this.isInitialized($)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:$});Le&&K.resolve(Le)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(B){var $;const K=this.normalizeInstanceIdentifier(B?.identifier),Le=null!==($=B?.optional)&&void 0!==$&&$;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Me){if(Le)return null;throw Me}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ce(he){return"EAGER"===he.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[$,K]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier($);try{const Me=this.getOrInitializeService({instanceIdentifier:Le});K.resolve(Me)}catch{}}}}clearInstance(B=se){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,f.Z)(function*(){const $=Array.from(B.instances.values());yield Promise.all([...$.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...$.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=se){return this.instances.has(B)}getOptions(B=se){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:$={}}=B,K=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:K,options:$});for(const[Me,we]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Me)&&we.resolve(Le);return Le}onInit(B,$){var K;const Le=this.normalizeInstanceIdentifier($),Me=null!==(K=this.onInitCallbacks.get(Le))&&void 0!==K?K:new Set;Me.add(B),this.onInitCallbacks.set(Le,Me);const we=this.instances.get(Le);return we&&B(we,Le),()=>{Me.delete(B)}}invokeOnInitCallbacks(B,$){const K=this.onInitCallbacks.get($);if(K)for(const Le of K)try{Le(B,$)}catch{}}getOrInitializeService({instanceIdentifier:B,options:$={}}){let K=this.instances.get(B);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(he=B,he===se?void 0:he),options:$}),this.instances.set(B,K),this.instancesOptions.set(B,$),this.invokeOnInitCallbacks(K,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,K)}catch{}var he;return K||null}normalizeInstanceIdentifier(B=se){return this.component?this.component.multipleInstances?B:se:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const $=this.getProvider(B.name);if($.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);$.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const $=new oe(B,this);return this.providers.set(B,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ct,De,O)=>{O.d(De,{Am:()=>he,Ub:()=>de,Yd:()=>ce,in:()=>X});const f=[];var X=(()=>{return(B=X||(X={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",X;var B})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},se=X.INFO,oe={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},le=(B,$,...K)=>{if($<B.logLevel)return;const Le=(new Date).toISOString(),Me=oe[$];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Me](`[${Le}]  ${B.name}:`,...K)};class ce{constructor($){this.name=$,this._logLevel=se,this._logHandler=le,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in X))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?k[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...$),this._logHandler(this,X.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...$),this._logHandler(this,X.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,X.INFO,...$),this._logHandler(this,X.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,X.WARN,...$),this._logHandler(this,X.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...$),this._logHandler(this,X.ERROR,...$)}}function de(B){f.forEach($=>{$.setLogLevel(B)})}function he(B,$){for(const K of f){let Le=null;$&&$.level&&(Le=k[$.level]),K.userLogHandler=null===B?null:(Me,we,...rt)=>{const ge=rt.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Le??Me.logLevel)&&B({level:X[we].toLowerCase(),message:ge,args:rt,type:Me.name})}}}},8766:(ct,De,O)=>{O.d(De,{Lj:()=>xe,X3:()=>at});var f=O(5861);let k,se;const ce=new WeakMap,de=new WeakMap,he=new WeakMap,B=new WeakMap,$=new WeakMap;let Me={get(U,pe,q){if(U instanceof IDBTransaction){if("done"===pe)return de.get(U);if("objectStoreNames"===pe)return U.objectStoreNames||he.get(U);if("store"===pe)return q.objectStoreNames[1]?void 0:q.objectStore(q.objectStoreNames[0])}return fe(U[pe])},set:(U,pe,q)=>(U[pe]=q,!0),has:(U,pe)=>U instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in U};function ge(U){return"function"==typeof U?function rt(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...pe){return U.apply(Xe(this),pe),fe(ce.get(this))}:function(...pe){return fe(U.apply(Xe(this),pe))}:function(pe,...q){const J=U.call(Xe(this),pe,...q);return he.set(J,pe.sort?pe.sort():[pe]),fe(J)}}(U):(U instanceof IDBTransaction&&function Le(U){if(de.has(U))return;const pe=new Promise((q,J)=>{const ie=()=>{U.removeEventListener("complete",ne),U.removeEventListener("error",Fe),U.removeEventListener("abort",Fe)},ne=()=>{q(),ie()},Fe=()=>{J(U.error||new DOMException("AbortError","AbortError")),ie()};U.addEventListener("complete",ne),U.addEventListener("error",Fe),U.addEventListener("abort",Fe)});de.set(U,pe)}(U),((U,pe)=>pe.some(q=>U instanceof q))(U,function oe(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Me):U)}function fe(U){if(U instanceof IDBRequest)return function K(U){const pe=new Promise((q,J)=>{const ie=()=>{U.removeEventListener("success",ne),U.removeEventListener("error",Fe)},ne=()=>{q(fe(U.result)),ie()},Fe=()=>{J(U.error),ie()};U.addEventListener("success",ne),U.addEventListener("error",Fe)});return pe.then(q=>{q instanceof IDBCursor&&ce.set(q,U)}).catch(()=>{}),$.set(pe,U),pe}(U);if(B.has(U))return B.get(U);const pe=ge(U);return pe!==U&&(B.set(U,pe),$.set(pe,U)),pe}const Xe=U=>$.get(U);function at(U,pe,{blocked:q,upgrade:J,blocking:ie,terminated:ne}={}){const Fe=indexedDB.open(U,pe),Oe=fe(Fe);return J&&Fe.addEventListener("upgradeneeded",mt=>{J(fe(Fe.result),mt.oldVersion,mt.newVersion,fe(Fe.transaction))}),q&&Fe.addEventListener("blocked",()=>q()),Oe.then(mt=>{ne&&mt.addEventListener("close",()=>ne()),ie&&mt.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Oe}function xe(U,{blocked:pe}={}){const q=indexedDB.deleteDatabase(U);return pe&&q.addEventListener("blocked",()=>pe()),fe(q).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Be=new Map;function $e(U,pe){if(!(U instanceof IDBDatabase)||pe in U||"string"!=typeof pe)return;if(Be.get(pe))return Be.get(pe);const q=pe.replace(/FromIndex$/,""),J=pe!==q,ie=Ie.includes(q);if(!(q in(J?IDBIndex:IDBObjectStore).prototype)||!ie&&!_e.includes(q))return;const ne=function(){var Fe=(0,f.Z)(function*(Oe,...mt){const Yt=this.transaction(Oe,ie?"readwrite":"readonly");let Ht=Yt.store;return J&&(Ht=Ht.index(mt.shift())),(yield Promise.all([Ht[q](...mt),ie&&Yt.done]))[0]});return function(mt){return Fe.apply(this,arguments)}}();return Be.set(pe,ne),ne}!function we(U){Me=U(Me)}(U=>({...U,get:(pe,q,J)=>$e(pe,q)||U.get(pe,q,J),has:(pe,q)=>!!$e(pe,q)||U.has(pe,q)}))},5861:(ct,De,O)=>{function f(k,se,oe,le,ce,de,he){try{var B=k[de](he),$=B.value}catch(K){return void oe(K)}B.done?se($):Promise.resolve($).then(le,ce)}function X(k){return function(){var se=this,oe=arguments;return new Promise(function(le,ce){var de=k.apply(se,oe);function he($){f(de,le,ce,he,B,"next",$)}function B($){f(de,le,ce,he,B,"throw",$)}he(void 0)})}}O.d(De,{Z:()=>X})}},ct=>{ct(ct.s=6803)}]);